!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="d93c47f3-f6f1-40e2-b034-ad2489401f83",e._sentryDebugIdIdentifier="sentry-dbid-d93c47f3-f6f1-40e2-b034-ad2489401f83")}catch(e){}}();var _global="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};_global.SENTRY_RELEASE={id:"393435108fd14f0c86df08ca1e707bbfb6164756"},(self.webpackChunkcoderpad=self.webpackChunkcoderpad||[]).push([[179],{82766:function(e,t,n){"use strict";n.d(t,{L:function(){return l}});var a=n(71439),i=n(46829),r=n(67294),o=n(15255);function l(e){return(0,r.useMemo)((()=>{const t=function(e){return a.gql`
    query Quota {
      user {
        id
        quotaOwner
        activeQuota {
          ... on Quota {
            id
            ${e}
          }
        }
      }
    }
  `}(e);return function(){const{data:e,error:n,loading:a,refetch:r}=(0,i.useQuery)(t,{context:{source:"useActiveQuota.ts"}}),l={quotaOwner:null===e||void 0===e?void 0:e.user.quotaOwner,...null===e||void 0===e?void 0:e.user.activeQuota};let s=o.nn();return s=a?o.V_():n?o.vU("An error occurred while fetching quota information"+(n.message?": "+n.message:"")):o.Vp(),{activeQuota:l,status:s,refetch:r}}}),[e])}},88656:function(e,t,n){"use strict";n.d(t,{se:function(){return s}});var a=n(71439),i=n(46829),r=n(67294),o=n(15255);const l="\n      id\n      name\n      slug\n      category\n      version\n      latest\n      settings\n";function s(e){const t=(n=l,(0,r.useMemo)((()=>{const e=function(e){return a.gql`
    query ProjectTemplates($padSlug: String, $category: ProjectTemplateCategory) {
      projectTemplates(padSlug: $padSlug, category: $category) {
        id
        ... on ProjectTemplate {
          ${null!==e&&void 0!==e?e:l}
        }
      }
    }
  `}(n);return function(t){const{data:n,error:a,loading:l}=(0,i.useQuery)(e,{variables:{...t}}),s=null===n||void 0===n?void 0:n.projectTemplates,c=(0,r.useMemo)((()=>l?o.V_():a?o.vU("An error occurred while fetching Project Templates"+(a.message?": "+a.message:"")):o.Vp()),[a,l]);return(0,r.useMemo)((()=>({projectTemplates:null!==s&&void 0!==s?s:[],status:c})),[s,c])}}),[n]))(e);var n;return t}},15255:function(e,t,n){"use strict";n.d(t,{TH:function(){return s},V_:function(){return l},Vp:function(){return o},eQ:function(){return c},nn:function(){return i},vU:function(){return r},wd:function(){return d}});let a=function(e){return e.Initial="INITIAL",e.Loading="LOADING",e.Success="SUCCESS",e.Error="ERROR",e}({});function i(){return[a.Initial,""]}function r(e="",t){return[a.Error,e,{originalError:t}]}function o(e=""){return[a.Success,e]}function l(e=""){return[a.Loading,e]}function s(e){return e&&e[0]===a.Loading}function c(e){return e&&e[0]===a.Error}function d(e){return e&&e[0]===a.Success}},40019:function(e,t,n){"use strict";n.d(t,{Bh:function(){return i},Kd:function(){return r},Mx:function(){return a},Y9:function(){return o},hx:function(){return s},r:function(){return l}});let a=function(e){return e.Interview="INTERVIEW",e.Screen="SCREEN",e}({}),i=function(e){return e.SortPrecedenceDescThenTitleAsc="sortPrecedenceDescThenTitleAsc",e.TitleAsc="titleAsc",e.TitleDesc="titleDesc",e}({}),r=function(e){return e.Coding="Coding",e.DrawingOnly="DrawingOnly",e}({}),o=function(e){return e.Enterprise="enterprise",e.Free="free",e.Ptb="ptb",e}({}),l=function(e){return e.Any="Any",e.Live="Live",e.TakeHome="TakeHome",e}({}),s=function(e){return e.CreatedAtAsc="createdAtAsc",e.CreatedAtDesc="createdAtDesc",e.LastUsedAtAsc="lastUsedAtAsc",e.LastUsedAtDesc="lastUsedAtDesc",e.TitleAsc="titleAsc",e.TitleDesc="titleDesc",e.UsedAsc="usedAsc",e.UsedDesc="usedDesc",e}({})},45223:function(e,t,n){"use strict";n.d(t,{Il:function(){return l},_1:function(){return o},nT:function(){return c},oB:function(){return s}});var a=n(67294),i=n(6538);const r=(0,a.createContext)({config:i.eE,getConfigValue:e=>i.eE[e],getConfig:()=>i.eE,isDrawingPad:!1}),o=({config:e,children:t})=>{const n=(0,a.useMemo)((()=>({config:e,getConfigValue:t=>e[t],getConfig:()=>e,isDrawingPad:"drawing_only"===e.uiType})),[e]);return a.createElement(r.Provider,{value:n},t)};function l(){const e=(0,a.useContext)(r);if(null==e)throw new Error("`usePadContext` hook must be a descendant of a `PadContextProvider`");return e}function s(e){const{getConfigValue:t}=l();return t(e)}function c(...e){const{config:t}=l();return e.reduce(((e,n)=>(e[n]=t[n],e)),{})}},6538:function(e,t,n){"use strict";n.d(t,{U_:function(){return r},eE:function(){return o},wI:function(){return i}});var a=n(40019);let i=function(e){return e.pending="pending",e.started="started",e.ended="ended",e.deleted="deleted",e.submitted_take_home="submitted_take_home",e.opened_take_home="opened_take_home",e}({}),r=function(e){return e.record_only="record-only",e.record_and_playback="record-and-playback",e.nothing="nothing",e}({});const o={darkColorScheme:!0,iioLayout:!1,isDemoPad:!1,isExpired:!1,isLoggedIn:!1,isOwner:!1,isPlayback:!1,isPublic:!1,isSandbox:!1,takeHomeTimeLimit:0,timedTakeHomesDisabled:!1,timedTakeHomesMaintenanceExtraMessage:"",drawingModeMaintenance:!1,takeHome:!1,browser:"",invisible:!1,slug:"",color:"blue",firebaseAuthorId:"",goldman:!1,username:"",padState:i.pending,padCreatedAt:0,padStartedAt:0,padOpenedAt:0,padEndedAt:0,uiType:a.Kd.Coding,isPadPrivate:!1,disablePadSettings:!1,hasEnvironments:!1,lang:"java",questionsEnabled:!0,questionsRestricted:!1,notesEnabled:!1,question:null,intellisenseDisabledByOrganization:!1,focusTimeSupported:!1,isScratchPad:!1,sandboxEnvironmentPreviewSlug:null,isQuestionDraftPreview:!1,requestClientEnabled:!1,padOrg:{id:void 0,customIntro:null,customIntroFirstTimeUserContentEnabled:!0,name:"",idpEnabled:!1,idpIssuer:""},databaseUrl:"",hasAiChat:!1,hasSpreadsheets:!1,aiChatEnabled:!1,playbackV3Variant:null,hasTranscriptions:!1,hasPlaybackTranscription:!1}},27694:function(e,t,n){"use strict";n.d(t,{cz:function(){return o}});var a=n(71439),i=n(17187);n(67294),n(15255);class r extends i.EventEmitter{refetchImmediately(){this.emit("refetch")}}const o=new r;a.gql`
  query SessionUser {
    user {
      id
      name
      email
      organizationOwner
    }
  }
`},16333:function(e,t,n){"use strict";n(92087),n(84633),n(57915),n(3533),n(7849),n(44415),n(87285),n(86227),n(88531);var a=n(18535),i=n.n(a),r=n(57631),o=n(4631),l=n.n(o),s=n(96486),c=n.n(s),d=n(22132);var u=n(19755),m=n.n(u);(0,n(96709).Z)(),function(){c().extend(l().defaults,{theme:"monokai",keymap:"sublime",matchBrackets:!0,lineNumbers:!0,lineWrapping:!0,autofocus:!0,styleActiveLine:!(0,d.tq)(),indentWithTabs:!1,extraKeys:{"Cmd-Enter":!1,"Ctrl-Enter":!1,Tab(e){if(e.somethingSelected())e.indentSelection("add");else{const t=e.getCursor(),n=e.getRange({line:t.line,ch:0},t),a=l().countColumn(n,null,e.getOption("tabSize")),i=e.getOption("indentUnit")-a%e.getOption("indentUnit");e.replaceSelection(Array(i+1).join(" "))}}}});const e=function(e,t){if(t.update){let n=!1;const a=t.text.map((function(t){let a=t.replace(/[\u00A0]/g," ");return a=a.replace(/[\t]/g,Array(e.getOption("indentUnit")+1).join(" ")),a!=t&&(n=!0),a}));if(n)return t.update(t.from,t.to,a)}};l().defineInitHook((t=>t.on("beforeChange",e)));const t=l().resolveMode;l().resolveMode=function(e){let n=t(e);return c().isEqual(n,{name:e})&&window.CoderPad.LANGUAGES[e]&&(n=t(window.CoderPad.LANGUAGES[e].mode)),n},window.CodeMirror=window.CodeMirror||l()}(),function(){const e=m().fn.tooltip.Constructor.DEFAULTS;e.viewport={selector:"body",padding:15},e.container="body",m()((function(){m()(".tooltip-target").tooltip(),m()("input.autoselect").click((function(){m()(this).select()}))})),m().support.cors=!0}(),(0,r.Z)(),i().start();n(56772),n(62320);var p=n(19755);const g=["gmail.com","yahoo.com","hotmail.com"],h=["gmail","yahoo","hotmail"],f=["ca","co","com","edu","io","it","net","org","pt","ru","tv"];var v=n(19755);v((function(){if(!window.CoderPad.sso_domains)return;const e=v("#email-domain-tooltip"),t=v("#user_name_input, #user_password_input, #trial-notice, .btn.btn-primary, .devise-links, #user_email_opt_in_input, .login-Disclaimer, .or-container, .log-in-button"),n=v(".btn.btn-primary");var a,i;a=v("#user_email"),i=c().extend({animation:!1,trigger:"manual",html:!0,placement:"top"},i),a.tooltip(i),a.on("keyup keydown change input blur",c().debounce((function(){p(this).mailcheck({domains:g,secondLevelDomains:h,topLevelDomains:f,suggested(e,t){const n=`Did you mean <b>${t.domain}</b>?`;p(e).attr("data-original-title",n).tooltip("show")},empty(e){p(e).attr("data-original-title","").tooltip("hide")}})}),750)),v("#user_email").on("keyup change input",(function(){let a;const i=v(this).val(),r=/@([\w.]+)$/.exec(i);r&&(a=window.CoderPad.sso_domains[r[1]])?(e.find("a").attr("href",a),n.prop("disabled",!0),e.fadeIn(),t.fadeOut()):(n.prop("disabled",!1),e.fadeOut(),t.fadeIn())}))}));var b=n(63371),y=n(94153),E=n(19755);const w=document.querySelector("#team-creation-form");w&&(0,b.MI)(w,((e,t)=>{(0,y.j)("Team created")}));const k=document.querySelector("#invite-creation");k&&(0,b.MI)(k,((e,t)=>{const n=E("#invite-emails").val().split("\n").length;(0,y.j)("Invite sent",{quantity:n})}));const S=new URLSearchParams(window.location.search).get("invite_token"),C=document.querySelector("#new_user");S&&C&&(0,b.MI)(C,((e,t)=>{(0,y.j)("Invite accepted",{})})),E("#join-invite").on("click",(()=>{(0,y.j)("Invite accepted",{})}));var x=n(19755);x(".payment-info-button-track").on("click",(function(){(0,y.j)("Checkout payment info modal viewed",{})})),x(".billing-info-button-track").on("click",(function(){(0,y.j)("Checkout billing info modal viewed",{})})),x("#upgrade-confirm-modal #cancel-upgrade").click((()=>x("#upgrade-confirm-modal").modal("hide")));var _=n(19755);_(".sign-in-track").click((e=>{const t=window.location.href,n=e.target.value?"standard_app":"google";(0,y.j)("Login click",{path_url:t,login_method:n})})),_(".sign-up-track").click((e=>{const t=window.location.href,n=e.target.value?"standard_app":"google";(0,y.j)("Signup click",{path_url:t,login_method:n})})),n(19755)("#select-plan-btn").click((()=>{(0,y.j)("Select Plan clicked",(()=>{window.location.href="/billing/plans"}))}));var T=n(76310),I=n(19755);if(I(".formtastic.question").length>0){let e;const t=I("#question_language");let n=CoderPad.LANGUAGES[t.val()];const a=T.g().tab_sizes[n.name],i=document.getElementById("question_contents");i&&(e=CodeMirror.fromTextArea(i,{theme:"one-light",mode:n.mode,indentUnit:a,tabSize:a,viewportMargin:1/0}));let r=t.val();const o=function(e){const n=t.val(),a=e&&e.database_allowed,i=document.querySelector("#question_custom_database_id"),r=document.querySelector('#question_custom_database_id option[value=""]');a?(r.text="",i.value=i.dataset.customDatabaseIdPersisted):(r.text="(Not available for this language)",i.value=""),c().each(document.querySelectorAll("#question_custom_database_id option"),(e=>{""!==e.value&&(e.disabled=!a||"mysql"===n&&"postgresql"===e.dataset.language||"postgresql"===n&&"mysql"===e.dataset.language,e.disabled&&e.selected&&(i.value=""))}))},l=function(e){const t=e&&"data"!==e.category,n=document.querySelector("#question_custom_file_ids"),a=document.querySelector('#question_custom_file_ids option[value=""]');t?(a.text="",n.value=n.dataset.customFileIdPersisted):(a.text="(Not available for this language)",n.value=""),c().each(document.querySelectorAll("#question_custom_file_ids option"),(e=>{""!==e.value&&(e.disabled=!t,e.disabled&&e.selected&&(n.value=""))}))};o(n),l(n),I("#question_language").change((function(){const a=t.val();if(n=CoderPad.LANGUAGES[a],e){const t=T.g().tab_sizes[n.name];e.setOption("mode",n.mode),e.setOption("indentUnit",t),e.setOption("tabSize",t),e.getValue()!==CoderPad.LANGUAGES[r].example&&e.getValue()||e.setValue(n.example)}o(n),l(n),r=a}));const s=document.getElementById("question_solution");s&&CodeMirror.fromTextArea(s,{mode:"gfm",theme:"one-light",lineNumbers:!1,lineWrapping:!0,styleActiveLine:!1,viewportMargin:1/0})}n(52418),n(20485);var P,Z,O=n(46829),M=n(93584),D=n(88065),L=n(4385),F=n(64487),A=n(36808),R=n.n(A),N=n(67294),j=n(73935),q=n(73727),B=n(73159),z=n(88940),$=n(25088),H=n(7442),U=n(67539),Q=n(151),V=n(67125),W=n(3648),G=n(57595),Y=n(13292),K=n(19071),J=n(17554),X=n(93169);const ee=(null===(P=document.querySelector("[name='csrf-token']"))||void 0===P||null===(Z=P.attributes.getNamedItem("content"))||void 0===Z?void 0:Z.value)||"",te=(0,H.g)(ee),ne={appNavOpen:!R().get("app_nav_state")},ae=({children:e})=>{const t=(0,z.Fg)(),n=(0,B.K)();return N.createElement(O.ApolloProvider,{client:n},N.createElement(U.c,{fetcher:te},N.createElement(q.VK,null,N.createElement(V.WE,{initialState:ne},N.createElement(D.Z,{injectFirst:!0},N.createElement(L.Z,{theme:t},e))))))},ie=({user:e,organization:t})=>{const{value:n}=(0,V.bc)("appNavOpen");return(0,N.useEffect)((()=>{var e,t;n?null===(e=document.getElementById("content-container"))||void 0===e||e.classList.remove("navClosed"):null===(t=document.getElementById("content-container"))||void 0===t||t.classList.add("navClosed")}),[n]),N.createElement(M.Z,{height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between"},N.createElement(J.S,{currentUser:e,organization:t,noRouter:!0}),N.createElement(K.U,{currentUser:e}))};!function(){var e;const t=null===(e=window.CP_GQL_HYDRATE)||void 0===e?void 0:e.data,n=document.getElementById("rails-react-header"),a=document.getElementById("sidebar"),i=document.getElementById("new-sidebar"),r=(0,$.ki)(),o=document.getElementById("rails-react-footer");if(r&&o&&j.render(N.createElement(ae,null,N.createElement(W.Z,null)),o),n&&(r?j.render(N.createElement(ae,null,N.createElement(Y.Z,{currentUser:null===t||void 0===t?void 0:t.user,organization:null===t||void 0===t?void 0:t.organization,noRouter:!0})),n):j.render(N.createElement(ae,null,N.createElement(G.h,{currentUser:null===t||void 0===t?void 0:t.user,organization:null===t||void 0===t?void 0:t.organization,noRouter:!0})),n)),null!==t&&void 0!==t&&t.user)i&&r?j.render(N.createElement(ae,null,N.createElement(X.Z,{currentUser:null===t||void 0===t?void 0:t.user,organization:null===t||void 0===t?void 0:t.organization,noRouter:!0})),i):a&&(j.render(N.createElement(ae,null,N.createElement(ie,{user:t.user,organization:t.organization})),a),a.style.width="auto");else if((n||a)&&!window.padConfig){var l,s;const e={path:window.location.pathname,hasFlash:!!window.CP_APP_NOTICE||!!window.CP_APP_ERRORS},t=null===(l=window.CP_GQL_HYDRATE)||void 0===l?void 0:l.errors;t&&t.forEach(((t,n)=>{e[`error_${n}`]=t.message})),"development"===(null===(s=window.CoderPad)||void 0===s?void 0:s.ENVIRONMENT)?console.error("GraphQL Rails preload user not found",e):F.Tb(new Error("User info not found for React header/sidenav"),{tags:{layer:"react"},extra:e})}const c=window.CP_APP_NOTICE,d=window.CP_APP_ERRORS,u=document.getElementById("rails-react-app-notice");u&&(c||d)&&j.render(N.createElement(ae,null,N.createElement(Q.F,null)),u)}();var re=n(59910),oe=n(62267),le=n(34857),se=n(15255),ce=n(71182),de=n(5268),ue=n(45223);const me=({children:e})=>N.createElement(ue._1,{config:window.padConfig},e);var pe=n(58545),ge=n(48792);function he(){return(0,pe.Z)(1e3*ge.Z.padCreatedAt,30)}var fe=n(79213),ve=n(76362),be=n(47303),ye=n(88615),Ee=n(48468),we=n(94184),ke=n.n(we),Se=n(19755);function Ce(){return Ce=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ce.apply(this,arguments)}const xe=["regular","lightDanger","info"],_e=["primary","danger"];class Te extends N.Component{componentDidMount(){const e=this.props.tooltip;e&&this._el&&Se(this._el).tooltip(e)}componentWillUnmount(){this.props.tooltip&&Se(this._el).tooltip("destroy")}componentDidUpdate(e,t){const n=this.props.tooltip,a=e.tooltip;a&&!n?Se(this._el).tooltip("destroy"):n&&n!==a&&Se(this._el).tooltip(n)}render(){const{children:e,className:t,darkBg:n,disabled:a,extraProps:i,onClick:r,type:o,style:l}=this.props,s={className:ke()(t,{Button:!0,"Button--solid":_e.includes(o),"Button--outline":xe.includes(o),"Button--disabled":a,"Button--enabled":!a,"Button--darkBg":n,"Button--lightBg":!n,"Button--danger":"danger"===o,"Button--lightDanger":"lightDanger"===o,"Button--info":"info"===o,"Button--primary":"primary"===o,"Button--regular":"regular"===o}),disabled:a&&"disabled",onClick:r||void 0,style:l};return N.createElement("button",Ce({ref:e=>this._el=e},s,i),e)}}function Ie(e,t,n){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:String(a))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Pe extends N.Component{constructor(...e){super(...e),Ie(this,"handleFocusTimeClick",(()=>{this.props.onFocusTimeEnabled()}))}render(){return N.createElement("div",{className:"FocusTimeIntroModal-content"},N.createElement("div",{className:"FocusTimeIntroModal-header"},"Start Focus Time"),ge.Z.isOwner?N.createElement("div",null,"How can you assess a candidate\u2019s coding skillset when they\u2019re under artificial stress? Giving a qualified candidate a few minutes to collect their thoughts can"," ",N.createElement("a",{href:"https://coderpad.io/blog/interview-with-chris-parnin-mahnaz-behroozi",target:"_blank",rel:"noopener noreferrer"},"drastically improve their ability to pass technical assessments"),".",N.createElement("br",null),N.createElement("br",null),"Focus Time will \u201cpause\u201d the interview for 5 minutes, blurring your screen while the candidate starts to think through the problem without the stress of someone watching. We\u2019ll ring a bell when it\u2019s time for you to come back to the interview.",N.createElement("br",null),N.createElement("br",null),"(If you\u2019re using a 3rd party audio/videoconference, be sure to mute those as well)."):N.createElement("div",null,"You\u2019re stressed, we get it."," ",N.createElement("a",{href:"https://coderpad.io/blog/interview-with-chris-parnin-mahnaz-behroozi",target:"_blank",rel:"noopener noreferrer"},"You\u2019re more likely to perform better")," ","if you take a few minutes to collect your thoughts.",N.createElement("br",null),N.createElement("br",null),"Focus Time \u201cpauses\u201d your interview for 5 minutes, so you can think through the problem on your own, without the interviewer watching. We\u2019ll ring a bell when 10 seconds are left, and again when time is up."),N.createElement("div",{className:"FocusTimeIntroModal-buttonWrap"},N.createElement(Te,{darkBg:this.props.darkBg,onClick:this.handleFocusTimeClick,extraProps:{"data-toggle":"modal","data-target":"#focus-time-modal"},type:"primary"},"Begin Focus Time")))}}const Ze={onFocusTimeEnabled(){return{type:"focus_time_toggled",value:!0,remote:!1}}};var Oe,Me,De=(0,oe.$j)((function(e){const{darkColorScheme:t}=e.editorSettings;return{darkBg:t}}),Ze)(Pe),Le=n(3089),Fe=n(40245);function Ae(e,t,n){if(0===t.length)return c().escape(e);n||(n=20);let a="";const i=Math.floor(.5*t.length),r=(0,Le.Z)(e.toLowerCase(),t.toLowerCase(),i);let o=0;for(let l=0;l<r.length&&l<n;l++){const t=r[l];t.start<o||(a+=c().escape(e.substring(o,t.start)),a+=`<em>${c().escape(e.substring(t.start,t.end))}</em>`,o=t.end)}return a+=c().escape(e.substring(o)),a}function Re(e,t,n){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:String(a))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Ne={query:""},je=(null===(Oe=document.querySelector("[name='csrf-token']"))||void 0===Oe||null===(Me=Oe.attributes.getNamedItem("content"))||void 0===Me?void 0:Me.value)||"",qe=(0,H.g)(je);class Be extends N.PureComponent{constructor(e){super(e),Re(this,"loadAndSelectQuestion",((e,t,n)=>{const a=a=>{this.props.onSelectQuestion(e,a,t),n&&setTimeout((()=>{const t=this._questionsListRef.current,n=t.querySelector(`li[data-example-id="${e.id}"]`);n&&(t.scrollTop=n.offsetTop)}),5)};!e.has_variations||this.variationsCache[e.id]?a(this.variationsCache[e.id]):(t||this.props.onSelectQuestion({...e,contents:null},[]),this.runQuery({requestSearchFn:this.requestExampleQuestionVariations.bind(this,{id:e.id}),showLoading:!1,callback:t=>{this.variationsCache[e.id]=t,a(t)}}))})),this.state={...Ne,records:[],isLoading:this.props.exampleQuestionsExist},this.queryId=0,this.lastReceivedQueryId=-1,this.onQueryChange=this.onQueryChange.bind(this),this._questionsListRef=N.createRef(),this.variationsCache={}}componentDidMount(){this.runQuery({requestSearchFn:this.requestExampleQuestions.bind(this),callback:e=>{if(this.setState({records:e,allRecords:e}),this.props.initiallySelectedQuestionId){const t=/(examples\/[\w-]+)(?:\/([\w-]+))?/.exec(this.props.initiallySelectedQuestionId),[n,a,i]=t,r=c().find(e,["id",a]);if(r)this.loadAndSelectQuestion(r,i,!0);else{const e="ExampleQuestionList could not find the question id in the record list.";console.error(e),F.uT(e,{id:this.props.initiallySelectedQuestionId})}}}})}async requestExampleQuestions(){const e=new FormData;e.append("pad_types",this.props.takeHome?["take_home","any"]:["live","any"]);const t=await qe("/search/example_questions",{method:"post",body:e});return t.ok?t.json():F.Tb(new Error(`Search example questions failure: ${t.status} (${t.statusText})`))}async requestExampleQuestionVariations(e={}){const t=new FormData;t.append("id",e.id);const n=await qe("/search/example_question_variations",{method:"post",body:t});return n.ok?n.json():F.Tb(new Error(`Search example questions failure: ${n.status} (${n.statusText})`))}runQuery({requestSearchFn:e,callback:t,showLoading:n=!0}){const a=this.queryId++;return n&&this.setState({isLoading:!0}),e().then((e=>{if(a<this.lastReceivedQueryId)return;const i=c().reduce(e.records,((e,t)=>(t.take_home=!!this.props.takeHome,e.push(t),e)),[]);this.lastReceivedQueryId=a,n&&this.setState({isLoading:!1}),t(i)}))}onQueryChange(e){if(!e)return this.setState({query:"",records:this.state.allRecords});const t=Math.floor(.3*e.length),n=e.toLowerCase(),a=(e,a,i)=>{var r;return i*c().sumBy((0,Le.Z)(null===(r=e[a])||void 0===r?void 0:r.toLowerCase(),n,t),(({start:e,end:t,errors:n})=>Math.ceil(t-e-n,0)))},i=e=>a(e,"title",1)+a(e,"description",.4)+a(e,"author_name",.2),r=c()(this.state.allRecords).map((e=>({...e,queryScore:i(e)}))).filter((e=>e.queryScore>0)).orderBy((e=>e.queryScore),"desc").value();this.setState({query:e,records:r})}renderQuestionListSection(e,t){return[N.createElement("li",{className:"header",key:e},e),...t.map((e=>N.createElement(ze,{key:e.example_question_id,query:this.state.query,question:e,onSelect:this.loadAndSelectQuestion,isSelected:this.props.selectedQuestion&&this.props.selectedQuestion.id===e.id})))]}render(){return N.createElement("div",{className:ke()({hidden:this.props.hidden})},N.createElement("div",{id:"questions-search"},N.createElement(Fe.M,{className:"QuestionList-SearchQuery",debounce:250,onValueChange:this.onQueryChange,placeholder:"Search examples\u2026",variant:"outlined"})),N.createElement("ul",{id:"questions-list",ref:this._questionsListRef,style:{top:"77px"}},this.state.isLoading?N.createElement("li",{key:"loading"},N.createElement("p",null,"Now loading\u2026")):this.state.records.length>0?this.renderQuestionListSection("Examples",this.state.records):N.createElement("li",{key:"noResults"},N.createElement("p",null,"Sorry, your search returned no results."),N.createElement("p",null,"Queries match against question titles, description and authors."))))}}function ze({question:e,query:t,isSelected:n,onSelect:a}){return N.createElement("li",{className:`ExampleQuestionListItem result ${n&&"selected"}`,"data-example-id":e.id,onClick:()=>a(e)},N.createElement("h4",{dangerouslySetInnerHTML:{__html:Ae(e.title,t)}}),e.description&&N.createElement("p",{className:"description",dangerouslySetInnerHTML:{__html:Ae(e.description,t)}}))}var $e=n(21023),He=n(72642),Ue=n(2658),Qe=n(93099),Ve=n(67080);var We,Ge,Ye=function(){var e;const{currentUser:t}=(0,Qe.x)(),n=(0,oe.I0)(),a=(0,oe.v9)((e=>e.question.createQuestionFromPadStatus));return(0,oe.v9)(Ve.ei)?N.createElement(N.Fragment,null):N.createElement("div",null,N.createElement($e.Z,{arrow:!0,placement:"top",title:null!==t&&void 0!==t&&t.allowQuestionCreation?"":"Only admins have access to create and edit questions with the "+(null===t||void 0===t||null===(e=t.organization)||void 0===e?void 0:e.name)+" question bank"},N.createElement("span",null,N.createElement(He.Z,{variant:"contained",color:"primary",disableElevation:!0,onClick:()=>{n({type:"create_question_from_pad"})},disabled:se.TH(a)||!(null!==t&&void 0!==t&&t.allowQuestionCreation),"data-testid":"qb-question-from-pad"},"Create Question From This Pad"))),N.createElement(M.Z,{mt:1},se.eQ(a)&&N.createElement(Ue.Z,{color:"error",component:"div"},"An error occurred while creating your question.")))},Ke=n(47671);function Je({question:e,query:t,isSelected:n,isFavorite:a,onSelect:i,onFavorite:r}){return N.createElement("li",{onClick:()=>i(e),className:`result ${n&&"selected"}`},N.createElement("h4",{dangerouslySetInnerHTML:{__html:Ae(e.title,t)}}),e.description&&N.createElement("p",{className:"description",dangerouslySetInnerHTML:{__html:Ae(e.description,t)}}),N.createElement("p",{className:"metadata"},e.test_cases_enabled?"Test Cases":CoderPad.LANGUAGES[e.language].display,N.createElement("span",null,"\xb7 by"," ",N.createElement("span",{dangerouslySetInnerHTML:{__html:Ae(e.author_name,t)}}))),a?N.createElement("span",{className:"star filled",onClick:()=>r(e,!0),title:"Remove this question from your favorites."}):N.createElement("span",{className:"star empty",onClick:()=>r(e,!1),title:"Add this question to your favorites."}))}const Xe=(null===(We=document.querySelector("[name='csrf-token']"))||void 0===We||null===(Ge=We.attributes.getNamedItem("content"))||void 0===Ge?void 0:Ge.value)||"",et=(0,H.g)(Xe),tt={language:"",query:"",organizationId:null,favorites:[],records:[],selectedQuestion:null,hasMoreQuestions:!1};class nt extends N.PureComponent{async reset(){if(this.runNewQuery({language:"",query:"",organizationId:null}),this.search({favorites_only:!0,per_page:20}).then((e=>{const t=e.records;t.forEach((e=>{e.mine=e.owner_email===CoderPad.USER.email})),this.setState({favorites:t})})),this.props.initiallySelectedQuestionId){const e=await et(`/questions/${this.props.initiallySelectedQuestionId}.json`);if(e.ok){const t=await e.json();this.props.onSelectQuestion(t)}}}constructor(e){super(e),this.state={...tt},this.queryId=0,this.lastReceivedQueryId=-1,this.reset(),this.onFavoriteQuestion=this.onFavoriteQuestion.bind(this),this.onLanguageChange=this.onLanguageChange.bind(this),this.onOrganizationIdChange=this.onOrganizationIdChange.bind(this),this.onLoadMore=this.onLoadMore.bind(this),this.onQueryChange=this.onQueryChange.bind(this),this.search=this.search.bind(this)}componentDidUpdate(e){this.props.takeHome!==e.takeHome&&(this.setState(tt),this.reset())}get languageOptions(){return c().map(this.props.languagesUsed,(e=>{var t;return{value:e,label:null===(t=CoderPad.LANGUAGES[e])||void 0===t?void 0:t.display}}))}get organizationIds(){return this.props.parentAndChildOrganizations&&this.props.parentAndChildOrganizations.length>0?this.props.parentAndChildOrganizations.map((e=>({value:e[0],label:e[1]}))):[]}async search(e){const t=new URLSearchParams(c().omitBy(e,c().isNil));t.append("pad_types[]",this.props.takeHome?"take_home":"live"),t.append("pad_types[]","any");const n=await et("/search/questions",{method:"post",body:new URLSearchParams(t)});return n.ok?n.json():F.Tb(new Error(`Search questions failure: ${n.status} (${n.statusText})`))}runQuery({language:e,query:t,organizationId:n,page:a},i){const r={language:e,organization_id:n,per_page:20,page:a,text:t},o=this.queryId++;return this.search(r).then((e=>{if(o<this.lastReceivedQueryId)return;this.lastReceivedQueryId=o;const t=e.records;t.forEach((e=>{e.mine=e.owner_email===CoderPad.USER.email}));const n=e.pages_total>e.page_number;i({records:t,hasMoreQuestions:n})}))}runNewQuery({language:e,query:t,organizationId:n}){this.runQuery({language:e,query:t,organizationId:n,page:0},(({records:e,hasMoreQuestions:t})=>{this.lastPage=0,this.setState({records:e,hasMoreQuestions:t})}))}onLanguageChange(e){const t=e&&e.value;this.runNewQuery({language:t,query:this.state.query,organizationId:this.state.organizationId}),this.setState({language:t})}onOrganizationIdChange(e){const t=e&&e.value;this.runNewQuery({language:this.state.language,query:this.state.query,organizationId:t}),this.setState({organizationId:t})}onQueryChange(e){this.runNewQuery({language:this.state.language,query:e,organizationId:this.state.organizationId}),this.setState({query:e})}onLoadMore(){this.runQuery({language:this.state.language,query:this.state.query,organizationId:this.state.organizationId,page:++this.lastPage},(({records:e,hasMoreQuestions:t})=>{this.setState((n=>({records:n.records.concat(e),hasMoreQuestions:t})))}))}async onFavoriteQuestion(e,t){(await et(`/questions/${e.id}/favorite`,{method:"post",body:new URLSearchParams({remove:t})})).ok&&this.setState((n=>({favorites:t?n.favorites.filter((t=>t.id!=e.id)):[...n.favorites,e]})))}renderQuestionListSection(e,t){return[N.createElement("li",{className:"header",key:e},e),...t.map((e=>N.createElement(Je,{key:e.id,query:this.state.query,question:e,onFavorite:this.onFavoriteQuestion,onSelect:this.props.onSelectQuestion,isFavorite:this.state.favorites.some((t=>t.id==e.id)),isSelected:this.props.selectedQuestion&&this.props.selectedQuestion.id==e.id})))]}renderListItems(){const e=[];let t=this.state.records;!this.state.language&&!this.state.query&&!this.state.organizationId&&this.state.favorites.length>0&&(e.push(...this.renderQuestionListSection("Your Favorites",this.state.favorites)),t=t.filter((e=>!this.state.favorites.some((t=>t.id==e.id)))));let[n,a]=c().partition(t,(e=>e.mine));if(n.length>0&&e.push(...this.renderQuestionListSection(this.props.takeHome?"Your Challenges":"Your Questions",n)),a.length>0){let t=c().groupBy(a,(e=>e.organization_name));c().partition(c().keys(t),(e=>e===this.props.organizationName)).flat().forEach((n=>{const a=t[n];a.length>0&&e.push(...this.renderQuestionListSection(`${n} ${this.props.takeHome?" Challenges":"Questions"}`,a))}))}return 0===e.length&&""===this.state.language&&""===this.state.query&&null!==this.state.organizationId?e.push(N.createElement("li",{key:"noResults"},N.createElement("p",{className:"QuestionList-Message"},"Sorry, there are currently no ",this.props.takeHome?"challenges":"questions"," ","belonging to this organization."))):0===e.length?e.push(N.createElement("li",{key:"noResults"},N.createElement("p",{className:"QuestionList-Message"},"Sorry, your search returned no results."),N.createElement("p",{className:"QuestionList-Message"},"Queries match against ",this.props.takeHome?"challenge":"question"," titles, description and authors."))):this.state.hasMoreQuestions&&e.push(N.createElement("li",{id:"load-more",key:"loadMore",onClick:this.onLoadMore},"Load more")),e}render(){let e="77px";return this.organizationIds.length>0&&!this.props.takeHome?e="161px":(this.organizationIds.length>0||!this.props.takeHome)&&(e="113px"),N.createElement("div",{className:ke()({hidden:this.props.hidden})},N.createElement("div",{id:"questions-search"},N.createElement(Fe.M,{className:"QuestionList-SearchQuery",debounce:250,onValueChange:this.onQueryChange,placeholder:this.props.takeHome?"Search challenges\u2026":"Search questions\u2026",variant:"outlined"}),!0!==this.props.takeHome&&N.createElement(Ke.ZP,{escapeClearsValue:!0,isClearable:!0,isSearchable:!0,onChange:this.onLanguageChange,options:this.languageOptions,placeholder:"Filter by language",className:"QuestionList-LanguageSelect",classNamePrefix:"QuestionList-LanguageSelect",styles:{container:e=>({...e,height:"37px",width:"100%"}),control:e=>({...e,borderColor:"#c7d1d9"})},value:this.languageOptions.find((({value:e})=>e===this.state.language))}),this.organizationIds.length>0&&N.createElement(Ke.ZP,{escapeClearsValue:!0,isClearable:!0,isSearchable:!0,onChange:this.onOrganizationIdChange,options:this.organizationIds,placeholder:"Filter by organization",styles:{container:e=>({...e,height:"37px",width:"100%"}),control:e=>({...e,borderColor:"#c7d1d9"})},value:this.organizationIds.find((({value:e})=>e===this.state.organizationId))})),N.createElement("ul",{id:"questions-list",style:{top:e}},this.renderListItems()))}}var at=n(51269),it=n(23855),rt=n(56493),ot=n(71439);ot.gql`
  query CurrentPlan {
    plan {
      id
      title
      widgetSubTitle
      widgetDescription
      description
      billingCyclePadLimit
      userAccountLimit
      monthlyPrice
      formattedMonthlyPrice
      formattedAnnualPrice
      overagePrice
      formattedOveragePrice
      current
      planCategorization
      legacy
      legacyOf
      upgradeOrder
      annual
      hasAnnualAlternative
      upgradeOrder
    }
  }
`;var lt=n(44203),st=n(58855),ct=n(40019);(0,lt.Dd)("\nid\ntitle\nlanguages\nlanguageDisplays\ndifficulty\ncreatedAt\ndescription\n");var dt=n(59226);function ut(){return ut=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ut.apply(this,arguments)}function mt(e,t,n){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:String(a))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const pt=e=>{class t extends N.Component{constructor(e){super(e),mt(this,"updateCodeBlockStyling",(()=>{let e=!1;this.codeMirror.eachLine((t=>("```"===t.text.slice(0,3)?(e=!e,this.codeMirror.addLineClass(t,"wrap","cm-code")):this.codeMirror[e?"addLineClass":"removeLineClass"](t,"wrap","cm-code"),!1))),this.codeMirror.refresh()})),this.codeMirrorWrapperRef=N.createRef(),this.state={codeMirror:null}}componentDidMount(){const{darkColorScheme:e,keymap:t,readOnly:n}=this.props,a=document.createElement("textarea");this.codeMirrorWrapperRef.current.appendChild(a),this.codeMirror=CodeMirror.fromTextArea(a,{mode:"gfm",theme:e?"monokai":"one-light",keyMap:t||"sublime",lineNumbers:!1,lineWrapping:!0,styleActiveLine:!1,autofocus:!1,readOnly:n||!1});const i=c().debounce(this.updateCodeBlockStyling,50);this.codeMirror.on("change",i),this.setState({codeMirror:this.codeMirror})}componentDidUpdate(e,t){this.props.hide!==e.hide&&this.codeMirror&&this.codeMirror.refresh(),this.props.darkColorScheme!==e.darkColorScheme&&this.codeMirror.setOption("theme",this.props.darkColorScheme?"monokai":"one-light"),this.props.keymap!==e.keymap&&(this.codeMirror.setOption("keyMap",this.props.keymap),this.codeMirror.toggleOverwrite(!1))}componentWillUnmount(){this.codeMirror.toTextArea()}render(){return N.createElement(e,ut({codeMirror:this.state.codeMirror,hide:this.props.hide},this.props),N.createElement("div",{className:"MarkdownCodeMirrorWrapper",ref:this.codeMirrorWrapperRef}))}}return t};var gt,ht,ft=pt,vt=n(19755);function bt(e,t,n){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:String(a))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yt(){return yt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},yt.apply(this,arguments)}const Et=(null===(gt=document.querySelector("[name='csrf-token']"))||void 0===gt||null===(ht=gt.attributes.getNamedItem("content"))||void 0===ht?void 0:ht.value)||"",wt=(0,H.g)(Et),kt=(e,t)=>{const n=document.createElement("div");return CodeMirror.runMode(e,CoderPad.LANGUAGES[t].mode,n),n.innerHTML};function St(e){const t=function(){const{organization:e}=(0,rt.et)("\n    id\n    sharedQuestionEditingEnabled\n    questionsRestricted\n  ")(),{currentUser:t}=(0,Qe.x)();return!e||!e.questionsRestricted&&e.sharedQuestionEditingEnabled||(null===t||void 0===t?void 0:t.organizationOwner)}(),n=function(e){var t;const{organization:n}=(0,rt.et)("\n    id\n    sharedQuestionEditingEnabled\n    questionsRestricted\n  ")(),{currentUser:a}=(0,Qe.x)(),i=(null===e||void 0===e||null===(t=e.user)||void 0===t?void 0:t.id)===(null===a||void 0===a?void 0:a.id);return!n||!n.questionsRestricted&&(n.sharedQuestionEditingEnabled||i)||(null===a||void 0===a?void 0:a.organizationOwner)}(e.question),a=function(){const{organization:e}=(0,rt.et)("\n    id\n    questionsRestricted\n  ")(),{currentUser:t}=(0,Qe.x)();return!e||!e.questionsRestricted||(null===t||void 0===t?void 0:t.organizationOwner)}();return N.createElement(Ct,yt({},e,{isQuestionEditable:isNaN(e.question.id)?t:n,canEditQuestionCopies:a}))}class Ct extends N.PureComponent{constructor(e){super(e),bt(this,"getQuestionsIndex",(()=>!0===this.props.question.take_home?"/questions/take_home":"/questions")),bt(this,"handleVariationChange",(({value:e})=>{var t;const n=null!==(t=c().find(this.props.variations,{variation:e}))&&void 0!==t?t:this.props.question;null!=this.props.onSelectQuestionVariation&&this.props.onSelectQuestionVariation(n),this.props.padSlug||history.replaceState(null,"",`${this.getQuestionsIndex()}/${n.id}`)})),bt(this,"getActiveQuestionVariation",(()=>{var e;return null!==(e=this.props.activeVariation)&&void 0!==e?e:this.props.question})),bt(this,"getActivateDetailHandler",(e=>()=>{this.setState({activeDetail:e})})),bt(this,"isQuestionAppendAllowed",(e=>!!this.props.padSlug&&(!e.take_home&&("html"!==e.language&&e.language===this.props.padLanguage)))),this.abortController=new AbortController,this.state=this.getInitStateFromProps(e),this.getQuestionData(),this._cloneExampleRef=N.createRef()}async getQuestionData(){if("number"===typeof this.props.question.id){const e=this.abortController.signal,t=await wt(`/questions/${this.props.question.id}.json`,{signal:e});if(t.ok){const e=await t.json(),n=e.test_cases_enabled?e.contents_for_test_cases:e.contents;this.setState({contents:n,starterCodeByLanguage:e.starter_code_by_language})}}}getActiveVariationContents(){const e=this.getActiveQuestionVariation();return e.test_cases_enabled?e.contents_for_test_cases:e.contents}getInitStateFromProps(e){var t,n;const a=e.activeVariation&&c().find(this.props.variations,{variation:e.activeVariation})||this.props.question;return{starterCodeByLanguage:e.starter_code_by_language,activeDetail:null!==(t=a.candidate_instructions)&&void 0!==t&&null!==(n=t[0])&&void 0!==n&&n.instructions?"candidateInstructions":"contents"}}componentDidUpdate(e){this.props.question!==e.question&&this.setState(this.getInitStateFromProps(this.props))}componentWillUnmount(){this.abortController.abort()}setQuestion(e){var t,n,a,i;const r=this.getActiveQuestionVariation();this.props.onSetQuestion({language:r.language,padLanguage:this.props.padLanguage,contents:this.getActiveVariationContents(),candidateInstructions:r.candidate_instructions,customDatabaseId:null===(t=r.custom_database)||void 0===t?void 0:t.id,customDatabaseLanguage:null===(n=r.custom_database)||void 0===n?void 0:n.language,customDatabaseSchema:null===(a=r.custom_database)||void 0===a?void 0:a.schema,customDatabaseSchemaJson:null===(i=r.custom_database)||void 0===i?void 0:i.schemaJson,customFiles:r.custom_files,fileContents:r.file_contents,append:e,questionId:r.id,testCasesEnabled:r.test_cases_enabled,testCases:r.test_cases,starterCodeByLanguage:this.state.starterCodeByLanguage,solution:r.solution}),vt("#questions-modal").modal("hide")}get isExample(){return"string"===typeof this.props.question.id&&-1!==this.props.question.id.indexOf("examples/")}componentDidMount(){this.isExample&&vt(this._cloneExampleRef.current).tooltip()}render(){const e=this.getActiveVariationContents();if(null!=e){var t,n,a;const{allowEdit:i,padSlug:r,onDeselectQuestion:o}=this.props,l=this.getActiveQuestionVariation(),s=l.test_cases,d=s?s.length:0,u={candidateInstructions:!(null===(t=l.candidate_instructions)||void 0===t||null===(n=t[0])||void 0===n||!n.instructions),contents:null!=e,customFiles:l.custom_files.length>0,testCases:l.test_cases_enabled&&d>0,solution:!!l.solution},m=c().map(this.props.variations,(e=>{var t;return{label:e.language?window.CoderPad.LANGUAGES[e.language].display:e.variation,value:null!==(t=e.variation)&&void 0!==t?t:e.language}})),p=c().find(m,{value:null===(a=this.props.activeVariation)||void 0===a?void 0:a.language});return N.createElement("div",null,N.createElement("div",{className:"question-scroll"},N.createElement("button",{className:"back",onClick:o},N.createElement("span",{className:"fui-arrow-left"}),"Back"),N.createElement("div",{className:"question-header"},N.createElement("h4",null,l.title),m.length>0&&N.createElement(Ke.ZP,{className:"QuestionSelected-variationPicker",escapeClearsValue:!1,isSearchable:!1,onChange:this.handleVariationChange,options:m,placeholder:"",value:p}),N.createElement("pre",{className:"description"},l.description?l.description+(l.difficulty?` (Difficulty: ${c().capitalize(l.difficulty)})`:""):N.createElement("span",{className:"missing"},"No Description")),N.createElement("p",{className:"metadata"},l.test_cases_enabled?`Test Cases (Initial language: ${CoderPad.LANGUAGES[l.language].display})`:CoderPad.LANGUAGES[l.language].display,l.custom_database&&N.createElement("span",null," ","(Custom Database: ",N.createElement("strong",null,l.custom_database.title),")"," ")," ","Created by"," "+l.author_name," "+(0,at.Z)((0,it.Z)(l.created_at),{addSuffix:!0}))),c().filter(u).length>1&&N.createElement("header",{className:"QuestionSelected-detailPicker"},u.candidateInstructions&&N.createElement("a",{className:`QuestionSelected-detailPickerOption ${"candidateInstructions"===this.state.activeDetail&&"QuestionSelected-detailPickerOption--active"}`,onClick:this.getActivateDetailHandler("candidateInstructions")},"Candidate Instructions"),u.contents&&N.createElement("a",{className:`QuestionSelected-detailPickerOption ${"contents"===this.state.activeDetail&&"QuestionSelected-detailPickerOption--active"}`,onClick:this.getActivateDetailHandler("contents")},"Starter Code"),u.testCases&&N.createElement("a",{className:`QuestionSelected-detailPickerOption ${"testCases"===this.state.activeDetail&&"QuestionSelected-detailPickerOption--active"}`,onClick:this.getActivateDetailHandler("testCases")},"Test Cases (",d,")"),u.customFiles&&N.createElement("a",{className:`QuestionSelected-detailPickerOption ${"customFiles"===this.state.activeDetail&&"QuestionSelected-detailPickerOption--active"}`,onClick:this.getActivateDetailHandler("customFiles")},"Custom File"),u.solution&&N.createElement("a",{className:`QuestionSelected-detailPickerOption ${"solution"===this.state.activeDetail&&"QuestionSelected-detailPickerOption--active"}`,onClick:this.getActivateDetailHandler("solution")},"Solutions")),u.candidateInstructions&&N.createElement("div",{className:"QuestionSelected-candidateInstructions "+("candidateInstructions"===this.state.activeDetail?"":"hidden")},l.candidate_instructions.map(((e,t)=>N.createElement(N.Fragment,null,N.createElement("h4",null,"Instructions Part ",t+1),N.createElement(_t,{key:t,value:e.instructions}),N.createElement("hr",null))))),u.contents&&N.createElement("pre",{className:"cm-s-one-light QuestionSelected-contents "+("contents"===this.state.activeDetail?"":"hidden"),dangerouslySetInnerHTML:{__html:kt(e,l.language)}}),u.customFiles&&N.createElement("div",{className:"cm-s-one-light QuestionSelected-customFiles "+("customFiles"===this.state.activeDetail?"":"hidden")},N.createElement("ul",null,l.custom_files.map((e=>N.createElement("li",{key:e.id},N.createElement("a",{href:`/dashboard/files/${e.id}`},N.createElement("span",{className:"icon"}),e.filename," (",e.filesize,")")))))),u.testCases&&N.createElement("div",{className:"testCases"===this.state.activeDetail?"":"hidden"},N.createElement(dt.Z,{testCases:s})),u.solution&&N.createElement("div",{className:"QuestionSelected-solution "+("solution"===this.state.activeDetail?"":"hidden")},N.createElement(It,{value:l.solution}))),N.createElement("div",{className:"question-actions"},this.isExample&&this.props.canEditQuestionCopies&&N.createElement("a",{href:`/questions/new?example_question_id=${l.id}${l.take_home?"&take_home=1":""}`,className:"outline-button QuestionSelected-copyExample",target:"_blank",rel:"noreferrer","data-placement":"top",ref:this._cloneExampleRef,title:"Click here to edit a copy of this example and save it to your library."},"Edit a Copy")||i&&this.props.isQuestionEditable&&N.createElement("a",{href:`/questions/${l.id}/edit`,className:"outline-button",target:r?"_blank":"_self"},"Edit"),this.isQuestionAppendAllowed(l)&&N.createElement("button",{key:"append",className:"outline-button",onClick:()=>this.setQuestion(!0)},"Append to Pad"),r&&N.createElement("button",{key:"replace",className:"outline-button",onClick:()=>this.setQuestion(!1)},"Replace Pad"),this.props.allowPadCreation&&N.createElement(N.Fragment,null,N.createElement("a",{className:"outline-button",href:`/sandbox?question_id=${l.id}`,target:this.isExample?"_blank":"_self"},"Preview Question"),l.take_home?N.createElement(N.Fragment,null,N.createElement("a",{className:"outline-button QuestionSelected-createPad"+(this.isExample?"--fromExample":""),href:this.isExample?`/dashboard/pad_sets/new?pad_set[example_question_id]=${l.id}`:`/dashboard/pad_sets/new?pad_set[question_id]=${l.id}`,target:this.isExample?"_blank":"_self"},"Create Take-Homes"),l.test_cases_enabled&&!this.isExample&&N.createElement(N.Fragment,null,l.public_take_home_setting_id?N.createElement("a",{className:"outline-button QuestionSelected-createPad",href:`/public_take_home_settings/${l.public_take_home_setting_id}/edit`},"Edit Public Take-Home URL"):N.createElement("a",{className:"outline-button QuestionSelected-createPad",href:`/public_take_home_settings/new?public_take_home_setting[question_id]=${l.id}`},"Create Public Take-Home URL"))):N.createElement("form",{method:"post",action:"/pads",acceptCharset:"UTF-8",target:this.isExample?"_blank":"_self"},N.createElement("input",{name:"utf8",type:"hidden",value:"\u2713"}),N.createElement("input",{type:"hidden",name:"authenticity_token",value:vt("meta[name=csrf-token]").attr("content")}),N.createElement("input",{type:"hidden",name:"pad[language]",value:l.language}),N.createElement("input",{type:"hidden",name:"pad[question_id]",value:l.id}),N.createElement("input",{className:"outline-button QuestionSelected-createPad"+(this.isExample?"--fromExample":""),type:"submit",value:"Create Pad With Question"})))))}return N.createElement("div",null,N.createElement("div",{className:"question-header"},N.createElement("h4",null,"Loading \u2026")))}}class xt extends N.Component{constructor(e){super(e)}componentDidUpdate(e){!this.props.codeMirror||e.codeMirror&&this.props.value===e.value||this.props.codeMirror.setValue(this.props.value)}render(){return N.createElement(N.Fragment,null,this.props.children)}}const _t=ft(xt);_t.defaultProps={readOnly:!0};class Tt extends N.Component{constructor(e){super(e)}componentDidUpdate(e){!this.props.codeMirror||e.codeMirror&&this.props.value===e.value||this.props.codeMirror.setValue(this.props.value),this.props.codeMirror.refresh()}render(){return N.createElement(N.Fragment,null,this.props.children)}}const It=ft(Tt);It.defaultProps={readOnly:!0};var Pt=n(19755);function Zt(e,t,n){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:String(a))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Ot extends N.PureComponent{constructor(e){super(e),Zt(this,"getActivateLibraryHandler",(e=>()=>{this.state.activeLibrary!==e&&this.setState({activeLibrary:e,selectedQuestion:null})})),Zt(this,"getQuestionsIndex",(()=>!0===this.props.takeHome?"/questions/take_home":"/questions")),this.exampleInitiallySelected(e)?this.state={activeLibrary:"example"}:this.state={activeLibrary:this.props.questionsExist||!this.props.exampleQuestionsExist?"myLibrary":"example"},this._examplesTooltipRef=N.createRef(),this.onSelectQuestion=this.onSelectQuestion.bind(this),this.onDeselectQuestion=this.onDeselectQuestion.bind(this),this.onSelectQuestionVariation=this.onSelectQuestionVariation.bind(this)}componentDidMount(){this.props.exampleQuestionsExist&&Pt(this._examplesTooltipRef.current).tooltip()}exampleInitiallySelected(e){return"string"===typeof e.initiallySelectedQuestionId&&-1!==e.initiallySelectedQuestionId.indexOf("examples/")}get newQuestionPath(){return"/questions/new"+(!0===this.props.takeHome?"?question%5Btake_home%5D=true":"")}onSelectQuestionVariation(e){this.setState({selectedQuestionActiveVariation:e,lastManuallySelectedLanguage:null===e||void 0===e?void 0:e.language})}onSelectQuestion(e,t,n){var a,i;const r=null!==t&&void 0!==t&&t.length?null!==(a=null!==(i=null!==n&&void 0!==n?n:t.find((e=>e.language===this.state.lastManuallySelectedLanguage)))&&void 0!==i?i:t.find((e=>e.language===this.props.language)))&&void 0!==a?a:t[0]:n;if(this.setState({selectedQuestion:e,selectedQuestionVariations:t,selectedQuestionActiveVariation:r}),!this.props.padSlug&&e.id){const t=n?`${this.getQuestionsIndex()}/${e.id}/${n}`:`${this.getQuestionsIndex()}/${e.id}`;history.replaceState(null,"",t)}}onDeselectQuestion(){const e=this.state.selectedQuestion;this.props.padSlug||("string"===typeof e.id&&-1!==e.id.indexOf("examples/")?history.replaceState(null,"",`${this.getQuestionsIndex()}/examples`):history.replaceState(null,"",this.getQuestionsIndex())),this.setState({selectedQuestion:null})}renderDeselected(){const e=this.props.padSlug&&!this.props.takeHome;return"example"===this.state.activeLibrary?N.createElement("div",{id:"empty-message",style:{marginTop:"160px"}},N.createElement("h3",null,"Welcome to ",this.props.takeHome?"Take-Home":""," Example Questions"),N.createElement("div",null,N.createElement("p",null,"These example questions can be used during your CoderPad interviews. You can use them as is, or save them to your Question Bank and make changes."),N.createElement("p",null,"Browse examples on the left and select one to get started."))):N.createElement("div",{id:"empty-message",style:{marginTop:this.props.takeHome?"110px":"160px"}},N.createElement("h3",null,"Welcome to your",this.props.takeHome?" Take-Home":""," Question Bank"),this.props.takeHome?N.createElement("div",null,N.createElement("p",null,"Take-Home questions are programming exercises given to candidates to complete on their own time. By providing test inputs and outputs, you help candidates automatically assess the correctness of their solutions."),N.createElement("p",null,"Create Take-Home pads from these questions.",this.props.organizationName&&" Like Live questions, Take-Home questions can be shared with colleagues.")):N.createElement("div",null,N.createElement("p",null,"Questions you",this.props.organizationName&&" and your colleagues"," have written, as well as example questions, are listed on the left."),N.createElement("p",null,"Search for questions to use in live interviews, edit existing questions, and create new ones.")),N.createElement("p",null,"Detailed instructions with screenshots are available in the"," ",this.props.takeHome?N.createElement("a",{href:"https://coderpad.io/resources/docs/take-home-question-bank/",target:"_blank",rel:"noreferrer"},"Take-Home Questions Guide"):N.createElement("a",{href:"https://coderpad.io/resources/docs/live-question-bank/",target:"_blank",rel:"noreferrer"},"Live Questions Guide"),"."),e&&N.createElement(Ye,null))}render(){return N.createElement("div",{id:"questions-wrap"},N.createElement("div",{className:"right"},this.state.selectedQuestion?N.createElement(St,{key:this.state.selectedQuestion.id,question:this.state.selectedQuestion,variations:this.state.selectedQuestionVariations,activeVariation:this.state.selectedQuestionActiveVariation,allowEdit:this.props.allowSharedEdit||!!this.state.selectedQuestion.mine,allowPadCreation:this.props.allowPadCreation,padSlug:this.props.padSlug,padLanguage:this.props.language,onDeselectQuestion:this.onDeselectQuestion,onSetQuestion:this.props.onSetQuestion,onSelectQuestionVariation:this.onSelectQuestionVariation}):this.renderDeselected()),N.createElement("div",{className:"left"},N.createElement("div",{className:"QuestionLibrary-LibraryTabs"},N.createElement("div",{className:ke()({"QuestionLibrary-LibraryTab":!0,"QuestionLibrary-LibraryTab--active":"myLibrary"===this.state.activeLibrary}),onClick:this.getActivateLibraryHandler("myLibrary")},"My Library"),this.props.exampleQuestionsExist&&N.createElement("div",{className:ke()({"QuestionLibrary-LibraryTab":!0,"QuestionLibrary-LibraryTab--active":"example"===this.state.activeLibrary}),onClick:this.getActivateLibraryHandler("example")},"Examples",N.createElement("span",{className:"QuestionLibrary-LibraryTabInfoIcon editor-setting-tooltip fui-info-circle","data-placement":"top",ref:this._examplesTooltipRef,title:`Quickly get started with CoderPad ${this.props.takeHome?"take-homes":""}! Find inspiration for writing your own questions, or customize and add examples to your library.`}))),N.createElement("div",{className:"QuestionLibrary-QuestionListContainer"},this.props.exampleQuestionsExist&&N.createElement(Be,{onSelectQuestion:this.onSelectQuestion,onDeselectQuestion:this.onDeselectQuestion,selectedQuestion:this.state.selectedQuestion,allowPadCreation:this.props.allowPadCreation,initiallySelectedQuestionId:this.exampleInitiallySelected(this.props)?this.props.initiallySelectedQuestionId:null,exampleQuestionsExist:this.props.exampleQuestionsExist,takeHome:this.props.takeHome,hidden:"example"!==this.state.activeLibrary}),N.createElement(nt,{onSelectQuestion:this.onSelectQuestion,onDeselectQuestion:this.onDeselectQuestion,selectedQuestion:this.state.selectedQuestion,allowPadCreation:this.props.allowPadCreation,initialFavorites:this.props.initialFavorites,initiallySelectedQuestionId:this.exampleInitiallySelected(this.props)?null:this.props.initiallySelectedQuestionId,languagesUsed:this.props.languagesUsed,language:this.props.language,organizationId:this.props.organizationId,organizationName:this.props.organizationName,takeHome:this.props.takeHome,hidden:"myLibrary"!==this.state.activeLibrary}))))}static init(e,t){j.render(N.createElement(Ot,e),t)}}const Mt={lastLoadedQuestionId:null,modalVisible:!1,question:null},Dt={confirmationRequested:"MUTIFILE_CONFIRMATION_REQUESTED",confirmationDismissed:"MULTIFILE_CONFIRMATION_DISMISSED"};function Lt(e=Mt,t){switch(t.type){case Dt.confirmationRequested:return{...e,modalVisible:!0,question:c().omit(t,["type"])};case Dt.confirmationDismissed:return{...e,modalVisible:!1};case"question_data_loaded":case"question_selected_by_local_user":return{...e,lastLoadedQuestionId:t.questionId}}return e}function Ft(e){return{...e&&{_analytics:e},type:Dt.confirmationDismissed}}const At=["append","contents","candidateInstructions","customDatabaseId","customDatabaseLanguage","customDatabaseSchema","customFiles","fileContents","language","padLanguage","questionId","testCasesEnabled","testCases","starterCodeByLanguage","solution"],Rt={onSetQuestion:e=>({...{...c().pick(e,At),_analytics:{name:"Question Added",params:{append:e.append,question_id:e.questionId}}},type:e.contents&&e.contents.length>0&&e.fileContents&&e.fileContents.length>0?Dt.confirmationRequested:"question_selected_by_local_user"})};var Nt=(0,oe.$j)((function(e){return{language:e.padSettings.language,allowPadCreation:!1,takeHome:e.padSettings.takeHome||ge.Z.isSandbox&&ge.Z.question&&ge.Z.question.takeHome,initialFavorites:[]}}),Rt)(Ot);function jt(e,{metadata:t=null,username:n,email:a}){if(ge.Z.isSandbox)return;const i=document.querySelector("meta[name=csrf-param]").getAttribute("content"),r=document.querySelector("meta[name=csrf-token]").getAttribute("content"),o=(0,H.g)(r),l=`/${ge.Z.slug}/log`,s=new FormData;s.append("kind",e),t&&s.append("metadata",t),n&&s.append("user_name",n),a&&s.append("user_email",a),"function"==typeof navigator.sendBeacon?(s.append(i,r),navigator.sendBeacon(l,s)):o(l,{method:"post",body:s})}function qt(){return qt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},qt.apply(this,arguments)}function Bt(e,t,n){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:String(a))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class zt extends N.Component{constructor(...e){super(...e),Bt(this,"handleClick",(e=>{e.preventDefault(),this.props.onClick()}))}render(){const{style:e,...t}=this.props;let n={};return this.props.target&&(n.target=this.props.target),N.createElement("a",qt({className:ke()("BannerButton",this.props.className),href:this.props.href||"#",onClick:this.props.onClick&&this.handleClick},n,{style:e},t),this.props.children)}}class $t extends N.Component{constructor(e){super(e);const{delayAppearanceSeconds:t}=this.props;this.state={hiddenByDelay:!!t},t&&setTimeout((()=>this.setState({hiddenByDelay:!1})),1e3*t)}render(){return N.createElement("div",{className:ke()({PadBanner:!0,"PadBanner--visible":this.props.visible&&!this.state.hiddenByDelay,"PadBanner--warning":this.props.warning}),"data-testid":"pad_banner"},this.props.children,this.props.onHide&&N.createElement("a",{href:"#",className:"PadBanner-close fui-cross",onClick:this.props.onHide}))}}function Ht(e,t,n){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:String(a))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Ut extends N.Component{constructor(e){super(e),Ht(this,"handleHide",(()=>{this.setState({hidden:!0})})),this.state={hidden:!1,timeLeft:this._getTimeLeft()},setInterval((()=>this.setState({timeLeft:this._getTimeLeft()})),1e3)}_getTimeLeft(){return(0,at.Z)(he(),{addSuffix:!0})}render(){return N.createElement($t,{delayAppearanceSeconds:30,onHide:this.handleHide,visible:!this.state.hidden},N.createElement("img",{className:"DemoBanner-cp-logo",src:"https://d1a7p14oqam61r.cloudfront.net/assets/coderpad_logo_32x32-24181f5cf210bb0b684fa1e96da1c24461217cb84133a77756c3dca6269ca411.png"}),N.createElement("span",null,"Try CoderPad free for 14 days"),N.createElement(zt,{href:"/register"},"Start Free Trial"),N.createElement("span",{className:"DemoBanner-expiryWarning"},"(this demo expires ",this.state.timeLeft,")"))}}var Qt=n(90948),Vt=n(59708),Wt=n(32854),Gt=n(79581),Yt=n(22037),Kt=n(70482),Jt=n(6867),Xt=n(98396);function en(){return en=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},en.apply(this,arguments)}const tn=(0,Qt.ZP)(He.Z,{target:"edljcxg1"})((({theme:e})=>({whiteSpace:"nowrap",color:"dark"===e.palette.mode?"white":"black",":hover":{backgroundColor:"dark"===e.palette.mode?"rgba(255, 255, 255, 0.08)":"rgba(0, 0, 0, 0.04)"}})),""),nn=(0,Qt.ZP)(Jt.Z,{target:"edljcxg0"})(""),an=({iconOnly:e=!1,children:t,...n})=>(0,Xt.Z)((e=>e.breakpoints.up("lg")))&&!e?N.createElement(tn,en({size:"small"},n,{"data-testid":"styled-footer-button"}),t):N.createElement(nn,{onClick:n.onClick,href:n.href,"data-testid":"icon-button"},n.startIcon);function rn(){const[e,t]=(0,N.useState)(null),{isPlayback:n}=(0,ue.nT)("isPlayback");return(0,N.useEffect)((()=>{const e=window.beamer_config;e&&(e.pad_view=!0,e.force_filter="s_dLvnvdJJ21912",e.bounce=!1,window.beamerPromise&&window.beamerPromise.then((()=>{window.Beamer.init(),t(window.Beamer)})).catch((e=>Kt.kg.error(e))))}),[]),N.createElement($e.Z,{placement:"top",arrow:!0,title:N.createElement(Ue.Z,{textAlign:"center"},"Learn about new dev-focused CoderPad features")},N.createElement("span",null,N.createElement(an,{onClick:()=>{null===e||void 0===e||e.show()},iconOnly:n,startIcon:N.createElement(Yt.Z,{variant:"dot",color:"success",overlap:"circular",invisible:null==window.beamerPosts||0==window.beamerPosts},N.createElement(Gt.dt,{sx:{width:20,height:20}}))},N.createElement(Ue.Z,{sx:{display:n?"none":{xs:"none",lg:"initial"}}},"What's New"))))}var on=n(59062);n(44597);ot.gql`
  query LeverStageOptions {
    leverStageOptions {
      id
      text
    }
  }
`;ot.gql`
  mutation CreatePad($input: CreatePadInput!) {
    createPad(input: $input) {
      pad {
        slug
      }
      message
      errors {
        path
        message
      }
    }
  }
`;var ln=n(87574);const sn=ot.gql`
  mutation PadEmailInviteSend($input: PadEmailInviteSendInput!) {
    padEmailInviteSend(input: $input) {
      message
      errors {
        message
        path
      }
    }
  }
`;const cn=ot.gql`
  mutation PadShortlinkGenerate($input: PadShortlinkGenerateInput!) {
    padShortlinkGenerate(input: $input) {
      errors {
        message
        path
      }
      message
      shortlink
    }
  }
`;var dn=n(91818);ot.gql`
  mutation UpdatePad($input: UpdatePadsInput!) {
    updatePads(input: $input) {
      pads {
        id
        slug
        title
        state
      }
    }
  }
`,(0,dn.k)();var un=n(43799);ot.gql`
  query Plans($currency: Currency) {
    plans(currency: $currency) {
      allowOverages
      id
      title
      description
      widgetSubTitle
      widgetDescription
      current
      monthlyPrice
      annualPrice
      formattedMonthlyPrice
      formattedAnnualPrice
      overagePrice
      formattedOveragePrice
      billingCyclePadLimit
      userAccountLimit
      canBeSelected
      currency
      upgradeOrder
      annual
      hasAnnualAlternative
      upgradeOrder
    }
  }
`;ot.gql`
  mutation CreateQuickAction($input: CreateQuickActionInput!) {
    createQuickAction(input: $input) {
      errors {
        message
        path
      }
      message
      quickAction {
        id
        name
        payload
      }
    }
  }
`;ot.gql`
  mutation DeleteQuickAction($input: DeleteQuickActionInput!) {
    deleteQuickAction(input: $input) {
      errors {
        message
        path
      }
      message
      quickAction {
        id
        name
        payload
      }
    }
  }
`;ot.gql`
  query QuickActions($page: QuickActionsPage!) {
    quickActions(page: $page) {
      id
      name
      payload
    }
  }
`;n(82766);ot.gql`
  query ProjectTemplate($slug: String!) {
    projectTemplate(slug: $slug) {
      id
      name
      slug
      category
      version
      latest
      settings
    }
  }
`;n(88656);ot.gql`
  mutation UpdateUser($input: UpdateUserInput!) {
    updateUser(input: $input) {
      errors {
        message
        path
      }
      message
      user {
        id
        name
        email
        defaultLanguage
        defaultPrivacy
        defaultExecution
        emailOptIn
        receivePadEndedSummary
      }
    }
  }
`;var mn=n(3726),pn=n(19755);function gn(){return gn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},gn.apply(this,arguments)}class hn extends N.Component{componentDidMount(){const e=this.props.tooltip;e&&this._el&&pn(this._el).tooltip(e)}componentWillUnmount(){this.props.tooltip&&pn(this._el).tooltip("destroy")}componentDidUpdate(e,t){const n=this.props.tooltip;e.tooltip&&!n?pn(this._el).tooltip("destroy"):n&&pn(this._el).tooltip(n)}render(){const{active:e,children:t,className:n,danger:a,disabled:i,onClick:r,href:o,modalId:l,primary:s}=this.props,c={className:ke()(n,{"pad-outline-button":!0,active:e,danger:a,"btn-primary":s}),disabled:i&&"disabled","data-toggle":l&&"modal","data-target":l&&`#${l}`,onClick:r||void 0,href:o||void 0};return o?N.createElement("a",c,t):N.createElement("button",gn({ref:e=>this._el=e},c),t)}}var fn=n(52716);var vn,bn,yn=()=>{const{track:e}=(0,Wt.z$)(),{currentUser:t}=(0,Qe.x)(),n=(0,oe.I0)(),{isSandbox:a,sandboxEnvironmentPreviewSlug:i,slug:r}=(0,ue.nT)("isSandbox","sandboxEnvironmentPreviewSlug","slug"),{padFork:o,status:l}=(0,mn.a)(),{environments:s}=(0,ve.od)(),c=(0,N.useCallback)((async()=>{if(!(0,se.TH)(l))try{const{message:t,pad:a}=await o({slug:`${r}`,title:ln.K.sandboxCreatePadFromSandboxButtonForkTitle});if(null===a||void 0===a||!a.slug)return void n((0,fn.GZ)({message:t||ln.K.sandboxCreatePadFromSandboxButtonForkError,key:"duplication-error",variant:"error",autoDismissMs:5e3}));e(ln.j.SandboxCreatePadFromSandboxButtonClicked,{forkedPadSlug:a.slug});const i=window.open(`/${a.slug}`);i&&(i.openedFromFork=!0)}catch(t){console.error(t)}}),[n,o,l,r,e]);return t&&a&&!i&&0!==s.length?N.createElement(M.Z,{sx:{display:"inline",position:"relative"}},N.createElement(hn,{disabled:(0,se.TH)(l),onClick:c,tooltip:{title:ln.K.sandboxCreatePadFromSandboxButtonTooltipText}},N.createElement(M.Z,{sx:{visibility:(0,se.TH)(l)?"hidden":void 0}},ln.K.sandboxCreatePadFromSandboxButtonLabel),(0,se.TH)(l)&&N.createElement(M.Z,{sx:{alignItems:"center",display:"inline-flex",justifyContent:"center",position:"absolute"}},N.createElement(on.Z,{color:"inherit",size:12,sx:{marginTop:-2.25,position:"absolute"}})))):null},En=n(33502),wn=n(20335);const kn=["title","titleId"];function Sn(){return Sn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Sn.apply(this,arguments)}function Cn(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}const xn=(e,t)=>{let{title:n,titleId:a}=e,i=Cn(e,kn);return N.createElement("svg",Sn({xmlns:"http://www.w3.org/2000/svg",width:25,height:25,viewBox:"0 0 25 25",ref:t,"aria-labelledby":a},i),n?N.createElement("title",{id:a},n):null,vn||(vn=N.createElement("path",{d:"M5.447 2.007a2.25 2.25 0 0 0-2.25 2.25V15.73a2.25 2.25 0 0 0 2.25 2.25h.942v-1.5h-.942a.75.75 0 0 1-.75-.75V4.257a.75.75 0 0 1 .75-.75h8.895c.385 0 .697.312.697.697v.75h1.5v-.75a2.197 2.197 0 0 0-2.197-2.197z"})),bn||(bn=N.createElement("path",{fillRule:"evenodd",d:"M7.895 8.204a1.5 1.5 0 0 1 1.5-1.5h10.158a1.5 1.5 0 0 1 1.5 1.5v12.79a1.5 1.5 0 0 1-1.5 1.5H9.395a1.5 1.5 0 0 1-1.5-1.5zm1.5 0h10.158v12.79H9.395z",clipRule:"evenodd"})))},_n=(0,N.forwardRef)(xn);n.p;var Tn=n(45413);const In=(0,wn.Z)({tooltip:{backgroundColor:"#3F434B",maxWidth:"200px",fontWeight:400,borderRadius:"6px",padding:"12px"},tooltipTitle:{fontSize:"1.1em",fontWeight:"bold"},tooltipArrow:{color:"#3F434B"},buttonContainer:{padding:"9px",margin:"3px"}});var Pn=({tooltipPlacement:e})=>{const t=In(),n=(0,oe.I0)(),{currentUser:a}=(0,Qe.x)(),{uiType:i}=(0,ue.nT)("uiType"),[r,o]=(0,N.useState)(!1),{title:l}=(0,oe.v9)(Ve.f6),{slug:s}=(0,ue.nT)("slug"),{padFork:c}=(0,mn.a)(),[d,u]=(0,N.useState)(!1),[m,p]=(0,N.useState)({});return null!==a&&void 0!==a&&a.allowPadCreation&&"drawing_only"!==i?N.createElement(N.Fragment,null,N.createElement($e.Z,{arrow:!0,placement:e,classes:{tooltip:t.tooltip,arrow:t.tooltipArrow},title:N.createElement(N.Fragment,null,N.createElement(M.Z,{className:t.tooltipTitle},"Duplicate Pad"),"Drawings and interviewer notes will not be copied to the new pad.")},N.createElement(Jt.Z,{className:t.buttonContainer,"data-testid":"duplicate-pad-btn",onClick:()=>{r||(o(!0),c({slug:`${s}`,title:`Copy - ${l}`}).then((({pad:e,message:t})=>{if(o(!1),null!==e&&void 0!==e&&e.slug){const t=window.open(`/${e.slug}`);t?t.openedFromFork=!0:(p(e),u(!0))}else n((0,fn.GZ)({message:t||"We could not generate the copy. Please try again.",key:"duplication-error",variant:"error",autoDismissMs:5e3}))})))},size:"large"},r?N.createElement(on.Z,{color:"inherit",size:25}):N.createElement(En.Z,{sx:{color:e=>e.palette.text.primary,fill:"currentColor"}},N.createElement(_n,null)))),N.createElement(Tn.Z,{isOpen:d,newPadData:m,close:()=>u(!1)})):null},Zn=n(32301),On=n(11876),Mn=n(47871),Dn=function(e){return e[e.Category=0]="Category",e[e.SubCategories=1]="SubCategories",e[e.Select=2]="Select",e}(Dn||{});const Ln={container:e=>({...e,color:"black"}),menuList:e=>({...e,maxHeight:175})};function Fn({onHide:e,anchorEl:t}){const[n,a]=(0,N.useState)(!1),[i,r]=(0,N.useState)(null),[o,l]=(0,N.useState)(null),[s,c]=(0,N.useState)(null),[d,u]=(0,N.useState)(""),[m,p]=(0,N.useState)(""),[g,h]=(0,N.useState)(""),f=(0,oe.v9)((e=>e.editorSettings.keymap)),v=(0,N.useRef)(null),{hasAiChat:b}=(0,ue.nT)("hasAiChat"),{environment:y}=(0,fe.J$)(),E=(0,un.i)(),w=(0,N.useMemo)((()=>{const e=[{id:"video_chat",label:"Issue with video chat",type:Dn.SubCategories,subCategories:["Can\u2019t establish a connection with the other person at all","Video/audio cuts out or lags more than 1 second","Video chat crashes browser"]},{id:"code_editing",label:"Issue with writing code/sync",type:Dn.SubCategories,subCategories:["Page loads, but I can\u2019t type anything in the editor","The code editor seems to be getting out of sync between participants","Connection lost/I stopped seeing the other person\u2019s changes"]},{id:"code_running",label:"Issue with running my code",type:Dn.SubCategories,subCategories:["Code does not run when someone clicks \u201crun\u201d button","I see the \u201cSomething went wrong\u201d error message when I try to run code"]},{id:"playback",label:"Issue with playback",type:Dn.SubCategories,subCategories:["No code is visible in playback mode","Interviewer notes don\u2019t appear with playback","Playback button doesn\u2019t work"]},{id:"drawing_mode",label:"Issue with drawing mode",type:Dn.SubCategories,subCategories:["I can\u2019t draw in the drawing pane","Drawing tools are not working correctly","I can\u2019t see other participants drawing"]},{id:"language",label:"Issue specific to a programming language",type:Dn.Select,selectOptions:Object.entries(window.CoderPad.LANGUAGES).map((([e,t])=>({value:e,label:t.display})))},{id:"2_0_room",label:"Issue with multi-file framework",type:Dn.Category},{id:"intellisense",label:"Issue with autocomplete/intellisense",type:Dn.Category}];return b&&e.push({id:"ai_chat",label:"Issue with AI chat",type:Dn.Category}),e.push({id:"other",label:"Something else",type:Dn.Category}),e}),[b]),k=(0,N.useMemo)((()=>Object.fromEntries(w.map((e=>[e.id,e])))),[w]),S=(null===i||void 0===i?void 0:i.type)===Dn.Category||(null===i||void 0===i?void 0:i.type)===Dn.SubCategories&&null!=o||(null===i||void 0===i?void 0:i.type)===Dn.Select&&null!=s,C=(0,N.useCallback)((e=>{const t=e[0];r(null!=t?k[t]:null),l(null),c(null)}),[k]),x=(0,N.useCallback)((e=>{c(null!==e&&void 0!==e?e:null)}),[]),_=(0,N.useCallback)((e=>u(e.target.value)),[]),T=(0,N.useCallback)((e=>{p(e.target.value)}),[]),I=(0,N.useCallback)((e=>{h(e),setImmediate((()=>{var e,t;return null===(e=v.current)||void 0===e?void 0:e.scrollTo(0,null===(t=v.current)||void 0===t?void 0:t.scrollHeight)}))}),[]),P=Boolean(t);return N.createElement(Zn.Z,{anchorEl:t,open:P,onClose:e,anchorOrigin:{vertical:"top",horizontal:"center"},transformOrigin:{vertical:"bottom",horizontal:"center"},MenuListProps:{sx:{paddingY:0}}},N.createElement("form",{className:"PadFeedback",onSubmit:async e=>{var t,n;if(e.preventDefault(),!S||""===d)return void I("Error: Can't submit an empty form. Please select an option and write a message.");const r={browser_info:`; Screen space: ${window.screen.width} x ${window.screen.height}; Screen space, Available: ${window.screen.availWidth} x ${window.screen.availHeight}; Browser window size: ${window.innerWidth} x ${window.innerHeight}; Device pixel ratio ${window.devicePixelRatio}`,category:i.label,option:null!==(t=null!==o&&void 0!==o?o:null===s||void 0===s?void 0:s.label)&&void 0!==t?t:"",text:d,key_bindings:{sublime:"Standard",vim:"Vim",emacs:"Emacs"}[f],email:m,environment:null!==(n=null===y||void 0===y?void 0:y.slug)&&void 0!==n?n:"unknown"},l=await E(`/${ge.Z.isSandbox?"sandbox":ge.Z.slug}/feedback`,{method:"post",body:new URLSearchParams(r)});l.ok?(a(!0),h(""),(0,Mn.Z)("Pad Feedback Sent")):I(`Unexpected error: ${l.statusText}`)}},N.createElement("div",{className:"header"},"Send Feedback ",N.createElement("span",null,"(only to CoderPad staff)")),n?N.createElement("p",null,"Feedback submitted. Thanks for helping us improve CoderPad!"):N.createElement("div",{className:"body",ref:v},N.createElement(On.UQ,{allowZeroExpanded:!0,onChange:C},w.map((({id:e,label:t,type:n,subCategories:a,selectOptions:r})=>N.createElement(On.Qd,{key:e,uuid:e},N.createElement(On.Ol,null,N.createElement(On.on,{className:ke()("accordion__button",{active:n===Dn.Category&&(null===i||void 0===i?void 0:i.id)===e})},t)),null===a||void 0===a?void 0:a.map(((e,t)=>N.createElement(On.Mt,{key:t,className:ke()("accordion__panel",{active:o===e}),onClick:()=>l(e)},e))),null!=r&&N.createElement(On.Mt,{className:"accordion__panel"},N.createElement(Ke.ZP,{escapeClearsValue:!1,value:s,onChange:x,options:r,placeholder:"Select...",styles:Ln,menuPlacement:"top"})))))),S&&N.createElement(N.Fragment,null,N.createElement("label",{htmlFor:"feedback-text"},"Additional details:"),N.createElement("textarea",{id:"feedback-text",name:"feedback-text",value:d,onChange:_})),!ge.Z.isLoggedIn&&N.createElement(N.Fragment,null,N.createElement("label",{htmlFor:"feedback-email"},"Email (optional):"),N.createElement("input",{type:"email",id:"feedback-email",name:"feedback-email",value:m,onChange:T})),N.createElement("p",null,g)),N.createElement("div",{className:"footer"},n?N.createElement(N.Fragment,null,N.createElement("p",null,g),N.createElement("a",{href:"#",className:"btn pad-outline-button",onClick:e},"Dismiss")):N.createElement(N.Fragment,null,N.createElement("a",{href:"#",className:"btn",onClick:e},"Cancel"),N.createElement("input",{className:"btn pad-outline-button",type:"submit",value:"Send"})))))}function An(){const{isPlayback:e}=(0,ue.nT)("isPlayback"),[t,n]=N.useState(null),a=(0,N.useCallback)((()=>{n(null),(0,Mn.Z)("Pad Feedback Dismissed")}),[]);return N.createElement(N.Fragment,null,N.createElement($e.Z,{placement:"top",arrow:!0,title:N.createElement(Ue.Z,{textAlign:"center"},"Report any bugs or pad issues to the CoderPad team")},N.createElement("span",null,N.createElement(an,{onClick:e=>{n(e.currentTarget),(0,Mn.Z)("Pad Feedback Opened")},iconOnly:e,startIcon:N.createElement(Gt.x2,{sx:{width:20,height:20}})},N.createElement(Ue.Z,{sx:{display:e?"none":{xs:"none",lg:"initial"}}},"Feedback")))),N.createElement(Fn,{anchorEl:t,onHide:a,"data-testid":"pad-feedback-form"}))}var Rn,Nn,jn=n(59301),qn=n(67720);const Bn=["title","titleId"];function zn(){return zn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},zn.apply(this,arguments)}function $n(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}const Hn=(e,t)=>{let{title:n,titleId:a}=e,i=$n(e,Bn);return N.createElement("svg",zn({xmlns:"http://www.w3.org/2000/svg",width:18,height:24,fill:"none",viewBox:"0 0 18 24",ref:t,"aria-labelledby":a},i),n?N.createElement("title",{id:a},n):null,Rn||(Rn=N.createElement("path",{fill:"#F90",d:"M4.766 9.603 4.76 6.377a4.03 4.03 0 0 1 4.023-4.028 4.03 4.03 0 0 1 4.026 4.023l.006 3.226zm11.045-.005h-.649l-.003-3.226C15.156 2.856 12.297-.003 8.783 0S2.408 2.862 2.41 6.377l.005 3.226h-.23A2.19 2.19 0 0 0 0 11.795V21.4a2.19 2.19 0 0 0 2.19 2.189l13.625-.008A2.186 2.186 0 0 0 18 21.39v-9.607a2.19 2.19 0 0 0-2.19-2.186"})),Nn||(Nn=N.createElement("path",{fill:"#fff",d:"m10.515 16.734 2.683-2.683a1.07 1.07 0 0 0-1.513-1.513L9.002 15.22 6.32 12.539a1.07 1.07 0 1 0-1.513 1.513l2.683 2.683-2.684 2.683a1.07 1.07 0 0 0 1.513 1.513l2.683-2.683 2.683 2.683a1.07 1.07 0 1 0 1.513-1.513z"})))},Un=(0,N.forwardRef)(Hn);var Qn=n.p+"static/media/Locked.d0eb1eca.svg",Vn=n(19755);function Wn(e,t,n){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:String(a))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Gn extends N.Component{constructor(e){super(e),Wn(this,"_getTooltipText",(()=>this.props.isSandboxShowcaseInterviewer?N.createElement("div",null,N.createElement("div",{className:"SandboxTips-content"},N.createElement("p",null,N.createElement("b",null,"Pad Title")),"Name your pads for easy reference. A best practice includes identifying the candidate, interviewer and role."),N.createElement("div",{className:"SandboxTips-lock"},N.createElement("img",{src:Qn,className:"LockIcon",alt:"Lock Icon"}),N.createElement("i",null,"Available with free account"))):"Edit this pad's (private) title")),Wn(this,"handleChange",(e=>{let t=e.target.value;t?this.state.willSetToDefaultTitleWhenBlurred&&this.setState({willSetToDefaultTitleWhenBlurred:!1}):(t=this._defaultTitle,this.setState({willSetToDefaultTitleWhenBlurred:!0})),Vn(this._el).trigger("autogrow"),this.props.onChange(t)})),Wn(this,"handleBlur",(()=>{this.state.willSetToDefaultTitleWhenBlurred&&this.setState({willSetToDefaultTitleWhenBlurred:!1},(()=>{Vn(this._el).trigger("autogrow")}))})),this.state={willSetToDefaultTitleWhenBlurred:!1}}get _defaultTitle(){return`Untitled Pad - ${ge.Z.slug}`}componentDidMount(){Vn(this._el).inputAutogrow({minWidth:20,trailingSpace:10})}componentWillUnmount(){Vn(this._el).tooltip("destroy")}render(){let e=this.props.value;return e===this._defaultTitle&&this.state.willSetToDefaultTitleWhenBlurred&&(e=""),N.createElement($e.Z,{placement:"top",arrow:!0,title:N.createElement(Ue.Z,{textAlign:"center"},this._getTooltipText())},N.createElement("input",{autoFocus:window.openedFromFork,className:"TitlePrompt",onBlur:this.handleBlur,onChange:this.handleChange,ref:e=>this._el=e,value:e,style:{maxWidth:200},"data-testid":"pad-title-prompt"}))}}const Yn=(0,oe.$j)((function(e){return{value:e.padSettings.title,isSandboxShowcaseInterviewer:(0,Ve.TX)(e)}}),{onChange:e=>({type:"pad_setting_changed",key:"title",value:e})})(Gn);var Kn=Yn;var Jn=({footerRef:e,children:t})=>{const{isOwner:n,isSandbox:a}=(0,ue.nT)("invisible","isOwner","hasEnvironments","isSandbox"),i=(0,oe.v9)(Ve.TX),r=(0,Xt.Z)((e=>e.breakpoints.down("md"))),o=(0,Xt.Z)((e=>e.breakpoints.down("sm"))),[l,s]=N.useState(null),c=Boolean(l),d=!a&&n||i,u=(0,N.useCallback)((()=>{s(null)}),[]);return N.createElement(Vt.Z,{direction:"row",spacing:1,alignItems:"center"},(d?r:o)?N.createElement(N.Fragment,null,N.createElement(Jt.Z,{"aria-label":"more",id:"long-button","data-testid":"long-button","aria-controls":c?"long-menu":void 0,"aria-expanded":c?"true":void 0,"aria-haspopup":"true",onClick:t=>{s(e.current)},sx:{position:"sticky",left:0}},N.createElement(jn.Z,{sx:{width:20,height:20}})),N.createElement(Zn.Z,{id:"long-menu",MenuListProps:{"aria-labelledby":"long-button"},PaperProps:{sx:{background:e=>e.palette.footer.backgroundColor,boxShadow:"none"}},anchorEl:l,open:c,onClose:u,anchorOrigin:{vertical:-4,horizontal:"right"},transformOrigin:{vertical:"bottom",horizontal:"right"}},N.createElement(Vt.Z,{direction:"row",spacing:1,alignItems:"center",mx:2.5},d&&N.createElement(Kn,null),o?N.createElement(N.Fragment,null,d&&N.createElement(qn.Z,{orientation:"vertical",flexItem:!0}),t):null))):N.createElement(N.Fragment,null,d?N.createElement(Kn,null):null),o?null:N.Children.map(t,(e=>e)))},Xn=n(50594),ea=n(54776),ta=n(23926),na=n(22190);const aa=(0,N.memo)((e=>{const{children:t,direction:n="right",isOpen:a,onClose:i,sx:r={},allowClickAway:o}=e,l=(0,N.useCallback)((()=>{o&&i()}),[o,i]);return N.createElement(ea.Z,{direction:n,in:a,mountOnEnter:!0,unmountOnExit:!0},N.createElement(M.Z,{sx:{display:"flex",flexDirection:"column",flexShrink:1,maxWidth:408,overflow:"hidden",padding:.5,width:"100vw",zIndex:0,...r}},N.createElement(M.Z,{sx:{backgroundColor:e=>"dark"===e.palette.mode?e.palette.background[500]:e.palette.background.paper,borderRadius:1,boxShadow:e=>e.shadows[2],display:"flex",flexDirection:"column",flexShrink:1,marginTop:20,maxHeight:e=>`calc(100vh - ${e.spacing(20)})`,position:"relative",zIndex:2}},N.createElement(Jt.Z,{"data-testid":"PadSlidingPanelCloseButton",onClick:i,size:"small",sx:{position:"absolute",right:4,top:4}},N.createElement(Xn.Z,null)),N.createElement(na.p,{sx:{overflowY:"auto",paddingY:3}},N.createElement(ta.d,{onClickAway:l},t)))))}));var ia=n(94659),ra=n(83919),oa=n(49570);function la(){return la=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},la.apply(this,arguments)}const sa=(0,N.memo)((e=>{const{isOpen:t}=e,{track:n}=(0,Wt.z$)(),a=(0,oe.I0)(),{control:i,errors:r,handleSubmit:o,reset:l}=(0,ra.cI)({defaultValues:{email:""}}),{slug:s}=(0,ue.nT)("slug"),{padEmailInviteSend:c,status:d}=function(){const[e,{data:t,error:n,loading:a}]=(0,O.useMutation)(sn),i=(0,N.useCallback)((t=>e({variables:{input:t},context:{source:"usePadEmailInviteSend.ts"}})),[e]),r=(0,N.useMemo)((()=>{var e,i,r;return a?se.V_():null!=n?se.vU(n.message||ln.K.padInvitesEmailSendError):null!==t&&void 0!==t&&null!==(e=t.padEmailInviteSend)&&void 0!==e&&null!==(i=e.errors)&&void 0!==i&&i.length?se.vU(t.padEmailInviteSend.errors[0].message):null!==t&&void 0!==t&&t.padEmailInviteSend?se.Vp((null===t||void 0===t||null===(r=t.padEmailInviteSend)||void 0===r?void 0:r.message)||ln.K.padInvitesEmailSendSuccess):se.nn()}),[t,n,a]);return(0,N.useMemo)((()=>({padEmailInviteSend:i,status:r})),[i,r])}(),u=(0,N.useCallback)((async({email:e})=>{try{await c({email:e,padSlug:s}),n(ln.j.PadInvitesEmailInviteSent),a((0,fn.GZ)({autoDismissMs:5e3,key:"pad-invites-email-send-success",message:ln.K.padInvitesEmailSendSuccess,variant:"success"})),l()}catch(t){console.error(t),a((0,fn.GZ)({autoDismissMs:5e3,key:"pad-invites-email-send-error",message:ln.K.padInvitesEmailSendError,variant:"error"}))}}),[a,c,l,s,n]);return(0,N.useEffect)((()=>{t&&l()}),[t,l]),N.createElement(M.Z,{px:3},N.createElement(Vt.Z,{spacing:2},N.createElement(Ue.Z,{color:"inherit",component:"h1",sx:{alignSelf:"center",fontSize:"1.125rem",fontWeight:500}},ln.K.padInvitesEmailTitle),N.createElement(Ue.Z,{color:"secondary",component:"p"},ln.K.padInvitesEmailDescription),N.createElement(Vt.Z,{alignItems:"flex-start",component:"form",direction:"row",onSubmit:o(u),spacing:1},N.createElement(ra.Qr,{control:i,name:"email",render:e=>N.createElement(ia.Z,la({},e,{error:!(null===r||void 0===r||!r.email),helperText:null!==r&&void 0!==r&&r.email?ln.K.padInvitesEmailInvalidEmail:"",label:ln.K.padInvitesEmailFieldLabel,size:"small",sx:{flexGrow:1}})),rules:{required:!0,validate:Wt.oH}}),N.createElement(oa.f,{disableElevation:!0,disabled:(0,se.TH)(d),isLoading:(0,se.TH)(d),type:"submit",variant:"contained"},ln.K.padInvitesEmailSendButtonLabel))))}));var ca=n(96406),da=n(32580),ua=n(80270);const ma=(0,N.memo)((()=>{const[e,t]=(0,N.useState)(!1),{takeHome:n}=(0,oe.v9)(Ve.f6),a=(0,Wt.zY)(),i=(0,N.useMemo)((()=>`${a.location.protocol}//${a.location.host.replace("app.","")}${a.location.pathname}`),[a]),r=(0,N.useCallback)((()=>{var e;null===(e=a.navigator.clipboard)||void 0===e||e.writeText(i),t(!0),setTimeout((()=>{t(!1)}),1e3)}),[i,a]);return N.createElement(M.Z,{sx:{paddingX:3}},N.createElement(Vt.Z,{spacing:2},N.createElement(Ue.Z,{color:"inherit",component:"h1",sx:{alignSelf:"center",fontSize:"1.125rem",fontWeight:500}},ln.K.padInvitesPermalinkTitle),N.createElement(Ue.Z,{color:"secondary",component:"p",dangerouslySetInnerHTML:{__html:ln.K.padInvitesPermalinkDescription(n)}}),N.createElement(da.Z,{endAdornment:N.createElement(ua.Z,{position:"end"},N.createElement($e.Z,{placement:"top-end",title:e?ln.K.padInvitesPermalinkCopyButtonTitleCopying:ln.K.padInvitesPermalinkCopyButtonTitleDefault},N.createElement(Jt.Z,{"aria-label":ln.K.padInvitesPermalinkCopyButtonTitleDefault,edge:"end",onClick:r},N.createElement(ca.Z,{fontSize:"small"})))),inputProps:{readOnly:!0},size:"small",sx:{flexGrow:1},value:i})))})),pa=(0,N.memo)((()=>{const{slug:e}=(0,ue.nT)("slug"),{padShortlinkGenerate:t,status:n}=function(){const[e,{data:t,error:n,loading:a}]=(0,O.useMutation)(cn),i=(0,N.useCallback)((async t=>e({variables:{input:t},context:{source:"usePadShortlinkGenerate.ts"}})),[e]),r=(0,N.useMemo)((()=>{var e,i,r;return a?se.V_():null!=n?se.vU(n.message||ln.K.padInvitesShortlinkGenerateError):null!==t&&void 0!==t&&null!==(e=t.padShortlinkGenerate)&&void 0!==e&&null!==(i=e.errors)&&void 0!==i&&i.length?se.vU(t.padShortlinkGenerate.errors[0].message):null!==t&&void 0!==t&&t.padShortlinkGenerate?se.Vp((null===t||void 0===t||null===(r=t.padShortlinkGenerate)||void 0===r?void 0:r.message)||ln.K.padInvitesShortlinkGenerateSuccess):se.nn()}),[t,n,a]);return(0,N.useMemo)((()=>({padShortlinkGenerate:i,status:r})),[i,r])}(),[a,i]=(0,N.useState)(""),[r,o]=(0,N.useState)(!1),l=(0,Wt.zY)(),s=(0,N.useMemo)((()=>{const[e,t]=l.CoderPad.SHORTLINK_URL.split("//");return`${e}//${t}/${a}`}),[a,l]),c=(0,N.useCallback)((()=>{var e;null===(e=l.navigator.clipboard)||void 0===e||e.writeText(s),o(!0),setTimeout((()=>{o(!1)}),1e3)}),[s,l]),d=(0,N.useCallback)((async()=>{try{var n;const{data:a}=await t({padSlug:e}),r=null===a||void 0===a||null===(n=a.padShortlinkGenerate)||void 0===n?void 0:n.shortlink;if(!r)throw new Error(ln.K.padInvitesShortlinkGenerateError);i(r)}catch(a){console.error(a)}}),[t,e]);return N.createElement(M.Z,{sx:{paddingX:3}},N.createElement(Vt.Z,{spacing:2},N.createElement(Ue.Z,{color:"inherit",component:"h1",sx:{alignSelf:"center",fontSize:"1.125rem",fontWeight:500}},ln.K.padInvitesShortlinkTitle),N.createElement(Ue.Z,{color:"secondary",component:"p",dangerouslySetInnerHTML:{__html:ln.K.padInvitesShortlinkDescription}}),N.createElement(Vt.Z,{alignItems:"flex-start",direction:"row",spacing:1},!a&&N.createElement(oa.f,{disableElevation:!0,disabled:(0,se.TH)(n),isLoading:(0,se.TH)(n),onClick:d,sx:{marginX:"auto"},variant:"contained"},ln.K.padInvitesShortlinkGenerateButtonLabel),!!a&&N.createElement(da.Z,{endAdornment:N.createElement(ua.Z,{position:"end"},N.createElement($e.Z,{placement:"top-end",title:r?ln.K.padInvitesShortlinkCopyButtonTitleCopying:ln.K.padInvitesShortlinkCopyButtonTitleDefault},N.createElement(Jt.Z,{"aria-label":ln.K.padInvitesShortlinkCopyButtonTitleDefault,edge:"end",onClick:c},N.createElement(ca.Z,{fontSize:"small"})))),inputProps:{readOnly:!0},size:"small",sx:{flexGrow:1},value:s}))))}));function ga(){return ga=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ga.apply(this,arguments)}const ha=(0,N.memo)((e=>{const{isOpen:t,...n}=e,{takeHome:a}=(0,oe.v9)(Ve.f6);return N.createElement(aa,ga({direction:"up",isOpen:t},n),N.createElement(Vt.Z,{divider:N.createElement(qn.Z,null,"or"),spacing:3},!a&&N.createElement(sa,{isOpen:t}),!a&&N.createElement(pa,null),N.createElement(ma,null)))}));function fa(){const[e,t]=(0,N.useState)(!1),{track:n}=(0,Wt.z$)(),a=(0,N.useCallback)((()=>{t(!e),e||n("Invite Modal Opened")}),[e,n]),i=(0,N.useCallback)((()=>{t(!1)}),[]);return N.createElement("div",{className:ke()({InviteButton:!0})},N.createElement($e.Z,{placement:"top",arrow:!0,title:N.createElement(Ue.Z,{textAlign:"center"},ln.K.padInvitesButtonTooltip)},N.createElement("span",null,N.createElement(an,{onClick:a,startIcon:N.createElement(Gt.Ko,{sx:{width:20,height:20}})},N.createElement(Ue.Z,{sx:{display:{xs:"none",lg:"initial"}}},ln.K.padInvitesButtonLabel)))),N.createElement(M.Z,{sx:{bottom:e=>e.spacing(6),position:"absolute",left:0,zIndex:2}},N.createElement(ha,{isOpen:e,onClose:i})))}var va=n(19896);function ba(e={},t){if("editor_setting_changed"===t.type){const{key:n,value:a}=t,i=c().set({},n,a);return c().merge({},e,i)}return e}function ya(e={},t){switch(t.type){case"pad_take_home_toggled":{const n=t.value;let a={takeHome:n};return n&&(a.isPublic=!0,a.takeHomeTimeLimit="number"===typeof e.takeHomeTimeLimit?e.takeHomeTimeLimit:120),{...e,...a}}case"focus_time_toggled":return{...e,focusTimeEnabled:t.value};case"focus_time_started_at":return{...e,focusTimeStartedAt:t.value};case"pad_setting_changed":return{...e,[t.key]:t.value,lastPadSettingChangeWasRemote:t.remote};case"environment_question_changed":case"question_selected_by_local_user":return{...e,language:t.language,questionId:t.questionId,questionContents:t.contents,questionLanguage:t.language,customDatabaseId:t.customDatabaseId,customDatabaseLanguage:t.customDatabaseLanguage,customDatabaseSchema:t.customDatabaseSchema,customDatabaseSchemaJson:t.customDatabaseSchemaJson,projectTemplateSlug:t.projectTemplateSlug,projectTemplateVersion:t.projectTemplateVersion,environmentSlug:t.environmentSlug,spreadsheet:t.spreadsheet};case"package_changed":return{...e,packageName:t.packageName};case"service_status":return{...e,serviceStatus:t.status};case"activate_environment":return{...e,environmentId:t.environmentId}}return e}function Ea(e,t,n={}){return{type:"pad_setting_changed",key:e,value:t,...n}}const wa=(0,N.memo)((e=>{const{buttonLabel:t,label:n,onClick:a}=e;return N.createElement(Vt.Z,{alignItems:"center",justifyContent:"space-between",direction:"row",spacing:2},N.createElement(Ue.Z,null,n),N.createElement(He.Z,{color:"secondary",onClick:a,size:"small",variant:"outlined"},t))}));var ka=n(78006);const Sa=(0,N.memo)((e=>{const{buttonLabel:t,href:n,label:a}=e;return N.createElement(Vt.Z,{alignItems:"center",justifyContent:"space-between",direction:"row",spacing:2},N.createElement(Ue.Z,null,a),N.createElement(M.Z,{component:"a",href:n,rel:"noreferrer",target:"_blank"},N.createElement(He.Z,{color:"secondary",endIcon:N.createElement(ka.Z,{sx:{height:14,width:14}}),size:"small",variant:"outlined"},t)))}));var Ca=n(75503),xa=n(56036);const _a=(0,N.memo)((e=>{const{label:t,onValueChange:n,options:a,value:i}=e,r=(0,N.useCallback)((e=>{const t=e.target.value;t!==i&&n(t)}),[n,i]);return N.createElement(Vt.Z,{alignItems:"center",justifyContent:"space-between",direction:"row",spacing:2},N.createElement(Ue.Z,null,t),N.createElement(xa.Z,{IconComponent:Ca.Z,inputProps:{"data-testid":`PadSettingsSelect-${(0,s.camelCase)(t)}`},native:!0,onChange:r,size:"small",sx:{"& .MuiSelect-select.MuiSelect-outlined":{backgroundColor:e=>(e.palette.mode,e.palette.background[400]),paddingRight:5}},value:i},a.map((({label:e,value:t})=>N.createElement("option",{key:t,value:t},e)))))}));var Ta=n(87153);const Ia=[{description:"Add multiple cursors",keys:{mac:["\u2325 + Click"],windows:["Alt + Click"]}},{description:"Autocomplete code",keys:{mac:["Ctrl + Space"],windows:["Ctrl + Space"]}},{description:"Duplicate line above",keys:{mac:["\u2325 + Shift + \u2191"],windows:["Alt + Shift + \u2191"]}},{description:"Duplicate line below",keys:{mac:["\u2325 + Shift + \u2193"],windows:["Alt + Shift + \u2193"]}},{description:"Move line down",keys:{mac:["\u2325 + \u2193"],windows:["Alt + \u2193"]}},{description:"Move line up",keys:{mac:["\u2325 + \u2191"],windows:["Alt + \u2191"]}},{description:"Run code",keys:{mac:["\u2318 + Enter","\u2318 + S"],windows:["Ctrl + Enter","Ctrl + S"]}},{description:"Run only selected code",keys:{mac:["\u2318 + Shift + Enter"],windows:["Ctrl + Shift + Enter"]}},{description:"Select entire line",keys:{mac:["\u2318 + L"],windows:["Ctrl + L"]}}],Pa=(0,N.memo)((e=>{const{isOpen:t,onSettingsClose:n,onShortcutsClose:a}=e,{isMac:i}=(0,d.O7)(),r=(0,N.useMemo)((()=>i?"mac":"windows"),[i]);return N.createElement(M.Z,{component:ea.Z,direction:"left",in:t,sx:{backgroundColor:e=>"dark"===e.palette.mode?e.palette.background[500]:e.palette.background.paper,borderRadius:1,bottom:0,left:0,position:"absolute",right:0,top:0}},N.createElement(na.p,{sx:{overflowY:"auto",paddingY:3}},N.createElement(Vt.Z,{spacing:4},N.createElement(M.Z,{sx:{display:"flex",paddingX:2}},N.createElement(Vt.Z,{alignItems:"center",direction:"row",spacing:2,sx:{flex:1}},N.createElement(Jt.Z,{"data-testid":"PadSettingShortcutsBackButton",onClick:a,size:"small"},N.createElement(Ta.Z,null)),N.createElement(M.Z,{sx:{display:"flex",flex:1,justifyContent:"center"}},N.createElement(Ue.Z,{color:"inherit",component:"h1",sx:{fontSize:"1.125rem",fontWeight:500,marginLeft:-7}},ln.K.padSettingsShortcutsTitle))),N.createElement(Jt.Z,{"data-testid":"PadSettingShortcutsCloseButton",onClick:n,size:"small",sx:{position:"absolute",right:4,top:4}},N.createElement(Xn.Z,null))),N.createElement(M.Z,{sx:{paddingX:3}},N.createElement(Vt.Z,{spacing:2},Ia.map((e=>N.createElement(Vt.Z,{alignItems:"center",direction:"row",key:e.description,spacing:1},N.createElement(Ue.Z,{sx:{flex:1}},e.description),N.createElement(Vt.Z,{alignItems:"center",direction:"row",divider:N.createElement(Ue.Z,null,"or"),spacing:1},e.keys[r].map((e=>N.createElement(Ue.Z,{key:e,sx:{backgroundColor:e=>"dark"===e.palette.mode?e.palette.background[900]:"rgba(0, 0, 0, 0.1)",borderRadius:2,paddingX:1,paddingY:.5}},e))))))))))))}));var Za,Oa=n(95733),Ma=n(91810);const Da=["title","titleId"];function La(){return La=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},La.apply(this,arguments)}function Fa(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}const Aa=(e,t)=>{let{title:n,titleId:a}=e,i=Fa(e,Da);return N.createElement("svg",La({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 16 17",ref:t,"aria-labelledby":a},i),n?N.createElement("title",{id:a},n):null,Za||(Za=N.createElement("g",{fillRule:"evenodd",clipRule:"evenodd"},N.createElement("path",{d:"M7.94 2.88a5.62 5.62 0 1 0 0 11.24 5.62 5.62 0 0 0 0-11.24M1.32 8.5a6.62 6.62 0 1 1 13.25 0 6.62 6.62 0 0 1-13.25 0"}),N.createElement("path",{d:"M7.94 4.73c.28 0 .5.22.5.5v.01a.5.5 0 1 1-1 0v-.01c0-.28.23-.5.5-.5m0 2.45c.28 0 .5.22.5.5v4a.5.5 0 0 1-1 0v-4c0-.28.23-.5.5-.5"}))))},Ra=(0,N.forwardRef)(Aa);n.p;function Na(e){const{infoTooltip:t,label:n,onValueChange:a,options:i=[],value:r}=e,o=(0,N.useCallback)((e=>{const t=parseInt(e.target.value),n=i[t].value;n!==r&&a(n)}),[i,a,r]),l=(0,N.useMemo)((()=>i.findIndex((e=>e.value===r))),[i,r]);return N.createElement(Vt.Z,{alignItems:"center",justifyContent:"space-between",direction:"row",spacing:2},N.createElement(Vt.Z,{alignItems:"center",direction:"row",spacing:1},N.createElement(Ue.Z,null,n),!!t&&N.createElement($e.Z,{title:t},N.createElement(En.Z,{fontSize:"small",sx:{"& svg":{fill:e=>e.palette.secondary.main}}},N.createElement(Ra,null)))),N.createElement(Oa.Z,{color:"primary",exclusive:!0,onChange:o,value:l},i.map(((e,t)=>N.createElement(Ma.Z,{"data-testid":`PadSettingsToggle-${(0,s.camelCase)(n)}-Option--${e.label}`,key:t,size:"small",sx:{fontSize:"0.875rem",height:32},value:t},e.label)))))}const ja=(0,N.memo)(Na);function qa(){return qa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},qa.apply(this,arguments)}const Ba=[12,13,14,15,16,17,18],za=[2,4,8],$a=(0,N.memo)((e=>{const{isOpen:t,onClose:n,...a}=e,i=(0,oe.I0)(),{disablePadSettings:r,intellisenseDisabledByOrganization:o,isDemoPad:l,isLoggedIn:s,isOwner:c,isPlayback:d,slug:u,uiType:m}=(0,ue.nT)("disablePadSettings","intellisenseDisabledByOrganization","isDemoPad","isLoggedIn","isOwner","isPlayback","slug","uiType"),{autoCloseBrackets:p,autocomplete:g,darkColorScheme:h,fontSize:f,keymap:v,tabSizes:b}=(0,oe.v9)(Ve.Mg),{execEnabled:y,isPublic:E,language:w,projectTemplateSlug:k,takeHome:S}=(0,oe.v9)(Ve.f6),[C,x]=N.useState(!1),_=(0,Wt.zY)(),T=(0,N.useCallback)((e=>t=>{i(function(e,t){return{type:"editor_setting_changed",key:e,value:t}}(e,t))}),[i]),I=(0,N.useCallback)((e=>t=>{i(Ea(e,t))}),[i]),P=(0,N.useCallback)((()=>{x(!1)}),[]),Z=(0,N.useCallback)((()=>{x(!0)}),[]),O=(0,N.useMemo)((()=>Object.keys(_.CoderPad.LANGUAGES).flatMap((e=>(0,Wt.rT)(e)?[_.CoderPad.LANGUAGES[e].display]:[])).sort()),[_]),M="drawing_only"===m,D=(0,N.useMemo)((()=>!M&&!k&&!S),[M,k,S]),L=(0,N.useMemo)((()=>!d&&!M&&c),[M,c,d]),F=(0,N.useMemo)((()=>c&&!l&&!S),[l,c,S]),A=null!==w&&void 0!==w?w:k,R=(0,N.useMemo)((()=>(null===b||void 0===b?void 0:b[A])||2),[b,A]);return(0,N.useEffect)((()=>{!t&&C&&x(!1)}),[t,C]),N.createElement(aa,qa({isOpen:t,onClose:n},a),N.createElement(va.Z,null,N.createElement(Vt.Z,{divider:N.createElement(qn.Z,null),spacing:3},N.createElement(Vt.Z,{spacing:4},N.createElement(Ue.Z,{color:"inherit",component:"h1",sx:{alignSelf:"center",fontSize:"1.125rem",fontWeight:500}},ln.K.padSettingsEditorSettingsTitle),N.createElement(va.Z,{sx:{paddingX:4}},N.createElement(Vt.Z,{spacing:3},N.createElement(ja,{label:ln.K.padSettingsEditorSettingsThemeLabel,onValueChange:T("darkColorScheme"),options:[{label:ln.K.padSettingsEditorSettingsThemeOptionLabelOn,value:!0},{label:ln.K.padSettingsEditorSettingsThemeOptionLabelOff,value:!1}],value:h}),!M&&N.createElement(N.Fragment,null,N.createElement(ja,{label:ln.K.padSettingsEditorSettingsKeyBindingsLabel,onValueChange:T("keymap"),options:[{label:ln.K.padSettingsEditorSettingsKeyBindingsOptionLabelStandard,value:"sublime"},{label:ln.K.padSettingsEditorSettingsKeyBindingsOptionLabelVim,value:"vim"},{label:ln.K.padSettingsEditorSettingsKeyBindingsOptionLabelEmacs,value:"emacs"}],value:v}),N.createElement(_a,{label:ln.K.padSettingsEditorSettingsFontSizeLabel,onValueChange:T("fontSize"),options:Ba.map((e=>({label:ln.K.padSettingsEditorSettingsFontSizeOptionLabel(e),value:e}))),value:f}),N.createElement(_a,{label:ln.K.padSettingsEditorSettingsTabSpacingLabel,onValueChange:T(`tabSizes.${A}`),options:za.map((e=>({label:`${e}`,value:e}))),value:R}),!o&&N.createElement(ja,{infoTooltip:ln.K.padSettingsEditorSettingsIntellisenseTooltip(O),label:ln.K.padSettingsEditorSettingsIntellisenseLabel,onValueChange:T("autocomplete"),options:[{label:ln.K.padSettingsEditorSettingsIntellisenseOptionLabelOn,value:!0},{label:ln.K.padSettingsEditorSettingsIntellisenseOptionLabelOff,value:!1}],value:g}),N.createElement(ja,{label:ln.K.padSettingsEditorSettingsAutoCloseBracketsLabel,onValueChange:T("autoCloseBrackets"),options:[{label:ln.K.padSettingsEditorSettingsAutoCloseBracketsOptionLabelOn,value:!0},{label:ln.K.padSettingsEditorSettingsAutoCloseBracketsOptionLabelOff,value:!1}],value:p}),N.createElement(wa,{buttonLabel:ln.K.padSettingsEditorSettingsShortcutsButtonLabel,label:ln.K.padSettingsEditorSettingsShortcutsLabel,onClick:Z}))))),!r&&N.createElement(Vt.Z,{spacing:4},N.createElement(Ue.Z,{color:"inherit",component:"h1",sx:{alignSelf:"center",fontSize:"1.125rem",fontWeight:500}},ln.K.padSettingsPadSettingsTitle),N.createElement(va.Z,{sx:{paddingX:4}},N.createElement(Vt.Z,{spacing:3},D&&N.createElement(ja,{label:ln.K.padSettingsPadSettingsCodeExecutionLabel,onValueChange:I("execEnabled"),options:[{label:ln.K.padSettingsPadSettingsCodeExecutionOptionLabelOn,value:!0},{label:ln.K.padSettingsPadSettingsCodeExecutionOptionLabelOff,value:!1}],value:y}),F&&N.createElement(ja,{label:ln.K.padSettingsPadSettingsWaitingRoomLabel,onValueChange:I("isPublic"),options:[{label:ln.K.padSettingsPadSettingsWaitingRoomOptionLabelOn,value:!1},{label:ln.K.padSettingsPadSettingsWaitingRoomOptionLabelOff,value:!0}],value:E}),L&&N.createElement(Sa,{buttonLabel:ln.K.padSettingsPadSettingsPlaybackHistoryButtonLabel,href:`/${u}/playback`,label:ln.K.padSettingsPadSettingsPlaybackHistoryLabel}),s&&N.createElement(Sa,{buttonLabel:ln.K.padSettingsPadSettingsAccountSettingsButtonLabel,href:"/dashboard/settings",label:ln.K.padSettingsPadSettingsAccountSettingsLabel}))))),N.createElement(Pa,{isOpen:C,onSettingsClose:n,onShortcutsClose:P})))})),Ha=(0,wn.Z)({tooltip:{maxWidth:"200px",fontWeight:400,borderRadius:"6px",padding:"12px"},tooltipTitle:{fontSize:"1.1em",fontWeight:"bold"},buttonContainer:{padding:"9px",margin:"3px"}}),Ua=e=>{const{onClick:t,opensFrom:n="left"}=e,a=Ha();return N.createElement($e.Z,{arrow:!0,classes:{tooltip:a.tooltip},placement:"bottomRight"===n?"top":"right",title:ln.K.padSettingsButtonTooltip},N.createElement(Jt.Z,{className:a.buttonContainer,id:"padSettingsBtn",onClick:t,size:"large"},N.createElement(Gt.Zr,{sx:{color:e=>e.palette.text.primary,"\u0192ill":"currentColor"}})))};var Qa=n(19755);function Va(e,t,n){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:String(a))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Wa extends N.Component{constructor(e){super(e),Va(this,"timerLoop",(()=>{const e=this.props.openedAt||this.props.startedAt?parseInt(((new Date).getTime()/1e3-(this.props.openedAt||this.props.startedAt)+this.props.serverTimeOffset)/60):0;this.setState({timeElapsedMin:e}),this.timerInterval=setTimeout(this.timerLoop,1e4)})),this._timerRef=N.createRef(),this.timerInterval=null,this.state={timeElapsedMin:0}}componentDidMount(){const{openedAt:e,startedAt:t,takeHomeTimeLimit:n}=this.props,a=n?`This is the length of time since you started. You have ${n} minutes total to complete this take-home.`:"This is the length of time since you started. You have no time limit for this take-home.";Qa(this._timerRef.current).tooltip({trigger:"hover manual",placement:"top",title:a}),(e||t)&&this.timerLoop()}componentWillUnmount(){this.timerInterval&&clearInterval(this.timerInterval)}componentDidUpdate(e){(this.props.openedAt||this.props.startedAt)===(e.openedAt||e.startedAt)||this.timerInterval||this.timerLoop()}render(){const e=this.state.timeElapsedMin;return N.createElement("div",{className:"TakeHomePanel",style:{whiteSpace:"nowrap"}},N.createElement("span",{className:"TakeHomePanel-timer",ref:this._timerRef},this.props.openedAt||this.props.startedAt||!window.padConfig.isOwner?N.createElement(N.Fragment,null,"Time elapsed: ",e," minute",0===e||e>1?"s":""," ",this.props.takeHomeTimeLimit?` (of ${this.props.takeHomeTimeLimit} minutes)`:""):""))}}var Ga=(0,oe.$j)((function(e){const{serverTimeOffset:t,takeHomeTimeLimit:n,openedAt:a,startedAt:i}=e.padSettings;return{serverTimeOffset:t,takeHomeTimeLimit:n,openedAt:a,startedAt:i}}))(Wa),Ya=n(19755);function Ka(){const[e,t]=(0,N.useState)(!1),{publicTakeHomeThreshold:n,takeHomeStarted:a,publicTakeHome:i,takeHomeOpened:r}=(0,oe.v9)(Ve.f6),o=(0,oe.v9)(Ve.bB),l=(0,oe.v9)(Ve.xc),s=l&&o>=n&&a,c=(0,N.useMemo)((()=>i?s?"End your session and submit code for review.":a?!l||o<n?`Please run your code and pass at least ${n} ${1===n?"test":"tests"} to submit.`:"":`Please wait for 5 minutes to elapse and pass at least ${n} ${1===n?"test":"tests"} to submit`:a?"End your session and submit code for review.":r?"Please enter or modify your code in the left hand editor panel, and take a few more minutes to review your solution before submitting.":"When finished, click here to save your solution."),[i,s,a,n,l,o]);return Ya("#take-home-submit-modal").on("hidden.bs.modal",(function(){t(!1)})),N.createElement($e.Z,{placement:"top",title:c,arrow:!0},N.createElement("span",null,N.createElement(He.Z,{size:"small",variant:"contained",onClick:()=>{t(!e),Ya("#take-home-submit-modal").modal("toggle"),(0,Mn.Z)("Take Home Submit Modal Opened")},color:"error",sx:{paddingX:2,whiteSpace:"nowrap"},disabled:i?!s:!a},"Submit Take-Home")))}function Ja(e){if(e){if(60===e)return"1 hour";{const t=parseInt(e/60);return 60*t===e?`${t} hours`:`${e} minutes`}}return""}var Xa=n(98445),ei=n.n(Xa);function ti(){const e=(0,oe.v9)(Ve.pK),t=(0,oe.v9)(Ve.W5),n=(0,ue.oB)("callingEnabled"),a=(0,oe.I0)(),i=(0,N.useMemo)((()=>t?N.createElement(Ue.Z,{textAlign:"center"},N.createElement("div",null,N.createElement("div",{className:"SandboxTips-content"},N.createElement("p",null,N.createElement("b",null,"Start Call")),"Start a video call with the other participants in the pad."),N.createElement("div",{className:"SandboxTips-lock"},N.createElement("img",{src:Qn,className:"LockIcon",alt:"Lock Icon"}),N.createElement("i",null,"Available with free account")))):N.createElement(Ue.Z,{textAlign:"center"},"Start a video call with the other participants in the pad.")),[t]);return n?"no_call"!==e?null:ei().isSupported||-1!==navigator.userAgent.indexOf("Chrome")?N.createElement(N.Fragment,null,N.createElement($e.Z,{placement:"top",arrow:!0,title:i},N.createElement("span",null,N.createElement(an,{onClick:t?()=>{}:()=>{a({type:"intent_to_start_call_expressed",_analytics:{name:"Call Setup",params:{from_invite:!1,from_reconnect:!1}}})},startIcon:N.createElement(Gt.z1,{sx:{width:20,height:20}})},N.createElement(Ue.Z,{sx:{display:{xs:"none",lg:"initial"}}},"Start Call"))))):N.createElement($e.Z,{placement:"top",arrow:!0,title:"Your browser doesn't support calling on CoderPad. We recommend latest versions of Firefox, Chrome, or Safari."},N.createElement("span",null,N.createElement(He.Z,{size:"small",disabled:!0,variant:"contained"},"Calling Unsupported"))):null}var ni=n(37645),ai=n(73718),ii=n(64680),ri=n(77750);function oi(){return oi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},oi.apply(this,arguments)}const li=({sectionTitle:e,contents:t,titleOverride:n,...a})=>N.createElement($e.Z,oi({},a,{arrow:!0,title:void 0!==n?n:N.createElement(M.Z,{sx:{textAlign:"center",margin:"-12px",overflow:"hidden"}},N.createElement(M.Z,{p:"6px 12px 0 12px"},N.createElement(M.Z,{component:"p",lineHeight:"0.6"},N.createElement("b",null,e)),t),N.createElement(M.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center",padding:"6px 4px",marginTop:"12px",backgroundColor:"#34495E",fontWeight:600}},N.createElement(Un,null),N.createElement(M.Z,{component:"i",ml:1},"Available with free account")))}));var si=n(19755);function ci(){return ci=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ci.apply(this,arguments)}const di=(0,Qt.ZP)(He.Z,{target:"e1wdoizn2"})({name:"1kntqy5",styles:"padding:3px 16px;margin-left:10px;line-height:1.5"}),ui=(0,Qt.ZP)(ni.Z,{target:"e1wdoizn1"})({name:"7yi49e",styles:"color:inherit;font-size:16px"}),mi=(0,Qt.ZP)(He.Z,{target:"e1wdoizn0"})((({theme:e})=>({position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500],padding:0,minWidth:"auto"})),""),pi=()=>{const e=N.useRef(null),t=(0,oe.v9)((e=>(0,Ve.l0)(e))),{isOwner:n,padStartedAt:a,slug:i}=(0,ue.nT)("isOwner","padStartedAt","slug"),[r,o]=(0,Wt._)(`nudge_shown_${i}`,!1),[l,s]=(0,N.useState)(null),[c,d]=(0,N.useState)(0),u=(0,Xt.Z)((e=>e.breakpoints.up("lg"))),[m,p]=(0,N.useState)(!0),g=(0,oe.v9)(Ve.W5),h=(0,N.useCallback)((()=>{p(!1),o(!0)}),[o]),f=(0,N.useMemo)((()=>t.filter((e=>e.isOnline&&!e.isOwner))),[t]);(0,N.useEffect)((()=>{f.length>0&&null===l&&s(Date.now())}),[f,l,s]),(0,N.useEffect)((()=>{if(null===l||!n)return;const e=setInterval((()=>{d((e=>e+6e4))}),6e4);return()=>{clearInterval(e),d(0)}}),[l,n]);const v=(0,N.useMemo)((()=>{const e=12e5;return 0!==a&&Date.now()-a>=e||null!==l&&c>=e}),[l,a,c]),b=(0,N.useMemo)((()=>!r&&n&&0===f.length&&v&&m),[r,n,f,v,m]),y=(0,N.useCallback)((()=>{si("#end-interview-modal").modal("show")}),[]);return N.createElement(N.Fragment,null,N.createElement(li,ci({sectionTitle:"End Interview",contents:"Ending interview locks the pad and enables playback which replays the code typed."},!g&&{titleOverride:""}),N.createElement("span",null,N.createElement(di,{ref:e,variant:"contained",color:"error",size:"small",onClick:y},u?"End Interview":"End"))),N.createElement(ai.Z,{open:b,anchorEl:e.current,placement:"top",sx:{zIndex:1,maxWidth:320},popperOptions:{modifiers:[{name:"offset",options:{offset:[4,14]}}]}},N.createElement(ii.Z,{"data-testid":"end-interview-nudge"},N.createElement(mi,{onClick:h,"data-testid":"end-interview-nudge-close"},N.createElement(Xn.Z,null)),N.createElement(ui,{variant:"h2"},"Have you finished your interview?"),N.createElement(ri.Z,null,N.createElement(Ue.Z,{variant:"body1"},"Click the ",N.createElement("b",null,"End Interview")," button below to lock the pad and activate interview playback")))))},gi=(0,Qt.ZP)("div",{target:"eeggmfz0"})((({theme:e,color:t})=>({position:"absolute",bottom:"100%",left:0,borderTopLeftRadius:4,borderTopRightRadius:4,background:t,color:"black",zIndex:1,padding:e.spacing(.5,1),fontSize:14})),"");var hi=n(33797),fi=n(32254);function vi(){return vi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},vi.apply(this,arguments)}const bi=({minWidth:e=20,maxWidth:t=200,trailingSpace:n=10,value:a="",...i})=>{const r=(0,N.useRef)(null),[o,l]=(0,N.useState)(e);(0,N.useEffect)((()=>{if(r.current){let i=s(String(a))+n;i<e?i=e:i>t&&(i=t),l(i)}}),[t,e,n,a]);const s=e=>{const t=document.createElement("canvas"),n=t.getContext("2d");if(n){n.font=getComputedStyle(r.current).getPropertyValue("font");return n.measureText(e).width}return t.remove(),0};return N.createElement("input",vi({},i,{ref:r,style:{width:`${o}px`},value:a}))},yi=(0,Qt.ZP)("div",{target:"e1y22m0u7"})((()=>({flex:"1 1 auto",display:"flex",alignItems:"center",overflow:"hidden"})),""),Ei=(0,Qt.ZP)("span",{target:"e1y22m0u6"})((({theme:e,color:t})=>({display:"block",width:e.spacing(1),height:e.spacing(1),borderRadius:"50%",backgroundColor:t,flex:"0 0 auto"})),""),wi=(0,Qt.ZP)(He.Z,{target:"e1y22m0u5"})((()=>({whiteSpace:"nowrap",textOverflow:"ellipsis",textTransform:"none",overflow:"hidden",flex:"0 1 auto",minWidth:0,"& .username":{flex:"0 1 auto",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}})),""),ki=(0,Qt.ZP)(He.Z,{target:"e1y22m0u4"})((()=>({flex:"none",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"})),""),Si=(0,Qt.ZP)(Zn.Z,{target:"e1y22m0u3"})((({theme:e})=>({"& .MuiPaper-root":{background:e.palette.editor.footer}})),""),Ci=(0,Qt.ZP)(hi.Z,{target:"e1y22m0u2"})((()=>({"&:hover":{backgroundColor:"transparent",cursor:"default"}})),""),xi=(0,Qt.ZP)(bi,{target:"e1y22m0u1"})((({theme:e})=>({padding:0,border:0,borderBottom:`1px solid ${e.palette.grey[600]}`,background:"transparent",outline:0,color:"inherit",margin:e.spacing(0,1)})),""),_i=(0,Qt.ZP)("div",{target:"e1y22m0u0"})((()=>({position:"absolute",marginTop:"4px",marginLeft:"15px",transition:"opacity 0.2s ease-in-out 0s",opacity:1})),""),Ti=()=>{const e=(0,oe.I0)(),t=(0,oe.v9)((e=>e.userState.isOnline)),n=(0,oe.v9)((e=>e.userState.userInfo[e.userState.userId])),a=(0,oe.v9)((e=>e.userState.trackedUserId)),i=(0,oe.v9)((e=>e.padSettings.focusTimeEnabled)),r=(0,oe.v9)(Ve.l0),[o,l]=(0,N.useState)(t),[s,d]=(0,N.useState)(n.name),u=(0,N.useMemo)((()=>c().filter(r,(e=>!e.self))),[r]),m=(0,N.useMemo)((()=>c().take(c().values(u),2)),[u]),p=(0,N.useMemo)((()=>c().drop(c().values(u),2)),[u]),g=(0,N.useRef)(null),[h,f]=(0,N.useState)(!1),v=!t&&o;(0,N.useEffect)((()=>{d((e=>e===n.name?e:n.name))}),[n.name]),(0,N.useEffect)((()=>{t&&!o&&l(!0)}),[t,n.name,s,o]);const b=(0,N.useCallback)((e=>{e.target.select()}),[]),y=(0,N.useCallback)((()=>{e({type:"username_edited",newName:s})}),[e,s]),E=(0,N.useCallback)((e=>{d(e.target.value)}),[]),w=(0,N.useCallback)((t=>{e({type:"tracked_user_changed",userId:t})}),[e]);return N.createElement(yi,null,v?N.createElement(_i,null,N.createElement("span",{className:"fui-alert-circle UserList-offlineText"})," Reconnecting\u2026"):N.createElement(N.Fragment,null,N.createElement(Ei,{color:n.color}),N.createElement(xi,{value:s,"aria-label":"Your display name",onChange:E,onFocus:b,onBlur:y}),c().map(m,(e=>N.createElement(wi,{key:e.id,onClick:()=>w(e.id),color:"inherit",variant:"text",startIcon:a===e.id?N.createElement(fi.Z,{icon:fi.P.Eye,color:e.color}):N.createElement(Ei,{color:e.color})},N.createElement("span",{className:"username"},e.name," ",i?"(Focus Time)":"")))),p.length>0&&N.createElement(N.Fragment,null,N.createElement(ki,{ref:g,color:"inherit",onClick:()=>f(!0)},"+",p.length," More"),N.createElement(Si,{anchorEl:g.current,open:h,onClose:()=>f(!1),anchorOrigin:{vertical:-8,horizontal:"right"},transformOrigin:{vertical:"bottom",horizontal:"right"}},c().map(p,(e=>N.createElement(Ci,{disableRipple:!0,key:e.id},N.createElement(wi,{key:e.id,onClick:()=>w(e.id),color:"inherit",variant:"text",startIcon:a===e.id?N.createElement(fi.Z,{icon:fi.P.Eye,color:e.color}):N.createElement(Ei,{color:e.color})},N.createElement("span",{className:"username"},e.name," ",i?"(Focus Time)":"")))))))))},Ii=(0,Qt.ZP)("div",{target:"eyz31bl0"})((({theme:e})=>({background:e.palette.editor.footer})),"");var Pi=()=>{const{track:e}=(0,Wt.z$)(),{focusTimeEnabled:t,takeHome:n,takeHomeTimeLimit:a}=(0,oe.v9)(Ve.f6),i=(0,oe.v9)(Ve.TX),r=(0,oe.v9)(Ve.W5),{invisible:o,isOwner:l,hasEnvironments:s,isSandbox:c,uiType:d}=(0,ue.nT)("invisible","isOwner","hasEnvironments","isSandbox","uiType"),u=Ja(a),m=!l&&n,p=(0,N.createRef)(),g=(0,oe.v9)((e=>e.userState.trackedUserId)),h=(0,oe.v9)(Ve.l0).find((e=>e.id===g)),[f,v]=(0,N.useState)(!1),b=(0,N.useCallback)((()=>{v((t=>(t||e(ln.j.PadSettingsOpened),!t)))}),[e]),y=(0,N.useCallback)((()=>{v(!1)}),[]),E=(0,N.useMemo)((()=>"drawing_only"===d||!s),[s,d]),w=(0,z.Fg)(z.hY.Light),k=t&&!l;return N.createElement(L.Z,{theme:e=>k?w:e},N.createElement(Ii,{className:ke()({PadFooter:!0,"PadFooter-focusTime":k}),ref:p},h&&N.createElement(gi,{color:h.color},"Following ",h.name),N.createElement(Vt.Z,{direction:"row",spacing:1,ml:3,mr:2,alignItems:"center",flexGrow:1,overflow:"hidden"},N.createElement(yn,null),(!c&&l||i)&&N.createElement(fa,null),!c&&!n||r?N.createElement(ti,null):null,!n&&!c||r?N.createElement(Ti,null):null,n&&N.createElement(Ga,null)),N.createElement(Vt.Z,{direction:"row",spacing:2,mr:2,alignItems:"center"},N.createElement(Jn,{footerRef:p},N.createElement(rn,null),!o&&l&&!s&&window.CoderPad.FLAGS.showDuplicatePad&&N.createElement(M.Z,{mt:"-10px",mr:"10px"},N.createElement(Pn,null)),E&&N.createElement(M.Z,{mt:"-10px",mr:"10px"},N.createElement(Ua,{onClick:b,opensFrom:"bottomRight"})),N.createElement(An,null)),(!c&&l||i)&&(n?N.createElement("span",{className:"PadFooter-takeHomeLabel","data-toggle":"modal",style:{whiteSpace:"nowrap"}},"Take-Home ",u?`(${u})`:""):N.createElement(pi,null)),m&&N.createElement(Ka,null)),N.createElement(M.Z,{sx:{bottom:49,position:"absolute",right:0,zIndex:12}},N.createElement($a,{direction:"up",isOpen:f,onClose:y}))))},Zi=n(15725),Oi=n(59773),Mi=n(6538),Di=n(1079),Li=n(2734),Fi=n(80594),Ai=n(89187);const Ri=e=>{const{track:t}=(0,Wt.z$)(),n=(0,ue.oB)("slug"),a=(0,oe.v9)((e=>e.userState.userId));return(0,N.useCallback)((i=>{t(Ai.j.PlaybackAdSpaceClicked,{user_id:a,pad_id:n,timestamp:Math.floor(Date.now()/1e3),ad_type:e,...i})}),[e,n,t,a])},Ni=(0,Qt.ZP)(Fi.Z,{target:"e3t7ux83"})((({theme:e})=>({width:"100%",height:"100%"})),""),ji=(0,Qt.ZP)(ii.Z,{target:"e3t7ux82"})((({theme:e})=>({background:"#2B3036",margin:e.spacing(2),padding:e.spacing(2)})),""),qi=(0,Qt.ZP)(He.Z,{target:"e3t7ux81"})((({theme:e})=>({minWidth:120,borderRadius:8})),""),Bi=(0,Qt.ZP)(Ue.Z,{target:"e3t7ux80"})((({theme:e})=>({fontSize:"14px",color:"#FFFFFF",lineHeight:"150%"})),"");function zi(e){return"/sandbox?"+(null!=e.questionId?`question_id=${e.questionId}`:`pt=${e.language}`)}const $i=({buttons:e})=>{const t=Ri("multifile_projects");return N.createElement(Zi.ZP,{container:!0},e.map((e=>N.createElement(Zi.ZP,{item:!0,key:`li_${e.tooltip}`,xs:6},"learn_more"===e.tooltip?N.createElement(Bi,{pl:1,pt:1},N.createElement(Di.Z,{href:"https://coderpad.io/resources/docs/interview/pads/using-pad-features/#multi-file-projects",target:"_blank",onClick:()=>t({destination:{url:"https://coderpad.io/resources/docs/interview/pads/using-pad-features/#multi-file-projects"}})},"learn more \u2192")):N.createElement(qi,{href:zi(e),target:"_blank",onClick:()=>t({destination:{url:zi(e),framework:e.language,...e.questionId?{question_id:e.questionId}:{}}}),sx:{justifyContent:"unset"}},e.icon,N.createElement(Bi,{pl:2},e.tooltip))))))},Hi=[{icon:N.createElement(Ni,{language:"csharp",id:"adspace-csharp-project",sx:{width:24,height:18}}),tooltip:"C#",language:"multifile_csharp"},{icon:N.createElement(Ni,{language:"ruby",id:"adspace-ruby-project",sx:{width:24,height:18}}),tooltip:"Ruby",language:"multifile_ruby"},{icon:N.createElement(Ni,{language:"go",id:"adspace-go-project",sx:{width:24,height:18}}),tooltip:"Go",language:"multifile_go"},{icon:N.createElement(Ni,{language:"typescript",id:"adspace-typescript-project",sx:{width:24,height:18}}),tooltip:"Typescript",language:"multifile_typescript"},{icon:N.createElement(Ni,{language:"java",id:"adspace-java-project",sx:{width:24,height:18}}),tooltip:"Java",language:"multifile_java"},{icon:null,tooltip:"learn_more",language:""},{icon:N.createElement(Ni,{language:"python",id:"adspace-python-project",sx:{width:24,height:18}}),tooltip:"Python",language:"multifile_python"}],Ui=()=>{const e=(0,Li.Z)(),t=(0,Xt.Z)(e.breakpoints.down("lg"));return N.createElement(ji,null,N.createElement(Bi,null,t?"Try new multi-file projects in the sandbox!":"Multi-file projects with shell and package installation now available for popular languages. Click to try in Sandbox!"),N.createElement($i,{buttons:Hi}))};var Qi=n(19592),Vi=n(72984);const Wi=(0,Qt.ZP)(ii.Z,{target:"ebu72fm1"})((({theme:e})=>({background:e.palette.playback.adSpace.background,borderColor:e.palette.playback.adSpace.border,borderWidth:"1px",borderRadius:"4px 4px 0 0",borderStyle:"solid",borderBottom:"none",marginLeft:e.spacing(2),marginRight:e.spacing(2),marginTop:"61px",padding:e.spacing(2)})),""),Gi=(0,Qt.ZP)(Di.Z,{target:"ebu72fm0"})((({theme:e})=>({color:"#428bca",fontSize:"0.75rem",lineHeight:"0.75rem",fontWeight:600,textDecoration:"none"})),""),Yi=()=>{const e=Ri("xsell");return N.createElement(Wi,null,N.createElement(M.Z,{sx:{display:"flex",alignItems:"center"}},N.createElement(En.Z,{component:Vi.r,inheritViewBox:!0,sx:{height:"43px",width:"43px",marginRight:1}}),N.createElement(Ue.Z,{sx:{color:"playback.adSpace.tidle",fontSize:"1rem",fontWeight:400,lineHeight:"120%"}},"Screen before you interview for more insights")),N.createElement(Ue.Z,{sx:{color:"playback.adSpace.body",fontSize:"0.75rem",fontWeight:400,lineHeight:"0.875rem",marginY:2}},"CoderPad now includes Screen! Send auto-graded tests in just a few clicks to get detailed reports and interview the best candidates."),N.createElement(M.Z,{sx:{display:"flex",justifyContent:"space-between"}},N.createElement(Gi,{target:"_blank",href:`${Qi.Rv}/dashboard/campaigns/`,onClick:()=>e({message:"pre-screen better",link:`${Qi.Rv}/dashboard/campaigns/`})},"Try Screen now"),N.createElement(Gi,{target:"_blank",href:"https://www.codingame.com/work/online-coding-test/",onClick:()=>e({message:"pre-screen better",link:"https://www.codingame.com/work/online-coding-test/"})},"Explore interactive demo")))},Ki=({takeHome:e})=>N.createElement(N.Fragment,null,e?N.createElement(Yi,null):N.createElement(Ui,null));var Ji=n(71498),Xi=n(53247),er=n(58989),tr=n(26038),nr=n(22222);const ar=(0,nr.P1)((e=>e.playbackHistory),(e=>{let t=!1;if(e.frames){const n=e.frames[1],a=e.frames[e.frameIndex];t=!!(n&&a&&a.timestamp-n.timestamp>7e3)}return t})),ir=(0,nr.P1)((e=>e.playbackHistory.playbackSpeed),(e=>e>1));var rr=n(48564),or=n(40172),lr=n(61366),sr=n(60195),cr=n(59857),dr=n(82019),ur=n(15464);const mr=(0,Qt.ZP)("span",{target:"edrcsv02"})({name:"17fynvw",styles:"width:0;height:100%;position:absolute;z-index:5;pointer-events:all;cursor:pointer"}),pr={width:12,height:12,top:"calc(50% - 6px)",position:"absolute",left:-6},gr=(0,Qt.ZP)(dr.Z,{shouldForwardProp:e=>"tickColor"!==e,target:"edrcsv01"})((({tickColor:e})=>({...pr,"& > circle":{color:e}})),""),hr=(0,Qt.ZP)(ur.Z,{shouldForwardProp:e=>"mainTickColor"!==e&&"secondaryTickColor"!==e,target:"edrcsv00"})((({mainTickColor:e,secondaryTickColor:t})=>({...pr,"& > circle":{color:e},"& > path":{color:t}})),""),fr=({events:e})=>{const t={execution:"Code run",externalPaste:"Code pasted"};return N.createElement(va.Z,null,e.map(((e,n)=>N.createElement(Ue.Z,{key:n,sx:{fontSize:"0.75rem"}},t[e.type]))))};var vr=({leftOffset:e,events:t,onClick:n})=>{const a=(0,Li.Z)(),i={execution:a.palette.playback.timeline.ticks.run,externalPaste:a.palette.playback.timeline.ticks.paste};return N.createElement($e.Z,{placement:"top",arrow:!0,title:N.createElement(fr,{events:t})},N.createElement(mr,{sx:{left:`${e}%`},onClick:n},t.length>1?N.createElement(hr,{mainTickColor:i[t[0].type],secondaryTickColor:i[t[1].type],"data-testid":"stacked-event-tick"}):N.createElement(gr,{tickColor:i[t[0].type],"data-testid":"event-tick"})))};function br(){return br=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},br.apply(this,arguments)}const yr=(0,wn.Z)((e=>{var t,n,a;return{root:{display:"flex",position:"relative",alignItems:"center",justifyContent:"flex-start",width:"100%",height:14,borderRadius:6,margin:"0 1em"},editTick:{height:"100%",backgroundColor:null===(t=e.palette.playback)||void 0===t?void 0:t.timeline.ticks.edit,pointerEvents:"none",zIndex:2},blankTick:{height:"100%",backgroundColor:null===(n=e.palette.playback)||void 0===n?void 0:n.timeline.ticks.idle,pointerEvents:"none"},aiChatTick:{height:"100%",backgroundColor:null===(a=e.palette.playback)||void 0===a?void 0:a.timeline.ticks.aiChat,pointerEvents:"none"}}})),Er=(0,Qt.ZP)(sr.ZP,{shouldForwardProp:e=>"ownerState"!==e,target:"ehqezh51"})((()=>({"&.MuiSlider-root":{position:"absolute",top:0,left:0,padding:0,height:"100%"},"& .MuiSlider-rail":{height:"100%",borderRadius:6,backgroundColor:"transparent",opacity:1},"& .MuiSlider-track":{height:"100%",backgroundColor:"#37C773",zIndex:1,borderTopLeftRadius:"7px",borderBottomLeftRadius:"7px",borderWidth:0},"& .MuiSlider-thumb":{marginTop:0,width:18,height:18,top:"50%",zIndex:10}})),""),wr=(0,Qt.ZP)("div",{target:"ehqezh50"})({name:"1vn25hv",styles:"position:absolute;width:100%;height:100%;left:0;top:0;display:flex;border-radius:20px;overflow:hidden;pointer-events:none"}),kr=({timeline:e,SliderComponent:t=Er,...n})=>{const{scrubbing:a,setScrubbing:i}=(0,cr.t)(),r=yr(),o=(0,oe.v9)((e=>e.playbackHistory.frameIndex)),l=(0,oe.I0)(),s={user_id:(0,oe.v9)((e=>e.userState.userId)),pad_id:(0,ue.oB)("slug"),timestamp:Math.floor(Date.now()/1e3)},c=(0,N.useCallback)((e=>{l({type:"playback_seek_to_frame",index:e})}),[l]),d=(0,N.useCallback)((()=>{i(!0),(0,y.j)(ln.j.PlaybackScrubberInteracted,s)}),[i,y.j]);(0,N.useEffect)((()=>{if(a){const e=()=>{i(!1)};return document.body.addEventListener("mouseup",e),()=>{document.body.removeEventListener("mouseup",e)}}return()=>null}),[a,i]);const u=(0,N.useMemo)((()=>{let t=null,n=0,a="blank";const i=[],r=e=>{switch(e.type){case"ai-chat":return"ai-chat";case"insert":case"delete":return"edit";default:return"blank"}},o=()=>{var t;i.push({type:a,length:n,width:(t=n,t/(e.frames.length-2)*100)})};return e.frames.slice(2).forEach(((i,l)=>{null!=t&&r(i)===r(t)&&l!==e.frames.length-2?n++:(o(),n=1,a=r(i)),t=i})),o(),i}),[e]),m=(0,N.useMemo)((()=>e.events.reduce(((e,t)=>(e[t.frame]=e[t.frame]||[],e[t.frame].push(t),e)),{})),[e]),p=(0,N.useMemo)((()=>[u.map(((e,t)=>"edit"===e.type?N.createElement("span",{className:r.editTick,style:{width:`${e.width}%`},key:t,"data-testid":"edit-tick"}):"ai-chat"===e.type?N.createElement("span",{className:r.aiChatTick,style:{width:`${e.width}%`},key:t,"data-testid":"ai-chat-tick"}):N.createElement("span",{className:r.blankTick,style:{width:`${e.width}%`},key:t,"data-testid":"empty-tick"}))),Object.keys(m).map(((t,n)=>{const a=Number(t),i=100/(e.frames.length-2)*(a-1);return N.createElement(vr,{leftOffset:i,events:m[a],key:n,onClick:()=>{c(a)}})}))]),[u,r,m,e.frames.length,c]);return N.createElement("div",{className:r.root,style:{width:"100%"}},N.createElement(t,br({min:1,max:e.frames.length-1,step:1,onChange:(e,t)=>c(t),onMouseDown:d,value:o},n)),N.createElement(wr,null,p))};function Sr(){return Sr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Sr.apply(this,arguments)}const Cr=(0,lr.Z)((e=>{var t,n,a;return{rail:{backgroundColor:null===(t=e.palette.playback)||void 0===t?void 0:t.timeline.background.primary},track:{backgroundColor:null===(n=e.palette.activation)||void 0===n?void 0:n.main},thumb:{marginTop:0,width:18,height:18,top:"50%",zIndex:10,backgroundColor:null===(a=e.palette.activation)||void 0===a?void 0:a.main,border:"5px solid #ffffff"}}}))(Er),xr=e=>N.createElement(kr,Sr({},e,{SliderComponent:Cr})),_r=(0,Qt.ZP)("span",{target:"e11l6n4y0"})((({color:e})=>({display:"inline-block",width:14,height:14,borderRadius:"50%",backgroundColor:null!==e&&void 0!==e?e:"#3E4248",marginRight:4,flex:"0 0 auto"})),"");const Tr=(0,Qt.ZP)(Jt.Z,{target:"eua03i70"})({name:"1hcx8jb",styles:"padding:0"}),Ir=(0,wn.Z)((e=>{var t,n,a,i;return{root:{display:"flex",flexDirection:"column",width:"100%"},cell:{display:"flex",alignItems:"center"},timelineControls:{marginLeft:18,marginRight:18,paddingBottom:10,display:"flex",flex:"0 1 auto",flexDirection:"row",alignItems:"center"},timelineButtons:{display:"flex",flex:"0 0 auto",alignItems:"center"},rightAlign:{marginLeft:"auto",display:"flex",marginRight:"1em"},playButton:{display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:null===(t=e.palette.activation)||void 0===t?void 0:t.main},rewindButton:{display:"flex",alignItems:"center",justifyContent:"center",userSelect:"none",cursor:"not-allowed",color:e.palette.grey[700],"&.is-enabled":{cursor:"pointer",color:null===(n=e.palette.activation)||void 0===n?void 0:n.main}},speedButton:{textAlign:"center",cursor:"pointer",userSelect:"none",color:e.palette.grey[700],"&.is-accelerated":{color:null===(a=e.palette.activation)||void 0===a?void 0:a.main}},collapseButton:{background:null===(i=e.palette.playback)||void 0===i?void 0:i.timeline.background.primary,width:30,height:30,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",marginRight:10,cursor:"pointer",transform:"rotate(0deg)",transition:"transform 300ms ease-out",flex:"0 0 auto","&.collapsed":{transform:"rotate(180deg)"}},userIndicator:{alignItems:"center",justifyContent:"center",marginRight:e.spacing(1),height:30,width:30,color:"#37C773"},timestampsRoot:{flex:"1 0 auto",fontSize:"0.875rem",lineHeight:"17px",textAlign:"center",padding:"0 8px"},date:{fontSize:"0.6875rem",opacity:.8,padding:"0 4px"},time:{fontSize:"0.75rem",padding:"0 4px","&:first-child":{borderRight:"1px solid #BDBDBD"}}}})),Pr=({setCollapsed:e,collapsed:t,setShouldCollapse:n})=>{const a=Ir(),i=(0,oe.I0)(),r=(0,oe.v9)((e=>e.playbackHistory.frameIndex)),o=(0,oe.v9)((e=>e.playbackHistory.playing)),l=(0,oe.v9)((e=>e.playbackHistory.playbackSpeed)),s=(0,oe.v9)((e=>ar(e))),c=(0,oe.v9)((e=>ir(e))),d=(0,or.B)(),u=(0,oe.v9)((e=>e.playbackHistory.trackedUserId)),m=(0,N.useMemo)((()=>null!=u?d[u]:null),[u,d]),{getTimelineForUser:p}=(0,rr.V)(),g={user_id:(0,oe.v9)((e=>e.userState.userId)),pad_id:(0,ue.oB)("slug"),timestamp:Math.floor(Date.now()/1e3)},h=(0,N.useMemo)((()=>u?p(u):null),[u,p]),f=(0,N.useCallback)((()=>{i({type:"playback_play"}),t||n(!0),(0,y.j)(ln.j.PlaybackButtonClicked,g)}),[t,n,i,y.j]),v=(0,N.useCallback)((()=>{i({type:"playback_pause"})}),[i]),b=(0,N.useCallback)((()=>{i({type:"playback_speed_shifted"})}),[i]),E=(0,N.useCallback)((e=>{i({type:"playback_rewound_ms",ms:e})}),[i]);if(null==h||0===h.frames.length)return N.createElement("span",null);const w=h.frames[h.frames.length-1].timestamp||0,k=h.frames[r];return k?N.createElement(Zi.ZP,{container:!0},N.createElement(Zi.ZP,{item:!0,xs:3,className:a.cell},N.createElement(Zi.ZP,{item:!0,xs:2,className:a.cell},N.createElement("span",{className:ke()(a.collapseButton,{collapsed:t}),onClick:()=>e(!t)},N.createElement(Ca.Z,null))),N.createElement("div",{style:{flex:"1 1 auto",cursor:"pointer",overflow:"hidden"},className:a.cell,onClick:()=>e(!t)},m&&N.createElement(N.Fragment,null,N.createElement(M.Z,{display:{xs:"none",md:"inline-flex"},className:a.userIndicator},N.createElement(_r,{color:m.color})),N.createElement(M.Z,{display:{xs:"none",sm:"inherit"},style:{display:"inline-block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},m.name))),N.createElement(Zi.ZP,{item:!0,xs:9,sm:6,lg:5,className:a.cell},N.createElement("div",{className:a.rightAlign},N.createElement(Tr,{disableFocusRipple:!0,onClick:()=>E(7e3),className:ke()(a.rewindButton,{"is-enabled":s})},N.createElement(Ji.Z,{fontSize:"large"})),N.createElement(Tr,{disableFocusRipple:!0,className:a.playButton,onClick:o?v:f},o?N.createElement(Xi.Z,{fontSize:"large"}):N.createElement(er.Z,{fontSize:"large"}))))),N.createElement(Zi.ZP,{item:!0,xs:7,className:a.cell},N.createElement(xr,{timeline:h})),N.createElement(Zi.ZP,{item:!0,container:!0,xs:2,wrap:"nowrap"},N.createElement(M.Z,{onClick:b,className:ke()(a.speedButton,{"is-accelerated":c}),display:"flex",alignItems:"center",style:{color:"#BDBDBD",fontSize:"0.875rem",marginLeft:8}},l,"\xd7"),N.createElement(M.Z,{display:{xs:"none",md:"inherit"},className:a.timestampsRoot},N.createElement(Zi.ZP,{container:!0,wrap:"nowrap",direction:"column"},N.createElement(Zi.ZP,{container:!0},N.createElement(Zi.ZP,{container:!0,item:!0,xs:6,className:a.date,justifyContent:"flex-start"},k&&k.timestamp&&(0,tr.Z)(k.timestamp,"MMM d")),N.createElement(Zi.ZP,{container:!0,item:!0,xs:6,className:a.date,justifyContent:"flex-end"},(0,tr.Z)(k.timestamp,"MMM d")==(0,tr.Z)(w,"MMM d")?"":(0,tr.Z)(w,"MMM d"))),N.createElement(Zi.ZP,{container:!0},N.createElement(Zi.ZP,{container:!0,item:!0,xs:6,className:a.time,justifyContent:"flex-start"},k&&k.timestamp&&(0,tr.Z)(k.timestamp,"h:mmaaaaa'm'")),N.createElement(Zi.ZP,{container:!0,item:!0,xs:6,className:a.time,justifyContent:"flex-end"},(0,tr.Z)(w,"h:mmaaaaa'm'"))))))):null};function Zr(){return Zr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Zr.apply(this,arguments)}const Or=(0,wn.Z)({playhead:{position:"absolute",width:1,height:62,backgroundColor:"#828282",marginTop:-24}}),Mr=(0,Qt.ZP)(Er,{shouldForwardProp:e=>"ownerState"!==e,target:"ekbve540"})((({theme:e})=>{var t;return{"& .MuiSlider-rail":{backgroundColor:null===(t=e.palette.playback)||void 0===t?void 0:t.timeline.background.user},"& .MuiSlider-track":{backgroundColor:"transparent"}}}),""),Dr=e=>{const t=Or();return N.createElement(kr,Zr({},e,{SliderComponent:Mr,components:{Thumb:e=>N.createElement("span",Zr({},(0,s.omit)(e,"ownerState"),{className:t.playhead}))}}))},Lr=(0,wn.Z)((e=>({root:{padding:`${e.spacing(2)} 0`,paddingLeft:"1em","&:hover":{cursor:"pointer",background:"dark"===e.palette.mode?"#22252A":"transparent"}},userIndicator:{display:"inline-flex",alignItems:"center",justifyContent:"center",marginRight:e.spacing(1),height:30,width:30,color:"#37C773"},activeColor:{background:"dark"===e.palette.mode?"#22252A":"transparent",color:"#37C773"},userName:{overflow:"hidden"}}))),Fr=({authorId:e,participant:t,active:n=!1,onClick:a})=>{const i=Lr(),r=(0,oe.I0)(),{getTimelineForUser:o}=(0,rr.V)(),[l,s]=(0,N.useState)(!1),c=(0,N.useMemo)((()=>o(e)),[o,e]),d=(0,oe.v9)((e=>e.playbackHistory.playing)),u=(0,N.useCallback)((()=>{r({type:"playback_play"})}),[r]),m=(0,N.useCallback)((()=>{r({type:"playback_pause"})}),[r]),p=(0,N.useCallback)((()=>{let e=N.createElement(_r,{color:t.color});return n?e=d?N.createElement(Xi.Z,{onClick:u}):N.createElement(er.Z,{onClick:m}):l&&(e=N.createElement(er.Z,{onClick:u})),N.createElement(M.Z,{className:i.userIndicator},e)}),[l,n,d,u,m,t,i.userIndicator]);return N.createElement(Zi.ZP,{container:!0,onClick:a,onMouseOver:()=>s(!0),onMouseLeave:()=>s(!1),className:ke()(i.root,{[i.activeColor]:n})},N.createElement(Zi.ZP,{item:!0,container:!0,xs:3},N.createElement(Zi.ZP,{item:!0,xs:2}),N.createElement(Zi.ZP,{item:!0,container:!0,xs:10,alignItems:"center",wrap:"nowrap",className:i.userName},N.createElement(p,null),t.name)),N.createElement(Zi.ZP,{item:!0,xs:7,container:!0,alignItems:"center"},N.createElement(Dr,{timeline:c})),N.createElement(Zi.ZP,{item:!0,xs:1,style:{textAlign:"center"}},c.edits),N.createElement(Zi.ZP,{item:!0,xs:1,style:{textAlign:"center"}},c.events.filter((e=>"execution"===e.type)).length))},Ar=(0,wn.Z)((e=>{var t,n;return{root:{height:"100%",flex:"1 1 auto",flexWrap:"nowrap"},header:{flex:"0 0 auto",color:"#9C9C9C",paddingLeft:"1em",paddingTop:e.spacing(4),paddingBottom:e.spacing(1)},panel:{flex:"1 1 auto",border:`1px solid ${null===(t=e.palette.playback)||void 0===t?void 0:t.border}`,borderTopRightRadius:"4px",borderLeft:"none",borderBottom:"none",overflow:"auto","&::-webkit-scrollbar":{width:"10px"},"&::-webkit-scrollbar-track":{background:null===(n=e.palette.editor)||void 0===n?void 0:n.footer},"&::-webkit-scrollbar-thumb":{background:"#888"},"&::-webkit-scrollbar-thumb:hover":{background:"#555"}}}})),Rr=({participants:e,activeUserId:t,setActiveUserId:n,setShouldCollapse:a})=>{const i=Ar(),r=(0,oe.v9)((e=>e.playbackHistory.playing)),o=(0,oe.v9)((e=>e.playbackHistory.trackedUserId)),l=(0,oe.I0)(),{getTimelineForUser:s}=(0,rr.V)(),c={user_id:(0,oe.v9)((e=>e.userState.userId)),pad_id:(0,ue.oB)("slug"),timestamp:Math.floor(Date.now()/1e3)},d=(0,N.useCallback)((()=>{l({type:"playback_play"})}),[l]),u=(0,N.useCallback)((e=>{n(e),a(!0),r||d(),(0,y.j)(ln.j.PlaybackUserTrackInteracted,c)}),[r,d,n,a,y.j]),m=(0,N.useMemo)((()=>Object.entries(e).map((([e,t])=>({authorId:e,participant:t,timeline:s(e)}))).filter((e=>e.timeline.edits>0)).sort(((e,t)=>t.timeline.edits-e.timeline.edits))),[e,s]);return(0,N.useEffect)((()=>{m.length>0&&null==o&&l({type:"playback_track_user",userId:m[0].authorId})}),[l,m,o]),N.createElement(Zi.ZP,{container:!0,direction:"column",className:i.root},N.createElement(Zi.ZP,{container:!0,className:i.header},N.createElement(Zi.ZP,{item:!0,container:!0,xs:3},N.createElement(Zi.ZP,{item:!0,xs:2}),N.createElement(Zi.ZP,{item:!0,xs:10},"Attendees")),N.createElement(Zi.ZP,{item:!0,xs:7},"Activity Timeline"),N.createElement(Zi.ZP,{item:!0,xs:1,style:{textAlign:"center"}},"Edits"),N.createElement(Zi.ZP,{item:!0,xs:1,style:{textAlign:"center"}},"Runs")),N.createElement(M.Z,{className:i.panel},m.map(((e,n)=>N.createElement(Fr,{key:e.authorId,authorId:e.authorId,participant:e.participant,active:e.authorId===t,onClick:()=>u(e.authorId)})))))};var Nr=n(431);const jr=(0,wn.Z)((e=>{var t;return{root:{position:"absolute",bottom:0,left:0,width:"100%",zIndex:10,fontSize:"0.875rem",flexDirection:"column",display:"flex",transition:"height 600ms ease-out",background:null===(t=e.palette.playback)||void 0===t?void 0:t.background},userColor:{width:14,height:14,borderRadius:"50%",background:"#fff",display:"inline-block",marginRight:"0.75em"},bar:{height:50,padding:`${e.spacing(1)} 1em`},participants:{height:250},toolbar:{display:"flex",flex:"1 0 auto",alignItems:"center",justifyContent:"flex-end","& > input":{flex:"1 1 auto"}}}}));var qr,Br=()=>{const e=jr(),{playing:t}=(0,cr.t)(),[n,a]=(0,N.useState)(!1),[i,r]=(0,N.useState)(!1),[o,l]=(0,N.useState)(!1),[s,c]=(0,N.useState)(!1),{isOwner:d,padState:u,uiType:m,takeHome:p}=(0,ue.nT)("isOwner","padState","uiType","takeHome"),g="drawing_only"===m,h=(0,oe.I0)(),f=(0,or.B)(),{trackedUserId:v,frames:b}=(0,oe.v9)((e=>e.playbackHistory)),{getTimelineForUser:y}=(0,rr.V)(),E=(0,N.useMemo)((()=>{for(const e of Object.keys(f))if(y(e).edits>0)return!0;return!1}),[y,f]),{environments:w}=(0,ve.od)(),k=(0,N.useMemo)((()=>w.filter((e=>{var t;return null===(t=e.projectTemplateSlug)||void 0===t?void 0:t.includes("jupyter")})).length>0),[w]),S=Object.values(b).length>0,C=(0,N.useCallback)((e=>{h({type:"playback_track_user",userId:e})}),[h]);(0,Nr.b)((()=>{i&&!s&&(a(!0),l(!0))}),3500,[i,s]),(0,N.useEffect)((()=>{n&&i&&r(!1)}),[n,i]);const x=(0,N.useCallback)((()=>{c(!0),o&&(a(!1),l(!1))}),[o]),_=(0,N.useCallback)((()=>{c(!1),t&&r(!0)}),[t]);return N.createElement("div",{className:ke()(e.root),style:{height:E?n?50:300:64,width:"100%"},onMouseEnter:x,onMouseLeave:_},N.createElement(Zi.ZP,{container:!0,className:e.bar},N.createElement(Zi.ZP,{item:!0,xs:8,md:9},!g&&(E?N.createElement(Pr,{setCollapsed:a,setShouldCollapse:r,collapsed:n}):S&&(k?N.createElement(M.Z,{display:"flex",flexDirection:"column"},N.createElement(Oi.Z,{severity:"warning"},"Playback is currently unavailable for Beta Jupyter Notebooks. You can still review all code in the Notebook window.")):N.createElement(M.Z,{display:"flex",flexDirection:"column"},N.createElement(Oi.Z,{severity:"warning"},"Playback is not available, because no edits were made in this pad."))))),N.createElement(Zi.ZP,{item:!0,xs:4,md:3,className:e.toolbar},d&&N.createElement(Kn,null),N.createElement(rn,null),N.createElement(M.Z,{display:{xs:"none",md:"inherit"}},N.createElement(An,null)),N.createElement($e.Z,{placement:"top",arrow:!0,title:"Return to dashboard"},N.createElement("span",null,N.createElement(an,{href:"/dashboard/pads",iconOnly:!0,startIcon:N.createElement(Gt.n$,{sx:{width:20,height:20}})}))),d&&u===Mi.wI.submitted_take_home&&N.createElement(hn,{danger:!0,modalId:"end-interview-modal"},"Finish Review"))),N.createElement(Zi.ZP,{container:!0,className:e.participants},N.createElement(Zi.ZP,{item:!0,container:!0,xs:8,md:9,style:{height:"100%"}},N.createElement(Rr,{participants:f,setActiveUserId:C,activeUserId:v,setShouldCollapse:r})),N.createElement(Zi.ZP,{item:!0,container:!0,xs:4,md:3,style:{height:"100%"}},N.createElement(Ki,{takeHome:p}))))},zr=n(50542),$r=n(14212),Hr=n(72326),Ur=n(95534),Qr=n.n(Ur),Vr=n(64728);const Wr=["title","titleId"];function Gr(){return Gr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Gr.apply(this,arguments)}function Yr(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}const Kr=(e,t)=>{let{title:n,titleId:a}=e,i=Yr(e,Wr);return N.createElement("svg",Gr({xmlns:"http://www.w3.org/2000/svg",width:536,height:76,viewBox:"0 0 536 76",ref:t,"aria-labelledby":a},i),n?N.createElement("title",{id:a},n):null,qr||(qr=N.createElement("g",{id:"Page-1",fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:1},N.createElement("g",{id:"coderpad_logo_reverse_white",fill:"#FFF",fillRule:"nonzero",transform:"translate(.14 .2)"},N.createElement("g",{id:"Group",transform:"translate(86.62)"},N.createElement("path",{id:"Shape",d:"m449.1 73.5-20.1.75-.9-5.1c-3.9 3.9-8.85 6-14.4 6-6.6 0-11.4-2.25-14.85-6.75-3.3-4.5-4.8-10.65-4.8-18.9 0-9 2.25-15.9 6.75-20.85 4.5-4.8 11.25-7.35 20.25-7.35 2.1 0 4.2.15 6.15.9v-12l-7.65-1.8V.75L437.4 0l1.8 2.1 1.8 1.65v60l7.65 1.8zm-21.75-15V34.2c-1.65-.9-3.9-1.5-7.5-1.5-7.35 0-11.1 5.4-11.1 16.2 0 10.2 3 15.15 9.15 15.15 1.8 0 3.6-.3 4.8-1.5 1.65-.9 2.7-1.8 3.3-2.7z"}),N.createElement("path",{id:"Path",d:"M42.3 19.05c-3-1.2-6.6-1.5-10.65-1.5-10.5 0-15.75 7.65-15.75 23.4 0 14.55 5.4 21.9 16.35 21.9 2.85 0 5.85-.6 8.55-1.65 3-1.2 5.4-2.25 7.05-3.3l2.25-1.65 5.25 8.7c-.15.15-.75.75-1.05 1.2-.45.3-1.65 1.35-3.3 2.7-1.65 1.2-3.6 2.25-5.25 3.15-1.8.9-4.2 1.65-6.9 2.4-2.85.75-5.4 1.2-8.25 1.2-9.75 0-17.25-3-22.65-8.7C2.7 61.05 0 52.65 0 41.7c0-11.1 3-19.8 8.85-26.25 5.85-6.3 13.5-9.6 23.55-9.6 3.3 0 7.05.3 10.65 1.2s6.6 1.5 8.55 2.25l3 1.2-.75 18h-9.3z"}),N.createElement("path",{id:"Shape",d:"M87.6 21.75c7.65 0 13.5 2.25 17.85 6.75 4.2 4.5 6.45 10.8 6.45 18.9 0 8.7-2.25 15.15-6.9 20.25S94.2 75 86.4 75c-16.05 0-24.3-8.7-24.3-26.25 0-8.7 2.25-15.15 6.9-19.8 4.2-4.95 10.8-7.2 18.6-7.2m-.6 10.8c-3.6 0-6.45 1.2-7.95 3.6s-2.7 6.3-2.7 12.15c0 5.4.75 9.6 2.25 12 1.65 2.7 4.2 3.75 7.65 3.75 3.6 0 6-1.2 7.65-3.75 1.65-2.4 2.4-6.75 2.4-12.3 0-5.25-.75-9-2.25-11.4-1.2-2.7-3.6-4.05-7.05-4.05M172.95 73.5l-20.1.75-.75-5.1c-3.9 3.9-8.85 6-14.4 6-6.6 0-11.4-2.25-14.85-6.75-3.3-4.5-4.8-10.65-4.8-18.9 0-9 2.25-15.9 6.75-20.85 4.5-4.8 11.25-7.35 20.25-7.35 2.1 0 4.2.15 6.15.9v-12l-7.65-1.8V.75l18-.75 2.1 2.1 1.65 1.65v60l7.65 1.8zm-21.9-15V34.2c-1.65-.9-4.2-1.5-7.35-1.5-7.35 0-11.1 5.4-11.1 16.2 0 10.2 3 15.15 9.15 15.15 1.65 0 3.6-.3 5.1-1.5 1.65-.9 2.7-1.8 3.3-2.7zM224.55 51.15l-31.65.3c.15 3.9 1.5 7.2 3.6 9.15 2.1 2.1 4.65 3.3 7.8 3.3 2.25 0 4.8-.3 7.5-1.2s4.8-1.5 6.15-2.25l2.25-1.2 4.2 7.65c-.75.6-1.65 1.35-3 2.1q-2.025 1.35-7.65 3.6c-3.9 1.5-7.5 2.25-11.1 2.25-8.1 0-14.25-2.25-18.6-6.75-4.2-4.5-6.45-10.8-6.45-18.9q0-12.6 6.75-20.25c4.5-4.8 10.8-7.5 18.75-7.5 7.05 0 12.3 2.1 16.05 6s5.7 9.6 5.7 16.5zm-22.2-18.45c-2.7 0-4.65.9-6.45 2.7s-2.7 4.2-3 7.05H210c0-6.3-2.4-9.75-7.65-9.75"}),N.createElement("path",{id:"Path",d:"m231 23.4 19.8-.75.75 6.6c.3-.6 1.05-1.35 2.1-2.1s2.7-2.1 4.8-3.3c2.25-1.35 4.5-2.1 6.45-2.1q2.25 0 4.5.45c1.5.3 2.7.6 3.15.9l.9.3-.75 18.15h-8.25l-1.5-8.25c-1.65 0-3.3.45-5.1 1.35s-3 1.65-3.9 2.55l-1.35 1.35v25.5l9.15 2.25v7.65H231V66.3l7.65-2.25v-31.2l-7.65-1.8z"}),N.createElement("path",{id:"Shape",d:"M307.8 65.7v8.25h-29.1V65.7l7.05-2.25V18l-7.05-2.85v-7.8l21.9-.45h9.15c7.35 0 12.9 1.65 17.1 5.4 4.2 3.6 6.15 8.4 6.15 14.85 0 7.8-2.25 13.8-7.2 17.85-4.65 3.9-11.4 6-20.25 6h-5.25v12.75zm-7.35-47.55v21.3h5.1c3.9 0 7.2-.9 9.15-2.85 2.1-1.8 3.15-4.5 3.15-7.8 0-3.15-.9-5.85-2.7-7.65s-4.2-3-7.35-3zM389.1 73.5l-18.9.75-1.65-6.15c-.6.3-1.35 1.2-2.25 2.1s-2.85 1.8-5.7 3.15-5.25 2.1-7.65 2.1c-4.65 0-8.25-1.35-10.8-3.9-2.7-2.55-3.9-6.3-3.9-11.1q0-15.75 22.95-15.75h6.6v-5.25c0-4.8-2.4-7.05-7.35-7.05-1.5 0-2.85.15-4.35.3s-2.4.45-3.15.75l-.9.15-1.5 6.15H342l-.75-14.25c7.65-2.7 14.7-3.9 20.7-3.9 7.35 0 12.3 1.5 15.45 4.2 3 2.7 4.5 7.65 4.5 14.55v23.7l7.05 1.65zm-37.05-14.85c0 3.9 1.8 5.85 5.7 5.85 1.5 0 3-.45 4.65-1.5 1.65-1.2 3-1.8 3.9-2.85l1.5-1.35v-6.3h-5.4c-3.75 0-6.45.45-7.8 1.5-1.8.9-2.55 2.55-2.55 4.65"})),N.createElement("path",{id:"Shape",d:"M64.12 2.78H5.62C2.47 2.78 0 5.18 0 8.4v58.34c0 3.22 2.4 5.62 5.62 5.62h58.5c3.15 0 5.62-2.4 5.62-5.62V8.4c.01-3.22-2.39-5.62-5.62-5.62M25.56 34.46l-11.29 4.07 11.29 3.97v5.55L8.51 40.82v-4.68l17.05-7.23zm6.52 18.78h-4.26l10.62-31.32h4.26zm29.16-12.42-17.25 7.24v-5.52l11.51-4.08-11.51-4.02v-5.51l17.25 7.23z"})))))},Jr=(0,N.forwardRef)(Kr);n.p;const Xr=({isInline:e=!1,logoUrl:t})=>{const[n,a]=(0,N.useState)(!1);(0,N.useEffect)((()=>{(async()=>{try{const e=await new Promise(((e,n)=>{const a=new Image;a.onload=()=>e({width:a.width,height:a.height}),a.onerror=n,a.src=null!==t&&void 0!==t?t:""}));a(e.width===e.height)}catch{a(!1)}})()}),[t]);const i=(0,Xt.Z)((e=>"(max-width:1375px)")),r=(0,N.useMemo)((()=>({height:i?"120px":n?"160px":"75px",...e?{}:{position:i?"relative":"absolute",left:i?"0":"-360px",marginBottom:i?2:0,transition:"all 0.3s ease-in-out"}})),[i,e,n]);return N.createElement(M.Z,{position:"relative"},N.createElement(M.Z,{component:"img",sx:r,alt:"company logo",src:t}))},eo=(0,Qt.ZP)("div",{target:"eff0glu1"})((({theme:e})=>({border:`1px solid ${"dark"===e.palette.mode?e.palette.annualPlans.unselectedToggle:e.palette.divider}`,borderRadius:8,display:"flex",flex:"0 1 400px",flexDirection:"column",padding:e.spacing(5)})),""),to=N.forwardRef((({logoUrl:e,onLogin:t,padOrg:n,takeHome:a,takeHomeTimeLimit:i},r)=>{const[o,l]=(0,N.useState)(""),[s,c]=(0,N.useState)(""),[d,u]=(0,N.useState)(!1),[m,p]=(0,N.useState)(!1),g=Ja(i),h=(0,N.useCallback)((()=>{p((e=>!e))}),[]),f=(0,N.useMemo)((()=>null!=n?null==n.name||n.name.includes("Tesla")?"Tesla":n.name:null),[n]),v=(0,N.useMemo)((()=>!!o.trim()),[o]),b=(0,N.useMemo)((()=>(0,Vr.k)(s)),[s]),y=(0,N.useMemo)((()=>b&&v&&m),[b,v,m]),E=(0,N.useMemo)((()=>b?v?"":"Please enter your name":"The email address you provided is invalid"),[b,v]),w=()=>{y?t(o,s):u(!0)},k=e=>{"Enter"===e.key&&(w(),e.preventDefault())},S=(0,N.useMemo)((()=>`Name e.g., ${Qr()(["Ada Lovelace","Alan Turing","Edsger Dijkstra","Grace Hopper"])}`),[]),C=(0,N.useMemo)((()=>g?N.createElement(N.Fragment,null,N.createElement(Ue.Z,null,"We want to be respectful of your schedule, so you have a limited amount of time to complete the assignment. Your timer will start when you click the Let\u2019s Get Started! button on the next screen."),N.createElement(Ue.Z,{sx:{fontWeight:"bold"}},"Time Limit: ",g)):N.createElement(Ue.Z,null,"This take-home has no time limit. Please remember to submit your take-home when finished.")),[g]);return N.createElement(M.Z,{ref:r,sx:{alignItems:"center",display:"flex",flexDirection:"column",height:"100%",overflowY:"auto",paddingX:4,textAlign:"center","& *":{boxSizing:"border-box"}}},N.createElement(Vt.Z,{alignItems:"center",spacing:10,sx:{flex:1,paddingTop:12}},N.createElement(Vt.Z,{spacing:3},!!e&&N.createElement(Xr,{isInline:!0,logoUrl:e}),N.createElement(Ue.Z,{color:"inherit",sx:{fontSize:32,fontWeight:600}},"Welcome to your interview",null==f?"":` at ${f}`,"!"),a&&N.createElement(N.Fragment,null,N.createElement(Ue.Z,null,"This is a take-home coding challenge. You may start working on it whenever it's convenient for you."),C,N.createElement(Ue.Z,null,"Enter your information to get your interview started."))),N.createElement(Vt.Z,{direction:{xs:"column",md:"row"},justifyContent:{xs:"flex-start",md:a?"center":"space-between"},sx:{flex:"0 0 auto",maxWidth:{xs:400,md:960},overflow:"auto",width:"100%"}},N.createElement(eo,null,N.createElement(Vt.Z,{spacing:4},!a&&N.createElement(Vt.Z,{alignItems:"flex-start",spacing:2.5,sx:{fontSize:"1rem",fontWeight:400,textAlign:"left"}},N.createElement(N.Fragment,null,N.createElement(Ue.Z,{color:"inherit",variant:"h2"},"Joining as a candidate?"),N.createElement(Ue.Z,null,"Enter your name and email to join the interview."))),N.createElement(Vt.Z,{spacing:2.5},N.createElement(ia.Z,{autoFocus:!0,"data-testid":"NameInput",error:d,InputProps:{sx:{height:42}},margin:"normal",onChange:e=>l(e.target.value),onKeyDown:k,placeholder:S,sx:{margin:0},value:o,variant:"outlined"}),N.createElement(ia.Z,{"data-testid":"EmailInput",error:d,InputProps:{sx:{height:42},type:"email"},margin:"normal",onChange:e=>c(e.target.value),onKeyDown:k,placeholder:"Email address",value:s,variant:"outlined"})),N.createElement(zr.Z,{control:N.createElement($r.Z,{checked:m,name:o,id:o,size:"medium",sx:{marginLeft:"-9px",marginTop:"-9px"},onChange:h}),"data-testid":"TosCheckbox",label:N.createElement(Ue.Z,{sx:{textAlign:"left","& a":{color:"inherit",textDecoration:"underline"}}},"I accept these"," ",N.createElement("a",{target:"_blank",href:"/tos"},"terms")," ","and acknowledge that I have read the"," ",N.createElement("a",{target:"_blank",href:"/privacy"},"privacy policy")," ","and understand that my data is not sold to third parties."),sx:{alignItems:"flex-start"}}),N.createElement($e.Z,{title:E,placement:"top",arrow:!0},N.createElement(He.Z,{"data-testid":"LoginButton",onClick:w,variant:"contained",sx:{borderRadius:100,fontSize:"1rem"},disabled:!y},"Join")),N.createElement(Ue.Z,{sx:{textAlign:"left"}},"First time here? Read our"," ",N.createElement(Di.Z,{href:"https://coderpad.io/getting-started-candidates",rel:"noreferrer",sx:{textDecoration:"none"},target:"_blank"},"quick guide"),a&&N.createElement(N.Fragment,null," ","or try the"," ",N.createElement(Di.Z,{href:"/sandbox",rel:"noreferrer",sx:{textDecoration:"none"},target:"_blank"},"sandbox")),"."))),n&&!a&&N.createElement(eo,{sx:{marginLeft:e=>({md:e.spacing(4)}),marginTop:e=>({xs:e.spacing(4),md:0})}},N.createElement(Vt.Z,{spacing:4,sx:{flex:1}},N.createElement(Vt.Z,{alignItems:"flex-start",spacing:2.5,sx:{fontSize:"1rem",fontWeight:400,textAlign:"left"}},N.createElement(Ue.Z,{color:"inherit",variant:"h2"},"Work for ",f,"?"),N.createElement(Ue.Z,null,"Log into your account to access private notes and options to manage the interview.")),N.createElement(M.Z,{sx:{display:"flex",flex:1,flexDirection:"column"}},N.createElement(M.Z,{sx:{alignItems:"center",display:"flex",marginTop:"auto"}},!n.idpEnabled&&n.seededEmail&&N.createElement(N.Fragment,null,N.createElement(He.Z,{variant:"contained",sx:{borderRadius:100,fontSize:"1rem"},href:`https://${location.host.replace("app.","")}/register/?email=${n.seededEmail}&previous_url=${location.href}`},"Register"),N.createElement(Ue.Z,{sx:{color:"#7a8b99",marginX:2}},"or")),N.createElement(He.Z,{variant:"contained",sx:{borderRadius:100,flex:1,fontSize:"1rem"},href:n.idpEnabled?`/saml/init?issuer=${n.idpIssuer}&previous_url=${location.href}`:`/login?previous_url=${location.href}&interviewer_login=${n.id}`},"Log in"))))))),N.createElement(M.Z,{sx:{alignSelf:{xs:"center",md:"flex-end"},marginTop:"auto",paddingTop:12,"& svg":{width:160}}},N.createElement(Jr,null)))})),no=(0,Qt.ZP)(Hr.Z,{target:"eff0glu0"})((({theme:e})=>({".MuiBackdrop-root":{backgroundColor:"dark"===e.palette.mode?e.palette.background[50]:"white"}})),"");var ao=()=>{const{logoUrl:e,padOrg:t,slug:n,takeHome:a,takeHomeTimeLimit:i}=(0,ue.nT)("logoUrl","padOrg","slug","takeHome","takeHomeTimeLimit"),r=(0,oe.I0)();return N.createElement(no,{open:!0},N.createElement(to,{logoUrl:e,onLogin:(e,t)=>{R().set(`pad_${n}_username`,e),R().set(`pad_${n}_email`,t),r({type:"logged_in",username:e,email:t})},padOrg:t,takeHome:a,takeHomeTimeLimit:i}))};function io(e,t,n){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:String(a))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class ro extends N.Component{constructor(...e){super(...e),io(this,"handleClick",(e=>{this.props.onBackgroundClick&&e.target===this._backdrop&&(e.stopPropagation(),this.props.onBackgroundClick())}))}render(){const e=null!=this.props.padding?{padding:this.props.padding}:void 0;return N.createElement("div",{className:"Modal",onClick:this.handleClick,role:"dialog",tabIndex:"-1",ref:e=>this._backdrop=e},N.createElement("div",{className:ke()(this.props.className,"Modal-contents"),style:e},this.props.children))}}function oo(e,t,n){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:String(a))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class lo extends N.Component{constructor(...e){super(...e),oo(this,"onBackgroundClickHandler",(()=>{this.props.onBackgroundClick({name:"Multifile Modal Dismissed",params:this.props.analyticsParams})})),oo(this,"onClickMultifileHandler",(()=>{this.props.formatAndSelectQuestion({...this.props.question,_analytics:{name:"Multifile Modal Picked Multifile",params:this.props.analyticsParams},contents:null})})),oo(this,"onClickLegacyHandler",(()=>{this.props.selectQuestion({...this.props.question,_analytics:{name:"Multifile Modal Picked Legacy",params:this.props.analyticsParams},fileContents:null,legacySingleFile:!0})}))}render(){return N.createElement(ro,{className:"MultifileModal",onBackgroundClick:this.onBackgroundClickHandler},N.createElement("h2",{className:"MultifileModal-header"},"Select code layout"),N.createElement("div",{className:"MultifileModal-buttons"},N.createElement("div",{className:"MultifileModal-marginUnit"}),N.createElement("div",{className:"MultifileModal-buttonsUnit"},N.createElement("div",{className:"MultifileModal-button",onClick:this.onClickMultifileHandler,type:"primary"},N.createElement("h3",{className:"MultifileModal-colHeader"},N.createElement("span",null,"Frontend Multifile *"),N.createElement("span",{className:"MultifileModal-colHeaderHint"},"(new and recommended)")),N.createElement("div",{className:"MultifileModal-workspace"},N.createElement("div",{className:"MultifileModal-workspaceMultiEditor"},N.createElement("div",{className:"MultifileModal-workspaceMultiEditorDirectory"},N.createElement("div",{className:"MultifileModal-workspaceEditorHeader"},"Files"),N.createElement("div",{className:"MultifileModal-workspaceEditorDirectoryItem"},"HTML"),N.createElement("div",{className:"MultifileModal-workspaceEditorDirectoryItem"},"JavaScript"),N.createElement("div",{className:"MultifileModal-workspaceEditorDirectoryItem"},"CSS"))),N.createElement("div",{className:"MultifileModal-workspaceCodeExecution"},"Rendered Output")))),N.createElement("div",{className:"MultifileModal-marginUnit"}),N.createElement("div",{className:"MultifileModal-buttonsUnit"},N.createElement("div",{className:"MultifileModal-button",onClick:this.onClickLegacyHandler,type:"regular"},N.createElement("h3",{className:"MultifileModal-colHeader"},"CoderPad Classic"),N.createElement("div",{className:"MultifileModal-workspace"},N.createElement("div",{className:"MultifileModal-workspaceMultiEditor"},N.createElement("div",{className:"MultifileModal-workspaceEditor"},N.createElement("div",{className:"MultifileModal-legacyEditorHeader"},"All-In-One Code"),N.createElement("div",{className:"MultifileModal-legacyEditorInfo"},"(CSS and JavaScript inline in a single HTML file)"))),N.createElement("div",{className:"MultifileModal-workspaceCodeExecution"},"Rendered Output")))),N.createElement("div",{className:"MultifileModal-marginUnit"})),N.createElement("div",{className:"MultifileModal-info"},N.createElement("div",{className:"MultifileModal-marginUnit"}),N.createElement("div",{className:"MultifileModal-infoUnit"},"* This question's code will be automatically parsed into separate HTML, CSS, and JavaScript files. If the parsed results aren't what you expect, reload the question in the CoderPad Classic layout."),N.createElement("div",{className:"MultifileModal-infoUnit"}),N.createElement("div",{className:"MultifileModal-marginUnit"})))}}var so=(0,oe.$j)((function(e){var t;const{lastLoadedQuestionId:n,question:a,modalVisible:i}=e.multifile,{slug:r}=window.padConfig;return{analyticsParams:{...null===a||void 0===a||null===(t=a._analytics)||void 0===t?void 0:t.params,lastLoadedQuestionId:n,slug:r},question:a,visible:i}}),(e=>({onBackgroundClick(t){e(Ft(t))},selectQuestion(t){e({type:"question_selected_by_local_user",...t}),e(Ft())},formatAndSelectQuestion(t){e({type:"question_format_and_select_requested",question:t}),e(Ft())}})))(lo),co=n(93155);const uo=(0,wn.Z)({root:{fontSize:"0.875rem",width:360,marginBottom:12,cursor:({isClickable:e})=>e?"pointer":"auto"}}),mo=({notification:e,requestDismiss:t})=>{const{message:n,autoDismissMs:a,variant:i,onClick:r,title:o}=e,l=uo({isClickable:!!r});return(0,N.useEffect)((()=>{let e;return a&&(e=setTimeout(t,a)),()=>{clearTimeout(e)}}),[e]),N.createElement(Oi.Z,{severity:i,onClose:t,classes:l,onClick:r},o?N.createElement(co.Z,null,o):null,n)};function po(){const e=(0,oe.I0)(),t=(0,oe.v9)((e=>e.notifications)),[n,a]=(0,N.useState)([]);return N.createElement(M.Z,{position:"absolute",bottom:70,right:0,zIndex:101,overflow:"hidden",paddingRight:"20px"},t.map((t=>N.createElement(ea.Z,{key:t.key,in:!n.includes(t.key),direction:"left",mountOnEnter:!0,unmountOnExit:!0,onExited:()=>{e((0,fn.NI)(t.key)),a(n.filter((e=>e!==t.key)))}},N.createElement("div",null,N.createElement(mo,{notification:t,requestDismiss:()=>a([...n,t.key])}))))))}var go=n(59614);const ho=(0,Qt.ZP)(M.Z,{target:"edeu2jd3"})((({theme:e})=>({backgroundColor:e.palette.background.default,height:"49px",borderBottom:`2px solid ${e.palette.grey[700]}`,display:"flex",justifyContent:"center",alignItems:"center",color:e.palette.text.primary})),""),fo=(0,Qt.ZP)(He.Z,{target:"edeu2jd2"})((({theme:e})=>{const t="light"===e.palette.mode?"":"#fff";return{backgroundColor:"transparent",color:e.palette.text.primary,border:`1px solid ${e.palette.text.primary}`,height:"30px",marginLeft:"16px","&:hover":{backgroundColor:"transparent",border:`1px solid ${t}`}}}),""),vo=(0,Qt.ZP)(ii.Z,{target:"edeu2jd1"})((({theme:e})=>({backgroundColor:"transparent",...e.typography.body2,fontSize:"0.875rem",color:"#fff"})),""),bo=e=>(0,Qt.ZP)(e,{target:"edeu2jd0"})((({theme:e})=>({width:20,height:20,fill:"dark"===e.palette.mode?"#fff":e.palette.grey[700],marginRight:e.spacing(1)})),""),yo=bo(Gt.HE),Eo=bo(Gt.GD),wo=({onMakePublic:e,visible:t})=>{const[n,a]=(0,N.useState)([]);(0,N.useEffect)((()=>{(0,go.Z)().watch("waitingRoomUsers",(e=>{if(e){const t=Object.values(e).filter((e=>e.inWaitingRoom)).map((e=>e.name));a(t)}}))}),[]);const i=(0,N.useMemo)((()=>{const e=n[0],t="0.875rem",a={bgColor:n.length?"#173CA5":"",btnText:"Admit",icon:N.createElement(Eo,{sx:{fill:"#fff"}}),isWhite:n.length?"#fff":""};if(n.length>1){const i=n.slice(1);return{...a,description:N.createElement(Ue.Z,{fontSize:t},e," +",i.length," more",N.createElement($e.Z,{title:N.createElement(Vt.Z,{spacing:2,p:1},i.map(((e,t)=>N.createElement(vo,{key:t,elevation:0},e)))),placement:"bottom"},N.createElement(Jt.Z,{disableRipple:!0},N.createElement(Gt._M,{sx:{color:"#fff"}}))),"have joined the waiting room. To let the candidates join the pad:")}}return 1===n.length?{...a,description:N.createElement(Ue.Z,{fontSize:t},`${e} has joined the waiting room. To let them join the pad:`)}:{...a,icon:N.createElement(yo,null),btnText:"Open Pad to everyone",description:N.createElement(Ue.Z,{fontSize:t},"The waiting room is enabled. We will notify you when a candidate joins the waiting room.")}}),[n]);return N.createElement($t,{delayAppearanceSeconds:.1,visible:t},N.createElement(ho,{sx:{backgroundColor:i.bgColor,color:i.isWhite}},i.icon,i.description,N.createElement($e.Z,{title:"The waiting room is where candidates wait before being admitted to the pad by the interviewer.",placement:"bottom",arrow:!0},N.createElement(fo,{variant:"outlined",onClick:e,sx:{color:i.isWhite,border:`1px solid ${i.isWhite}`}},i.btnText))))};var ko=n(45780);const So="showCandidateOverlay",Co={userId:"",userInfo:{},uncommittedUsername:"",uncommittedEmail:"",showCandidateOverlay:!1,isOnline:!1};function xo(e=Co,t){switch(t.type){case"user_removed":if(t.userId!==e.userId)return{...e,userInfo:c().omit(e.userInfo,t.userId)};break;case"user_added":case"user_changed":{const n=t.userObj,a=n.userId;if(n.invisible||!n.name||"string"!==typeof n.color||!n.color.match(/^#[a-fA-F0-9]{3,6}$/))break;return{...e,userInfo:{...e.userInfo,[a]:{...e.userInfo[a],id:a,self:a==e.userId,name:n.name&&n.name.substring(0,30),color:n.color,isOwner:n.isOwner,drawingModeOpen:n.drawingModeOpen,isOnline:!!n.connections}}}}case"username_edited":return{...e,uncommittedUsername:t.newName};case"logged_in":return{...e,uncommittedUsername:t.username,uncommittedEmail:t.email};case"candidate_overlay_hidden":return{...e,showCandidateOverlay:!1};case"connection_status_changed":return{...e,isOnline:t.isOnline};case"drawing_mode_toggled":return{...e,userInfo:{...e.userInfo,[e.userId]:{...e.userInfo[e.userId],drawingModeOpen:t.isOpen}}};case"tracked_user_changed":return{...e,trackedUserId:t.userId}}return e}var _o,To,Io,Po;const Zo=["title","titleId"];function Oo(){return Oo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Oo.apply(this,arguments)}function Mo(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}const Do=(e,t)=>{let{title:n,titleId:a}=e,i=Mo(e,Zo);return N.createElement("svg",Oo({xmlns:"http://www.w3.org/2000/svg",width:241,height:34,fill:"none",viewBox:"0 0 241 34",ref:t,"aria-labelledby":a},i),n?N.createElement("title",{id:a},n):null,_o||(_o=N.createElement("path",{fill:"#CC4E41",d:"m240.914 33.054-9.039.36-.405-2.294c-1.754 1.754-3.957 2.699-6.476 2.699-2.968 0-5.126-.99-6.655-3.058-1.484-2.024-2.159-4.812-2.159-8.5 0-4.047.989-7.15 3.058-9.354 2.024-2.159 5.037-3.328 9.084-3.328.945 0 1.889.09 2.744.405V4.587l-3.418-.81V.36l8.005-.36.809.944.81.72v26.983l3.462.81zm-9.803-6.746V15.38c-.765-.404-1.754-.674-3.373-.674-3.283 0-4.992 2.428-4.992 7.285 0 4.587 1.349 6.836 4.137 6.836.81 0 1.619-.135 2.159-.675.764-.405 1.214-.81 1.484-1.214z"})),To||(To=N.createElement("path",{fill:"#515050",d:"M57.97 8.59c-1.35-.54-2.969-.674-4.813-.674-4.722 0-7.105 3.418-7.105 10.523 0 6.566 2.428 9.85 7.375 9.85 1.26 0 2.608-.27 3.823-.765 1.349-.54 2.428-.99 3.148-1.484l.989-.72 2.338 3.913c-.044.045-.36.36-.45.54-.224.134-.764.584-1.483 1.213-.765.54-1.62.99-2.339 1.395-.81.404-1.889.764-3.103 1.079-1.26.36-2.428.54-3.687.54-4.408 0-7.736-1.35-10.164-3.913-2.339-2.653-3.598-6.386-3.598-11.333 0-4.992 1.35-8.904 3.958-11.782 2.608-2.834 6.07-4.318 10.613-4.318 1.484 0 3.148.135 4.767.54s2.968.675 3.867.99l1.35.539-.36 8.095h-4.182zM78.342 9.805c3.418 0 6.071.99 8.05 3.058 1.889 2.024 2.878 4.857 2.878 8.5 0 3.913-.99 6.79-3.103 9.084s-4.857 3.283-8.365 3.283c-7.195 0-10.928-3.912-10.928-11.782 0-3.913.99-6.791 3.103-8.905 1.889-2.248 4.857-3.238 8.365-3.238m-.27 4.857c-1.619 0-2.923.54-3.598 1.62-.674 1.078-1.214 2.832-1.214 5.486 0 2.428.36 4.317.99 5.396.764 1.214 1.888 1.71 3.462 1.71 1.62 0 2.698-.54 3.418-1.71.765-1.08 1.08-3.058 1.08-5.531 0-2.339-.36-4.048-.99-5.127-.54-1.26-1.619-1.844-3.148-1.844M116.702 33.054l-9.039.36-.36-2.294c-1.754 1.754-4.002 2.699-6.476 2.699-2.968 0-5.126-.99-6.655-3.058-1.484-2.024-2.16-4.812-2.16-8.5 0-4.047.99-7.15 3.059-9.354 2.024-2.159 5.037-3.328 9.084-3.328.945 0 1.889.09 2.744.405V4.587l-3.418-.81V.36l8.095-.36.944.944.765.72v26.983l3.417.81zm-9.848-6.746V15.38c-.765-.404-1.889-.674-3.328-.674-3.283 0-4.992 2.428-4.992 7.285 0 4.587 1.349 6.836 4.092 6.836.765 0 1.619-.135 2.294-.675q1.079-.608 1.484-1.214zM139.908 23.026l-14.256.134c.09 1.754.675 3.238 1.619 4.138.944.944 2.069 1.484 3.508 1.484.989 0 2.158-.135 3.373-.54 1.214-.405 2.158-.674 2.743-.99l.989-.539 1.889 3.418c-.36.27-.72.63-1.349.945-.585.404-1.754.944-3.418 1.618-1.754.675-3.373.99-4.992.99-3.643 0-6.386-.99-8.365-3.058-1.888-2.024-2.878-4.857-2.878-8.5 0-3.777.99-6.836 3.058-9.084 2.024-2.159 4.857-3.373 8.455-3.373 3.193 0 5.532.944 7.24 2.698s2.564 4.317 2.564 7.42zm-9.984-8.32c-1.214 0-2.068.405-2.878 1.214-.809.81-1.214 1.889-1.349 3.193h7.69c0-2.833-1.079-4.407-3.463-4.407M142.831 10.522l8.904-.36.36 2.969c.135-.27.495-.63.944-.945.45-.36 1.215-.944 2.159-1.484.989-.584 2.024-.944 2.878-.944.675 0 1.349.045 2.024.18s1.214.27 1.439.404l.405.135-.36 8.185h-3.688l-.674-3.687c-.72 0-1.484.18-2.294.584-.809.405-1.349.765-1.754 1.17l-.584.629v11.468l4.092.99v3.417h-13.851v-3.418l3.463-.99v-14.03l-3.463-.81z"})),Io||(Io=N.createElement("path",{fill:"#CC4E41",d:"M177.369 29.547v3.687h-13.086v-3.687l3.193-.99V8.14l-3.193-1.259V3.373l9.849-.18h4.137c3.283 0 5.801.72 7.69 2.429 1.889 1.619 2.788 3.777 2.788 6.7 0 3.508-.989 6.207-3.238 8.006-2.113 1.753-5.126 2.698-9.084 2.698h-2.338v5.666zm-3.327-21.362v9.58h2.293c1.754 0 3.238-.405 4.138-1.26.944-.81 1.439-2.024 1.439-3.508 0-1.439-.405-2.653-1.215-3.463-.809-.81-1.888-1.349-3.283-1.349zM213.931 33.056l-8.5.36-.719-2.744c-.27.135-.63.54-.989.944-.405.405-1.305.81-2.564 1.44-1.259.584-2.338.944-3.463.944q-3.102 0-4.857-1.754c-1.214-1.17-1.754-2.833-1.754-4.992 0-4.722 3.463-7.105 10.344-7.105h2.968V17.81c0-2.158-1.079-3.193-3.283-3.193-.674 0-1.304.09-1.979.135-.674.09-1.079.18-1.394.36l-.404.09-.675 2.743h-3.868l-.359-6.386c3.462-1.214 6.61-1.754 9.309-1.754 3.283 0 5.531.675 6.925 1.889 1.35 1.214 2.024 3.418 2.024 6.566v10.658l3.193.72zM197.247 26.4c0 1.754.809 2.653 2.563 2.653.675 0 1.349-.18 2.114-.675.719-.54 1.349-.809 1.754-1.304l.674-.584v-2.833h-2.428c-1.709 0-2.924.18-3.508.674-.81.36-1.169 1.124-1.169 2.069M28.827 1.26H2.518C1.08 1.26 0 2.34 0 3.778v26.219c0 1.439 1.08 2.518 2.518 2.518h26.309c1.394 0 2.518-1.08 2.518-2.518V3.778c0-1.439-1.079-2.518-2.518-2.518"})),Po||(Po=N.createElement("path",{fill:"#fff",d:"m6.386 17.315 5.081 1.8v2.518l-7.69-3.238V16.28l7.69-3.238v2.518zM14.391 23.926h-1.889L17.27 9.85h1.934zM24.914 17.315l-5.172-1.799v-2.473l7.735 3.238v2.114l-7.735 3.238v-2.474z"})))},Lo=(0,N.forwardRef)(Do);n.p;var Fo=n(96414);var Ao,Ro,No,jo,qo,Bo,zo,$o,Ho,Uo,Qo,Vo,Wo,Go,Yo,Ko,Jo,Xo,el=({useQuestionButton:e=!1,questionId:t})=>{const n=(0,Li.Z)(),a=(0,Xt.Z)((e=>e.breakpoints.up("md"))),i=e&&null!=t?"Hiring? Use this question in an interview":"Try CoderPad - The Technical Interview Platform",r=window.CoderPad.CANONICAL_URL;return N.createElement($t,{visible:!0},N.createElement(M.Z,{sx:{backgroundColor:n.palette.backgroundContrast[50],color:n.palette.secondary.contrastText,display:"flex",height:50,paddingX:2}},N.createElement(Vt.Z,{alignItems:"center",direction:"row",justifyContent:"space-between",sx:{flexGrow:1}},N.createElement(M.Z,{component:"a",href:`${r}/register/`,sx:{marginTop:1.5},target:"_parent"},(0,N.createElement)("light"===n.palette.mode?Fo.r:Lo,{alt:"CoderPad Logo",height:"25px",title:"CoderPad",width:"140px"})),a&&N.createElement(Ue.Z,{sx:{fontSize:20,fontWeight:400}},i),N.createElement(Vt.Z,{direction:"row",spacing:1},e&&null!=t?N.createElement(He.Z,{component:"a",href:`${r}/register?use_question_id=${t}`,target:"_parent"},"Use question"):N.createElement(N.Fragment,null,N.createElement(He.Z,{color:"brandInterview",component:"a",disableElevation:!0,href:`${r}/register/`,sx:{borderRadius:32,fontSize:"1rem",fontWeight:500},target:"_parent",variant:"contained"},"Sign Up Free"),N.createElement(He.Z,{color:"inherit",component:"a",href:`${r}/login/`,sx:{borderRadius:32,fontSize:"1rem",fontWeight:500},target:"_parent"},"Login"))))))},tl=n(99419);const nl=["title","titleId"];function al(){return al=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},al.apply(this,arguments)}function il(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}const rl=(e,t)=>{let{title:n,titleId:a}=e,i=il(e,nl);return N.createElement("svg",al({xmlns:"http://www.w3.org/2000/svg",width:55,height:60,fill:"none",viewBox:"0 0 50 54",ref:t,"aria-labelledby":a},i),n?N.createElement("title",{id:a},n):null,Ao||(Ao=N.createElement("path",{fill:"gray",d:"M44.99 15.25c-1.723 2.855-4.524-.027-7.945-2.074-3.42-2.047-6.14-2.478-4.444-5.332C34.325 4.989 44.451-2.58 45.53.894c1.32 4.283 1.185 11.474-.539 14.356"})),Ro||(Ro=N.createElement("path",{fill:"#D8D8D8",d:"M41.812 15.546c-1.266 2.128-3.151.108-5.467-1.265-2.317-1.401-4.202-1.616-2.936-3.744s8.565-7.919 9.211-5.414c.781 3.044.458 8.269-.808 10.423"})),No||(No=N.createElement("path",{fill:"#898785",d:"M26.299 35.962c-10.18 0-18.45 7.891-18.45 17.641h36.9c.026-9.75-8.242-17.641-18.45-17.641"})),jo||(jo=N.createElement("path",{fill:"gray",d:"M44.183 24.354c.323-1.212.511-2.478.511-3.771 0-8.915-8.187-14.975-18.314-14.975-10.1 0-18.315 6.087-18.315 14.975 0 1.293.162 2.559.512 3.77-2.478 2.236-3.932 4.983-3.932 7.946 0 7.649 9.722 13.844 21.735 13.844s21.735-6.195 21.735-13.844c0-2.963-1.455-5.71-3.932-7.945"})),qo||(qo=N.createElement("path",{fill:"#D3D3D3",d:"M46.418 34.83c0 6.25-8.996 11.313-20.12 11.313-11.096 0-20.118-5.064-20.118-11.312 0-6.249 8.86-9.643 19.957-9.643s20.281 3.394 20.281 9.643"})),Bo||(Bo=N.createElement("path",{fill:"#D3D3D3",d:"M17.572 15.385c6.303-.512 10.046 11.797 6.303 14.732l-10.02.808c-4.04-2.073-2.585-15.028 3.717-15.54M34.11 14.954c-6.303-.539-10.047 12.712-6.303 15.89l10.019.862c4.04-2.235 2.586-16.213-3.717-16.752"})),zo||(zo=N.createElement("path",{fill:"#B7B7B7",d:"M10.947 46.223c-4.283 0-7.73 3.313-7.73 7.38h15.46c0-4.094-3.475-7.38-7.73-7.38M41.974 45.927c-4.444 0-8.026 3.448-8.026 7.676H50c0-4.228-3.582-7.676-8.026-7.676"})),$o||($o=N.createElement("path",{fill:"#fff",d:"M16.172 26.535a4.08 4.08 0 0 1 .188-5.764 4.08 4.08 0 0 1 5.764.189 4.08 4.08 0 0 1-.188 5.764c-1.67 1.535-4.229 1.454-5.764-.189"})),Ho||(Ho=N.createElement("path",{fill:"#A8CDD6",d:"M16.818 26.508c-1.239-1.32-1.158-3.393.162-4.632 1.32-1.24 3.393-1.158 4.633.161 1.238 1.32 1.158 3.394-.162 4.633s-3.394 1.158-4.633-.162"})),Uo||(Uo=N.createElement("path",{fill:"#42403E",d:"M17.276 26.643c-1.05-1.104-.97-2.855.135-3.878 1.104-1.05 2.854-.97 3.878.134 1.05 1.104.97 2.855-.135 3.879-1.104 1.023-2.855.97-3.878-.135"})),Qo||(Qo=N.createElement("path",{fill:"#fff",d:"M18.488 26.858a.984.984 0 0 1 .054-1.4.984.984 0 0 1 1.4.054.984.984 0 0 1-.053 1.4 1.01 1.01 0 0 1-1.401-.054"})),Vo||(Vo=N.createElement("path",{fill:"#666462",d:"M32.52 30.468c0 2.127-3.34 5.494-6.221 5.494s-6.222-3.367-6.222-5.495c0-2.127 2.774-2.827 6.222-2.827 3.447 0 6.221.7 6.221 2.828"})),Wo||(Wo=N.createElement("path",{fill:"#3F3F3F",d:"M32.52 30.468c0 2.127-3.34 5.494-6.221 5.494s-6.222-3.367-6.222-5.495c0-2.127 2.774-2.827 6.222-2.827 3.447 0 6.221.7 6.221 2.828",opacity:.42})),Go||(Go=N.createElement("path",{fill:"#fff",d:"M29.692 26.59a3.999 3.999 0 1 1 5.655-5.657 3.999 3.999 0 0 1-5.655 5.656"})),Yo||(Yo=N.createElement("path",{fill:"#A8CDD6",d:"M30.339 26.535a3.2 3.2 0 0 1 0-4.552 3.2 3.2 0 0 1 4.551 0 3.2 3.2 0 0 1 0 4.552c-1.266 1.266-3.312 1.266-4.551 0"})),Ko||(Ko=N.createElement("path",{fill:"#42403E",d:"M30.769 26.643a2.715 2.715 0 0 1 0-3.825 2.715 2.715 0 0 1 3.824 0 2.715 2.715 0 0 1 0 3.825c-1.05 1.05-2.747 1.05-3.824 0"})),Jo||(Jo=N.createElement("path",{fill:"#fff",d:"M32.008 26.805a.975.975 0 0 1 0-1.374.975.975 0 0 1 1.374 0 .975.975 0 0 1 0 1.374.93.93 0 0 1-1.374 0"})),Xo||(Xo=N.createElement("path",{fill:"gray",d:"M15.822 8.059c3.232 1.347.565 5.387-1.05 9.238-1.617 3.878-1.563 6.14-4.822 4.794C6.718 20.744-2.735 11.318.766 9.648c4.255-2.02 11.797-2.963 15.056-1.589"})))},ol=(0,N.forwardRef)(rl);n.p;var ll=n(54941),sl=n(68285);const cl=(0,wn.Z)({root:{width:"141px",height:"40px",position:"absolute",right:"38px",bottom:"62px",zIndex:2,display:"flex",background:"#363C4D"},logo:{position:"absolute",top:"-56px",left:"40px"},title:{fontSize:"0.75rem",textAlign:"center",color:"#FFFFFF"},subtitle:{fontSize:"0.75rem",textAlign:"center",color:"#32CEAF",textTransform:"capitalize"},btnRoot:{color:"#FFFFFF"},btnSelected:{color:"#FFFFFF!important",background:"#2D72CC!important"}});function dl(){const e=cl(),t=(0,oe.I0)(),{sandboxView:n,sandboxSwitcher:a}=(0,oe.v9)(Ve.f6),[i,r]=(0,N.useState)(!1),o=(0,N.useMemo)((()=>sl.h.find((e=>e===n))),[n]),l=(0,N.useCallback)((()=>{const e=sl.h.find((e=>e!==o));t(Ea("sandboxView",e)),t((0,ll.u)("output")),t((0,ll.j5)(e===sl.I.Interviewer)),r(!i)}),[o]);return n&&a?N.createElement(ii.Z,{elevation:0,className:e.root},N.createElement(ol,{className:e.logo}),N.createElement(M.Z,{my:.5,mx:1.25},N.createElement(Ue.Z,{className:e.title},"Current View:"),N.createElement(Ue.Z,{className:e.subtitle,gutterBottom:!0},o)),N.createElement(Ma.Z,{value:"check",classes:{root:e.btnRoot,selected:e.btnSelected},selected:i,onChange:l},N.createElement(tl.Z,null))):N.createElement(N.Fragment,null)}var ul=n(3838),ml=n(88979);const pl="#353C4E",gl=(0,lr.Z)((e=>({root:{margin:0,padding:e.spacing(2),backgroundColor:pl,"& h2":{color:"#fff",textAlign:"center",fontWeight:400,fontSize:"1.5rem",paddingTop:e.spacing(4.75)}}})))(ni.Z),hl=(0,lr.Z)((e=>({root:{backgroundColor:pl,color:"#FFF",paddingTop:e.spacing(1),paddingBottom:e.spacing(2),paddingLeft:e.spacing(8),paddingRight:e.spacing(8),textAlign:"center"}})))(ri.Z),fl=(0,lr.Z)((e=>({root:{margin:0,backgroundColor:pl,color:"#FFF",justifyContent:"center",paddingBottom:e.spacing(4)}})))(ml.Z),vl=(0,lr.Z)((()=>({root:{margin:"0px!important",borderColor:"#2D72CC",color:"#FFF",fontWeight:100,fontSize:"0.875rem"},outlined:{"&:hover":{backgroundColor:"#2D72CC"}}})))(He.Z),bl=(0,wn.Z)((e=>({logo:{position:"absolute",top:"-59px",left:"6px"},paper:{overflowY:"unset",maxWidth:"400px"},divider:{width:"1px",height:"50px",background:"#727682",marginLeft:`${e.spacing(3)} !important`,marginRight:e.spacing(3)}})));function yl(){const e=(0,oe.I0)(),{sandboxModal:t}=(0,oe.v9)(Ve.f6),n=bl(),a=t=>()=>{var n,a;e(Ea("sandboxView",t));const i=`${null===(n=window.location)||void 0===n?void 0:n.origin}${null===(a=window.location)||void 0===a?void 0:a.pathname}?viewmodal=false&switcher=true&view=${t}`;window.history.replaceState("","",i),e(Ea("sandboxModal",!1)),e(Ea("sandboxSwitcher",!0)),e((0,ll.j5)(t===sl.I.Interviewer))};return N.createElement("div",null,N.createElement(ul.Z,{open:t,"aria-labelledby":"sanbox-modal",PaperProps:{className:n.paper}},N.createElement(ol,{className:n.logo}),N.createElement(gl,{id:"sanbox-modal"},"Welcome to the Sandbox"),N.createElement(hl,null,N.createElement(Ue.Z,{gutterBottom:!0},"We understand you want to be prepared for your interviews. Play around in the CoderPad IDE ahead of your interview and get familiar with the setup."),N.createElement(M.Z,{mb:2.5}),N.createElement(Ue.Z,{gutterBottom:!0},"Please select a view")),N.createElement(fl,null,N.createElement(vl,{variant:"outlined",onClick:a(sl.I.Candidate),color:"primary"},sl.I.Candidate),N.createElement(M.Z,{className:n.divider}),N.createElement(vl,{variant:"contained",disableElevation:!0,onClick:a(sl.I.Interviewer),color:"primary"},sl.I.Interviewer))))}var El=n(76545),wl=n(53061),kl=n(19755);class Sl extends N.PureComponent{componentDidMount(){this.div.appendChild(this.props.track.attach())}componentDidUpdate(){this.props.track.detach(),kl(this.div).find(this.props.track.kind).remove(),this.div.appendChild(this.props.track.attach())}componentWillUnmount(){this.props.track.detach()}render(){return N.createElement("div",{className:ke()(this.props.className,{"TwilioTrack--videoMirrored":this.props.track instanceof ei().LocalVideoTrack}),ref:e=>this.div=e})}}var Cl=({size:e,quality:t})=>{const n=Math.floor(e/5),a=Math.floor(.7*n);return N.createElement("div",{className:"CallQuality",style:{height:e,width:5*n+4*a}},c().times(5,(e=>N.createElement("div",{className:ke()("CallQuality-bar",{"CallQuality-barActive":e<t}),key:e,style:{height:20*(e+1)+"%",width:n}}))))},xl=n(48572),_l=n(19074);const Tl=(0,Qt.ZP)("div",{target:"eygihfx1"})({name:"1jhz4sw",styles:"position:absolute;overflow:hidden;bottom:100px;left:0;right:0;width:100%;height:75px;display:flex;justify-content:space-around;align-items:flex-end;z-index:100;flex-direction:row;pointer-events:none"}),Il=(0,Qt.ZP)("span",{target:"eygihfx0"})({name:"n5pj00",styles:"display:block;font-family:Helvetica;font-size:21px;font-weight:400;text-shadow:2px 2px 0px black;letter-spacing:1px;padding:8px;background-color:#0000006e;color:white;backdrop-filter:blur(5px);webkit-box-decoration-break:clone;box-decoration-break:clone;line-height:1.5;max-width:250px"}),Pl=({transcript:e})=>{const t=(0,oe.v9)(Ve.l0),n=(0,N.useMemo)((()=>Object.values(t).find((({id:t})=>t===e.userId))),[e.userId,t]),[a,i]=(0,N.useState)(!0),r=(0,N.useMemo)((()=>{var t,n;return null!==(t=null===e||void 0===e?void 0:e.transcripts[null!==(n=e.preferredTranscript)&&void 0!==n?n:0])&&void 0!==t?t:""}),[e.transcripts,e.preferredTranscript]),o=(0,N.useCallback)((()=>e.timestamp+2e3>Date.now()),[e.timestamp]);return(0,N.useEffect)((()=>{let e;if(r){if(!o())return void i(!1);e=setInterval((()=>{const t=o();i(t),t||clearInterval(e)}),1e3)}return()=>clearInterval(e)}),[o,r,a]),N.createElement("div",{style:{flex:1,display:"inline-flex",justifyContent:"center"}},a&&N.createElement(Il,null,N.createElement("span",{style:{color:null===n||void 0===n?void 0:n.color}},null===n||void 0===n?void 0:n.name),": ",r))},Zl=()=>{const e=(0,oe.v9)(Ve.l0),t=(0,ue.oB)("isPlayback"),n=(0,oe.v9)(Ve.WW),a=(0,xl.Q)(),i=(0,N.useMemo)((()=>a.sort(((e,t)=>t.timestamp-e.timestamp)).filter((e=>e.kind===_l.o.Transcript)).reduce(((e,t)=>(e.find((({userId:e})=>e===t.userId))||e.push(t),e)),[])),[a]);return t||!n?null:N.createElement(Tl,null,Object.values(e).sort(((e,t)=>{var n,a;return(null!==(n=null===e||void 0===e?void 0:e.name)&&void 0!==n?n:"").localeCompare(null!==(a=null===t||void 0===t?void 0:t.name)&&void 0!==a?a:"")})).map((e=>{const t=i.find((({userId:t})=>t===e.id));return t&&N.createElement(Pl,{key:t.id,transcript:t})})))};var Ol=n(69518),Ml=n(88983);function Dl(e,t,n){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:String(a))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Ll=window.AudioContext||window.webkitAudioContext;class Fl extends N.PureComponent{constructor(e){super(e),Dl(this,"handleAudioProcess",c().throttle((()=>{const e=new Uint8Array(this.analyser.frequencyBinCount);this.analyser.getByteFrequencyData(e),this.setState({volume:this.calculateVolume(e)})}),50)),this.state={volume:0}}componentDidMount(){this.setupAudioProcessing()}componentWillUnmount(){this.javascriptNode&&this.javascriptNode.onaudioprocess&&(this.javascriptNode.onaudioprocess.cancel(),this.javascriptNode.onaudioprocess=null),this._audioContext&&this._audioContext.close()}setupAudioProcessing(){const e=this._audioContext=Ll&&new Ll;if(!e)return;this.analyser=e.createAnalyser();const t=new MediaStream;t.addTrack(this.props.track.mediaStreamTrack);const n=e.createMediaStreamSource(t);this.javascriptNode=e.createScriptProcessor(2048,1,1),this.analyser.smoothingTimeConstant=.8,this.analyser.fftSize=1024,n.connect(this.analyser),this.analyser.connect(this.javascriptNode),this.javascriptNode.connect(e.destination),this.javascriptNode.onaudioprocess=this.handleAudioProcess}calculateVolume(e){const t=c().reduce(e,((e,t)=>e+t),0)/e.length;return Math.min(4*t/100,4)}render(){return N.createElement("div",{className:"volumeMeter"},N.createElement(Ol.Z,null,c().times(Math.min(3,Math.floor(this.state.volume)),(e=>N.createElement(Ml.Z,{key:e,classNames:"opacity",timeout:{enter:100,exit:500}},N.createElement("div",{className:"volumeDot"})))).reverse()))}}const Al=["disabled","enabled","started","stopped"];var Rl=({audioMuted:e,muteAudio:t,muteVideo:n,unmuteAudio:a,unmuteVideo:i,user:r,videoMuted:o,ccEnabled:l,toggleCC:s})=>{const[c,d]=(0,N.useState)(!1),u=(0,ue.oB)("hasTranscriptions"),m=(0,N.useCallback)((()=>{const{video:e}=r;return e&&e.isStarted&&e.isEnabled}),[r]),p=(0,N.useCallback)((()=>{d(m())}),[m]),g=(0,N.useCallback)((e=>{for(const t of Al)e.on(t,p)}),[p]),h=(0,N.useCallback)((e=>{for(const t of Al)e.off(t,p)}),[]);return(0,N.useEffect)((()=>(r.video&&(g(r.video),d(m())),()=>{r.video&&h(r.video)})),[g,m,h,r.video]),N.createElement("div",{className:"video-thumbnail"},r.audio&&N.createElement(Fl,{track:r.audio}),N.createElement("div",{className:"info"},r.name,r.self&&t&&N.createElement("div",{className:"controls"},r.audio&&(e?N.createElement("button",{className:"mute unmute",onClick:a}):N.createElement("button",{className:"mute",onClick:t})),u&&N.createElement("button",{className:"cc",onClick:s},l?N.createElement(El.Z,null):N.createElement(wl.Z,null)),r.video&&(o?N.createElement("button",{className:"hide unhide",onClick:i}):N.createElement("button",{className:"hide",onClick:n})))),r.video&&c?N.createElement(Sl,{kind:"video",track:r.video}):N.createElement("div",{className:"no-video"},"No Video"),!r.self&&r.audio&&N.createElement(Sl,{kind:"audio",track:r.audio}))};var Nl=({endCall:e,minimize:t,toggleCC:n,muteAudio:a,unmuteAudio:i,muteVideo:r,unmuteVideo:o,ccEnabled:l,callers:s,audioMuted:d,videoMuted:u,networkQualityLevel:m})=>{const p=(0,ue.oB)("hasTranscriptions"),[[g],h]=c().partition(s,"self"),f=h[0]||g,v=s.filter((e=>e!==f)),b=N.createElement("div",{className:"right-sidebar"},v.map((e=>N.createElement(Rl,{user:e,key:e.id})))),y=N.createElement("div",{className:"footer"},N.createElement("button",{onClick:t,className:"minimize-call"},"Minimize"),0===h.length&&N.createElement("span",null,"You're the only one on this call right now"),N.createElement("div",{className:"controls"},p&&N.createElement("button",{className:"cc "+(l?"enabled":""),onClick:n},l?N.createElement(El.Z,null):N.createElement(wl.Z,null)),g&&g.audio&&(d?N.createElement("button",{className:"mute unmute",onClick:i},"Unmute"):N.createElement("button",{className:"mute",onClick:a},"Mute")),g&&g.video&&(u?N.createElement("button",{className:"hide unhide",onClick:o},"Show Video"):N.createElement("button",{className:"hide",onClick:r},"Hide Video")),N.createElement("button",{onClick:e,className:"end-call"},"Leave Call")));return N.createElement(ro,{padding:0,className:"MaximizedCall-modalParent"},N.createElement("div",{className:"MaximizedCall"},N.createElement(Zl,null),f&&(f.video?N.createElement(Sl,{className:"MaximizedCall-maximizedTrack",track:f.video,kind:"video"}):N.createElement("div",{className:"MaximizedCall-noMaximizedVideoMessage"},"No Video")),m&&N.createElement("span",{className:"MaximizedCall-qualityBackground"},N.createElement(Cl,{size:40,quality:m})),(null===f||void 0===f?void 0:f.audio)&&N.createElement(Sl,{track:f.audio,kind:"audio"}),b,y))};const jl={right:15,bottom:66},ql=10;var Bl=({endCall:e,maximize:t,toggleCC:n,muteAudio:a,unmuteAudio:i,muteVideo:r,unmuteVideo:o,ccEnabled:l,callers:c,audioMuted:d,videoMuted:u,networkQualityLevel:m})=>{const[p,g]=(0,N.useState)(jl),[h,f]=(0,N.useState)(!1),v=(0,N.useRef)(null),b=(0,N.useRef)(p),y=e=>{b.current=e,g(e)};let E,w,k,S,C;(0,N.useEffect)((()=>()=>{h&&(document.removeEventListener("mousemove",x,{}),document.removeEventListener("mouseup",_,{}),document.body.classList.remove("pad--dragging"))}),[]);const x=e=>{const t=e.pageX-w,n=e.pageY-k,a={...E};void 0!==a.left?a.left=(0,s.clamp)(a.left+t,ql,S-ql):void 0!==a.right&&(a.right=(0,s.clamp)(a.right-t,ql,S-ql)),void 0!==a.top?a.top=(0,s.clamp)(a.top+n,ql,C-ql):void 0!==a.bottom&&(a.bottom=(0,s.clamp)(a.bottom-n,ql,C-ql)),y(a)},_=()=>{var e,t,n,a;if(!v.current)return;document.body.classList.remove("pad--dragging"),document.removeEventListener("mousemove",x,{}),document.removeEventListener("mouseup",_,{});const i=v.current.clientWidth,r=v.current.clientHeight,o=window.innerWidth,l=window.innerHeight,c=b.current;let d=null!==(e=c.left)&&void 0!==e?e:o-((null!==(t=c.right)&&void 0!==t?t:0)+i),u=null!==(n=c.top)&&void 0!==n?n:l-((null!==(a=c.bottom)&&void 0!==a?a:0)+r);const m=o-i,p=l-r;d=(0,s.clamp)(d,ql,m-ql),u=(0,s.clamp)(u,ql,p-ql);const g=o-(d+i),h=l-(u+r),E={};d<g?E.left=d:E.right=g,u<h?E.top=u:E.bottom=h,y(E),f(!1)};return N.createElement("div",{className:ke()({MinimizedCall:!0,"MinimizedCall--dragging":h}),ref:v,style:p,onMouseDown:e=>{var t;if(!v.current)return;const n=e.target;(!n||"BUTTON"!==n.tagName&&"BUTTON"!==(null===(t=n.parentElement)||void 0===t?void 0:t.tagName))&&(document.addEventListener("mousemove",x,{}),document.addEventListener("mouseup",_,{}),f(!0),E=b.current,w=e.pageX,k=e.pageY,S=window.innerWidth-v.current.clientWidth,C=window.innerHeight-v.current.clientHeight,document.body.classList.add("pad--dragging"))},onMouseUp:_},N.createElement("div",{className:"MinimizedCall-iconBar"},N.createElement("button",{title:"Maximize Call",className:"MinimizedCall-maximizeButton",onClick:t},N.createElement("span",{className:"MinimizedCall-buttonGlyph fui-resize"})),N.createElement("button",{title:"Leave Call",className:"MinimizedCall-endCallButton",onClick:e},N.createElement("span",{className:"MinimizedCall-buttonGlyph fui-cross"}))),c.map((e=>N.createElement(Rl,{user:e,key:e.id,muteAudio:e.self?a:void 0,unmuteAudio:e.self?i:void 0,muteVideo:e.self?r:void 0,unmuteVideo:e.self?o:void 0,audioMuted:e.self?d:void 0,videoMuted:e.self?u:void 0,ccEnabled:l,toggleCC:n}))),m&&N.createElement("span",{className:"MinimizedCall-qualityBackground"},N.createElement(Cl,{size:20,quality:m})))},zl=n(49998),$l=n.n(zl),Hl=n(55877);var Ul=new class{constructor(){this.localAudioTrack=null,this.localVideoTrack=null,this.room=null}},Ql=n(56652),Vl=n(56408);const Wl={Firefox:"https://support.mozilla.org/en-US/kb/how-manage-your-camera-and-microphone-permissions#w_using-firefoxaos-address-bar-to-clear-camera-or-microphone-permissions-for-a-site",Chrome:"https://support.google.com/chrome/answer/2693767?co=GENIE.Platform%3DDesktop&hl=en",Safari:"https://support.apple.com/guide/safari/websites-ibrwe2159f50/mac"};function Gl(){const e=(0,ue.oB)("browser"),t=(0,oe.I0)(),{errorCode:n,errorText:a,mayReconnect:i}=(0,oe.v9)((e=>({...e.call}))),r=(0,N.useCallback)((()=>t({type:"call_error_dismissed"})),[t]),o=(0,N.useCallback)((()=>{t({type:"reconnect_to_call_clicked",_analytics:{name:"Call Setup",params:{from_invite:!1,from_reconnect:!0}}})}),[t]),l=(0,N.useMemo)((()=>{if("no_permission"===n){let t;for(const n of["Chrome","Firefox","Safari"])e.startsWith(`${n} `)&&(t=N.createElement("a",{href:Wl[n],target:"_blank",rel:"noopener noreferrer"},"Here's how to enable video in ",n,"."));return N.createElement(Vl.Z,null,"Check your browser settings for ",N.createElement("code",null,"app.coderpad.io"),". ",t," You may need to reload this pad after updating settings.")}return null}),[n,e]),s=(0,N.useMemo)((()=>{const e=[N.createElement(He.Z,{key:"dismiss",onClick:r,variant:"outlined",color:"inherit"},"Dismiss")];return i&&e.push(N.createElement(He.Z,{key:"reconnect",onClick:o,variant:"contained",color:"primary"},"Reconnect")),e}),[r,o,i]);return N.createElement(Ql.V,{open:!0,dialogTitle:a,content:l,actions:s})}var Yl=n(25683);function Kl({callParticipants:e}){const t=(0,ue.oB)("slug"),n=(0,un.i)(),a=(0,oe.I0)(),i=(0,N.useCallback)((()=>{a({type:"invite_accepted",_analytics:{name:"Call Setup",params:{from_invite:!0,from_reconnect:!1}}})}),[a]),r=(0,N.useCallback)((()=>{a({type:"invite_declined",_analytics:{name:"Call Invite Declined"}})}),[a]),[o,l]=(0,N.useState)(null);return(0,N.useEffect)((()=>{(0,go.Z)().get("twilioRoomId",(async e=>{if(e){var a;const i=await n(`/${t}/room_info?room_id=${e}`,{}),r=await i.json();null!==r&&void 0!==r&&null!==(a=r.participants)&&void 0!==a&&a.length&&(0,go.Z)().get("users",(e=>{if(null!=e){const t=[];for(const o of r.participants){const n=e[o];n&&t.push(n)}const n=t.find((e=>e.name)),a=(null===n||void 0===n?void 0:n.name)||"Someone";let i=" is ";r.participants.length>1&&(i=` and ${r.participants.length-1} ${(0,Yl._)("other",r.participants.length-1)} are `),i+="waiting for you.",l(N.createElement(M.Z,{pb:2,component:"span",display:"block"},N.createElement("strong",null,a),i))}}))}}))}),[n,t]),N.createElement(Ql.V,{open:!0,dialogTitle:"You've been invited to a call",actions:[N.createElement(He.Z,{key:"decline",onClick:r,variant:"outlined",color:"inherit"},"Decline"),N.createElement(He.Z,{key:"accept",onClick:i,variant:"contained",color:"primary"},"Accept")],content:N.createElement(Vl.Z,null,o,"Your browser may prompt for microphone and webcam permissions.")})}function Jl({open:e,onClose:t}){return N.createElement(Ql.V,{open:e,onClose:t,dialogTitle:"Someone declined call transcription",content:N.createElement("div",null,N.createElement(Ue.Z,{variant:"body1"},"At least 1 call participant chose to join the call without accepting transcription recording."),N.createElement(Ue.Z,{variant:"body1"},"The Interviewer Notes tab is available for note taking.")),actions:[N.createElement(He.Z,{key:"accept",onClick:t,variant:"contained",color:"primary"},"Got it")]})}var Xl=n(32141),es=n(76446),ts=n(47665);function ns(e){var t,n;const{handleDeviceChange:a,noDeviceListAvailable:i,kind:r,selectedId:o,deviceState:l,deviceList:s}=e,c=[];let d;for(const m of s){const e={label:m.label,value:m.deviceId};c.push(e),m.deviceId===o&&(d=e)}if("video"===r&&(c.unshift({label:"No Video",value:"____no_video"}),"____no_video"===o&&(d=c[0])),i){const e={label:"video"===r?"Default Webcam":"Default Microphone",value:"____default"};c.push(e),null!=o&&(d=e)}const u="error"===l?N.createElement(Xl.Z,{color:"error",fontSize:"small"}):"opening"===l?N.createElement(M.Z,{sx:{display:"flex",alignItems:"center",position:"absolute",top:"calc(50% - 0.5rem)",right:7}},N.createElement(on.Z,{size:16,color:"inherit"})):void 0;return N.createElement("div",null,N.createElement(es.Z,{fullWidth:!0,disabled:0===s.length||"opening"===l||i,variant:"outlined",color:"primary"},N.createElement(ts.Z,{id:`media-input-kind-${r}`},"video"===r?"Webcam":"Microphone"),N.createElement(xa.Z,{labelId:`media-input-kind-${r}`,onChange:a,label:"video"===r?"Webcam":"Microphone",value:null!==(t=null===(n=d)||void 0===n?void 0:n.value)&&void 0!==t?t:"",endAdornment:u,IconComponent:u?"span":void 0},c.map((({value:e,label:t})=>N.createElement(hi.Z,{key:e,value:e},t))))))}function as(){const{audioDevices:e,videoDevices:t,noDeviceListAvailable:n,audioDeviceId:a,videoDeviceId:i,audioDeviceState:r,videoDeviceState:o,requestingDevices:l,fromInvite:s,isJoining:d}=(0,oe.v9)((e=>{const t=c().groupBy(e.call.enumeratedDevices,"kind");return{...c().pick(e.call,["audioDeviceId","videoDeviceId","audioDeviceState","videoDeviceState","requestingDevices","fromInvite","isJoining"]),audioDevices:t.audioinput||[],videoDevices:t.videoinput||[],noDeviceListAvailable:e.call.enumerateFailed}})),u=(0,oe.I0)(),m=(0,ue.oB)("hasTranscriptions"),p=(0,N.useCallback)((()=>{u({type:"call_canceled"})}),[u]),g=(0,N.useCallback)(((e,t)=>{u({type:"device_switched",kind:e,deviceId:t})}),[u]),h=(0,N.useCallback)((()=>{u(m?{type:"call_transcription_consent_requested",_analytics:{name:"Call Transcription Consent Requested"}}:{type:"call_join_requested",_analytics:{name:"Call Join Attempted",params:{from_invite:s}}})}),[u,m,s]),f=(0,N.useCallback)((e=>{g("audio",e.target.value)}),[g]),v=(0,N.useCallback)((e=>{g("video",e.target.value)}),[g]),b=(0,N.useCallback)((()=>{l||d||p()}),[l,d,p]),y=!l&&a&&"open"===r&&"opening"!==o,E=s?"Join":"Start",w=d?`${E}ing call...`:null,k=l?N.createElement("p",null,"Waiting for devices..."):"error"===o?N.createElement("p",null,"Video unavailable"):null;return N.createElement(Ql.V,{open:!0,onClose:b,dialogTitle:"Join Call",content:N.createElement(Vt.Z,{spacing:2.5,minWidth:"350px"},w&&N.createElement("div",{className:"Pending-noticeOverlay"},w),N.createElement("div",{className:ke()({"Pending-videoContainer":!0,"Pending-videoContainer--textInLieu":!!k})},"open"===o&&N.createElement(Sl,{kind:"video",track:Ul.localVideoTrack}),k),N.createElement(ns,{kind:"video",selectedId:i,deviceState:o,deviceList:t,handleDeviceChange:v,noDeviceListAvailable:n}),N.createElement(ns,{kind:"audio",selectedId:a,deviceState:r,deviceList:e,handleDeviceChange:f,noDeviceListAvailable:n})),actions:[N.createElement(He.Z,{key:"cancel",variant:"outlined",color:"inherit",onClick:p},"Cancel"),N.createElement(He.Z,{key:"join",variant:"contained",color:"primary",onClick:h,disabled:!y},E," Call")]})}const is=(0,Qt.ZP)(Ue.Z,{target:"e1a6sqvw0"})((({theme:e})=>({paddingBottom:e.spacing(1.5)})),"");function rs(){const e=(0,oe.v9)((e=>e.call.fromInvite)),t=(0,oe.I0)(),n=(0,ue.oB)("firebaseAuthorId"),a=(0,oe.v9)(Ve.jl),i=(0,N.useCallback)((()=>{t({type:"call_join_requested",_analytics:{name:"Call Join Attempted",params:{from_invite:e}}})}),[t,e]),r=(0,N.useCallback)((()=>{(0,go.Z)().set(`transcript/${(0,Hl.v4)()}`,{kind:_l.o.SystemMessage,message:`${a} joined the call and declined recording.`,timestamp:(0,go.Z)().TIMESTAMP_SENTINEL}),(0,go.Z)().set(`usersDeniedTranscription/${n}`,!0),(0,y.j)(ln.j.TranscriptionUserDisagreed,{username:a}),i()}),[i,n,a]),o=(0,N.useCallback)((()=>{(0,go.Z)().set(`transcript/${(0,Hl.v4)()}`,{kind:_l.o.SystemMessage,message:`${a} joined the call and agreed to recording.`,timestamp:(0,go.Z)().TIMESTAMP_SENTINEL}),(0,go.Z)().set(`usersDeniedTranscription/${n}`,!1),t({type:"user_consented_to_transcription"}),jt("agreed_to_transcription",{username:a}),(0,y.j)(ln.j.TranscriptionUserAgreed,{username:a}),i()}),[t,i,a,n]);return N.createElement(Ql.V,{open:!0,dialogTitle:"This meeting will be recorded to a text transcript",content:N.createElement("div",null,N.createElement(is,{variant:"body1"},"No audio or video of this call will be saved, only a text transcription of the conversation. This improves accessibility, and helps the interviewer focus on the interview instead of taking notes."),N.createElement(is,{variant:"body1"},"Opting in to this feature also provides closed captioning for all call participants."),N.createElement(is,{variant:"body1"},'By clicking "Got it" below, you consent to having your conversation recorded to text. Otherwise click "Continue without transcription" to continue the call without recording.')),actions:[N.createElement(He.Z,{key:"decline",onClick:r,variant:"outlined",color:"inherit"},"Continue without transcription"),N.createElement(He.Z,{key:"accept",onClick:o,variant:"contained",color:"primary"},"Got it")]})}class os{constructor(e,t){this.sourceSampleRate=e,this.targetSampleRate=t}encode(e){const t=this.downSampleAudioFrame(e);if(!t)return null;const n=2*t.length,a=new ArrayBuffer(n),i=new DataView(a);return this.floatTo16BitPCM(i,0,t),a}floatTo16BitPCM(e,t,n){for(let a=0;a<n.length;a++,t+=2){const i=Math.max(-1,Math.min(1,n[a]));e.setInt16(t,i<0?32768*i:32767*i,!0)}}downSampleAudioFrame(e){if(!e)return null;if(this.targetSampleRate===this.sourceSampleRate||this.targetSampleRate>this.sourceSampleRate)return e;const t=this.sourceSampleRate/this.targetSampleRate,n=Math.round(e.length/t),a=new Float32Array(n);let i=0,r=0;for(;r<n;){const n=Math.round((r+1)*t);let o=0,l=0;for(;i<n&&i<e.length;)o+=e[i++],l++;a[r++]=o/l}return a}}var ls=n(41766);const ss=N.createContext({volume:1,setVolume:()=>{},play:()=>-1,stop:()=>{},pause:()=>{}}),cs=({children:e})=>{const[t,n]=(0,Wt._)("sfx_volume",1),[a,i]=(0,N.useState)([]),r=(0,N.useCallback)((e=>{const n=window.CoderPad.ASSETS[e];if(!n)throw new Error(`No asset found for ${e}`);const r=new ls.Howl({src:[n],volume:t}),o=r.play();return r.on("end",(()=>{i(a.filter((e=>e.id!==o)))})),i([...a,{id:o,asset:n,sound:r}]),o}),[a,t]),o=(0,N.useCallback)((e=>{const t=a.find((t=>t.id===e));t&&(t.sound.stop(),i(a.filter((t=>t.id!==e))))}),[a]),l=(0,N.useCallback)((e=>{const t=a.find((t=>t.id===e));t&&t.sound.pause()}),[a]),s=(0,N.useMemo)((()=>({volume:t,setVolume:n,play:r,stop:o,pause:l})),[t,n,r,o,l]);return N.createElement(ss.Provider,{value:s},e)},ds=e=>{const[t,n]=(0,N.useState)(!1),[a,i]=(0,N.useState)(!1),[r,o]=(0,N.useState)(null),[l,s]=(0,N.useState)(0),[c,d]=(0,N.useState)(0),u=N.useContext(ss),m=(0,oe.v9)((e=>e.call.audioDeviceId)),p=(0,N.useRef)(null),g=(0,N.useRef)(null),h=(0,N.useRef)(e),f=(0,N.useRef)(!1);(0,N.useEffect)((()=>{t&&!f.current&&u.play("recording_in_progress.mp3"),f.current=t}),[t,u]),(0,N.useEffect)((()=>{h.current=e}),[e]),(0,N.useEffect)((()=>{p.current||(console.log("Creating new AudioContext"),p.current=new AudioContext,p.current.suspend())}),[]);const v=(0,N.useCallback)((async()=>{if(!a&&!t&&null!=m){i(!0);try{if(!p.current)return void console.error("Audio context not initialized");"suspended"===p.current.state&&(console.log("Resuming audio context"),await p.current.resume()),console.log("Initializing audio processing...",a,t),await p.current.audioWorklet.addModule(window.CoderPad.ASSETS["speech-processor.js"]),console.log("Audio worklet module loaded");const e=new AudioWorkletNode(p.current,"speech-processor"),r=e=>{if(null==p.current)return void console.error("Audio context is not available");const t=new os(p.current.sampleRate,p.current.sampleRate).encode(e);null!=t&&h.current(new Int16Array(t))};e.port.onmessage=e=>{switch(e.data.type){case"pcm-audio":r(e.data.data);break;case"log":console.log("Audio worklet:",e.data.message)}},s(p.current.sampleRate);const o=await navigator.mediaDevices.getUserMedia({audio:{deviceId:m}});g.current=p.current.createMediaStreamSource(o),d(g.current.channelCount),g.current.connect(e).connect(p.current.destination),n(!0),console.log("Audio processing started",{sampleRate:p.current.sampleRate,channelCount:g.current.channelCount}),i(!1)}catch(e){console.error("Error starting audio processing:",e),console.error(`Detailed error: ${e.name} - ${e.message}`),o(e)}finally{i(!1)}}}),[m,a,t]),b=(0,N.useCallback)((async()=>{var e;p.current&&(p.current.close(),p.current=new AudioContext,p.current.suspend(),null===(e=g.current)||void 0===e||e.disconnect(),g.current=null,n(!1),console.log("Audio processing stopped"))}),[]);return(0,N.useEffect)((()=>()=>{b()}),[b]),{start:v,stop:b,error:r,isListening:t,isInitializing:a,sampleRate:l,channelCount:c,audioContext:p.current}};var us=()=>{const e=(0,oe.I0)(),t=(0,oe.v9)(Ve.pK),n=(0,oe.v9)(Ve.I5),a=(0,oe.v9)(Ve.s8),i=(0,oe.v9)(Ve.jl),r=(0,oe.v9)(Ve.S8),o=(0,oe.v9)(Ve.SU),l=(0,oe.v9)(Ve.o3),s=(0,oe.v9)(Ve.p6),c=(0,oe.v9)(Ve.zG),{hasTranscriptions:d,isOwner:u}=(0,ue.nT)("hasTranscriptions","isOwner"),[m,p]=(0,N.useState)(!1),g=(0,oe.v9)(Ve.n1),h=(0,oe.v9)(Ve.WW),[f,v]=(0,N.useState)([]),b=(0,N.useCallback)(((e,t)=>{console.log("Interim result:",t),null!=t&&t.text.length>0&&(0,go.Z)().set(`transcript/${e}`,{kind:_l.o.Transcript,transcripts:[t.text||""],preferredTranscript:0,userId:a,timestamp:Date.now(),duration:t.duration,isFinal:!1})}),[a]),y=(0,N.useCallback)(((e,t)=>{console.log("Final result:",t),null!=t&&t.text.length>0&&(0,go.Z)().set(`transcript/${e}`,{kind:_l.o.Transcript,transcripts:[t.text||""],preferredTranscript:0,userId:a,timestamp:Date.now(),duration:t.duration,isFinal:!0})}),[a]),E=(({transcriberUrl:e,onInterimResult:t,onFinalResult:n})=>{const a=(0,N.useRef)((0,Hl.v4)()),[i,r]=(0,N.useState)(0),[o,l]=(0,N.useState)(0),s=(0,oe.v9)(Ve.n1),c=(0,un.i)(),d=(0,N.useRef)(null),u=(0,N.useCallback)((e=>{const t=d.current;t&&t.emit("pcm-int-16-audio",e)}),[]),{slug:m,firebaseAuthorId:p,hasTranscriptions:g}=(0,ue.nT)("slug","firebaseAuthorId","hasTranscriptions"),h=(0,N.useCallback)((async()=>{const e=await c("/custom_resources_auth",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({padSlug:m})});return(await e.json()).token}),[c,m]),f=(0,N.useCallback)((async()=>{const t=await h(),n=$l()(e,{query:{slug:m,userId:p,sampleRate:i,channelCount:o,token:t},transports:["websocket","polling"]});return n.on("connect_error",(()=>{n.io.opts.transports=["polling","websocket"]})),n}),[h,m,e,p,i,o]);return(0,N.useEffect)((()=>{if(g&&s){if(!i)return void console.warn("Sample rate not yet set, `useTranscriber` will not connect to the WebSocket yet. This is normal if a call hasn't started yet.");if(!o)return void console.warn("Channel count not yet set, `useTranscriber` will not connect to the WebSocket yet. This is normal if a call hasn't started yet.");let e;const r=async()=>{e=await f(),d.current=e,e.on("tokenExpired",(async()=>{console.log("token expired for Transcription"),e.disconnect();const t=await h();e.io.opts.query.token=t,e.connect()})),e.on("connectionRefused",(()=>{console.log("not allowed to access Transcription")})),e.on("connect",(()=>{console.log("WebSocket connected")})),e.on("interim_result",(e=>{e.slug===m&&e.userId===`${p}`&&(console.log("Received Interim result:",e),null===t||void 0===t||t(a.current,e.result))})),e.on("final_result",(e=>{e.slug===m&&e.userId===`${p}`&&(console.log("Received Final result:",e),null===n||void 0===n||n(a.current,e.result),a.current=(0,Hl.v4)())}))};r()}return()=>{a.current=(0,Hl.v4)();const e=d.current;e&&e.close()}}),[p,n,t,i,o,m,d,e,g,s,f,h]),{send:u,sampleRate:i,setSampleRate:r,channelCount:o,setChannelCount:l}})({transcriberUrl:window.CoderPad.TRANSCRIPT_SERVICE_URL,onInterimResult:b,onFinalResult:y}),w=(0,N.useCallback)((e=>{o||E.send(e)}),[E,o]),k=ds(w);(0,N.useEffect)((()=>{k.audioContext&&E&&(k.sampleRate!==E.sampleRate&&E.setSampleRate(k.sampleRate),k.channelCount!==E.channelCount&&E.setChannelCount(k.channelCount))}),[k.audioContext,k.sampleRate,k.channelCount,E]),(0,N.useEffect)((()=>{d&&(!k.isListening&&"in_call"===t&&g?(console.log("audio stream starting"),k.start()):k.isListening&&"in_call"!==t&&(console.log("audio stream stopping"),k.stop()))}),[t,d,k.stop,k.start,k.isListening,g]),(0,N.useEffect)((()=>{let e;return u&&(e=(0,go.Z)().watch("usersDeniedTranscription",(e=>{if(null!=e)for(const[t,n]of Object.entries(e))n&&String(t)!==a&&f.find((e=>e.id===String(t)))&&p(!0)}))),()=>{e&&(0,go.Z)().off("usersDeniedTranscription",e)}}),[u,a,f]),(0,N.useEffect)((()=>{const e=[];if("in_call"===t){e.push({audio:Ul.localAudioTrack,video:Ul.localVideoTrack,name:i,id:a,self:!0});const t=Ul.room;for(const[i,o]of Object.entries(n))if(i!==a&&o.participantId){const n=t.participants.get(o.participantId);e.push({audio:o.audioTrackId&&n.audioTracks.get(o.audioTrackId).track,video:o.videoTrackId&&n.videoTracks.get(o.videoTrackId).track,name:r[i]&&r[i].name||"",id:i,self:!1})}v(e)}}),[t,r,n]);const S=(0,N.useRef)(!1);(0,N.useEffect)((()=>{!S.current&&d&&u&&(e((0,fn.GZ)({title:"New Feature - Call Transcription",autoDismissMs:3e4,message:N.createElement(N.Fragment,null,'Click "',N.createElement(Gt.z1,{sx:{height:16,width:16,marginBottom:"-3px"}}),' Start Call" to focus less on note-taking and get a complete interview transcript after you end the pad.'),key:"transcription_call_message",variant:"info"})),S.current=!0)}),[d,e,u]);let C=null;switch(t){case"pending":C=N.createElement(as,null);break;case"transcription_consent":C=N.createElement(rs,null);break;case"invited":C=N.createElement(Kl,{callParticipants:f});break;case"in_call":{const t=s?Nl:Bl;C=N.createElement(t,{ccEnabled:h,toggleCC:()=>e({type:"toggle_cc"}),callers:f,endCall:()=>e({type:"call_ended",_analytics:{name:"Call Left"}}),minimize:()=>e({type:"call_minimized",_analytics:{name:"Call Minimized"}}),maximize:()=>e({type:"call_maximized",_analytics:{name:"Call Maximized"}}),unmuteVideo:()=>e({type:"mute_clicked",kind:"video",enabled:!0}),unmuteAudio:()=>e({type:"mute_clicked",kind:"audio",enabled:!0}),muteVideo:()=>e({type:"mute_clicked",kind:"video",enabled:!1}),muteAudio:()=>e({type:"mute_clicked",kind:"audio",enabled:!1}),videoMuted:l,audioMuted:o,networkQualityLevel:c});break}case"error":C=N.createElement(Gl,null);break;default:C=null}return N.createElement(N.Fragment,null,C,N.createElement(Jl,{open:m,onClose:()=>p(!1)}))};const ms=".LanguageSelector-infoButton, .LanguageSelector-dropdownButton, .settings-button, .CallButton-button, .TakeHomePanel-submitButton, .TakeHomePanel-timer, .FocusTime-Button",ps=".Workspace, .PadFooter, .CodePane-header",gs=({darkBackground:e,onHide:t,hasEnvironments:n})=>{const a=e?"#1d2126":"#fff",i=ge.Z.takeHome,r=ge.Z.takeHomeTimeLimit>0&&ge.Z.timedTakeHomesDisabled;return(0,N.useEffect)((()=>{const e=i&&r?"hide":"show",t=(0,s.debounce)((()=>{m()(ms).tooltip(e)}),300),n=setTimeout((()=>{m()(ps).css("z-index","auto"),m()(ms).css({backgroundColor:a,pointerEvents:"none",position:"relative",transition:"background-color 200ms",zIndex:"1000"}).tooltip(e),m()(".tooltip-inner").each(((e,t)=>{m()(t).attr("tabIndex",e+1)}))}),300);return window.addEventListener("resize",t),()=>{clearTimeout(n),m()(ps).css("z-index",""),window.removeEventListener("resize",t),m()(ms).tooltip("hide").css({backgroundColor:"",pointerEvents:"all",zIndex:""})}}),[]),N.createElement("div",{id:"welcome-modal",className:"full-overlay"},N.createElement("div",{className:"welcome-text maincol"},i?r?N.createElement(fs,null):N.createElement(vs,{hasEnvironments:n}):N.createElement(hs,{hasEnvironments:n}),(!i||!r)&&N.createElement("div",{className:"button-wrapper"},N.createElement("button",{className:"btn btn-primary",onClick:t},"Let\u2019s Get Started!"))))};function hs({hasEnvironments:e}){return"drawing_only"===ge.Z.uiType?N.createElement(N.Fragment,null,N.createElement("h3",null,"Welcome to your CoderPad interview!"),N.createElement("ul",null,N.createElement("li",null,"At the top left, use the drawing toolbar to select drawing tools, pan, and zoom in the drawing board."),N.createElement("li",null,"At the bottom right, click the \u201cSettings\u201d button to change the pad color scheme."),N.createElement("li",null,"If you want to speak with your interviewer and don\u2019t already have a connection, use the \u201cStart Call\u201d button in the bottom left."))):N.createElement(N.Fragment,null,N.createElement("h3",null,"Welcome to your CoderPad interview!"),N.createElement("ul",null,e?N.createElement(N.Fragment,null,N.createElement("li",null,'Click "Languages" in the left sidebar to add a new language tab.'),N.createElement("li",null,"On any language tab in the left sidebar, click the dots menu to see info and libraries for that language.")):N.createElement("li",null,"At the top of the editor panel, click the \u201cInfo\u201d button to see what libraries and testing frameworks are available for your coding language."),N.createElement("li",null,"At the bottom right, click the \u201cSettings\u201d button to turn on Vim mode, enable auto-closing brackets, and more."),N.createElement("li",null,"If you want to speak with your interviewer and don\u2019t already have a connection, use the \u201cStart Call\u201d button in the bottom left.")))}function fs(){const e=ge.Z.timedTakeHomesMaintenanceExtraMessage;return N.createElement(N.Fragment,null,N.createElement("h3",null,"Maintenance"),N.createElement("ul",null,N.createElement("li",null,"CoderPad.io will be undergoing scheduled maintenance soon"),N.createElement("li",null,"Shortly before maintenance begins, timed take-home questions cannot be started"),e&&N.createElement("li",null,e),N.createElement("li",null,"See ",N.createElement("a",{href:"https://status.coderpad.io/"},"status.coderpad.io")," for more information")))}function vs({hasEnvironments:e}){return N.createElement(N.Fragment,null,N.createElement("h3",null,"Welcome to your CoderPad Take-Home!"),N.createElement("h4",null,"Need-to-knows"),N.createElement("ul",null,N.createElement("li",null,"Your solution MUST be entered in the left editor panel to be saved."),N.createElement("li",null,"If you run out of time, the session will end automatically, but don\u2019t worry! Your work will be saved.")),N.createElement("h4",null,"Tips for success"),N.createElement("ul",null,e?N.createElement("li",null,"On the language tab in the left sidebar, click the dots menu to switch languages, and see which libraries and testing frameworks are available for that language."):N.createElement("li",null,"At the top of the editor panel, click the \u201cInfo\u201d button to see what libraries and testing frameworks are available for your coding language."),N.createElement("li",null,"At the bottom right, click the \u201cSettings\u201d button to turn on Vim mode, enable auto-closing brackets, and more.")))}function bs(e,t,n){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:String(a))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const ys=RegExp("short=1").test(window.location)?20:300;class Es extends N.Component{constructor(e){super(e),bs(this,"tick",(()=>{const e=(this.props.startedAt+1e3*ys-Date.now())/1e3;e>0?this.setState({countdownSeconds:e}):(this.setState({countdownSeconds:0}),clearInterval(this._interval),this.maybePlayWarning(),this.props.onFocusTimeToggled(!1,!0))})),bs(this,"formatTimeRemaining",(()=>{if(!this.state.countdownSeconds)return"";let e=Math.floor(this.state.countdownSeconds/60),t=Math.floor(this.state.countdownSeconds%60);return t<10&&(t=`0${t}`),`${e}:${t}`})),bs(this,"hideTooltip",(e=>{this._tooltipRef&&this._tooltipRef.current&&!this._tooltipRef.current.contains(e.target)&&this.setState({showFocusTimeInfo:!1})})),bs(this,"maybePlayWarning",(()=>{this.audio||(this.audio=new Audio(`${window.CoderPad.ASSETS["focus_time_warning.mp3"]}`),this.audio.play())})),this.state={showFocusTimeInfo:!1,countdownSeconds:(this.props.startedAt+1e3*ys-Date.now())/1e3},this._tooltipRef=N.createRef(),this.audio=null}componentDidMount(){this._interval=setInterval(this.tick,500),document.addEventListener("mousedown",this.hideTooltip)}componentWillUnmount(){this._interval&&(this.maybePlayWarning(),clearInterval(this._interval)),document.removeEventListener("mousedown",this.hideTooltip)}render(){const{isOwner:e}=ge.Z;return this.props.startedAt?N.createElement("div",{className:"FocusTime-countdown"},N.createElement("div",{className:ke()({"FocusTime-countdownTimerBox":!0,"FocusTime-countdownTimerBoxWarning":this.state.countdownSeconds<11}),onClick:()=>{e||this.setState({showFocusTimeInfo:!this.state.showFocusTimeInfo})}},N.createElement("span",{className:"FocusTime-countdownText"},"Focus Time "),this.formatTimeRemaining(),!e&&N.createElement("span",{className:"fui-triangle-down-large FocusTimeButton-glyph"},"\u25bc")),this.state.showFocusTimeInfo&&N.createElement("div",{className:"FocusTime-headerFocusTimeInfo",ref:this._tooltipRef},N.createElement("div",{className:"tooltip-arrow"}),N.createElement("div",{className:"tooltip-inner"},"Focus Time (5 minutes of alone time to think) has been shown to",N.createElement("a",{href:"https://coderpad.io/blog/interview-with-chris-parnin-mahnaz-behroozi",target:"_blank",rel:"noopener noreferrer"}," ","drastically improve a candidates\u2019 ability to pass technical assessments"),".",N.createElement("br",null),N.createElement("br",null),"Your interviewer can\u2019t see what you\u2019re doing in the pad right now.",N.createElement("br",null),N.createElement("br",null),"So take a few minutes to plan, brainstorm, or take a deep breath before you dive back in.",N.createElement("br",null),N.createElement("br",null),N.createElement("div",{className:"FocusTimeInfo-attribution"},"Sound:"," ",N.createElement("a",{href:"https://freesound.org/people/rhodesmas/sounds/353206/",target:"_blank",rel:"noopener noreferrer"},'"Intro 01"')," ","by rhodesmas / CC-BY"),N.createElement("br",null),N.createElement("br",null),N.createElement("div",{className:"FocusTimeInfo-buttonTitle"},"Done with Focus Time?"),N.createElement("div",{className:"FocusTimeInfo-buttonWrapper"},N.createElement(Te,{darkBg:this.props.darkBg,onClick:()=>{this.props.onFocusTimeToggled(!1,!1)},type:"primary"},"End Early"))))):""}}const ws={onFocusTimeToggled(e,t){return{type:"focus_time_toggled",value:e,auto:t}}};var ks=(0,oe.$j)((function(e){const{darkColorScheme:t}=e.editorSettings;return{darkBg:t}}),ws)(Es);class Ss extends N.Component{render(){return N.createElement("div",{className:"FocusTimeOverlay-container"},N.createElement("div",{className:"FocusTimeOverlay-modal"},N.createElement("div",{className:"FocusTimeOverlay-modalTitle"},"Focus Time in-progress"),N.createElement("div",{className:"FocusTimeOverlay-modalText"},"While your candidate is taking 5 minutes to wrap their head around the coding assessment you gave them, you can learn more about",N.createElement("br",null),N.createElement("a",{href:"https://coderpad.io/blog/interview-with-chris-parnin-mahnaz-behroozi",target:"_blank",rel:"noopener noreferrer"},"why Focus Time is a good idea"),", take a break, or (quickly) go get something else done."),N.createElement("div",{className:"FocusTimeOverlay-modalText"},"Turn your sound up to hear a notification sound when Focus Time is done."),N.createElement("div",{className:"FocusTimeOverlay-modalText FocusTimeOverlay-modalText--attribution"},"Sound:"," ",N.createElement("a",{href:"https://freesound.org/people/rhodesmas/sounds/353206/",target:"_blank",rel:"noopener noreferrer"},'"Intro 01"')," ","by rhodesmas / CC-BY"),N.createElement("div",{className:"FocusTimeOverlay-modalCountdownWrapper"},N.createElement(ks,{startedAt:this.props.focusTimeStartedAt})),N.createElement("div",{className:"FocusTimeOverlay-modalButtonWrapper"},N.createElement(Te,{darkBg:this.props.darkBg,onClick:()=>{this.props.onFocusTimeToggled(!1)},type:"primary"},"End Early"))))}}const Cs={onFocusTimeToggled(e){return{type:"focus_time_toggled",value:e}}};var xs=(0,oe.$j)((function(e){const{darkColorScheme:t}=e.editorSettings;return{darkBg:t,focusTimeStartedAt:e.padSettings.focusTimeStartedAt}}),Cs)(Ss);class _s extends N.Component{componentDidMount(){this._formerTitle=document.title,document.title=this.props.children}componentDidUpdate(e){this.props.children!==e.children&&(document.title=this.props.children)}componentWillUnmount(){document.title=this._formerTitle}render(){return null}}var Ts=n(7431),Is=n(61090),Ps=n(92550),Zs=n(19755);function Os(){return Os=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Os.apply(this,arguments)}const Ms=700,Ds=700,Ls=({handleClose:e,handleNewWindow:t,isDrawingEnabled:n})=>{var a;const i=(0,N.useRef)(null),r=(0,N.useRef)(null);(0,N.useEffect)((()=>{const e=i.current;if(null!=e)return Zs(e).tooltip({trigger:"hover",placement:"bottom",content:"Open in new window."}),()=>{Zs(e).tooltip("destroy")}}),[]);const[o,l]=N.useState({x:Math.max((window.innerWidth-Ds)/4,0),y:Math.max((window.innerHeight-Ms)/4,0)}),[s,c]=N.useState({width:Math.min(window.innerWidth,Ds),height:Math.min(window.innerHeight,Ms)});(0,N.useEffect)((()=>{window.dispatchEvent(new Event("resize"))}),[s.width,s.height,o.x,o.y]);const d=(0,N.useCallback)((()=>{let{width:e,height:t}=s,{x:n,y:a}=o,i=!1;e>window.innerWidth?(e=Math.max(400,window.innerWidth),n=0,i=!0):e+n>window.innerWidth&&(n=window.innerWidth-e,i=!0),t>window.innerHeight?(t=Math.max(550,window.innerHeight),a=0,i=!0):t+a>window.innerHeight&&(a=window.innerHeight-t,i=!0),i&&(c({width:e,height:t}),l({x:n,y:a}))}),[o,s]);return(0,N.useEffect)((()=>(window.addEventListener("resize",d),()=>{window.removeEventListener("resize",d)})),[d]),N.createElement(Is.s,{position:o,size:s,minHeight:550,minWidth:400,bounds:"window",className:"FloatingDrawingBoard",dragHandleClassName:"FloatingDrawingBoard-header",onResizeStop:(e,t,n,a,i)=>{c({width:s.width+a.width,height:s.height+a.height}),l(i)},onDragStop:(e,t)=>{l({x:t.x,y:t.y})}},N.createElement("div",{className:"FloatingDrawingBoard-inner",ref:r},N.createElement("div",{className:"FloatingDrawingBoard-header"},N.createElement("span",null,"Drawing Mode"),N.createElement("span",null,N.createElement("span",{className:"FloatingDrawingBoard-header-control",onClick:()=>t(s.width,s.height),title:"Open in new window.",ref:i},N.createElement(Ts.Z,null)),N.createElement("span",{className:"FloatingDrawingBoard-header-control",onClick:e},N.createElement(Xn.Z,null)))),N.createElement("div",{className:"FloatingDrawingBoard-drawing"},N.createElement(Ps.nN,Os({allowInit:n,authorId:null===(a=window.padConfig)||void 0===a?void 0:a.firebaseAuthorId},window.padConfig)))))};var Fs;const As=["title","titleId"];function Rs(){return Rs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Rs.apply(this,arguments)}function Ns(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}const js=(e,t)=>{let{title:n,titleId:a}=e,i=Ns(e,As);return N.createElement("svg",Rs({xmlns:"http://www.w3.org/2000/svg",width:14,height:15,fill:"none",viewBox:"0 0 14 15",ref:t,"aria-labelledby":a},i),n?N.createElement("title",{id:a},n):null,Fs||(Fs=N.createElement("path",{fill:"#353C4E",fillRule:"evenodd",d:"M5.646.905A5.646 5.646 0 0 0 0 6.55v.414a5.386 5.386 0 0 0 5.386 5.386h1.562c.256 0 .499.113.664.308L9.589 15v-2.865a.68.68 0 0 1 .377-.608 5.44 5.44 0 0 0 2.824-3.432l.152-.555c.108-.394.152-.803.13-1.21A5.727 5.727 0 0 0 7.353.904zm.172 6.358q-.165.393-.165 1.053h1.134q.01-.715.34-1.087l.614-.601q.76-.785.76-1.595 0-.909-.565-1.416-.56-.506-1.563-.506-.974 0-1.569.511-.589.512-.599 1.391h1.214q0-.413.26-.65.264-.244.694-.244.45 0 .679.248.234.245.234.71 0 .354-.2.656-.129.199-.619.671-.484.467-.649.86M5.753 9.39a.63.63 0 0 0-.185.472q0 .274.175.457.18.184.51.184t.51-.184a.63.63 0 0 0 .179-.457.63.63 0 0 0-.185-.467q-.185-.188-.504-.188-.315 0-.5.183",clipRule:"evenodd"})))},qs=(0,N.forwardRef)(js);n.p;var Bs=n(25934);const zs=(0,Qt.ZP)(M.Z,{target:"e1wiow2i3"})((({theme:e})=>{var t;return{backgroundColor:null===(t=e.palette.editor)||void 0===t?void 0:t.sidebar.background,display:"flex",flexDirection:"column",height:"100%",zIndex:14,position:"relative"}}),""),$s=(0,Qt.ZP)(M.Z,{shouldForwardProp:e=>"isMenuOpen"!==e,target:"e1wiow2i2"})((({theme:e,isMenuOpen:t})=>{var n;return{backgroundColor:null===(n=e.palette.editor)||void 0===n?void 0:n.sidebar.background,top:0,width:"75vw",flexShrink:0,whiteSpace:"nowrap",position:"absolute",border:"none",height:"100%",zIndex:13,[e.breakpoints.down("lg")]:{width:"calc(100vw - 90px)"},transition:e.transitions.create(["left","opacity"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),...t?{left:"82px",opacity:1}:{left:"-200vw",opacity:0,overflowX:"hidden"}}}),""),Hs=(0,Qt.ZP)(M.Z,{target:"e1wiow2i1"})((({theme:e})=>({position:"absolute",height:"100%",width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",zIndex:2,backgroundColor:"light"===e.palette.mode?"rgba(0, 0, 0, 0.3)":"rgba(255, 255, 255, 0.3)"})),""),Us=(0,Qt.ZP)(M.Z,{target:"e1wiow2i0"})((({theme:e})=>({fontSize:"0.875rem",fontWeight:400,color:"#FFFFFF"})),"");let Qs=function(e){return e[e.Languages=0]="Languages",e[e.Questions=1]="Questions",e}({});const Vs=(0,N.createContext)({isOpen:!1,currentTab:Qs.Languages,openMenu:()=>null,closeMenu:()=>null,setTab:e=>null,openMenuAndSetTab:e=>null}),Ws=({children:e})=>{const[t,n]=(0,N.useState)(!1),[a,i]=(0,N.useState)(Qs.Languages),{activeEnvironment:r}=(0,ve.od)(),o=(0,N.useCallback)((()=>n(!0)),[]),l=(0,N.useCallback)((()=>n(!1)),[]),s=(0,N.useCallback)((e=>{i(e),o()}),[o]);(0,N.useEffect)((()=>{l(),i(Qs.Languages)}),[r,l]);const c={isOpen:t,currentTab:a,openMenu:o,closeMenu:l,setTab:i,openMenuAndSetTab:s};return N.createElement(Vs.Provider,{value:c},e)};function Gs(){const e=(0,N.useContext)(Vs);if(null==e)throw new Error("`useEnvironmentSelectorMenuContext` hook must be a descendant of a `EnvironmentSelectorMenuProvider`");return e}var Ys=n(12981);const Ks=({environment:e,onRequestClose:t})=>{const{deleteEnvironment:n,clearDeleteStatus:a,deleteStatus:i}=(0,ve.od)(),r=(0,N.useCallback)((()=>{e&&n(e.slug).then((e=>{e&&(t(),a())}))}),[e,n,t,a]);(0,N.useEffect)((()=>{a()}),[a,e]);const o=se.TH(i),l=!!e;return N.createElement(ul.Z,{open:l},l&&N.createElement(N.Fragment,null,N.createElement(ni.Z,{variant:"h2",component:"div"},"Delete ",null===e||void 0===e?void 0:e.nameDisplayable," Environment?"),N.createElement(ri.Z,null,N.createElement(Ys.Z,{in:se.eQ(i)},N.createElement(Oi.Z,{severity:"error",sx:{mb:e=>e.spacing(1)}},i[1]||"Unexpected error deleting environment")),N.createElement(Ue.Z,{variant:"body1"},"The code in this ",N.createElement("strong",null,null===e||void 0===e?void 0:e.nameDisplayable)," tab will be deleted and will not be available in playback. Are you sure you want to permanently delete the"," ",N.createElement("strong",null,null===e||void 0===e?void 0:e.nameDisplayable)," environment?")),N.createElement(ml.Z,null,N.createElement(He.Z,{onClick:t,color:"inherit"},"Cancel"),N.createElement(He.Z,{color:"error",variant:"contained",onClick:r,disabled:o,endIcon:o?N.createElement(on.Z,{size:24,color:"inherit"}):null},"Delete"))))};var Js=n(66318),Xs=n(42440),ec=n(70576),tc=n(3994),nc=n(37134),ac=n(35274),ic=n(55304);const rc=ot.gql`
  query Snippet($slug: String!) {
    snippet(slug: $slug) {
      id
      slug
      title
      description
      language
      fileContents
    }
  }
`;const oc=ot.gql`
  mutation CreateQuestionFromEnvironment($input: CreateQuestionFromEnvironmentInput!) {
    createQuestionFromEnvironment(input: $input) {
      question {
        id
      }
      errors {
        message
        path
      }
      message
    }
  }
`;const lc=({environment:e,onRequestClose:t,hasDrawingBoardId:n})=>{const[a,i]=(0,N.useState)(!0),{createQuestion:r,status:o}=function(e,t){const n=(0,ue.oB)("slug"),a=(0,oe.v9)(Ve.f6).title,[i,{data:r,loading:o,error:l}]=(0,O.useMutation)(oc,{variables:{input:{padSlug:n,environmentSlug:null===e||void 0===e?void 0:e.slug,title:`${null===e||void 0===e?void 0:e.nameDisplayable} question created from ${a}`,saveDrawing:t}}}),s=(0,N.useCallback)((()=>{if(null!=e)return i().then((({data:e})=>{var t;const n=null===e||void 0===e||null===(t=e.createQuestionFromEnvironment)||void 0===t?void 0:t.question;return null!=n?(window.open(`/dashboard/questions/drafts/${n.id}`),n.id):null})).catch((()=>null))}),[e,i]),c=(0,N.useMemo)((()=>{var e;return o?se.V_():l?se.vU():null!==r&&void 0!==r&&null!==(e=r.createQuestionFromEnvironment)&&void 0!==e&&e.question?se.Vp():se.nn()}),[o,r,l]);return{createQuestion:s,createQuestionLoading:o,status:c}}(e,a),l=se.TH(o),s=null!=e,c=(0,N.useCallback)((async()=>{(0,Mn.Z)(Ai.j.CreateQuestionFromTabAffirmation);await r()&&t()}),[r,t]),d=(0,N.useCallback)((()=>{(0,Mn.Z)(Ai.j.CreateQuestionFromTabCancel),t()}),[t]);return N.createElement(ul.Z,{open:s},s&&N.createElement(N.Fragment,null,N.createElement(ni.Z,{variant:"h2",component:"div"},"Save as draft"),N.createElement(ri.Z,null,N.createElement(Ys.Z,{in:se.eQ(o)},N.createElement(Oi.Z,{severity:"error",sx:{mb:e=>e.spacing(1)}},o[1]||"Unexpected error creating question.")),N.createElement(Ue.Z,{variant:"body1"},"A snapshot of the code in this ",N.createElement("strong",null,null===e||void 0===e?void 0:e.nameDisplayable)," pad will be saved as a draft question."),N.createElement(Ue.Z,{variant:"body1",mt:2},"The draft editor will open in a new window. You can finish editing, add instructions and more, and finalize your question from the drafts tab."),n&&N.createElement(zr.Z,{control:N.createElement($r.Z,{checked:a,onChange:()=>{i(!a)}}),label:"Include Drawing"})),N.createElement(ml.Z,null,N.createElement(He.Z,{onClick:d,color:"inherit"},"Cancel"),N.createElement(He.Z,{color:"primary",variant:"contained",onClick:c,disabled:l,endIcon:l?N.createElement(on.Z,{size:24,color:"inherit"}):null},"Save"))))},sc=(0,Qt.ZP)(Ue.Z,{target:"e1dwq9811"})((({theme:e})=>({fontSize:"12px",fontWeight:400,lineHeight:"14px",color:"light"===e.palette.mode?"#000000":"#FFFFFF"})),""),cc=(0,Qt.ZP)(Ue.Z,{target:"e1dwq9810"})((({theme:e})=>({fontSize:"11px",fontWeight:400,lineHeight:"13px",color:"light"===e.palette.mode?"#363739":"#EAEAEA"})),"");var dc=n(16769);const uc=({environment:e,onRequestClose:t})=>{const{resetEnvironment:n,clearResetStatus:a,resetStatus:i}=(0,ve.od)(),r=(0,N.useCallback)((()=>{e&&n(e.slug).then((e=>{e&&(t(),a())}))}),[e,n,t,a]);(0,N.useEffect)((()=>{a()}),[a,e]);const o=se.TH(i),l=!!e,s=(null===e||void 0===e?void 0:e.kind)===dc.W.Project||(null===e||void 0===e?void 0:e.projectTemplateSlug)?N.createElement(Xs.Z,{sx:{listStyle:"disc inside"}},N.createElement(ec.ZP,{sx:{display:"list-item"}},"Any edits made to existing files will be deleted."),N.createElement(ec.ZP,{sx:{display:"list-item"}},"Any files deleted from the initial code will be added back to the tab."),N.createElement(ec.ZP,{sx:{display:"list-item"}},"Any added files will be removed.")):N.createElement(Ue.Z,{variant:"body1"},"Any edits made to the code will be deleted. ");return N.createElement(ul.Z,{open:l},l&&N.createElement(N.Fragment,null,N.createElement(ni.Z,{variant:"h2",component:"div"},"Reset ",null===e||void 0===e?void 0:e.nameDisplayable," Environment?"),N.createElement(ri.Z,null,N.createElement(Ys.Z,{in:se.eQ(i)},N.createElement(Oi.Z,{severity:"error",sx:{mb:e=>e.spacing(1)}},i[1]||"Unexpected error resetting environment")),s,N.createElement(Ue.Z,{variant:"body1"},"Are you sure you want to reset the ",N.createElement("strong",null,null===e||void 0===e?void 0:e.nameDisplayable)," ","environment to its original state?")),N.createElement(ml.Z,null,N.createElement(He.Z,{onClick:t,color:"inherit"},"Cancel"),N.createElement(He.Z,{color:"error",variant:"contained",onClick:r,disabled:o,endIcon:o?N.createElement(on.Z,{size:24,color:"inherit"}):null},"Reset"))))},mc=({snippet:e,onRequestClose:t})=>null==e?null:N.createElement(ul.Z,{open:!0,onClose:t},N.createElement(ni.Z,{variant:"h2",component:"div"},e.title),N.createElement(ri.Z,null,N.createElement(Ue.Z,{variant:"body1"},e.description)));const pc=(0,Qt.ZP)(Fi.Z,{target:"eqnbyx02"})((()=>({maxHeight:24,width:24})),""),gc=(0,wn.Z)((e=>({languageMenuIndicator:{height:"20px",width:"20px",transition:"0.25s all","&.open":{transform:"rotate(0.25turn)"}},menuRoot:{marginLeft:"2px"},menuList:{maxWidth:198}}))),hc=(0,Qt.ZP)(hi.Z,{target:"eqnbyx01"})({name:"hra6zc",styles:"font-size:0.75rem"}),fc=(0,Qt.ZP)(Xs.Z,{target:"eqnbyx00"})((({theme:e})=>({fontSize:"0.75rem",backgroundColor:e.palette.editor.sidebar.background})),""),vc=({requestEnvironmentDelete:e,anchorEl:t,setAnchorEl:n,environment:a,isMouseOnTab:i})=>{var r;const o=window.CoderPad.LANGUAGES,[l,s]=(0,N.useState)(!1),[c,d]=(0,N.useState)(!1),[u,m]=(0,N.useState)(null),[p,g]=(0,N.useState)(null),[h,f]=(0,N.useState)(null),{openMenuAndSetTab:v}=Gs(),[b,y]=(0,N.useState)(!1),E=(0,nc.$)(null===a||void 0===a?void 0:a.questionId),{snippet:w}=function(e){const{data:t,error:n,loading:a}=(0,O.useQuery)(rc,{variables:{slug:e},fetchPolicy:"cache-and-network",context:{source:"useSnippet.ts"},skip:!e}),i=null===t||void 0===t?void 0:t.snippet,r=(0,N.useMemo)((()=>a?se.V_():n||!i?se.vU("There was an error fetching the snippet"):se.Vp()),[n,a,i]);return(0,N.useMemo)((()=>({snippet:i,status:r})),[i,r])}(null===a||void 0===a?void 0:a.snippet),k=gc(l),S=function(e){const t=(0,un.i)(),{environment:n,activateFile:a}=(0,fe.J$)(),i=(0,ue.oB)("slug"),[r,o]=(0,N.useState)(!1);return(0,N.useCallback)((async l=>{if(r)return;o(!0);const s=await t(`/${i}/change_environment_language`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({environment_slug:e.slug,language:l})});o(!1);const{new_file_id:c}=await s.json();return c&&(null===n||void 0===n?void 0:n.slug)===e.slug&&a(c),c}),[r,t,i,e.slug,null===n||void 0===n?void 0:n.slug,a])}(a),C=function(e){const t=(0,ue.oB)("takeHome");return(0,N.useCallback)(((n,a)=>{if(t||null===e||void 0===e||!e.language||null!==e&&void 0!==e&&e.allowMultipleFiles)return;const i=window.CoderPad.LANGUAGES[e.language];null!==i&&void 0!==i&&i.packages&&((0,go.Z)().set(`environments/${e.id}/customDatabaseLanguage`,n),(0,go.Z)().get(`environmentFileIds/${e.slug}`,((t={})=>{const n=Object.keys(t).find((e=>t[e])),i=(0,go.Z)().firepadHeadless(`/environmentFiles/${e.slug}/${n}`);i.on("ready",(()=>{i.setText(a),i.dispose()}))})))}),[e,t])}(a),{isOwner:x,questionsEnabled:_,takeHome:T,sandboxEnvironmentPreviewSlug:I,isPlayback:P,drawingBoardId:Z}=(0,ue.nT)("isOwner","questionsEnabled","takeHome","sandboxEnvironmentPreviewSlug","isPlayback","drawingBoardId"),{customDatabaseLanguage:D,language:L}=(0,oe.v9)(Ve.f6),{setLanguage:F}=(0,be.R)();(0,N.useEffect)((()=>{n(null)}),[a,n]),(0,N.useEffect)((()=>{t&&(b||i)||(s(!1),d(!1))}),[t,b,i]);const A=(null===a||void 0===a?void 0:a.kind)===ve.WO.Question&&null==(null===a||void 0===a?void 0:a.projectTemplateSlug)&&null==(null===a||void 0===a?void 0:a.spreadsheet),R=(0,N.useMemo)((()=>[ic.S.MYSQL,ic.S.POSTGRESQL].includes(L)),[L]),j=(0,N.useMemo)((()=>A?null!==E&&void 0!==E&&E.testCasesEnabled||D||R?Object.values(o).filter((e=>{const t=null===E||void 0===E||!E.testCasesEnabled||e.test_case_grading,n=[ic.S.MYSQL,ic.S.POSTGRESQL].filter((e=>e!==D&&e!==L)),a=!D||!n.includes(e.name);return t&&a})):Object.values(o).filter((e=>"spreadsheets"!==e.category)):[]),[A,null===E||void 0===E?void 0:E.testCasesEnabled,D,R,o,L]),[q,B]=(0,N.useState)(j);(0,N.useEffect)((()=>{B(j)}),[j]);const z=(0,N.useMemo)((()=>{if(null===a||void 0===a||!a.language)return[];const e=window.CoderPad.LANGUAGES[a.language],t=null!==e&&void 0!==e&&e.packages?Object.values(e.packages):[];return D?t.filter((({database:e})=>e===D)):t}),[D,a.language]),$=(null===a||void 0===a?void 0:a.kind)===ve.WO.Language||(null===a||void 0===a||null===(r=a.projectTemplateSlug)||void 0===r?void 0:r.startsWith("jupyter"))||(null===a||void 0===a?void 0:a.kind)===ve.WO.Question&&null==(null===a||void 0===a?void 0:a.projectTemplateSlug),H=_&&((null===a||void 0===a?void 0:a.kind)===ve.WO.Language&&!(null!==a&&void 0!==a&&a.allowMultipleFiles)||(null===a||void 0===a?void 0:a.kind)===ve.WO.Project),U=(0,N.useCallback)((()=>{var e;if(null!==a&&void 0!==a&&a.spreadsheet)n(null),F({display:"Google Sheets",name:"gsheets",category:"spreadsheets"}),(0,Mn.Z)("Language Info Clicked",{language:"gsheets",from:"context-menu"});else if(null!==a&&void 0!==a&&a.language)n(null),F(window.CoderPad.LANGUAGES[a.language]),(0,Mn.Z)("Language Info Clicked",{language:a.language,from:"context-menu"});else if(null!==a&&void 0!==a&&null!==(e=a.projectTemplateSlug)&&void 0!==e&&e.startsWith("jupyter")){const e={name:a.projectTemplateSlug,display:a.nameDisplayable,type:"project"};n(null),F(e),(0,Mn.Z)("Language Info Clicked",{language:a.projectTemplateSlug,from:"context-menu"})}}),[a,n,F]),Q=(0,N.useCallback)((()=>{n(null),v(Qs.Languages)}),[v,n]),V=(0,N.useCallback)((e=>{m(e),n(null)}),[m,n]),W=(0,N.useCallback)((e=>{const{style:t,index:n,data:a}=e,i=a[n];return N.createElement(ec.ZP,{style:t,button:!0,onClick:()=>S(i.name),key:i.name},N.createElement(pc,{language:i.name}),N.createElement(M.Z,{ml:1,component:"span"},i.display))}),[S]),G=(0,N.useCallback)((e=>{B(j.filter((t=>t.name.startsWith(e))))}),[B,j]),Y=(0,N.useRef)(null),K=(0,N.useCallback)((()=>{Y.current&&(clearTimeout(Y.current),Y.current=null),y(!0)}),[y]),J=(0,N.useCallback)((()=>{Y.current=setTimeout((()=>{y(!1)}),50)}),[y]),X=(0,N.useCallback)((()=>(!P||null!=E)&&((i||b)&&!!t)),[P,E,i,b,t]),ee=(0,N.useMemo)((()=>{const t=[];return j.length?(t.push(N.createElement(hc,{onClick:()=>s(!l),key:"env-settings-language-item"},N.createElement(fi.Z,{icon:fi.P.Languages,sx:{mr:1}}),N.createElement(M.Z,{display:"flex",justifyContent:"space-between",width:"100%"},"Language",N.createElement(Ca.Z,{className:ke()(k.languageMenuIndicator,{open:l})})))),t.push(N.createElement(Ys.Z,{in:l,sx:e=>({backgroundColor:e.palette.tabNavHoverMenu.collapseMenu.backgroundColor}),key:"env-settings-language-menu"},N.createElement(Fe.M,{onValueChange:G,sx:e=>({marginY:e.spacing(1),marginX:e.spacing(2)}),InputProps:{sx:{backgroundColor:"transparent"},onKeyDown:e=>e.stopPropagation()}}),N.createElement(na.p,{maxHeight:"322px",overflow:"auto"},N.createElement(ac.t7,{height:322,width:"100%",itemCount:q.length,itemSize:36,itemData:q},W))))):t.push(N.createElement(hc,{onClick:Q,key:"env-settings-open-languages"},N.createElement(fi.Z,{icon:fi.P.Switch,sx:{mr:1}}),N.createElement(M.Z,{display:"flex",justifyContent:"space-between",width:"100%"},"Switch Language"))),w&&t.push(N.createElement(hc,{onClick:()=>f(w),key:"env-settings-snippet-info"},N.createElement(Js.Z,{sx:{mr:1,width:16,height:16}}),"Snippet Info")),$&&t.push(N.createElement(hc,{onClick:U,key:"env-settings-lang-info"},N.createElement(Js.Z,{sx:{mr:1,width:16,height:16}}),"Language Info")),x&&a&&!I&&t.push(N.createElement(hc,{onClick:()=>e(a),key:"env-settings-delete"},N.createElement(fi.Z,{icon:fi.P.Delete,sx:{mr:1}}),"Delete Tab")),(x||T)&&null==a.spreadsheet&&a&&t.push(N.createElement(hc,{onClick:()=>V(a),key:"env-settings-reset"},N.createElement(fi.Z,{icon:fi.P.Reset,sx:{mr:1}}),"Reset Tab")),H&&t.push(N.createElement(hc,{onClick:()=>g(a),key:"env-settings-create-question",sx:{color:e=>"dark"===e.palette.mode?"#F4C536":"#1142AD","& svg":{"& path":{stroke:e=>"dark"===e.palette.mode?"#F4C536":"#1142AD"}}}},N.createElement(fi.Z,{icon:fi.P.Questions,sx:{mr:1}}),"Save code as draft question")),!T&&z.length&&t.push(N.createElement(hc,{onClick:()=>d(!c),key:"env-settings-database-adapters"},N.createElement(fi.Z,{icon:fi.P.Database,sx:{mr:1}}),N.createElement(M.Z,{display:"flex",justifyContent:"space-between",width:"100%"},"Database adapters",N.createElement(Ca.Z,{className:ke()(k.languageMenuIndicator,{open:c})})))),t.push(N.createElement(Ys.Z,{in:c,sx:e=>({backgroundColor:e.palette.tabNavHoverMenu.collapseMenu.backgroundColor}),key:"env-settings-database-adapters-menu"},N.createElement(na.p,{maxHeight:"300px",overflow:"auto"},N.createElement(fc,null,z.map((e=>N.createElement(ec.ZP,{button:!0,onClick:()=>C(e.database,e.example),key:e.name},N.createElement(pc,{language:e.database}),N.createElement(M.Z,{ml:1,component:"span"},e.display)))))))),t}),[j.length,l,G,q,W,$,x,a,I,w,T,H,z,c,k.languageMenuIndicator,Q,U,e,V,C]);return N.createElement(N.Fragment,null,N.createElement(Zn.Z,{id:"environment-selector-language-menu",anchorEl:t,open:X(),anchorOrigin:{horizontal:"right",vertical:"top"},"data-testid":"envselector-envsettingsmenu-menu",classes:{list:k.menuList,root:k.menuRoot},marginThreshold:0,PaperProps:{sx:{backgroundColor:e=>{var t;return null===(t=e.palette.editor)||void 0===t?void 0:t.sidebar.active},borderRadius:"4px"},elevation:0},MenuListProps:{onMouseEnter:K,onMouseLeave:J,sx:e=>({paddingX:0,paddingTop:x&&null!=E?0:e.spacing(1.5),paddingBottom:P?0:e.spacing(1.5),pointerEvents:"auto"}),autoFocusItem:!1},sx:{[`&.${tc.Z.root}`]:{pointerEvents:"none"}}},(x||P)&&null!=E&&N.createElement(hc,{sx:e=>({backgroundColor:e.palette.tabNavHoverMenu.questionTitle.backgroundColor,paddingY:e.spacing(.5),cursor:P?"default":"pointer"})},N.createElement(M.Z,{alignItems:"flex-start",alignContent:"flex-start"},N.createElement(sc,{sx:e=>({marginY:e.spacing(.5),display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis",wordBreak:"break-all",whiteSpace:"normal"}),title:E.title||"Question"},E.title||"Question"),N.createElement(cc,{color:e=>e.palette.tabNavHoverMenu.questionSubtext.color,sx:e=>({paddingY:e.spacing(.5)})},"Title not visible to candidate"))),P?null:ee),N.createElement(uc,{environment:u,onRequestClose:()=>m(null)}),N.createElement(lc,{environment:p,onRequestClose:()=>g(null),hasDrawingBoardId:!!Z}),N.createElement(mc,{snippet:h,onRequestClose:()=>f(null)}))};var bc,yc,Ec=n(70917),wc=n(79919),kc=n(48999);const Sc=["title","titleId"];function Cc(){return Cc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Cc.apply(this,arguments)}function xc(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}const _c=(e,t)=>{let{title:n,titleId:a}=e,i=xc(e,Sc);return N.createElement("svg",Cc({xmlns:"http://www.w3.org/2000/svg",width:22,height:22,fill:"none",viewBox:"0 0 22 22",ref:t,"aria-labelledby":a},i),n?N.createElement("title",{id:a},n):null,bc||(bc=N.createElement("path",{stroke:"#9A9A9A",strokeLinecap:"round",strokeWidth:1.9,d:"M11.055 15.05v-8.1M6.95 10.883h8.395"})),yc||(yc=N.createElement("path",{stroke:"#9A9A9A",strokeWidth:1.5,d:"M1 11a10 10 0 1 0 20 0 10 10 0 1 0-20 0"})))},Tc=(0,N.forwardRef)(_c);var Ic;n.p;const Pc=["title","titleId"];function Zc(){return Zc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Zc.apply(this,arguments)}function Oc(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}const Mc=(e,t)=>{let{title:n,titleId:a}=e,i=Oc(e,Pc);return N.createElement("svg",Zc({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",ref:t,"aria-labelledby":a},i),n?N.createElement("title",{id:a},n):null,Ic||(Ic=N.createElement("path",{fillRule:"evenodd",d:"M17.875 3.125c-.5-.5-1.312-.5-1.812 0l-9.428 9.428-.604 2.416 2.416-.604 9.428-9.428c.5-.5.5-1.311 0-1.812m-2.873-1.06a2.781 2.781 0 0 1 3.934 3.933L9.36 15.573a.75.75 0 0 1-.348.197l-3.83.958a.75.75 0 0 1-.91-.91l.958-3.83a.75.75 0 0 1 .197-.348zM3.984 17.419a.75.75 0 0 1 .106 1.055c-.323.397-.465 1.094-.204 1.663.23.499.884 1.113 2.593 1.113 1.077 0 1.83-.199 2.418-.476.6-.281 1.066-.66 1.577-1.095l.112-.095c.468-.4.999-.854 1.66-1.201.735-.387 1.608-.633 2.754-.633 1.825 0 3.058.563 3.94 1.342.694.61 1.157 1.356 1.492 1.896q.105.17.196.31a.75.75 0 0 1-1.256.82q-.13-.201-.255-.401c-.333-.532-.657-1.05-1.169-1.5-.595-.526-1.47-.967-2.948-.967-.912 0-1.544.191-2.057.46-.506.267-.916.617-1.41 1.037l-.087.074c-.516.44-1.114.936-1.91 1.31-.808.38-1.781.619-3.057.619-2.082 0-3.403-.786-3.956-1.987-.52-1.131-.25-2.434.406-3.237a.75.75 0 0 1 1.055-.107",clipRule:"evenodd"})))},Dc=(0,N.forwardRef)(Mc);var Lc;n.p;const Fc=["title","titleId"];function Ac(){return Ac=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ac.apply(this,arguments)}function Rc(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}const Nc=(e,t)=>{let{title:n,titleId:a}=e,i=Rc(e,Fc);return N.createElement("svg",Ac({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",ref:t,"aria-labelledby":a},i),n?N.createElement("title",{id:a},n):null,Lc||(Lc=N.createElement("path",{d:"M23.047 11.403a1.45 1.45 0 0 0-.893-.687 6.9 6.9 0 0 0-2.078-.208c.375-1.861.093-3.333-.194-4.206a1.514 1.514 0 0 0-1.761-1.02 8 8 0 0 0-2.677 1.136 8.9 8.9 0 0 0-2.541-3.117 1.505 1.505 0 0 0-1.806 0 8.86 8.86 0 0 0-2.541 3.117 8 8 0 0 0-2.677-1.136 1.514 1.514 0 0 0-1.762 1.02c-.28.873-.562 2.344-.193 4.206-.699-.037-1.4.033-2.078.208a1.46 1.46 0 0 0-.893.687 1.5 1.5 0 0 0-.15 1.15c.318 1.179 1.294 3.42 4.25 5.186s5.553 1.761 6.952 1.761c1.398 0 4 0 6.937-1.76 2.956-1.767 3.932-4.008 4.25-5.187a1.5 1.5 0 0 0-.145-1.15M5.544 6.763a.02.02 0 0 1 .022-.014c.872.197 1.695.57 2.42 1.094a11.1 11.1 0 0 0-.486 3.33c0 1.756.353 3.187.854 4.338a11.6 11.6 0 0 1-1.832-2.386c-1.69-2.942-1.338-5.25-.978-6.362m.282 9.69c-2.5-1.493-3.312-3.323-3.576-4.294a5.6 5.6 0 0 1 2.11-.11q.352.947.857 1.82a13.3 13.3 0 0 0 3.188 3.71c-.907-.262-1.775-.64-2.583-1.127zM12 17.85c-.875-.65-3-2.647-3-6.678C9 7.191 11.098 5.18 12 4.5c.902.68 3 2.693 3 6.674 0 4.03-2.125 6.025-3 6.676m4.014-10.007a6.6 6.6 0 0 1 2.42-1.093.02.02 0 0 1 .022.014c.36 1.111.711 3.42-.978 6.361a11.6 11.6 0 0 1-1.832 2.389c.5-1.15.854-2.582.854-4.339a11.1 11.1 0 0 0-.486-3.332m5.736 4.318c-.26.961-1.069 2.795-3.571 4.291-.808.487-1.676.865-2.583 1.125a13.3 13.3 0 0 0 3.188-3.709q.505-.873.858-1.82a5.6 5.6 0 0 1 2.108.112z"})))},jc=(0,N.forwardRef)(Nc);var qc;n.p;const Bc=["title","titleId"];function zc(){return zc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},zc.apply(this,arguments)}function $c(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}const Hc=(e,t)=>{let{title:n,titleId:a}=e,i=$c(e,Bc);return N.createElement("svg",zc({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",ref:t,"aria-labelledby":a},i),n?N.createElement("title",{id:a},n):null,qc||(qc=N.createElement("path",{fillRule:"evenodd",d:"M1.25 5c0-.966.784-1.75 1.75-1.75h18c.966 0 1.75.784 1.75 1.75v14A1.75 1.75 0 0 1 21 20.75H3A1.75 1.75 0 0 1 1.25 19zM3 4.75a.25.25 0 0 0-.25.25v14c0 .138.112.25.25.25h18a.25.25 0 0 0 .25-.25V5a.25.25 0 0 0-.25-.25zm2.887 3.757a.75.75 0 0 1 1.059-.072l3.439 3a.75.75 0 0 1 0 1.13l-3.44 3a.75.75 0 1 1-.985-1.13L8.75 12 5.96 9.565a.75.75 0 0 1-.073-1.058m6.336 6.032a.75.75 0 0 1 .75-.75h4.586a.75.75 0 1 1 0 1.5h-4.586a.75.75 0 0 1-.75-.75",clipRule:"evenodd"})))},Uc=(0,N.forwardRef)(Hc);var Qc,Vc;n.p;const Wc=["title","titleId"];function Gc(){return Gc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Gc.apply(this,arguments)}function Yc(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}const Kc=(e,t)=>{let{title:n,titleId:a}=e,i=Yc(e,Wc);return N.createElement("svg",Gc({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",ref:t,"aria-labelledby":a},i),n?N.createElement("title",{id:a},n):null,Qc||(Qc=N.createElement("path",{d:"M9.383 17.076c.502 0 .91-.434.91-.97 0-.535-.408-.969-.91-.969s-.91.434-.91.97c0 .535.408.97.91.97M9.951 6.918a2.75 2.75 0 0 0-1.684.176c-.53.234-.976.627-1.285 1.121a3.1 3.1 0 0 0-.473 1.655.75.75 0 1 0 1.5 0c0-.31.087-.608.243-.858.157-.25.375-.437.62-.546.245-.108.512-.135.768-.08.257.054.5.19.696.398s.334.48.39.782a1.65 1.65 0 0 1-.082.898c-.11.282-.293.515-.518.676a1.3 1.3 0 0 1-.194.096c-.076.033-.128.054-.186.077l-.197.081a2.7 2.7 0 0 0-.454.234c-.105.072-.463.328-.463.803l-.001.155c-.001.09-.003.187 0 .675a.75.75 0 1 0 1.5-.011l-.002-.473h.003l.16-.067.024-.009c.065-.027.138-.056.21-.087.135-.058.314-.141.47-.252.473-.337.834-.81 1.046-1.354A3.15 3.15 0 0 0 12.2 9.29a3.06 3.06 0 0 0-.771-1.534 2.84 2.84 0 0 0-1.479-.84"})),Vc||(Vc=N.createElement("path",{fillRule:"evenodd",d:"M4.333 22.667a3 3 0 0 1-3-3V4.334a3 3 0 0 1 3-3h15.334a3 3 0 0 1 3 3v15.333a3 3 0 0 1-3 3zm-1.5-18.333a1.5 1.5 0 0 1 1.5-1.5h9.593a2.5 2.5 0 0 1 2.5 2.5v13.333a2.5 2.5 0 0 1-2.5 2.5H4.333a1.5 1.5 0 0 1-1.5-1.5zm14.216-1.5h2.618a1.5 1.5 0 0 1 1.5 1.5v15.333a1.5 1.5 0 0 1-1.5 1.5h-2.619a3.98 3.98 0 0 0 .878-2.5V5.334c0-.946-.328-1.816-.877-2.5",clipRule:"evenodd"})))},Jc=(0,N.forwardRef)(Kc);n.p;function Xc(){return Xc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Xc.apply(this,arguments)}const ed=(0,Ec.iv)({maxHeight:24,maxWidth:24}),td=(0,Qt.ZP)(Fi.Z,{target:"e17zrn3z3"})({...ed},""),nd=(0,Qt.ZP)(wc.Z,{shouldForwardProp:e=>"active"!==e,target:"e17zrn3z2"})((({theme:e,active:t})=>{var n,a;return{height:80,width:80,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:t?null===(n=e.palette.editor)||void 0===n?void 0:n.sidebar.active:"transparent",overflow:"hidden",paddingRight:4,paddingLeft:4,"&:hover":{backgroundColor:null===(a=e.palette.editor)||void 0===a?void 0:a.sidebar.hover}}}),""),ad=(0,Qt.ZP)((({className:e,...t})=>N.createElement($e.Z,Xc({},t,{classes:{popper:e}}))),{target:"e17zrn3z1"})((({theme:e})=>({[`& .${kc.Z.arrow}`]:{color:"#3F434B",marginLeft:0},[`& .${kc.Z.tooltip}`]:{backgroundColor:"#3F434B",marginLeft:"7px !important",borderRadius:"4px"}})),""),id=(0,Qt.ZP)(Ue.Z,{target:"e17zrn3z0"})((({theme:e})=>({...e.typography.body2,fontSize:"0.75rem","-webkit-line-clamp":"2",display:"-webkit-box","-webkit-box-orient":"vertical",overflow:"hidden"})),""),rd=({iconName:e,label:t,onClick:n,onMouseEnter:a,onMouseLeave:i,isActive:r,hint:o,pulse:l})=>{const s=(0,N.useMemo)((()=>({add:N.createElement(Tc,null),drawing:N.createElement(Dc,null),focus:N.createElement(jc,null),questions:N.createElement(Jc,null),languages:N.createElement(Uc,null)}[e])),[e]),c=N.createElement(nd,{active:r,onClick:n,onMouseEnter:a,onMouseLeave:i,"data-testid":`selectoritem-${e}`,sx:{"& svg":l?{"@keyframes pulsate":{"0%":{transform:"scale(1)"},"25%":{transform:"scale(1.2)"},"75%":{transform:"scale(1)"}},animation:"pulsate 2s infinite"}:{}}},s?N.createElement(M.Z,{sx:e=>({"& *":{fill:"currentColor"}})},s):N.createElement(td,{language:e,id:`environment-selector-${e}`}),t&&N.createElement(M.Z,{mt:.75,"data-testid":"environmentselector-item",textOverflow:"ellipsis",width:"100%",overflow:"hidden"},N.createElement(id,null,t)));return o?N.createElement(ad,{title:N.createElement(N.Fragment,null,o),arrow:!0,placement:"right"},c):c},od=()=>{const[e,t]=(0,N.useState)(!1),n=(0,ue.oB)("isOwner"),a=(0,oe.I0)(),i=(0,N.useCallback)((()=>{a({type:"focus_time_toggled",value:!0,remote:!1})}),[a]);return N.createElement("div",null,N.createElement(rd,{iconName:"focus",label:"Focus",onClick:()=>t(!0),isActive:e,hint:N.createElement(Us,null,n?'Focus Time lets you "pause" the interview while the candidate collects their thoughts.':"Improve your performance by collecting your thoughts for 5 minutes, without your interviewer watching.")}),N.createElement(ul.Z,{open:e},N.createElement(ni.Z,{sx:e=>({color:"dark"===e.palette.mode?"#fff":"#000"})},"Start Focus Time",N.createElement(Jt.Z,{"aria-label":"close",onClick:()=>t(!1),sx:{position:"absolute",right:8,top:8}},N.createElement(Xn.Z,null))),N.createElement(ri.Z,null,n?N.createElement(N.Fragment,null,N.createElement(Ue.Z,null,"How can you assess a candidate's coding skillset when they're under artificial stress? Giving a qualified candidate a few minutes to collect their thoughts can"," ",N.createElement("a",{href:"https://coderpad.io/blog/interview-with-chris-parnin-mahnaz-behroozi",target:"_blank",rel:"noopener noreferrer"},"drastically improve their ability to pass technical assessments"),"."),N.createElement(Ue.Z,{py:3},"Focus Time will \u201cpause\u201d the interview for 5 minutes, blurring your screen while the candidate starts to think through the problem without the stress of someone watching. We'll play a sound when it's time for you to come back to the interview."),N.createElement(Ue.Z,null,"(If you're using a 3rd party audio/videoconference, be sure to mute those as well).")):N.createElement(N.Fragment,null,N.createElement(Ue.Z,null,"You're stressed, we get it."," ",N.createElement("a",{href:"https://coderpad.io/blog/interview-with-chris-parnin-mahnaz-behroozi",target:"_blank",rel:"noopener noreferrer"},"You're more likely to perform better")," ","if you take a few minutes to collect your thoughts."),N.createElement(Ue.Z,{pt:3},"Focus Time \u201cpauses\u201d your interview for 5 minutes, so you can think through the problem on your own, without the interviewer watching. We'll play a sound when 10 seconds are left, and again when time is up."))),N.createElement(ml.Z,null,N.createElement(He.Z,{variant:"contained",onClick:i},"Begin Focus Time"))))};var ld=n(26576),sd=n(72354),cd=n(51956),dd=n(88655),ud=n(75813),md=n(57806),pd=n(21974),gd=n(41562),hd=n(35544),fd=n(23508),vd=n(62640),bd=n(47425),yd=n(90461),Ed=n(33069),wd=n(64601),kd=n(25561),Sd=n(13160),Cd=n(84903),xd=n(95507),_d=n(92700);const Td=(e,t)=>{const n=document.createElement("div");return l().runMode(e,CoderPad.LANGUAGES[t].mode,n),n.innerHTML},Id=pt((({children:e,codeMirror:t,value:n})=>((0,N.useEffect)((()=>{t&&t.setValue(n||"")}),[t,n]),N.createElement(N.Fragment,null,e)))),Pd=(0,wn.Z)({tabPanel:{height:"94%","& .CodeMirror":{height:"unset"}}}),Zd=(0,lr.Z)((()=>({root:{minWidth:72}})))(vd.Z),Od=({question:e})=>{var t,n,a,i;const r=(0,Li.Z)(),o=Pd(),[l,s]=(0,N.useState)(0),{darkColorScheme:c}=(0,oe.v9)((e=>e.editorSettings)),{expanded:d,handleExpand:u}=(0,Cd.g)(null!==(t=e.candidateInstructions)&&void 0!==t?t:[]);if((0,N.useEffect)((()=>{s(0)}),[null===e||void 0===e?void 0:e.id]),!e)return null;const m=[],p=[];if(null!==(n=e.candidateInstructions)&&void 0!==n&&n.length&&""!==e.candidateInstructions[0].instructions&&(m.push("Instructions"),p.push(N.createElement(M.Z,{sx:{height:"100%",display:"flex",flexDirection:"column"}},e.candidateInstructions.map(((t,n)=>N.createElement(Sd.e,{key:n,expanded:d[n]||!1,handleExpand:()=>u(n)},1===e.candidateInstructions.length?N.createElement(M.Z,{mt:3}):N.createElement(bd.Z,{expandIcon:N.createElement(fd.Z,null)},N.createElement(Ue.Z,{variant:"body1"},"Instructions Part ",n+1," ",n>0&&N.createElement(N.Fragment,null,t.defaultVisible?"(visible to ":"(hidden from ","candidates by default)"))),N.createElement(kd.v,{instructions:t.instructions||"",hidden:!1}))))))),(null===(a=e.fileContents)||void 0===a?void 0:a.length)>0)m.push("Starter Code"),p.push(N.createElement(_d.g,{question:e,fileUriPrefix:"pad_question_bank"}));else if(e.contents){var g;m.push("Starter Code"),p.push(N.createElement("pre",{className:(c?"cm-s-monokai":"cm-s-one-light")+" QuestionSelected-contents contents",dangerouslySetInnerHTML:{__html:Td(e.contents||"",null!==(g=e.language)&&void 0!==g?g:"plaintext")}}))}else e.spreadsheet&&(m.push("Starter Code"),p.push(N.createElement(xd.L,{spreadsheetId:e.spreadsheet.gsheetId,preview:!0})));var h;(e.solution&&(m.push("Solution"),p.push(N.createElement(Id,{darkColorScheme:c,value:e.solution,readOnly:!0}))),e.testCasesEnabled&&(m.push("Test Cases"),p.push(N.createElement(dt.Z,{testCases:(e.testCases||[]).map((e=>({...e,return_value:e.returnValue})))}))),null!==(i=e.customFiles)&&void 0!==i&&i.length||null!==e&&void 0!==e&&e.customDatabase)&&(m.push("Resources"),p.push(N.createElement(N.Fragment,null,e.customDatabase&&N.createElement(M.Z,{mb:2},N.createElement(yd.Z,{label:e.customDatabase.language,icon:N.createElement(gd.Z,null),size:"small",color:"primary"}),N.createElement(M.Z,{display:"inline-flex",flexDirection:"column",ml:1},N.createElement(Ue.Z,{variant:"subtitle1"},N.createElement("a",{href:`/dashboard/databases/${e.customDatabase.id}`,target:"_blank",rel:"noreferrer"},e.customDatabase.title||"Database")),e.customDatabase.description&&N.createElement(Ue.Z,{variant:"caption"},e.customDatabase.description))),null===(h=e.customFiles)||void 0===h?void 0:h.map((e=>N.createElement(M.Z,{key:e.id,mb:1},N.createElement(yd.Z,{label:e.filename,icon:N.createElement(hd.Z,null),size:"small",color:"default"}),N.createElement(M.Z,{display:"inline-flex",flexDirection:"column",ml:1},N.createElement(Ue.Z,{variant:"subtitle1"},N.createElement("a",{href:`/dashboard/files/${e.id}`,target:"_blank",rel:"noreferrer"},e.title)),N.createElement(Ue.Z,{variant:"caption"},`${e.description} (${e.filesize})`))))))));return e.drawing&&(m.push("Drawing"),p.push(N.createElement(wd.P,{drawingBoardId:e.drawing.boardId,darkColorScheme:c}))),N.createElement(M.Z,{display:"flex",flexDirection:"column",height:"100%"},N.createElement(M.Z,{borderBottom:`2px solid ${r.palette.background.default}`},N.createElement(Ed.Z,{onChange:(e,t)=>s(t),value:l,"data-testid":"questionselector-questiondetail"},m.map(((e,t)=>N.createElement(Zd,{label:e,key:`tab-${t}`}))))),N.createElement(na.p,{overflow:"auto",flexGrow:1},N.createElement(M.Z,{p:2,className:o.tabPanel},p[l])))},Md=({exampleQuestionId:e,onSelect:t})=>{var n,a,i,r,o;const{languagesById:l}=(0,ud.u)(),[s,c]=(0,N.useState)(""),{exampleQuestion:d,status:u}=(0,md.w)("\n    id\n    title\n    source\n    description\n    variations {\n      id\n      language\n      projectTemplate {\n        name\n        slug\n      }\n      candidateInstructions {\n        instructions\n        defaultVisible\n      }\n      testCasesEnabled\n      testCases {\n        returnValue\n        visible\n        arguments\n      }\n      solution\n      contents\n      fileContents\n    }\n  ")(e),m=null===d||void 0===d?void 0:d.variations.find((e=>e.id===s)),p=(null===d||void 0===d?void 0:d.variations.map((e=>{var t;return{label:(null===(t=l[e.language])||void 0===t?void 0:t.name)||e.language,value:e.id}})))||[];return(0,N.useEffect)((()=>{null!==d&&void 0!==d&&d.variations.length&&c(null===d||void 0===d?void 0:d.variations[0].id)}),[null===d||void 0===d?void 0:d.id]),N.createElement(dd.B,{isLoading:se.TH(u)&&!d,message:"Fetching question details",minDisplayMS:0},d&&N.createElement(M.Z,{whiteSpace:"pre-wrap",display:"flex",flexDirection:"column",height:"100%"},N.createElement(M.Z,{mb:2,display:"flex"},N.createElement(Ue.Z,{variant:"body1"},d.title)),N.createElement(M.Z,null,N.createElement(Ue.Z,{variant:"body2",color:"textSecondary"},d.description)),p.length>1&&N.createElement(M.Z,{mt:2},N.createElement(es.Z,{variant:"outlined",margin:"dense"},N.createElement(ts.Z,{id:"environment-question-menu-language-select-label"},"Language"),N.createElement(xa.Z,{value:s,labelId:"environment-question-menu-example-variation-language-select-label","aria-label":"Question language",id:"environment-question-menu-example-variation-language-select",onChange:e=>c(e.target.value),label:"Language",native:!0},p.map((e=>N.createElement("option",{key:e.value,value:e.value},e.label)))))),m&&N.createElement(M.Z,{mt:1.5},N.createElement(Ue.Z,{variant:"body2",color:"textSecondary"},N.createElement(M.Z,{display:"flex",alignItems:"center",component:"span"},N.createElement(M.Z,{component:"span",ml:1},N.createElement(pd.q,{display:null!==(n=null===(a=m.projectTemplate)||void 0===a?void 0:a.name)&&void 0!==n?n:null===(i=l[m.language])||void 0===i?void 0:i.name,language:null!==(r=null===(o=m.projectTemplate)||void 0===o?void 0:o.slug)&&void 0!==r?r:m.language})," ","by ",d.source," ",d.createdAt&&(0,at.Z)(new Date(d.createdAt),{addSuffix:!0}))))),N.createElement(M.Z,{mt:2,overflow:"hidden"},m&&N.createElement(Od,{question:m})),N.createElement(M.Z,{display:"flex",justifyContent:"flex-end",mt:2},N.createElement(He.Z,{type:"submit",color:"primary",variant:"contained",onClick:()=>t(d.id,{language:null===m||void 0===m?void 0:m.language})},"Add Question"))))};var Dd=n(59334),Ld=n(70268);const Fd=({filters:e,setFilter:t,onSelect:n,selectedExampleId:a})=>{const i=(0,lt.Dd)("\n    id\n    title\n    languages\n    difficulty\n    createdAt\n    description\n"),{questions:r,status:o,pageInfo:l}=i(e);return N.createElement(M.Z,{height:"100%",display:"flex",flexDirection:"column"},N.createElement(na.p,{flex:"1 1 auto",overflow:"auto"},N.createElement(dd.B,{isLoading:se.TH(o),message:"Searching example questions",minDisplayMS:0},N.createElement(Xs.Z,null,!r.length&&N.createElement(M.Z,{display:"flex",justifyContent:"center"},"No question search results"),r.map((e=>N.createElement(ec.ZP,{button:!0,key:e.id,onClick:()=>n(e.id,!0),selected:e.id===a},N.createElement(M.Z,{overflow:"hidden",width:"100%"},N.createElement(Dd.Z,{primary:e.title,secondary:e.description,primaryTypographyProps:{noWrap:!0},secondaryTypographyProps:{noWrap:!0}}),N.createElement(qn.Z,{key:`${e.id}-divider`})))))))),N.createElement(M.Z,{display:"flex",justifyContent:"flex-end"},N.createElement(Ld.Z,{count:l.filteredPageCount,page:l.pageIdx+1,onChange:(e,n)=>t("page",n-1)})))};var Ad=n(8044);const Rd=(0,lr.Z)((e=>{var t,n,a,i,r;const o="dark"===e.palette.mode;return{root:{color:o?"#fff":"#2D72CC",backgroundColor:null===(t=e.palette.editor)||void 0===t?void 0:t.sidebar.background,borderColor:o?null===(n=e.palette.editor)||void 0===n?void 0:n.sidebar.active:"#2D72CC80","&:hover":{borderColor:o?null===(a=e.palette.editor)||void 0===a?void 0:a.sidebar.active:"#2D72CC"},"&.isSelected":{backgroundColor:null===(i=e.palette.editor)||void 0===i?void 0:i.sidebar.active,color:o?"#fff":"#00000080",borderColor:null===(r=e.palette.editor)||void 0===r?void 0:r.sidebar.active}}}}))(He.Z),Nd=({example:e,onToggle:t,userOnly:n})=>N.createElement(Ad.Z,{variant:"outlined"},N.createElement(Rd,{className:e||n?"":"isSelected",onClick:()=>t(!1,!1),disabled:!e&&!n,"data-testid":"questionClassificationToggle-Organization"},"Organization"),N.createElement(Rd,{className:!e&&n?"isSelected":"",onClick:()=>t(!1,!0),disabled:!e&&n,"data-testid":"questionClassificationToggle-MyContent"},"My Content"),N.createElement(Rd,{className:e?"isSelected":"",onClick:()=>t(!0,n),disabled:e,"data-testid":"questionClassificationToggle-Examples"},"Examples"));var jd=n(23709),qd=n(30614),Bd=n(67989);const zd=({onSelect:e,questionId:t})=>{var n;const{activeEnvironment:a}=(0,ve.od)(),{question:i,status:r}=(0,Bd.B)("\n    user {\n      id\n      name\n    }\n    title\n    createdAt\n    language\n    description\n    solution\n    contents\n    fileContents\n    padType\n    customDatabase {\n      id\n      language\n      description\n    }\n    customFiles {\n      id\n      title\n      description\n      filename\n      filesize\n    }\n    candidateInstructions {\n      instructions\n      defaultVisible\n    }\n    projectTemplate {\n      name\n      slug\n    }\n    drawing {\n      boardId\n    }\n    spreadsheet {\n      id\n      gsheetId\n    }\n  ")(t),[o,l]=(0,N.useState)(!1),s=(0,N.useCallback)((e=>{l(e.target.checked)}),[l]);return N.createElement(dd.B,{isLoading:se.TH(r)&&!i,message:"Fetching question details",minDisplayMS:0},i&&N.createElement(M.Z,{whiteSpace:"pre-wrap",display:"flex",flexDirection:"column",height:"100%"},N.createElement(M.Z,{flex:1,overflow:"hidden",display:"flex",flexDirection:"column"},N.createElement(M.Z,{mb:2},N.createElement(Ue.Z,{variant:"body1"},i.title)),N.createElement(M.Z,{mb:1.5},N.createElement(Ue.Z,{variant:"body2",color:"textSecondary"},i.description)),N.createElement(Ue.Z,{variant:"body2",color:"textSecondary",component:"div"},N.createElement(M.Z,{display:"flex",alignItems:"center",component:"span"},N.createElement(qd.N,{question:i}),N.createElement(M.Z,{component:"span",ml:1},"by ",null===(n=i.user)||void 0===n?void 0:n.name," ",(0,at.Z)(new Date(i.createdAt),{addSuffix:!0})))),N.createElement(M.Z,{mt:2,flex:1,overflow:"hidden"},N.createElement(Od,{question:i}))),N.createElement(M.Z,{display:"flex",justifyContent:"flex-end",mt:2},null==(null===a||void 0===a?void 0:a.projectTemplateSlug)&&null==i.projectTemplate&&N.createElement(jd.Z,null,N.createElement(zr.Z,{control:N.createElement($r.Z,{checked:o,onChange:s}),label:"Append question to current tab"})),N.createElement(He.Z,{type:"submit",color:"primary",variant:"contained",onClick:()=>e(i.id,o&&null!==a&&void 0!==a&&a.slug?{env_slug_to_prepend:a.slug}:void 0)},"Add Question"))))};var $d=n(2548);const Hd=(0,wn.Z)((e=>({searchFilters:{display:"flex",flexDirection:"row","&.shrink":{[e.breakpoints.down("lg")]:{flexDirection:"column"}}},searchFilter:{flex:1,marginRight:e.spacing(1),"&:last-of-type":{marginRight:0},"&.shrink":{[e.breakpoints.down("lg")]:{marginRight:0,marginBottom:e.spacing(1.5)}}}}))),Ud=({onTextChange:e,onLangChange:t,textSearchVal:n,langSearchVal:a,shrink:i})=>{const r=Hd(),o=(0,ue.oB)("slug"),{list:l,status:s}=(0,$d.E3)({includeEmptyOption:!1,padSlug:o});return N.createElement("div",{className:ke()(r.searchFilters,{shrink:i})},N.createElement("div",{className:ke()(r.searchFilter,{shrink:i})},N.createElement(Fe.M,{id:"question-environments-text-search",onValueChange:t=>e(t),label:"Search",type:"text",debounce:300,variant:"outlined",fullWidth:!0,margin:"dense",defaultValue:n})),N.createElement("div",{className:ke()(r.searchFilter,{shrink:i})},N.createElement(es.Z,{variant:"outlined",fullWidth:!0,margin:"dense"},N.createElement(ts.Z,{id:"environment-question-menu-language-select-label"},"Language"),N.createElement(xa.Z,{value:a,labelId:"environment-question-menu-language-select-label","aria-label":"Filter by language",id:"environment-question-menu-language-select",disabled:se.TH(s),onChange:e=>t("any"===e.target.value?null:e.target.value),label:"Language",sx:{paddingTop:"2px",paddingBottom:"2px"},native:!0},N.createElement("option",{value:"any"},"All Languages"),l.map((e=>N.createElement("option",{key:e.value,value:e.value},e.label)))))))};var Qd=n(79770);const Vd=(0,Qt.ZP)(Ue.Z,{target:"e956k9u0"})((({theme:e})=>({...e.typography.body1,fontWeight:500,marginBottom:e.spacing(.5)})),""),Wd=({filters:e,setFilter:t,onSelect:n,selectedQuestionId:a})=>{const i=(0,st.Q1)("\n    id\n    favorited\n    title\n    language\n    createdAt\n    description\n    user {\n      id\n      name\n    }\n    projectTemplate {\n      name\n      slug\n    }\n    spreadsheet {\n      id\n      gsheetId\n    }\n  "),{questions:r,status:o,pageInfo:l}=i(e),s=se.TH(o);return N.createElement(M.Z,{height:"100%",display:"flex",flexDirection:"column"},N.createElement(na.p,{flex:"1 1 auto",overflow:"auto"},N.createElement(dd.B,{isLoading:s,message:"Searching questions",minDisplayMS:0},N.createElement(Xs.Z,null,!r.length&&N.createElement(M.Z,{display:"flex",justifyContent:"center"},"No question search results"),r.map((e=>{var t;return N.createElement(N.Fragment,{key:e.id},N.createElement(ec.ZP,{button:!0,onClick:()=>n(e.id),selected:e.id===a},N.createElement(M.Z,{width:"100%"},N.createElement(na.p,{overflow:"hidden",width:"100%",display:"flex",alignItems:"flex-start",mb:1},N.createElement(Qd.z,{questionId:e.id,favorited:e.favorited}),N.createElement(M.Z,{minWidth:0,ml:.5},N.createElement(Vd,{noWrap:!0,variant:"body1",textOverflow:"ellipsis"},e.title),e.description&&N.createElement(Ue.Z,{noWrap:!0,variant:"body2",textOverflow:"ellipsis",sx:{marginBottom:.5}},e.description),N.createElement(M.Z,{display:"flex",alignItems:"center"},N.createElement(qd.N,{question:e}),N.createElement(Ue.Z,{noWrap:!0,variant:"caption",textOverflow:"ellipsis",sx:{marginLeft:"4px"}},null!==(t=e.user)&&void 0!==t&&t.name?` by ${e.user.name}`:"")))))),N.createElement(qn.Z,{sx:e=>({borderColor:"dark"===e.palette.mode?"#1F2328":"rgba(0,0,0,0.12)"})}))}))))),N.createElement(M.Z,{display:"flex",justifyContent:"flex-end"},N.createElement(Ld.Z,{count:l.filteredPageCount,page:l.pageIdx+1,onChange:(e,n)=>t("page",n-1)})))},Gd=({onSelect:e})=>{const{organization:t}=(0,rt.IB)("name")(),{filters:n,setFilter:a}=(0,cd.m)({text:"",userOnly:!1,perPage:100,padTypes:[ct.r.Live,ct.r.Any],sort:[ct.hx.LastUsedAtDesc],testCasesEnabled:!1}),{loading:i,counts:r}=(0,sd.r)(),[o,l]=(0,N.useState)({text:"",perPage:100,testCasesEnabled:!1,sort:[ct.Bh.SortPrecedenceDescThenTitleAsc],language:null}),[s,c]=(0,N.useState)(!1),[d,u]=(0,N.useState)(null),m=(0,N.useRef)(!1);(0,N.useEffect)((()=>{i||m.current||(r.user>0?(c(!1),a("userOnly",!0)):r.all>0?(c(!1),a("userOnly",!1)):(c(!0),a("userOnly",!1)),m.current=!0)}),[r,i,a]);const p=(0,N.useCallback)(((e,t)=>{e?c(!0):(a("userOnly",t),c(!1))}),[a]);let g;return g=d?d.isExampleQuestion?N.createElement(Md,{exampleQuestionId:d.id,onSelect:e}):N.createElement(zd,{questionId:d.id,onSelect:e}):N.createElement(M.Z,{whiteSpace:"break-spaces",textAlign:"center",mt:1.5,maxWidth:"490px",margin:"auto"},N.createElement(Ue.Z,{variant:"h4",component:"div"},"Welcome to your question bank"),N.createElement("div",null,N.createElement("p",null,"Questions you",t&&" and your colleagues"," have written, as well as example questions, are listed on the left."),N.createElement("p",null,"Search for questions to use in live interviews."))),N.createElement(dd.B,{isLoading:i,message:"Searching questions",minDisplayMS:0},N.createElement(M.Z,{display:"flex",height:"100%"},N.createElement(M.Z,{flex:1,p:3,minWidth:"320px"},N.createElement(M.Z,{display:"flex",flexDirection:"column",width:"100%",height:"100%"},s?N.createElement(Ud,{key:"exmapleFilters",textSearchVal:o.text,langSearchVal:o.language||"any",onTextChange:e=>l({...o,text:e}),onLangChange:e=>l({...o,language:e})}):N.createElement(Ud,{key:"questionFilters",textSearchVal:n.text,langSearchVal:n.language||"any",onTextChange:e=>a("text",e),onLangChange:e=>a("language",e)}),N.createElement(M.Z,{display:"flex",justifyContent:"center",mt:1},N.createElement(Nd,{example:s,onToggle:p,userOnly:!!n.userOnly})),N.createElement(M.Z,{flex:1,mt:3,minHeight:0},s?N.createElement(Fd,{filters:o,setFilter:(e,t)=>l({...o,[e]:t}),onSelect:e=>u({id:e,isExampleQuestion:!0}),selectedExampleId:null===d||void 0===d?void 0:d.id}):N.createElement(Wd,{filters:n,setFilter:a,onSelect:e=>u({id:e,isExampleQuestion:!1}),selectedQuestionId:null===d||void 0===d?void 0:d.id})))),N.createElement(na.p,{sx:{width:0,minWidth:0,overflow:"auto",transition:"0.25s all",flex:2,padding:3,borderLeft:"2px solid",borderColor:"background.default"}},g)))},Yd=(0,Qt.ZP)("div",{target:"e1eio72m0"})((({theme:e,collapsed:t})=>({position:t?"absolute":"relative",top:0,left:0,width:"100%",display:"flex",alignItems:"center",justifyContent:"flex-end"})),""),Kd=(0,wn.Z)({tabPanel:{height:"100%",overflow:"auto"}}),Jd=({handleOpenPadSettingsMenu:e})=>{const t=Kd(),{disablePadSettings:n,isSandbox:a}=(0,ue.nT)("disablePadSettings","isSandbox"),{execEnabled:i}=(0,oe.v9)(Ve.f6),{environments:r,activateEnvironment:o,createEnvironment:l,createStatus:s,createOrSelectEnvironment:c}=(0,ve.od)(),{currentTab:d,closeMenu:u}=Gs(),m=(0,N.useCallback)(((e,t)=>{const n=r.find((t=>t.kind===ve.WO.Question&&t.questionId===e&&t.visible));n?o(n.id):l(ve.WO.Question,e,t)}),[r,o,l]),p=se.TH(s)||se.eQ(s),g=d===Qs.Languages;return N.createElement(M.Z,{display:"flex",flexDirection:"column",height:"100%",sx:{filter:p?"blur(2px)":"none"}},a&&N.createElement(M.Z,{sx:{borderBottom:e=>`2px solid ${e.palette.background.default}`}},N.createElement(Oi.Z,{severity:"warning",sx:{borderRadius:0}},"You are currently working in a sandbox. Each tab and its contents will be deleted after one hour of inactivity, so save important work elsewhere.")),N.createElement(Yd,{collapsed:g},N.createElement(Jt.Z,{"aria-label":"Close environment menu",onClick:u,"data-testid":"environmentmenu-close",size:"large"},N.createElement(Xn.Z,null))),N.createElement(M.Z,{flex:1,minHeight:0},N.createElement(na.p,{className:t.tabPanel},d===Qs.Languages&&N.createElement(ld.m,{execEnabled:i,onSelect:c,onEnableExecutionClick:n?void 0:e,languageLimitationReason:"code execution was disabled by the interviewer"}),d===Qs.Questions&&N.createElement(Gd,{onSelect:m}))))},Xd=({handleOpenDrawingMode:e})=>{const{track:t}=(0,Wt.z$)(),n=(0,oe.v9)(Ve.z3),{focusTimeEnabled:a,focusTimeStartedAt:i}=(0,oe.v9)(Ve.f6),{focusTimeSupported:r,iioLayout:o,isOwner:l,isPlayback:s,isSandbox:c,sandboxEnvironmentPreviewSlug:d,takeHome:u,questionsEnabled:m}=(0,ue.nT)("focusTimeSupported","iioLayout","isOwner","isPlayback","isSandbox","sandboxEnvironmentPreviewSlug","takeHome","questionsEnabled"),[p,g]=(0,N.useState)(!1),h=(0,oe.v9)((e=>e.userState.showCandidateOverlay)),[f,v]=(0,N.useState)(!1);(0,N.useEffect)((()=>{h&&v(!0)}),[h]);const{visibleEnvironments:b}=(0,ye.n)(),{environments:y,createStatus:E,clearCreationStatus:w}=(0,ve.od)(),k=(0,Wt.zY)(),{closeMenu:S,currentTab:C,isOpen:x,openMenuAndSetTab:_}=Gs(),T=(0,N.useCallback)((()=>{S(),g((e=>(e||t(ln.j.PadSettingsOpened),!e)))}),[S,t]),I=(0,N.useCallback)((()=>{g(!1),v(!1)}),[]),P=(0,N.useMemo)((()=>s?y.filter(((e,t)=>0===t||b.includes(e.slug))):d?y.filter((e=>e.slug===d)):y.filter((e=>e.visible))),[y,d,s,b]),Z=(0,N.useCallback)((e=>{x&&C===e?S():_(e)}),[S,C,x,_]),O=!c&&r&&!u&&(!a||l)&&!(void 0===i||i);(0,N.useEffect)((()=>{w()}),[w,x]);const[D,L]=(0,N.useState)(null);return N.createElement(M.Z,{position:"relative",height:"100%",width:80},N.createElement(zs,null,N.createElement(na.p,{display:"flex",flexDirection:"column",justifyContent:"flex-start",flexGrow:1,pb:2,overflow:"auto"},P.map((e=>N.createElement(eu,{environment:e,key:e.slug,requestEnvironmentDelete:L}))),N.createElement(M.Z,{sx:e=>({borderTop:"2px solid "+("dark"===e.palette.mode?"#26282A":"#DADADA")})}),!s&&!d&&!u&&m&&N.createElement("div",null,N.createElement(rd,{iconName:"questions",onClick:()=>Z(Qs.Questions),hint:N.createElement(Us,null,"Add a question tab"),label:"Questions"})),!s&&!d&&!u&&N.createElement("div",null,N.createElement(rd,{iconName:"languages",onClick:()=>Z(Qs.Languages),hint:N.createElement(Us,null,"Add a language tab"),label:"Languages"})),!o&&!s&&!d&&!u&&N.createElement("div",null,N.createElement(rd,{iconName:"drawing",label:"Drawing",onClick:e,isActive:n,hint:N.createElement(Us,null,"Open Drawing Mode")})),!s&&O&&N.createElement(od,null)),N.createElement(M.Z,{ml:"auto",mr:"auto",mb:2},N.createElement(Vt.Z,{alignItems:"center",spacing:1},k.CoderPad.FLAGS.showDuplicatePad&&!c&&!d&&N.createElement(Pn,{tooltipPlacement:"right"}),N.createElement(Ua,{onClick:T})))),N.createElement(M.Z,{sx:{bottom:0,position:"absolute",left:e=>e.spacing(10),zIndex:12}},N.createElement($a,{isOpen:p||f,onClose:I,allowClickAway:!f})),N.createElement($s,{isMenuOpen:x,style:{opacity:x?1:0}},x&&N.createElement(M.Z,{height:"100%"},se.TH(E)&&N.createElement(Hs,null,N.createElement(M.Z,{mt:1},N.createElement(Oi.Z,{severity:"info",icon:N.createElement(on.Z,{size:24})},"Creating Environment..."))),se.eQ(E)&&N.createElement(Hs,null,N.createElement(Oi.Z,{severity:"error"},N.createElement(M.Z,{display:"flex",flexDirection:"column"},N.createElement("div",null,"An error occurred while creating your new environment."),N.createElement(M.Z,{alignSelf:"flex-end",mt:2},N.createElement(He.Z,{onClick:w,variant:"text"},"Cancel"))))),!s&&N.createElement(Jd,{handleOpenPadSettingsMenu:T}))),N.createElement(Ks,{environment:D,onRequestClose:()=>L(null)}))},eu=({environment:e,requestEnvironmentDelete:t})=>{const{isPlayback:n,isQuestionDraftPreview:a}=(0,ue.nT)("isPlayback","isQuestionDraftPreview"),{activateEnvironment:i,activeEnvironment:r}=(0,ve.od)(),o=(0,ue.oB)("sandboxEnvironmentPreviewSlug"),{getEnvironmentLanguageChange:l}=(0,Bs.z)(),s=(0,oe.v9)(Ve.aB),c=(0,oe.I0)(),{scrubbing:d}=(0,cr.t)(),[u,m]=(0,N.useState)(null),[p,g]=(0,N.useState)(!1),h=(0,N.useCallback)((e=>{o||i(e)}),[o,i]),f=(0,N.useMemo)((()=>{if(n){const t=l(e.id);if(t){return t.data.language}}return e.language}),[n,e,l]);(0,N.useEffect)((()=>{if(n){const n=l(e.id);if(n){const e=n.data;if(!d){var t;const n=(s||{})[e.language],a=null!==(t=null===n||void 0===n?void 0:n.display)&&void 0!==t?t:e.language;if(a){const t=`Question language changed to ${a}`;c((0,fn.GZ)({message:t,key:`playbackLanguageChange-${e.language}`,variant:"info",autoDismissMs:1500,onClick:()=>{}}))}}}}}),[n,e,l,s,c,d]);return N.createElement(M.Z,{position:"relative",key:e.id,"data-testid":`envselector-itemcontainer-${e.id}`},N.createElement(rd,{iconName:f||e.projectTemplateSlug||null!=e.spreadsheet&&"gsheets"||"",label:e.nameDisplayable,onClick:()=>h(e.id),onMouseEnter:e=>{m(e.currentTarget),g(!0)},onMouseLeave:e=>{setTimeout((()=>{g(!1)}),50)},isActive:e.id===(null===r||void 0===r?void 0:r.id)}),!a&&N.createElement(vc,{requestEnvironmentDelete:t,anchorEl:u,setAnchorEl:m,environment:e,isMouseOnTab:p}),e.questionId&&N.createElement(M.Z,{sx:e=>({position:"absolute",top:"6px",right:"22px",height:"16px",width:"16px","& path":{fill:"dark"===e.palette.mode?"#E5E2E2":"#353C4E"},pointerEvents:"none"})},N.createElement(qs,null)))},tu=()=>{const{isPlayback:e,isSandbox:t}=(0,ue.nT)("isPlayback","isSandbox"),{openMenu:n}=Gs();return e?N.createElement(M.Z,{display:"flex",justifyContent:"center",p:"80px",flexDirection:"column",alignItems:"center"},N.createElement(Oi.Z,{severity:"warning"},"There are no environments available for playback. All of the environments were deleted from this pad before it was ended.")):N.createElement(M.Z,{display:"flex",justifyContent:"center",p:"80px",flexDirection:"column",alignItems:"center"},N.createElement(Ue.Z,{variant:"h2",sx:{color:"text.primary"}},"Pick an environment to get started!"),N.createElement(M.Z,{sx:{margin:e=>`${e.spacing(3)} 0`,display:"flex",justifyContent:"center"}},N.createElement(He.Z,{variant:"contained",color:"primary",onClick:n},"Open selection menu")),t&&N.createElement(Oi.Z,{severity:"warning"},"You are currently working in a sandbox. Each tab and its contents will be deleted after one hour of inactivity, so save important work elsewhere."))};var nu=n(31892),au=n(79912),iu=n(45603),ru=n(38695),ou=n(44078),lu=n(24293),su=n(98963);const cu=({file:e,onError:t,onReady:n,onDestroy:a})=>{var i,r;const o=(0,N.useRef)(null),l=(0,ue.oB)("firebaseAuthorId"),s=(0,N.useMemo)((()=>(null!==l&&void 0!==l?l:Date.now().toString().substring(5)).toString()),[l]),c=(0,oe.v9)(Ve.S8),{invisible:d,isPlayback:u}=(0,ue.nT)("invisible","isPlayback"),m=(0,su.w)(s),p=null!==(i=(0,oe.v9)(Ve.aB))&&void 0!==i?i:{},{environment:g,setLargeFile:h}=(0,fe.J$)(),f=p[null!==(r=null===g||void 0===g?void 0:g.language)&&void 0!==r?r:""],v=(0,N.useMemo)((()=>".cpad"===e.path?"json":null===f||void 0===f?void 0:f.monaco_language),[e.path,f]),b=(0,N.useCallback)((a=>{var i;const r=ou.Fd.Uri.file(e.monacoPath),l=null!==(i=ou.Fd.editor.getModel(r))&&void 0!==i?i:ou.Fd.editor.createModel("",v,r);if(a)h(e.id,!0),null!=o.current&&(o.current.dispose(),o.current=null,l.dispose());else if(h(e.id,!1),null==o.current){const a=(0,go.Z)().firepad(l,e.firebasePath,m);o.current=a,a.on("error",(n=>{t(e.monacoPath,n)})),a.on("ready",(()=>{n(e.monacoPath)}))}}),[e.firebasePath,e.id,e.monacoPath,m,v,t,n,h]);(0,N.useEffect)((()=>{var i;const r=ou.Fd.Uri.file(e.monacoPath),l=null!==(i=ou.Fd.editor.getModel(r))&&void 0!==i?i:ou.Fd.editor.createModel("",v,r);let s;if(u)n(e.monacoPath);else{if(e.isBinary||e.isLargeFile)n(e.monacoPath);else{const a=(0,go.Z)().firepad(l,e.firebasePath,m);o.current=a,a.on("error",(n=>{t(e.monacoPath,n)})),a.on("ready",(()=>{n(e.monacoPath)}))}s=(0,go.Z)().watch(`${e.firebasePath}/large`,b)}return()=>{try{null!=o.current&&(o.current.dispose(),o.current=null),a(e.monacoPath),null!=s&&(0,go.Z)().off(`${e.firebasePath}/large`,s),l.dispose()}catch(t){F.Tb(t,{tags:{layer:"react"}})}}}),[e.firebasePath,e.isBinary,e.isLargeFile,e.monacoPath,m,v,t,n,a,u,e.id,null===g||void 0===g?void 0:g.slug,b]);const y=(0,N.useMemo)((()=>{if(null!=c&&!d&&null!=s)return(0,lu.x6)(c,s)}),[c,d,s]);(0,N.useEffect)((()=>{var e;null!=y&&(null===(e=o.current)||void 0===e||e.setUserColor(y))}),[y]);const E=(0,oe.v9)((e=>e.userState.uncommittedUsername));return(0,N.useEffect)((()=>{var e;null===(e=o.current)||void 0===e||e.setUserName(E)}),[E]),null};function du(e){const{files:t}=(0,fe.J$)(),[n,a]=(0,N.useReducer)(mu,{});return(0,N.useEffect)((()=>{const e=[];return t.length>0&&t.forEach((t=>{const n=`${t.firebasePath}/users`;e.push([n,(0,go.Z)().watch(n,(e=>{const n=[];e&&Object.keys(e).forEach((t=>{const a=e[t];var i;null!==a&&void 0!==a&&a.cursor&&n.push({id:t,color:a.color,cursorPosition:null===(i=a.cursor)||void 0===i?void 0:i.position})})),a(function(e,t){return{type:uu.FileUsersChange,payload:{fileId:e,users:t}}}(t.id,n))}))])})),()=>{e.forEach((e=>{(0,go.Z)().off(e[0],e[1])}))}}),[t]),{usersByFile:n,updateFileUser:(e,t)=>a(function(e,t){return{type:uu.FileUserChange,payload:{fileId:e,user:t}}}(e,t))}}var uu=function(e){return e.FileUsersChange="FILE_USERS_CHANGE",e.FileUserChange="FILE_USER_CHANGE",e}(uu||{});function mu(e={},t){if(t.type===uu.FileUsersChange){const{fileId:n,users:a}=t.payload,i={...e};return i[n]=a,i}if(t.type===uu.FileUserChange){const{fileId:n,user:a}=t.payload,i=e[n];if(i){const t=[...i].filter((e=>e.id!==a.id));return t.push(a),{...e,[n]:t}}}return e}const pu={};function gu(e,t,n){var a;return{name:e.name,path:e.path,isGlobalFile:!1,fileId:e.id,users:null!==(a=t[e.id])&&void 0!==a?a:[],monacoLanguage:n.monaco_language,isLocked:e.isLocked,isImmutable:e.isImmutable||".cpad"===e.path}}var hu=n(54204);const fu=({children:e})=>{const t=(0,N.useRef)(new Set),[n,a]=(0,N.useState)(new Set),i=(0,oe.I0)(),[r,o]=(0,N.useState)(null),l=(0,ue.oB)("firebaseAuthorId"),{activeFile:s,activateFile:c,environment:d,files:u}=((0,N.useMemo)((()=>(null!==l&&void 0!==l?l:Date.now().toString().substring(5)).toString()),[l]),(0,fe.J$)()),m=(0,N.useRef)({}),p=(0,oe.v9)((e=>e.userState.trackedUserId)),{scrollToPosition:g}=(0,ru.u)(r);!function(e){var t;const n=(0,un.i)(),a=(0,ue.oB)("slug"),{activeEnvironment:i}=(0,ve.od)(),r=null===i||void 0===i||null===(t=i.projectTemplateSlug)||void 0===t?void 0:t.startsWith("jupyter"),o=null!=(null===i||void 0===i?void 0:i.spreadsheet),l=(0,N.useRef)(""),s=(0,N.useCallback)((()=>{var t;const i=null===e||void 0===e||null===(t=e.getModel())||void 0===t?void 0:t.getValue();(r||o||i&&i!==l.current)&&(l.current=null!==i&&void 0!==i?i:"",n(`/${a}/update_firebase`,{method:"POST"}))}),[e,r,o,n,a]);(0,N.useEffect)((()=>{const e=setInterval(s,6e4+Math.floor(6e4*Math.random()));return()=>{clearInterval(e)}}),[s,a])}(r),(0,hu.B)();const{usersByFile:h,updateFileUser:f}=du();!function(e,t){var n;const a=(0,oe.I0)(),i=null!==(n=null===t||void 0===t?void 0:t.endsWith(".md"))&&void 0!==n&&n;(0,N.useEffect)((()=>{let t=null;const n=null===e||void 0===e?void 0:e.onDidChangeModel((n=>{var r;null===(r=t)||void 0===r||r.dispose(),t=null;const o=e.getModel();if(i&&null!=o){const e=()=>a({type:"markdown_content_changed",content:o.getValue()});e(),t=o.onDidChangeContent(e)}}));return()=>{var e;null===n||void 0===n||n.dispose(),null===(e=t)||void 0===e||e.dispose()}}),[a,e,i])}(r,null===s||void 0===s?void 0:s.name);const v=(0,N.useMemo)((()=>{if(p){let e="",t=null;for(const[n,a]of Object.entries(h)){const i=a.find((e=>e.id===p));if(null!=i){e=n,t=i;break}}if(null!=t)return{user:t,fileId:e}}return null}),[p,h]);(0,N.useEffect)((()=>{null!=v&&(null===s||void 0===s?void 0:s.id)!==v.fileId&&c(v.fileId)}),[r,v,s,c]),(0,N.useEffect)((()=>{null!=r&&null!=v&&(null===s||void 0===s?void 0:s.id)===v.fileId&&v.user.cursorPosition&&g(v.user.cursorPosition)}),[r,v,s,g]),(0,N.useEffect)((()=>{var e;null!=r&&r.updateOptions({readOnly:null!==(e=null===s||void 0===s?void 0:s.isLocked)&&void 0!==e&&e})}),[r,null===s||void 0===s?void 0:s.isLocked]);const b=(0,N.useMemo)((()=>u.length>0&&u.every((({monacoPath:e})=>n.has(e)))),[u,n]),y=(0,au.Z)((e=>{b&&e(!0)}),[b,null===d||void 0===d?void 0:d.id],!1),E=(0,N.useRef)(!1);(0,N.useEffect)((()=>{y&&!E.current&&(i({type:"editor_mounted",editor:r}),i({type:"editor_modified"}),E.current=!0)}),[i,r,y]);const w=(0,N.useCallback)((e=>{null!=r&&i({type:"tracked_user_changed",userId:void 0})}),[i,r]),k=(0,N.useCallback)((e=>{null!=r&&nu.Fd.languages.json.jsonDefaults.setDiagnosticsOptions({validate:!0,schemaValidation:"error",schemas:[{uri:"http://json-schema.org/draft-07/schema#",fileMatch:[".cpad"],schema:{type:"object",properties:{targets:{type:"object",additionalProperties:{type:"object",properties:{label:{type:"string"},command:{type:"string"}},required:["command"]}}},required:["targets"]}}]})}),[r]);(0,N.useEffect)((()=>{if(!r)return;const e=r.onDidChangeCursorPosition(w),t=r.onDidChangeModel(k);return()=>{e.dispose(),t.dispose()}}),[r,w,k]);const S=(0,N.useRef)(!1);(0,oe.v9)((e=>{const t=Object.values(e.userState.userInfo).find((e=>e.self));null!=(null===t||void 0===t?void 0:t.name)&&(S.current=!0)}));const C=null!=s&&n.has(s.monacoPath)?s.monacoPath:null;(0,N.useEffect)((()=>{let e;if(null!=r){let t=null;if(null!=C){const e=nu.Fd.Uri.file(C);t=nu.Fd.editor.getModel(e)}const n=r.getModel(),a=r.saveViewState();null!=n&&null!=a&&(m.current[n.uri.path]={state:a,versionId:n.getVersionId()}),r.setModel(t),null!=t&&(e=t.onDidChangeContent((()=>{i({type:"editor_modified"})})),setTimeout((()=>{const e=m.current[t.uri.path];null!=e&&e.versionId===t.getVersionId()&&r.restoreViewState(e.state),S.current&&top===self&&!p&&r.hasTextFocus()&&r.focus()}),0))}return()=>{var t;null===(t=e)||void 0===t||t.dispose()}}),[C,r,i,p]);const x=(0,N.useCallback)((e=>a((t=>new Set(t).add(e)))),[]),_=(0,N.useCallback)((e=>a((t=>{delete m.current[e];const n=new Set(t);return n.delete(e),n}))),[]),T=(0,N.useCallback)(((e,n)=>{t.current.has(null===n||void 0===n?void 0:n.message)||(F.Tb(n,{tags:{layer:"firepad"}}),t.current.add(null===n||void 0===n?void 0:n.message)),i((0,ko.w$)())}),[i]),I=function(e,t,n,a,i){var r,o,l,s,c;const{activeFile:d,environment:u,files:m,activateFile:p}=(0,fe.J$)(),g=null!==(o=(null!==(r=(0,oe.v9)(Ve.aB))&&void 0!==r?r:pu)[null!==(l=null===u||void 0===u?void 0:u.language)&&void 0!==l?l:""])&&void 0!==o?o:pu,h=(0,N.useMemo)((()=>m.map((e=>gu(e,t,g)))),[m,g,t]),f=(0,N.useMemo)((()=>null!=d?gu(d,t,g):void 0),[d,g,t]),v=(0,N.useCallback)((e=>{p(e.fileId)}),[p]),b=(0,N.useCallback)((()=>i),[i]);return{files:h,activeFile:f,activeLanguage:null!==(s=null===u||void 0===u?void 0:u.language)&&void 0!==s?s:"",activeLanguageSettings:g,setEditor:a,getEditor:b,createFile:()=>null,setActiveFile:v,setSingleFilePadLanguage:()=>null,updateFileUser:n,firepadReady:e,questionId:null!==(c=null===u||void 0===u?void 0:u.questionId)&&void 0!==c?c:0}}(y,h,f,o,r);return N.createElement(N.Fragment,null,null!=r&&u.map((e=>N.createElement(cu,{key:e.firebasePath,file:e,onReady:x,onError:T,onDestroy:_}))),N.createElement(iu.sA.Provider,{value:I},e))};function vu(){const[e,t]=(0,N.useState)(null),{firebaseAuthorId:n,invisible:a}=(0,ue.nT)("firebaseAuthorId","invisible"),i=(0,N.useMemo)((()=>(null!==n&&void 0!==n?n:Date.now().toString().substring(5)).toString()),[n]);(0,N.useEffect)((()=>{const e=(0,go.Z)().firepadHeadless("",{userId:i});return e.on("ready",(()=>{t(e)})),()=>{e.dispose(),t(null)}}),[n,i]);const r=(0,oe.v9)(Ve.S8);(0,N.useEffect)((()=>{e&&r&&!a&&e.setUserColor((0,lu.x6)(r,i))}),[e,a,r,i])}var bu=n(39832),yu=n(47030);function Eu(){const e=(0,un.i)(),{firebaseAuthorId:t,slug:n,playbackV3Variant:a}=(0,ue.nT)("firebaseAuthorId","slug","playbackV3Variant"),i=(0,N.useRef)([]),[r,o]=(0,Wt.Xs)("tab-id",null),l=null!=a&&a!==Mi.U_.nothing;(0,N.useEffect)((()=>{null==r&&o((0,Hl.v4)())}),[o,r]),(0,N.useEffect)((()=>{l&&(0,bu.Z)({emit(e){i.current.push(e)},packFn:yu.P,recordCanvas:!0,recordCrossOriginIframes:!0})}),[]),(0,N.useEffect)((()=>{if(!l)return;const a=setInterval((async()=>{if(null!=n&&null!=t&&null!=r&&i.current.length>0){const a=i.current.length;await e(`${window.CoderPad.SESSION_RECORDING_SERVICE_URL}/record/${n}/${t}/${r}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i.current.slice(0,a))}),i.current.splice(0,a)}}),5e3);return()=>{clearInterval(a)}}),[e,t,n,a,r])}var wu=n(27770),ku=n(61193);const Su=(0,wn.Z)((e=>({root:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",width:e=>"x"===e.orientation?"0px":"100%",height:e=>"x"===e.orientation?"100%":"0px",margin:e=>"x"===e.orientation?"0 1px":"1px 0","& .indicator":{position:"absolute",zIndex:1,backgroundColor:e.palette.resizer.background,width:e=>"x"===e.orientation?"2px":"100%",height:e=>"x"===e.orientation?"100%":"2px"},"&.active .indicator":{backgroundColor:e.palette.resizer.active,width:e=>"x"===e.orientation?"3px":"100%",height:e=>"x"===e.orientation?"100%":"3px"},"&:hover":{"& .indicator":{backgroundColor:e.palette.resizer.active,transition:e.transitions.create(["background-color","width","height"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.complex}),width:e=>"x"===e.orientation?"3px":"100%",height:e=>"x"===e.orientation?"100%":"3px"}}},resizer:{zIndex:2,position:"absolute",cursor:e=>"x"===e.orientation?"col-resize":"row-resize",width:e=>"x"===e.orientation?"10px":"100%",height:e=>"x"===e.orientation?"100%":"10px"}}))),Cu=({onResize:e,onResizeStop:t,isActive:n})=>{const{orientation:a}=Du(),i=Su({orientation:a}),[r,o]=(0,N.useState)(-1),l=(0,N.useCallback)(((e,{x:t,y:n})=>{o("x"===a?t:n)}),[a]),s=(0,N.useCallback)(((t,{x:n,y:i})=>{e("x"===a?n-r:i-r)}),[a,r,e]),c=(0,N.useCallback)((()=>{o(-1),t()}),[t]);return N.createElement(ku.DraggableCore,{onStart:l,onDrag:s,onStop:c},N.createElement("div",{className:ke()(i.root,{active:n})},N.createElement("div",{className:i.resizer,"data-testid":"splitpane-pane-resizer"}),N.createElement("div",{className:"indicator"})))},xu=(0,Qt.ZP)(M.Z,{shouldForwardProp:e=>"shouldTransitionDim"!==e,target:"e14240ac1"})((({theme:e,shouldTransitionDim:t})=>({position:"relative",transition:t?e.transitions.create(["width","height"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.shorter}):"none"})),""),_u=(0,Qt.ZP)(M.Z,{target:"e14240ac0"})((()=>({height:"100%",overflow:"hidden"})),""),Tu=({paneIdx:e,children:t,hidden:n,component:a})=>{const{dimPcts:i,orientation:r,numPanes:o,numVisiblePanes:l,onResize:s,onResizeStop:c,shouldTransitionDim:d,resizingIndex:u}=Du(),m=l>1&&e<o-1,p=100*i[e];return N.createElement(N.Fragment,null,N.createElement(xu,{shouldTransitionDim:d,"data-testid":"splitpane-pane",style:{width:"x"===r?`${p}%`:"100%",height:"x"===r?"100%":`${p}%`,pointerEvents:u>=0?"none":void 0}},N.createElement(_u,{component:a||"div"},t)),!n&&m&&N.createElement(Cu,{onResize:t=>s(e,t),onResizeStop:c,isActive:u===e}))};function Iu(){return Iu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Iu.apply(this,arguments)}const Pu=(0,wn.Z)({paneWrapper:{display:"flex",flexDirection:e=>"x"===e.orientation?"row":"column",height:"100%",width:"100%",position:"relative"}}),Zu=()=>null,Ou=10,Mu=N.createContext({orientation:"x",dimPcts:[100],numPanes:1,numVisiblePanes:1,onResize:(e,t)=>{},onResizeStop:()=>{},shouldTransitionDim:!1,resizingIndex:-1});function Du(){return(0,N.useContext)(Mu)}function Lu({children:e,orientation:t,enablePaneSizeTransitions:n}){const a=Pu({orientation:t}),i=N.useRef(null),r=(0,N.useMemo)((()=>N.Children.toArray(e).filter((e=>!!e))),[e]),o=r.length,[l,s]=(0,N.useState)(new Array(o).fill(0)),[d,u]=(0,N.useState)(!1),[m,p]=(0,N.useState)(-1),g=(0,N.useRef)(!0),h=r.filter((e=>!e.props.hidden)),f=(0,N.useMemo)((()=>h.map((e=>e.props.id)).join("|")),[h]);(0,N.useEffect)((()=>{g.current||u(!0),g.current=!1;const e=h.filter((e=>!e.props.hidden&&e.props.initialSizePct)),t=e.reduce(((e,t)=>e+(t.props.initialSizePct||0)),0);if(t<=100){const n=(100-t)/(h.length-e.length);let a=0;const i=r.reduce(((e,t,n)=>t.props.hidden?e:n),-1),o=r.map(((e,t)=>{let r=n;return e.props.hidden?r=0:t===i?r=100-a:e.props.initialSizePct&&(r=e.props.initialSizePct),a+=r,r/100}));return s(o),void(v.current=0)}s(new Array(r.length).fill(1/r.length)),v.current=0}),[t,f]);const v=(0,N.useRef)(0),b=(0,N.useCallback)(((e,n)=>{if(!i.current)return;u(!1),p(e);const a="x"===t?i.current.offsetWidth:i.current.offsetHeight,o=c().clone(l),d=r.map((e=>(e.props.minSize||Ou)/a)),m=(n-v.current)/a,g=Math.abs(m),h=v.current;v.current=n;let f=g;if(m>0){for(let t=e+1;t<o.length;t++){const e=o[t],n=d[t];if(o[t]=Math.max(n,e-f),f-=e-o[t],f<=0)break}if(f===g)return void(v.current=h);for(let t=e;t>=0;t--){const e=o[t];if(o[t]=Math.min(100,o[t]+(g-f)),f+=o[t]-e,f>=g)break}}else if(m<0){for(let t=e;t>=0;t--){const e=o[t],n=d[t];if(o[t]=Math.max(n,e-f),f-=e-o[t],f<=0)break}if(f===g)return void(v.current=h);for(let t=e+1;t<o.length;t++){const e=o[t];if(o[t]=Math.min(100,o[t]+(g-f)),f+=o[t]-e,f>=g)break}}s(o)}),[l,r]),y=(0,N.useCallback)((()=>{v.current=0,p(-1)}),[]),E=(0,Li.Z)();return(0,N.useEffect)((()=>{window.dispatchEvent(new Event("resize"));const e=setTimeout((()=>{window.dispatchEvent(new Event("resize"))}),E.transitions.duration.short);return()=>{clearTimeout(e)}}),[l]),N.createElement(Mu.Provider,{value:{orientation:t,dimPcts:l,numPanes:o,numVisiblePanes:h.length,onResize:b,onResizeStop:y,shouldTransitionDim:null!==n&&void 0!==n?n:d,resizingIndex:m}},N.createElement("div",{ref:i,className:a.paneWrapper,"data-testid":"splitpane"},r.map(((e,t)=>N.createElement(Tu,Iu({},e.props,{paneIdx:t,key:e.props.id}))))))}var Fu=n(99566),Au=n(59718);const Ru=N.createContext(null);var Nu=function(e){return e.ConsoleMessage="consoleMessage",e.LocationChanged="locationChanged",e.OriginAccessChanged="originAccessChanged",e}(Nu||{}),ju=function(e){return e.Reload="reload",e.SetLocation="setLocation",e.NavigateBack="navigateBack",e.NavigateForward="navigateForward",e}(ju||{});const qu=({children:e,padSlug:t})=>{const n=`https://${t}.${window.CoderPad.PROJECT_IFRAME_URL_SUFFIX}`.toLowerCase(),a=`${n}/wrapper/index.html`,[i,r]=(0,N.useState)(n),[o,l]=(0,N.useState)(!0),[s,c]=(0,N.useState)([]),d=(0,N.useRef)(null),{environment:u}=(0,fe.J$)();(0,N.useEffect)((()=>{function e(e){if(e.origin.toLowerCase()===n&&"object"===typeof e.data){const t=e.data;switch(t.type){case Nu.ConsoleMessage:c((e=>[...e,(0,Au.Decode)(t.data)]));break;case Nu.LocationChanged:r(t.url),t.reload&&c([]);break;case Nu.OriginAccessChanged:l(t.access),r(null)}}}return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}}),[n]);const m=(0,N.useCallback)((e=>{var t,a;null===(t=d.current)||void 0===t||null===(a=t.contentWindow)||void 0===a||a.postMessage(e,n)}),[n]),p=(0,N.useCallback)((()=>{c([])}),[]),g=(0,N.useCallback)((()=>{m({type:ju.Reload})}),[m]),h=(0,N.useCallback)((()=>{m({type:ju.NavigateBack})}),[m]),f=(0,N.useCallback)((()=>{m({type:ju.NavigateForward})}),[m]),v=(0,N.useCallback)((e=>{m({type:ju.SetLocation,url:new URL(e,n).toString()})}),[m,n]),b=(0,N.useCallback)((()=>{v(n)}),[v,n]);return(0,N.useEffect)((()=>{r(n),p(),l(!0)}),[null===u||void 0===u?void 0:u.id,p,n]),N.createElement(Ru.Provider,{value:{currentUrl:i,hasOriginAccess:o,iframeSrc:a,iframeRef:d,logs:s,clearLogs:p,reload:g,navigateBack:h,navigateForward:f,setLocation:v,resetLocation:b}},e)};function Bu(){const e=(0,N.useContext)(Ru);if(null==e)throw new Error("`useProjectBrowser` hook must be a descendant of a `ProjectIframeAPIProvider`");return e}const zu=(0,wn.Z)((e=>({console:{display:"flex",flexDirection:"column",boxSizing:"border-box",height:"100%",background:e.palette.programOutput.console.background,color:"white",fontFamily:"Menlo, monospace",whiteSpace:"pre-wrap",fontSize:"0.8125rem",border:`2px solid ${e.palette.programOutput.console.border}`},toolbar:{boxSizing:"border-box",height:40,flex:"0 0 auto",display:"flex",alignItems:"center",padding:"0 16px"},clear:{color:e.palette.programOutput.console.buttonColor,background:e.palette.programOutput.console.buttonBackground,border:`1px solid ${e.palette.programOutput.console.buttonBorder}`,borderRadius:4,padding:"0 8px",marginRight:8},filterLevel:{color:e.palette.programOutput.console.buttonColor,background:e.palette.programOutput.console.buttonBackground,border:`1px solid ${e.palette.programOutput.console.buttonBorder}`,borderRadius:4,padding:"0 8px",margin:"0 0 0 auto"},feedContent:{flex:"1 1 auto",marginTop:1}}))),$u=({maxLogCount:e=500})=>{const t=zu(),[n,a]=(0,N.useState)("all"),i=(0,oe.v9)((e=>e.editorSettings.darkColorScheme)),[r,o]=(0,N.useState)([]),{logs:l,clearLogs:s,hasOriginAccess:c}=Bu();return(0,N.useEffect)((()=>{l.length>e?o([{id:"too-many-logs",method:"log",data:[`%cToo many logs, displaying last ${e} items`,"font-style: italic; "]},...l.slice(-e)]):o(l)}),[l,e]),N.createElement("div",{className:t.console},N.createElement("div",{className:t.toolbar},N.createElement("button",{onClick:s,className:t.clear},"clear"),N.createElement("select",{value:n,onChange:e=>a(e.target.value),className:t.filterLevel},N.createElement("option",{value:"all"},"all"),N.createElement("option",{value:"log"},"log"),N.createElement("option",{value:"error"},"error"),N.createElement("option",{value:"warn"},"warn"),N.createElement("option",{value:"info"},"info"),N.createElement("option",{value:"debug"},"debug"))),N.createElement(na.p,{display:"flex",flexDirection:"column-reverse",flexGrow:1,flexShrink:1,flexBasis:"auto",overflow:"auto"},N.createElement("div",{className:t.feedContent},c?N.createElement(Au.Console,{logs:r,filter:"all"===n?void 0:[n],logGrouping:!0,variant:i?"dark":"light"}):N.createElement("div",null,"Cannot access this website origin, go back to your environment website"))))};var Hu=n(12320),Uu=n(43623),Qu=n(91033);function Vu(e,t,n){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:String(a))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Wu extends N.Component{constructor(e){super(e),Vu(this,"_observerCallback",((e,t)=>{const n=e[0];if(!n)return;const{width:a,height:i}=n.contentRect;(a!==this._lastWidth&&!this.props.ignoreWidth||i!==this._lastHeight&&!this.props.ignoreHeight)&&this.props.onResize(a,i),this._lastWidth=a,this._lastHeight=i})),this._root=N.createRef()}componentDidMount(){this._observer=new Qu.Z(this._observerCallback),this._observer.observe(this._root.current.parentElement)}componentWillUnmount(){this._observer.disconnect()}render(){return N.createElement("span",{ref:this._root})}}var Gu={dark:{background:"#1d2126"},light:{foreground:"#383a42",background:"#fafafa",cursor:"#383a42",cursorAccent:"#ff00ff",selection:"#e5e5e685",black:"#232324",red:"#e45649",green:"#50a14f",yellow:"#c18401",blue:"#4078f2",magenta:"#a626a4",cyan:"#0184bc",brightCyan:"#0184bc",brightRed:"#e45649",brightGreen:"#50a14f",brightYellow:"#c18401",brightBlue:"#4078f2",brightMagenta:"#a626a4"}};function Yu(e,t,n){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:String(a))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Ku={visibility:"hidden"};class Ju extends N.Component{constructor(e){super(e),Yu(this,"_handleResize",((e,t)=>{this._resizeXterm(t)})),this._root=N.createRef(),this._terminalCreateCount=0}componentDidMount(){(!this.props.hidden||"python"!==this.props.language&&"python3"!==this.props.language)&&this._createTerm(this.props.language)}componentDidUpdate(e){const t=this._term,n="python"===this.props.language||"python3"===this.props.language,a=!this.props.hidden&&e.hidden&&n;this.props.hidden&&n?this._destroyTerm():this.props.language!==e.language||a?this._createTerm(this.props.language):t&&this.props.fontSize!==e.fontSize?t.setOption("fontSize",this.props.fontSize):t&&this.props.darkColorScheme!==e.darkColorScheme&&t.setOption("theme",Gu[this.props.darkColorScheme?"dark":"light"]),n&&a&&this.props.onUnhidePython()}componentWillUnmount(){this._destroyTerm(),this._unmounting=!0}async _createTerm(e){var t;const n=new Hu.Terminal({cursorBlink:!0,fontFamily:"Roboto Mono",fontSize:this.props.fontSize,lineHeight:1,cols:73,tabStopWidth:4,theme:Gu[this.props.darkColorScheme?"dark":"light"],rendererType:"dom",screenReaderMode:!0});n.loadAddon(new Uu),this._destroyTerm();const a=++this._terminalCreateCount;if(await n.loadWebfontAndOpen(this._root.current),this._unmounting||a!==this._terminalCreateCount)return void n.dispose();const i=(null===(t=CoderPad.LANGUAGES[e])||void 0===t?void 0:t.display)||"CoderPad";n.write("\n"),n.write(`\r\n${i} environment ready. Hit run to try out some code!\r\n`),this._term=n,this._resizeXterm(this._root.current.clientHeight),this.props.onTerminalCreate(n)}_destroyTerm(){this._term&&(this.props.onTerminalDestroy(),this._term.dispose(),this._term=null)}_resizeXterm(e){const t=this._term;if(t){const n=Math.floor(e/Math.max(t._core._renderService.dimensions.actualCellHeight,1));n!==t.rows&&t.resize(73,Math.min(n,9999))}}render(){return N.createElement("div",{className:ke()("Console",this.props.className),ref:this._root,style:this.props.hidden?Ku:null},N.createElement(Wu,{ignoreWidth:!0,onResize:this._handleResize}))}}const Xu={onTerminalCreate(e){return{type:"console_created",term:e}},onTerminalDestroy(){return{type:"console_destroyed"}},onUnhidePython(){return{type:"console_catchup"}}};var em=(0,oe.$j)((function(e){const{language:t}=e.padSettings,{darkColorScheme:n,fontSize:a}=e.editorSettings;return{darkColorScheme:n,fontSize:a,language:t}}),Xu)(Ju),tm=n(3654),nm=n(46926),am=n(3694),im=n(97896),rm=n(9573),om=n(38732),lm=n(47857),sm=n(85983),cm=n(18786);let dm=function(e){return e.Pending="pending",e.Done="done",e.Aborted="aborted",e.Timeout="timeout",e.BodyTooLarge="body_too_large",e.RequestError="request_error",e.UnknownError="unknown_error",e}({}),um=function(e){return e.Get="GET",e.Delete="DELETE",e.Head="HEAD",e.Options="OPTIONS",e.Post="POST",e.Put="PUT",e.Patch="PATCH",e.Purge="PURGE",e.Link="LINK",e.Unlink="UNLINK",e}({});const mm=N.createContext({requestBaseUrl:"",requestHistory:[],sendRequest:()=>null,abortRequest:()=>null,cookieJar:new lm.US,setCookie:()=>null,deleteCookie:()=>null,clearExpiredCookies:()=>null,onSelectHistoricalRequest:()=>null,currentlyViewingRequestId:null}),pm=({children:e})=>{const{slug:t,isPlayback:n,firebaseAuthorId:a}=(0,ue.nT)("slug","isPlayback","firebaseAuthorId"),{CoderPad:{PROJECT_IFRAME_URL_SUFFIX:i}}=(0,sm.zY)(),r=(0,N.useMemo)((()=>{const e=new URL(`https://${t.toLowerCase()}.${i}`);return e.port="",e.origin}),[t,i]),o=function(){const[e,t]=(0,N.useState)([]),{activeEnvironment:n}=(0,ve.od)();return(0,N.useEffect)((()=>{let e;return null!==n&&void 0!==n&&n.slug&&(e=(0,go.Z)().watch(`environmentsData/${n.slug}/requestSummaries`,(e=>{if(e){const n=Object.values(e).filter((e=>e.status!==dm.Aborted)).sort(((e,t)=>e.startedAt<t.startedAt?1:-1));t(n)}else t([])}))),()=>{e&&(0,go.Z)().off(`environmentsData/${null===n||void 0===n?void 0:n.slug}/requestSummaries`,e)}}),[null===n||void 0===n?void 0:n.slug]),e}(),l=function(){const{activeEnvironment:e}=(0,ve.od)(),[t,n]=(0,N.useState)(new lm.US(void 0,{rejectPublicSuffixes:!1}));return(0,N.useEffect)((()=>{let t;return null!==e&&void 0!==e&&e.slug&&(t=(0,go.Z)().watch(`environmentsData/${e.slug}/cookieJar`,(e=>{e&&n(lm.US.fromJSON({cookies:[],...e}))}))),()=>{t&&(0,go.Z)().off(`environmentsData/${null===e||void 0===e?void 0:e.slug}/cookieJar`,t)}}),[null===e||void 0===e?void 0:e.slug]),t}();!function(e,t){const{activeEnvironment:n}=(0,ve.od)();(0,N.useEffect)((()=>{let a=null;return null!==n&&void 0!==n&&n.slug&&(a=(0,go.Z)().watchChildrenUpdates(`environmentsData/${n.slug}/requests`,(a=>{var i;if(null!==a&&void 0!==a&&null!==(i=a.response)&&void 0!==i&&i.headers&&a.response.headers["set-cookie"]){const i=a.response.headers["set-cookie"];if("string"===typeof i){const n=lm.Vj.parse(i);if(n)try{e.setCookieSync(n,`${t}/${a.config.path}`)}catch(r){}}else i.forEach((n=>{const i=lm.Vj.parse(n);if(i)try{e.setCookieSync(i,`${t}/${a.config.path}`)}catch(r){}}));(0,go.Z)().set(`environmentsData/${n.slug}/cookieJar`,e.toJSON())}}))),()=>{a&&(0,go.Z)().off(`environmentsData/${null===n||void 0===n?void 0:n.slug}/requests`,a)}}),[null===n||void 0===n?void 0:n.slug,e,t])}(l,r);const s=function(e,t){const n=(0,oe.I0)();return(0,N.useCallback)((a=>{var i;const r={...a,headers:{cookie:e.getCookieStringSync(`${t}/${a.path}`),...a.headers},body:a.method===um.Get||a.method===um.Head?null:null!==(i=a.body)&&void 0!==i?i:""};n({type:"project/request",requestConfig:r})}),[e,n,t])}(l,r),c=function(){const e=(0,oe.I0)();return(0,N.useCallback)((t=>{e({type:"project/abort_request",requestId:t})}),[e])}(),d=function(e){const{activeEnvironment:t}=(0,ve.od)();return(0,N.useCallback)((n=>{null!==t&&void 0!==t&&t.slug&&(e.setCookieSync(n,`https://${n.domain}`),(0,go.Z)().set(`environmentsData/${t.slug}/cookieJar`,e.toJSON()))}),[e,null===t||void 0===t?void 0:t.slug])}(l),u=function(e){const{activeEnvironment:t}=(0,ve.od)();return(0,N.useCallback)((n=>{null!==t&&void 0!==t&&t.slug&&(n.setExpires(new Date(Date.now())),e.setCookieSync(n,`https://${n.domain}`),(0,go.Z)().set(`environmentsData/${t.slug}/cookieJar`,e.toJSON()))}),[e,null===t||void 0===t?void 0:t.slug])}(l),m=function(e){const{activeEnvironment:t}=(0,ve.od)();return(0,N.useCallback)((()=>{null!==t&&void 0!==t&&t.slug&&e.getCookies("https://",((n,a)=>{if(n)console.error(n);else{const n=e.toJSON();n.cookies=n.cookies.filter((e=>!e.expires||new Date(e.expires).getTime()>Date.now())),(0,go.Z)().set(`environmentsData/${t.slug}/cookieJar`,n)}}))}),[e,null===t||void 0===t?void 0:t.slug])}(l),[p,g]=(0,N.useState)(null),h=(0,oe.v9)((e=>{var t;return null===(t=e.execution)||void 0===t?void 0:t.lastSentRequestId}));(0,N.useEffect)((()=>{h&&(g(h),n||(0,cm.r)({type:"request-client-request",user:a,data:{requestId:h}}))}),[h,n,a]);const f=(0,N.useMemo)((()=>({requestBaseUrl:r,requestHistory:o,sendRequest:s,abortRequest:c,cookieJar:l,setCookie:d,deleteCookie:u,clearExpiredCookies:m,onSelectHistoricalRequest:g,currentlyViewingRequestId:p})),[r,o,s,c,d,u,m,l,g,p]);return N.createElement(mm.Provider,{value:f},e)};function gm(){const e=(0,N.useContext)(mm);if(null==e)throw new Error("`useRequestClient` hook must be a descendant of a `RequestClientContextProvider`");return e}const hm=(0,Qt.ZP)(ni.Z,{target:"es7gpj60"})((({theme:e})=>({color:e.palette.text.primary})),""),fm=({isOpen:e,onContinueAnyway:t,onGoToRequest:n})=>N.createElement(ul.Z,{open:e},N.createElement(hm,null,"You have an unsent request"),N.createElement(ri.Z,null,N.createElement(Vl.Z,null,"Navigating away from this request form will discard all current edits.")),N.createElement(ml.Z,{sx:{padding:2}},N.createElement(He.Z,{onClick:t,sx:{color:"inherit"},variant:"text"},"Discard current edits"),N.createElement(He.Z,{variant:"contained",color:"primary",onClick:n},"Return to form"))),vm=N.createContext({currentlyViewingRequestId:null,currentlyViewingRequest:null,currentlyViewingRequestTimings:null,currentlyViewingRequestResponse:null,currentlyViewingRequestStatus:null,isDirty:!1,setIsDirty:()=>{},openUnsentRequestDialog:()=>{}}),bm=({children:e})=>{const{currentlyViewingRequestId:t}=gm(),{environment:n}=(0,fe.J$)(),[a,i]=(0,N.useState)(!1),[r,o]=(0,N.useState)(null),[l,s]=(0,N.useState)(null),[c,d]=(0,N.useState)(null),[u,m]=(0,N.useState)(null),p=(0,oe.I0)(),[g,h]=(0,N.useState)(!1),[f,v]=(0,N.useState)((()=>()=>{})),b=(0,N.useCallback)((()=>{o(null),s(null),m(null)}),[]);(0,N.useEffect)((()=>{let e,a;return t&&null!==n&&void 0!==n&&n.slug&&(e=(0,go.Z)().watch(`environmentsData/${n.slug}/requests/${t}/config`,(e=>{e&&d(e)})),a=(0,go.Z)().watch(`environmentsData/${n.slug}/requests/${t}`,(e=>{var t,n,a;s(null!==(t=null===e||void 0===e?void 0:e.timings)&&void 0!==t?t:null),o(null!==(n=null===e||void 0===e?void 0:e.response)&&void 0!==n?n:null),m(null!==(a=null===e||void 0===e?void 0:e.status)&&void 0!==a?a:null)}))),()=>{a&&(0,go.Z)().off(`environmentsData/${null===n||void 0===n?void 0:n.slug}/requests/${t}`,a),e&&(0,go.Z)().off(`environmentsData/${null===n||void 0===n?void 0:n.slug}/requests/${t}/config`,e),b()}}),[t,null===n||void 0===n?void 0:n.slug,b]);const y=(0,N.useCallback)((e=>{h(!0),v((()=>e))}),[]),E=(0,N.useCallback)((()=>{h(!1),i(!1),f()}),[f]),w=(0,N.useCallback)((()=>{h(!1),p({type:"tab_selected",tab:"requestClient"})}),[p]),k=(0,N.useMemo)((()=>({currentlyViewingRequestId:t,currentlyViewingRequest:c,currentlyViewingRequestTimings:l,currentlyViewingRequestResponse:r,currentlyViewingRequestStatus:u,isDirty:a,setIsDirty:i,openUnsentRequestDialog:y})),[t,c,r,l,u,a,y]);return N.createElement(vm.Provider,{value:k},N.createElement(fm,{isOpen:g,onContinueAnyway:E,onGoToRequest:w}),e)};function ym(){const e=(0,N.useContext)(vm);if(null==e)throw new Error("`useRequestClient` hook must be a descendant of a `RequestClientSelectedProvider`");return e}const Em=(0,Qt.ZP)(nm.Z,{target:"e16s5m0z2"})((({theme:e})=>({textTransform:"uppercase",fontWeight:e.typography.fontWeightMedium})),""),wm=(0,Qt.ZP)(nm.Z,{target:"e16s5m0z1"})({name:"1d3w5wq",styles:"width:100%"}),km=(0,Qt.ZP)(am.Z,{target:"e16s5m0z0"})({name:"e0dnmk",styles:"cursor:pointer"}),Sm=()=>{const{requestHistory:e,currentlyViewingRequestId:t,onSelectHistoricalRequest:n}=gm(),a=(0,oe.I0)(),{isDirty:i,openUnsentRequestDialog:r}=ym(),o=(0,N.useCallback)((e=>{n(e),a({type:"tab_selected",tab:"requestClient"}),(0,Mn.Z)(ln.j.RequestClientHistoryItemClicked)}),[n,a]),l=(0,N.useCallback)((e=>{i?r((()=>{o(e)})):o(e)}),[i,r,o]);return N.createElement(na.p,null,N.createElement(im.Z,null,N.createElement(rm.Z,{size:"small","aria-label":"API request history"},N.createElement(om.Z,null,e.map((e=>N.createElement(km,{key:e.id,hover:!0,onClick:()=>l(e.id),selected:t===e.id,"aria-selected":t===e.id?"true":"false"},N.createElement(Em,{align:"right"},e.method),N.createElement(wm,{align:"left"},e.path))))))))};function Cm(){return Cm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Cm.apply(this,arguments)}const xm=({children:e,isWorking:t,workingText:n,onClick:a,onCancel:i,color:r,size:o,...l})=>{const s=(0,N.useMemo)((()=>t?i:a),[t,i,a]),c=(0,N.useMemo)((()=>{const e="small"===o?10:"large"===o?20:16;return t?N.createElement(on.Z,{color:"inherit",size:e}):null}),[t,o]),d=t?"error":null!==r&&void 0!==r?r:"primary",u=t?null!==n&&void 0!==n?n:"Cancel":e;return N.createElement(He.Z,Cm({},l,{size:o,color:d,onClick:s,endIcon:c}),u)};const _m=(0,Qt.ZP)(jd.Z,{target:"e1soe0rc2"})({name:"cbrneb",styles:"display:inline-flex;flex-direction:row;flex:1"}),Tm=(0,Qt.ZP)(ia.Z,{target:"e1soe0rc1"})({name:"1mmoy68",styles:"flex:1;& fieldset{border-top-left-radius:0;border-bottom-left-radius:0;}"}),Im=(0,Qt.ZP)(xa.Z,{target:"e1soe0rc0"})({name:"i26dod",styles:"border-top-right-radius:0;border-bottom-right-radius:0;width:115px"}),Pm=({method:e,url:t,onChangeMethod:n,onChangeUrl:a,onSend:i,onClear:r,readOnly:o=!1,isWorking:l=!1,doRequestCancel:s=(()=>{})})=>N.createElement(M.Z,{display:"flex",flexDirection:"row",flexWrap:"nowrap"},N.createElement(_m,{row:!0},N.createElement(Im,{value:e,size:"small",onChange:e=>n(e.target.value),readOnly:o},Object.values(um).map((e=>N.createElement(hi.Z,{key:e,value:e},e)))),N.createElement(Tm,{size:"small",value:t,onChange:e=>a(e.target.value),disabled:o,"aria-readonly":o})),!o&&N.createElement(N.Fragment,null,N.createElement(xm,{variant:"contained",color:"primary",onClick:i,sx:{marginLeft:2},isWorking:l,onCancel:s},"Send"),N.createElement(He.Z,{color:"inherit",variant:"outlined",size:"small",onClick:r,sx:{marginLeft:2}},"Clear"))),Zm=(e,t,n={})=>{const[a,i]=(0,N.useState)(t),r=(0,N.useMemo)((()=>e.map((e=>e.field))),[e]),o=(0,N.useMemo)((()=>n.onMutation||(()=>{})),[n.onMutation]),l=(0,N.useCallback)((e=>{const t=e||r.reduce(((e,t)=>({...e,[t]:""})),{});i((e=>[...e,{id:(0,Hl.v4)(),...t}])),o()}),[r,o]),s=(0,N.useCallback)((e=>{i((t=>t.filter((t=>t.id!==e.id)))),o()}),[i,o]),c=(0,N.useCallback)((e=>(i((t=>{const n=t.findIndex((t=>t.id===e.id));return-1===n?t:[...t.slice(0,n),e,...t.slice(n+1)]})),o(),e)),[i,o]),d=(0,N.useCallback)((e=>[...a].reverse().find((t=>Object.entries(e).every((([e,n])=>t[e]===n))))),[a]),u=(0,N.useCallback)((()=>{i(t),o()}),[t,o]);return(0,N.useMemo)((()=>({columns:e,rows:a,setRows:i,handleAddRow:l,handleDeleteRow:s,onRowEdit:c,getRow:d,resetData:u})),[e,a,i,l,s,c,d,u])},Om={JSON:"application/json",Form:"application/x-www-form-urlencoded",Text:"text/plain"},Mm={columns:[],rows:[],setRows:()=>{},handleAddRow:()=>{},handleDeleteRow:()=>{},onRowEdit:()=>({}),getRow:()=>({}),resetData:()=>{}},Dm=[{field:"name",headerName:"Name",width:200,editable:!0,sortable:!1},{field:"value",headerName:"Value",flex:1,editable:!0,sortable:!1}],Lm=[{field:"key",headerName:"Name",editable:!0,sortable:!1},{field:"value",headerName:"Value",flex:1,editable:!0,sortable:!1},{field:"expires",headerName:"Expires",editable:!0,sortable:!1,type:"date"},{field:"domain",headerName:"Domain",editable:!0,sortable:!1},{field:"path",headerName:"Path",editable:!0,sortable:!1}],Fm=N.createContext({method:um.Get,setMethod:()=>{},path:"",setPath:()=>{},performRequest:()=>{},cookiesData:Mm,headersData:Mm,paramsData:Mm,bodyFormData:Mm,bodyText:"",setBodyText:()=>{},bodyType:"JSON",setBodyType:()=>{},clearForm:()=>{},defaultCookieDomain:""}),Am=[{id:(0,Hl.v4)(),name:"",value:""}],Rm=({children:e})=>{const t=(0,ue.oB)("isPlayback"),{activeEnvironment:n}=(0,ve.od)(),{sendRequest:a,cookieJar:i,setCookie:r,clearExpiredCookies:o,requestBaseUrl:l,onSelectHistoricalRequest:c,currentlyViewingRequestId:d}=gm(),[u,m]=(0,N.useState)(um.Get),[p,g]=(0,N.useState)(""),[h,f]=(0,N.useState)("JSON"),[v,b]=(0,N.useState)(""),y=(0,N.useRef)(),{currentlyViewingRequest:E,isDirty:w,setIsDirty:k}=ym(),[S,C]=(0,N.useState)(!0),x=(0,N.useMemo)((()=>l.replace("https://","")||""),[l]),_=(0,N.useMemo)((()=>({onMutation:()=>k(!0)})),[k]),T=Zm(Lm,[{id:(0,Hl.v4)(),key:"",value:"",expires:void 0,domain:x,path:""}]),I=Zm(Dm,Am,_),P=Zm(Dm,[{id:"content-type",name:"Content-Type",value:"application/json"}],_),Z=Zm(Dm,Am,_),O=(0,N.useMemo)((()=>Om[h]),[h]);(0,N.useEffect)((()=>{if(t)return;let e;return null!==n&&void 0!==n&&n.slug&&d&&(e=(0,go.Z)().watch(`environmentsData/${n.slug}/requestSummaries/${d}`,(e=>{(null===e||void 0===e?void 0:e.status)===dm.Done&&C(!0)}))),()=>{e&&(0,go.Z)().off(`environmentsData/${null===n||void 0===n?void 0:n.slug}/requestSummaries/${d}`,e)}}),[null===n||void 0===n?void 0:n.slug,d,t]);const M=(0,N.useMemo)((()=>i.toJSON().cookies.filter((e=>!e.expires||new Date(e.expires).getTime()>Date.now()))),[i]);(0,N.useEffect)((()=>{w&&y.current&&(y.current=void 0)}),[w]),(0,N.useEffect)((()=>{S&&(M.length?T.setRows(M.map((e=>({...e,id:(0,Hl.v4)(),expires:e.expires?new Date(e.expires):void 0})))):T.resetData(),C(!1))}),[M,T,S]),(0,N.useEffect)((()=>{const e=P.getRow({name:"Content-Type"});(null===e||void 0===e?void 0:e.value)!==O&&f(Object.keys(Om).find((t=>Om[t]===(null===e||void 0===e?void 0:e.value)))||"Text")}),[O,P]);const D=(0,N.useCallback)((()=>{m(um.Get),g(""),T.resetData(),P.resetData(),Z.resetData(),I.resetData(),b(""),f("JSON"),c(null)}),[T,P,Z,I,c]),L=(0,N.useMemo)((()=>P.rows.reduce(((e,t)=>(e[t.name]=t.value,e)),{})),[P.rows]),F=(0,N.useMemo)((()=>I.rows.map((e=>`${encodeURIComponent(e.name)}=${encodeURIComponent(e.value)}`)).join("&")),[I.rows]),A=(0,N.useMemo)((()=>"Form"===h?F:v),[h,v,F]),R=(0,N.useCallback)(((e,t=!0)=>{if(g(e),t)if(e.includes("?")){const t=e.replace(/.*\?/,""),n=new URLSearchParams(t),a=Array.from(n.entries()).map((([e,t])=>({id:(0,Hl.v4)(),name:e,value:t})));Z.setRows(a)}else Z.resetData()}),[Z]),j=(0,N.useCallback)((()=>{T.rows.forEach((e=>{const t=(0,s.omit)(e,["id"]),n=new lm.Vj(t);t.expires?n.setExpires(t.expires):n.setExpires("Infinity"),r(n)})),a({path:p,method:u,headers:L,body:A}),o(),C(!0),k(!1)}),[a,p,u,L,A,T,r,o,k]);(0,N.useEffect)((()=>{if(!w&&E&&!(0,s.isEqual)(E,y.current)){y.current=E,m(E.method),R(E.path),P.setRows(Object.entries(E.headers||{}).filter((([e])=>"cookie"!==e)).map((([e,t])=>({id:(0,Hl.v4)(),name:e,value:t}))));if((e=E,(Object.entries(e.headers||{}).find((([e])=>"Content-Type"===e))||[])[1])===Om.Form){f("Form");const e=new URLSearchParams(E.body||""),t=Array.from(e.entries()).map((([e,t])=>({id:(0,Hl.v4)(),name:e,value:t})));I.setRows(t)}else b(E.body||"");k(!1)}var e}),[E,P,R,I,k,w]);const q=(0,N.useMemo)((()=>({method:u,setMethod:m,path:p,setPath:R,performRequest:j,cookiesData:T,headersData:P,paramsData:Z,bodyFormData:I,bodyText:v,setBodyText:b,bodyType:h,setBodyType:f,clearForm:D,defaultCookieDomain:x})),[u,m,p,R,j,T,P,Z,I,v,b,h,f,D,x]);return N.createElement(Fm.Provider,{value:q},e)};function Nm(){const e=(0,N.useContext)(Fm);if(null==e)throw new Error("`useRequestClientConfiguration` hook must be a descendant of a `RequestClientConfigurationContextProvider`");return e}var jm=n(36278),qm=n(21164),Bm=n(79668);const zm=(0,Qt.ZP)(He.Z,{target:"e158eiqa0"})({name:"hra6zc",styles:"font-size:0.75rem"}),$m=({onAddRow:e})=>N.createElement(M.Z,null,e&&N.createElement(zm,{size:"small",variant:"text",color:"primary",onClick:e,"data-testid":"add-row"},"+ Add")),Hm=(0,Qt.ZP)(qm._,{target:"e1nosvar1"})((({theme:e})=>({border:"none","& .MuiDataGrid-columnsContainer":{borderBottom:`1px solid ${e.palette.divider}`},"& .MuiDataGrid-cell":{borderBottom:`1px solid ${e.palette.divider}`,borderLeft:`1px solid ${e.palette.divider}`,"&:last-child":{borderRight:`1px solid ${e.palette.divider}`}},"& .MuiDataGrid-row--lastVisible .MuiDataGrid-cell":{borderBottomColor:`${e.palette.divider} !important`},"& .MuiDataGrid-columnSeparator":{display:"none"},"& .MuiDataGrid-columnHeaderTitle":{fontWeight:e.typography.fontWeightBold,color:e.palette.grey[500],textTransform:"uppercase"}})),""),Um=(0,Qt.ZP)(Jt.Z,{target:"e1nosvar0"})((({theme:e})=>({color:e.palette.grey[500]})),""),Qm=({rows:e,columns:t,onRowEdit:n,onAddRow:a,onDeleteRow:i,readOnly:r})=>{const o=(0,N.useMemo)((()=>i&&!r?[...t,{field:"delete_row",headerName:"",editable:!1,sortable:!1,align:"right",renderCell:e=>N.createElement(Um,{"aria-label":"delete",onClick:()=>i(e.row),disableRipple:!0,"data-testid":"delete-row"},N.createElement(jm.Z,{fontSize:"small"}))}]:t),[t,i,r]),[l,s]=(0,N.useState)({}),c=(0,N.useCallback)((e=>{s((t=>!e.isEditable||r?t:{...Object.keys(t).reduce(((e,n)=>({...e,[n]:Object.keys(t[n]).reduce(((e,t)=>({...e,[t]:{mode:Bm.Vl.View}})),{})})),{}),[e.id]:{...Object.keys(t[e.id]||{}).reduce(((e,t)=>({...e,[t]:{mode:Bm.Vl.View}})),{}),[e.field]:{mode:Bm.Vl.Edit}}}))}),[r]),d=(0,N.useCallback)((e=>{s(e)}),[]);return N.createElement("div",null,N.createElement(Hm,{rows:e,columns:o,disableSelectionOnClick:!0,disableColumnMenu:!0,experimentalFeatures:{newEditingApi:!0},cellModesModel:l,onCellModesModelChange:d,onCellClick:c,processRowUpdate:n,onProcessRowUpdateError:e=>console.error(e),autoHeight:!0,isCellEditable:()=>!r,components:{Footer:r?()=>null:()=>N.createElement($m,{onAddRow:a})},rowHeight:32,headerHeight:32}))};const Vm=(0,Qt.ZP)(xa.Z,{target:"eyl7k4d0"})({name:"1wyct7r",styles:"width:100%;max-width:116px"}),Wm=()=>{const{bodyType:e,setBodyType:t,bodyText:n,setBodyText:a,headersData:i,bodyFormData:r}=Nm(),o=(0,ue.oB)("isPlayback"),{setIsDirty:l}=ym(),s=(0,N.useCallback)((e=>{const n=e.target.value;t(n);const a=Om[n],r=i.getRow({name:"Content-Type"});r?r.value!==a&&i.onRowEdit({...r,value:a}):i.handleAddRow({name:"Content-Type",value:a})}),[i,t]);return N.createElement(N.Fragment,null,N.createElement(Vm,{size:"small",value:e,onChange:s},Object.keys(Om).map((e=>N.createElement(hi.Z,{key:e,value:e},e)))),"Form"===e?N.createElement("div",{"data-testid":"request-client-body-form-data"},N.createElement(Qm,{columns:r.columns,rows:r.rows,onRowEdit:r.onRowEdit,onAddRow:r.handleAddRow,onDeleteRow:r.handleDeleteRow,readOnly:o})):N.createElement(M.Z,{sx:{flex:"1 1 auto"},mt:2,"data-testid":"request-client-body-text"},N.createElement(nu.ZP,{ref:e=>{e&&o&&e.updateOptions({readOnly:!0})},programmingLanguage:"JSON"===e?"json":"text",value:n,onChange:e=>{a(e),l(!0)}})))},Gm=()=>{const e=(0,ue.oB)("isPlayback"),{cookiesData:t,defaultCookieDomain:n}=Nm(),a=(0,N.useCallback)((e=>(e.expires=new Date,t.onRowEdit(e),e)),[t]),i=(0,N.useCallback)((()=>{t.handleAddRow({domain:n})}),[t,n]);return N.createElement(Qm,{rows:t.rows.filter((e=>!e.expires||new Date(e.expires)>new Date)),columns:t.columns,onAddRow:i,onDeleteRow:a,onRowEdit:t.onRowEdit,readOnly:e})},Ym=()=>{const e=(0,ue.oB)("isPlayback"),{headersData:t,setBodyType:n}=Nm(),a=(0,N.useCallback)((e=>("Content-Type"===e.name&&n(e.value),t.onRowEdit(e))),[t,n]);return N.createElement(Qm,{rows:t.rows,columns:t.columns,onAddRow:t.handleAddRow,onDeleteRow:t.handleDeleteRow,onRowEdit:a,readOnly:e})},Km=()=>{const e=(0,ue.oB)("isPlayback"),{path:t,setPath:n,paramsData:a}=Nm(),i=(0,N.useCallback)((e=>{const i=a.rows.reduce(((t,n)=>(n.id===e.id?t[e.name]=e.value:t[n.name]=n.value,t)),{}),r=t.split("?")[0],o=Object.entries(i).filter((([e,t])=>e&&t)).map((([e,t])=>`${e}=${t}`)).join("&");return n(`${r}?${o}`,!1),a.onRowEdit(e)}),[a,t,n]),r=(0,N.useCallback)((e=>{const i=a.rows.reduce(((t,n)=>(e.id!==n.id&&(t[n.name]=n.value),t)),{}),r=t.split("?")[0],o=Object.entries(i).map((([e,t])=>`${e}=${t}`)).join("&");return n(o?`${r}?${o}`:r,!1),a.handleDeleteRow(e)}),[a,t,n]);return N.createElement(Qm,{rows:a.rows,columns:a.columns,onAddRow:a.handleAddRow,onDeleteRow:r,onRowEdit:i,readOnly:e})};const Jm=(0,Qt.ZP)(Fu.x4,{target:"e148la5r0"})({name:"uj301i",styles:"display:flex;flex:1 1 auto;flex-direction:column;margin-top:16px;padding:0;overflow:hidden"}),Xm=()=>{const e=(0,ue.oB)("isPlayback"),{method:t,setMethod:n,path:a,setPath:i,performRequest:r,clearForm:o}=Nm(),{setIsDirty:l,currentlyViewingRequestId:s,currentlyViewingRequestStatus:c}=ym(),{abortRequest:d}=gm(),u=(0,N.useCallback)((()=>{s&&(d(s),(0,y.j)(ln.j.RequestClientRequestCanceled))}),[s,d]),m=(0,N.useCallback)((()=>{r(),(0,y.j)(ln.j.RequestClientRequestSent)}),[r]),[p,g]=(0,N.useState)(!1);return(0,N.useEffect)((()=>{let e=null;return c===dm.Pending?e=setTimeout((()=>{g(!0)}),200):e&&(g(!1),clearTimeout(e)),()=>{e&&(clearTimeout(e),g(!1))}}),[c]),N.createElement(M.Z,{sx:{height:"100%",display:"flex",flexDirection:"column"}},N.createElement(Pm,{method:t,url:a,onChangeMethod:e=>{n(e),l(!0)},onChangeUrl:e=>{i(e,!0),l(!0)},onSend:m,onClear:o,readOnly:e,isWorking:p,doRequestCancel:u}),N.createElement(M.Z,{mt:1,sx:{display:"flex",flex:"1 1 auto",overflow:"hidden"}},N.createElement(Fu.mQ,{size:"small"},N.createElement(Fu.td,null,N.createElement(Fu.OK,{value:"body",label:"Body"}),N.createElement(Fu.OK,{value:"cookies",label:"Cookies"}),N.createElement(Fu.OK,{value:"headers",label:"Headers"}),N.createElement(Fu.OK,{value:"params",label:"Params"})),N.createElement(Jm,{value:"body"},N.createElement(Wm,null)),N.createElement(Jm,{value:"cookies"},N.createElement(na.p,null,N.createElement(Gm,null))),N.createElement(Jm,{value:"headers"},N.createElement(na.p,null,N.createElement(Ym,null))),N.createElement(Jm,{value:"params"},N.createElement(na.p,null,N.createElement(Km,null))))))};var ep=n(72852),tp=n(19755);const np=({bodyType:e,bodyText:t})=>{const[n,a]=(0,N.useState)(!0),i=(0,N.useMemo)((()=>{if("json"===e&&n&&t)try{const e=JSON.parse(t);return JSON.stringify(e,null,2)}catch(a){return t}return t}),[e,t,n]);return N.createElement(N.Fragment,null,"json"===e&&N.createElement(zr.Z,{sx:{ml:0},control:N.createElement(ep.Z,{size:"small",checked:n,onChange:e=>a(e.target.checked),inputProps:{"data-testid":"request-client-response-body-pretty"}}),label:"Pretty"}),N.createElement(M.Z,{minHeight:40,mt:2,flex:"1 1 auto","data-testid":"request-client-response-body-text"},N.createElement(nu.ZP,{programmingLanguage:e,value:i,ref:e=>{null!=e&&(e.getContainerDomNode().setAttribute("data-testid","request-client-response-body-monaco"),tp(e.getContainerDomNode()).data("editor",e))},options:{readOnly:!0}})))},ap=({headers:e})=>{const t=(0,N.useMemo)((()=>Object.entries(e).map((([e,t])=>({id:(0,Hl.v4)(),name:e,value:t})))),[e]);return N.createElement(Qm,{rows:t,columns:[{field:"name",headerName:"Name",width:200,editable:!1,sortable:!1},{field:"value",headerName:"Value",flex:1,editable:!1,sortable:!1}]})};const ip=(0,Qt.ZP)(Fu.x4,{target:"e1v5i2ie0"})({name:"14sy5zx",styles:"display:flex;flex:1 1 auto;flex-direction:column;margin-top:16px;padding:0;min-height:0"}),rp=e=>{switch(e){case"application/json":return"json";case"application/xml":return"xml";case"text/html":return"html";case"text/css":return"css";case"text/javascript":return"javascript";default:return"text"}},op=()=>{const{currentlyViewingRequestResponse:e}=ym(),t=(0,N.useMemo)((()=>{var t;const n=null===e||void 0===e||null===(t=e.headers["content-type"])||void 0===t?void 0:t[0];return((null===n||void 0===n?void 0:n.split(";"))||[]).map((e=>e.trim()))}),[e]);return N.createElement(M.Z,{mt:1,display:"flex",flexDirection:"column",flex:"1 1 auto",height:"100%",minHeight:0},N.createElement(Fu.mQ,{size:"small"},N.createElement(Fu.td,null,N.createElement(Fu.OK,{value:"body",label:"Body"}),N.createElement(Fu.OK,{value:"headers",label:"Headers"})),N.createElement(ip,{value:"body"},N.createElement(np,{bodyType:rp(t[0]),bodyText:(null===e||void 0===e?void 0:e.body)||""})),N.createElement(ip,{value:"headers"},N.createElement(na.p,null,N.createElement(ap,{headers:(null===e||void 0===e?void 0:e.headers)||{}})))))};var lp=n(28914);const sp=()=>{const e=(0,Li.Z)(),{currentlyViewingRequestResponse:t,currentlyViewingRequestTimings:n}=ym(),a=(0,N.useMemo)((()=>{if(null!==t&&void 0!==t&&t.statusCode){const n=null===t||void 0===t?void 0:t.statusCode;if(n>=200&&n<300)return e.palette.success.main;if(n>=300&&n<400)return e.palette.info.main;if(n>=400&&n<500)return e.palette.warning.main;if(n>=500&&n<600)return e.palette.error.main}return e.palette.text.primary}),[e.palette,t]),i=(0,N.useMemo)((()=>{if(null!==t&&void 0!==t&&t.statusCode){const e=t.statusCode;return`${e} ${(0,lp.BV)(e)}`}return""}),[t]),r=(0,N.useCallback)(((e,t)=>{const n=new Date(e);return new Date(t).getTime()-n.getTime()}),[]),o=(0,N.useMemo)((()=>(null===n||void 0===n?void 0:n.finishedAt)&&(null===n||void 0===n?void 0:n.startedAt)),[n]),l=(0,N.useMemo)((()=>{if(o){const e=r(n.startedAt,n.finishedAt);return e>1e3?`${(e/1e3).toFixed(2)} s`:`${e} ms`}return""}),[n,o,r]);return N.createElement(Zi.ZP,{container:!0,spacing:2,sx:{paddingTop:1.5}},N.createElement(Zi.ZP,{item:!0,xs:8},N.createElement(Ue.Z,{variant:"h6",color:"textPrimary",sx:{fontWeight:500,fontSize:14}},"Response")),N.createElement(Zi.ZP,{item:!0,xs:4,textAlign:"right"},o&&N.createElement(N.Fragment,null,N.createElement(Ue.Z,{variant:"body2",color:a,component:"span"},i),N.createElement(Ue.Z,{variant:"body2",color:"textSecondary",component:"span",sx:{marginLeft:2}},l))))};function cp({onClick:e,disabled:t,color:n,title:a,children:i}){return N.createElement($e.Z,{title:a,arrow:!0},N.createElement(He.Z,{disabled:t,onClick:e,color:n,variant:"outlined",size:"small",sx:{textTransform:"none"}},i))}function dp(){var e,t;const n=(0,oe.I0)(),a=(0,oe.v9)((e=>e.padSettings.serviceStatus)),{projectTemplate:i}=(0,fe.J$)(),r=(0,N.useCallback)((()=>{n({type:"project/restartMainProcess"})}),[n]);return N.createElement(M.Z,{display:"flex",flexDirection:"row",alignItems:"center",gap:1},N.createElement(cp,{onClick:r,disabled:["restarting","starting"].includes(a),title:"RunCommand"!==(null===i||void 0===i||null===(e=i.settings)||void 0===e?void 0:e.executionType)?"Restart server":"",color:"inherit"},"RunCommand"!==(null===i||void 0===i||null===(t=i.settings)||void 0===t?void 0:t.executionType)?"Restart":"Restart Shell"))}var up=n(13973),mp=n(26602),pp=n(72456),gp=n(82544);const hp=(0,wn.Z)((e=>{var t;return{container:{border:0,flexGrow:1,position:"relative",background:null===(t=e.palette.programOutput)||void 0===t?void 0:t.iFrame.background,color:"#363739",display:"flex",alignItems:"center",justifyContent:"center"},content:{display:"block",textAlign:"center"},spinnerWrap:{position:"relative",height:"50px"}}})),fp=({spinner:e=!1,message:t=null})=>{const n=hp();return N.createElement("div",{className:n.container},N.createElement("div",{className:n.content},e&&N.createElement("div",{className:n.spinnerWrap},N.createElement(gp.Z,null)),null!=t&&N.createElement("div",{dangerouslySetInnerHTML:{__html:t}})))};var vp=n(83649),bp=n(6135);const yp=({url:e,onSubmit:t,onReset:n})=>{const[a,i]=(0,N.useState)(e),r=(0,N.useRef)(!1),o=(0,N.useRef)(e),l=(0,N.useRef)();(0,N.useEffect)((()=>{const t=o.current;o.current=e,i((n=>n!==t&&r.current?n:e))}),[e]);const s=(0,N.useCallback)((()=>{r.current=!0}),[]),c=(0,N.useCallback)((()=>{r.current=!1}),[]),d=(0,N.useCallback)((e=>{var n;e.preventDefault();const a=new FormData(e.currentTarget).get("url");t(a),null===(n=l.current)||void 0===n||n.blur()}),[t]),u=(0,N.useCallback)((e=>{var t;"Escape"===e.key&&(null===(t=l.current)||void 0===t||t.blur(),i(o.current))}),[]);return N.createElement(M.Z,{component:"form",flex:"1 1",onSubmit:d},N.createElement(bp.Z,{inputRef:l,name:"url",error:null==a,value:null!==a&&void 0!==a?a:"",placeholder:null==a?"Cannot access external URL, reset the URL with the button on right":"You can reset the URL with the button on the right",onChange:e=>i(e.target.value),fullWidth:!0,onFocus:s,onBlur:c,onKeyDown:u,size:"small",inputProps:{"aria-label":"Iframe URL",style:{paddingTop:"8px",paddingBottom:"8px"}},endAdornment:N.createElement(Jt.Z,{onClick:n,title:"Reset URL",style:{padding:6}},N.createElement(vp.Z,null))}))},Ep=(0,wn.Z)((e=>{var t;return{container:{display:"flex",flexDirection:"column",flex:"1 1",height:"100%"},content:{border:0,flexGrow:1,background:null===(t=e.palette.editor)||void 0===t?void 0:t.sidebar.background},button:{margin:"0 2px"}}})),wp=()=>{const e=Ep(),t=(0,oe.v9)((e=>e.padSettings.serviceStatus)),[n,a]=(0,N.useState)(!1),{currentUrl:i,iframeSrc:r,iframeRef:o,clearLogs:l,reload:s,navigateBack:c,navigateForward:d,setLocation:u,resetLocation:m}=Bu(),p=(0,N.useCallback)((()=>{l(),s()}),[l,s]),g=(0,N.useCallback)((()=>{a(!0)}),[]),h="ready"===t;(0,N.useEffect)((()=>{h&&a(!1)}),[h,l]);const f=(0,N.useMemo)((()=>{switch(t){case"ready":return n?null:{message:"Loading page...",spinner:!0};case"starting":case"unknown":return{message:"Starting web server...",spinner:!0};case"stopped":return{message:"Server has stopped running.<br/>Click the server Restart button below to relaunch it."};case"none":return{message:"Click the server Restart button to get started."};default:return{}}}),[n,t]);return N.createElement("div",{className:e.container},N.createElement(M.Z,{display:"flex",alignItems:"center",marginBottom:"4px"},N.createElement(M.Z,{margin:"0 2px",flex:"0 0 auto"},N.createElement(Jt.Z,{size:"small",onClick:c,className:e.button,title:"Back"},N.createElement(up.Z,null)),N.createElement(Jt.Z,{size:"small",onClick:d,className:e.button,title:"Forward"},N.createElement(mp.Z,null)),N.createElement(Jt.Z,{size:"small",onClick:p,className:e.button,title:"Reload"},N.createElement(pp.Z,null))),N.createElement(yp,{url:i,onSubmit:u,onReset:m}),N.createElement(M.Z,{margin:"0 2px",flex:"0 0 auto"},N.createElement(Jt.Z,{target:"_blank",disabled:null==i,href:null!==i&&void 0!==i?i:origin,size:"small",title:"Open in new tab",onClick:()=>(0,Mn.Z)(ln.j.ProjectMiniBrowserOpenNewWindow)},N.createElement(ka.Z,null)))),h&&N.createElement("iframe",{className:e.content,ref:o,src:r,onLoad:g,hidden:!n,allow:"accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking",sandbox:"allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts allow-downloads allow-pointer-lock"}),null!=f&&N.createElement(fp,f))};var kp=n(12617);const Sp=(0,Qt.ZP)(na.p,{target:"ennjqri0"})({name:"1d17mjw",styles:"width:100%;height:100%;margin-top:4px"}),Cp=({id:e,xtermOptions:t})=>{const n=(0,oe.I0)(),a=(0,N.useRef)(null),i=(0,N.useRef)(),r=(0,oe.v9)((e=>e.editorSettings.fontSize)),o=(0,oe.v9)((e=>e.editorSettings.darkColorScheme));return(0,N.useEffect)((()=>{const r=new Hu.Terminal({cursorBlink:!0,fontFamily:"'Roboto Mono', Menlo, 'Ubuntu Mono', Monaco, Consolas, 'source-code-pro', monospace",lineHeight:1,tabStopWidth:4,rendererType:"dom",screenReaderMode:!0,...t}),o=new kp.FitAddon;r.loadAddon(o),i.current=r,n({type:"term_created",term:r,id:e}),n({type:"project/catchupTerm",id:e});const l=new ResizeObserver((([{contentRect:e}])=>{if(e.width>0&&e.height>0){null==r.element&&r.open(a.current);const e=o.proposeDimensions();if(null!=e){const{rows:t,cols:n}=e;r.resize(Math.max(n,90),t)}}}));return l.observe(a.current),()=>{i.current=void 0,l.disconnect(),r.dispose(),n({type:"term_destroyed",id:e})}}),[n,e,t]),(0,N.useEffect)((()=>{var e;null===(e=i.current)||void 0===e||e.setOption("fontSize",r)}),[r]),(0,N.useEffect)((()=>{var e;null===(e=i.current)||void 0===e||e.setOption("theme",Gu[o?"dark":"light"])}),[o]),N.createElement(Sp,{ref:a})};const xp=(0,wn.Z)({container:{position:"absolute",top:53,bottom:0,left:0,right:0,display:"flex",flexDirection:"column"},hidden:{display:"none"},tabsContent:{flex:"1 1",minHeight:0},tabContent:{height:"100%"},tabContentHidden:{display:"none"},commandOutput:{top:"-10px"}}),_p=(0,Qt.ZP)(Fu.x4,{target:"e6djrr31"})({name:"1qvekf5",styles:"flex:1;min-height:0"}),Tp=(0,Qt.ZP)(na.p,{target:"e6djrr30"})((({theme:e})=>({display:"flex",flexDirection:"column",flex:"1 1 auto",padding:e.spacing(1.25),boxSizing:"border-box"})),""),Ip=({hidden:e})=>{var t,n,a;const i=xp(),r=(0,oe.I0)(),{slug:o,isPlayback:l}=(0,ue.nT)("slug","isPlayback"),{environment:s,projectTemplate:c}=(0,fe.J$)(),d="RunCommand"===(null===c||void 0===c||null===(t=c.settings)||void 0===t?void 0:t.executionType),{activeTab:u,unseenContent:m,visibleTabs:p}=(0,oe.v9)((e=>e.projectTabs)),{activeTab:g}=(0,oe.v9)((e=>e.tabs)),h="requestClient"===g,f=(0,N.useCallback)((e=>{r((0,tm.KY)(e)),(0,Mn.Z)(ln.j.ProjectOutputTabClicked,{target:e})}),[r]),v=(0,N.useMemo)((()=>{var e,t;return t=null===c||void 0===c||null===(e=c.settings)||void 0===e?void 0:e.executionType,{[tm.Z2.MainProcess]:"RunCommand"===t?"Shell":"Server",[tm.Z2.Shell]:"Shell",[tm.Z2.Console]:"Console",[tm.Z2.RequestHistory]:"Request History"}}),[null===c||void 0===c||null===(n=c.settings)||void 0===n?void 0:n.executionType]),[b,y]=(0,N.useMemo)((()=>[[p[tm.Z2.MainProcess]&&N.createElement(Fu.OK,{value:tm.Z2.MainProcess,label:v[tm.Z2.MainProcess],cta:m[tm.Z2.MainProcess],key:"tab-main-process",onClick:()=>f(tm.Z2.MainProcess)}),p[tm.Z2.Shell]&&!l&&N.createElement(Fu.OK,{value:tm.Z2.Shell,label:v[tm.Z2.Shell],cta:m[tm.Z2.Shell],key:"tab-shell",onClick:()=>f(tm.Z2.Shell)}),p[tm.Z2.Console]&&N.createElement(Fu.OK,{value:tm.Z2.Console,label:v[tm.Z2.Console],cta:m[tm.Z2.Console],key:"tab-console",onClick:()=>f(tm.Z2.Console)}),p[tm.Z2.RequestHistory]&&N.createElement(Fu.OK,{value:tm.Z2.RequestHistory,label:v[tm.Z2.RequestHistory],cta:m[tm.Z2.RequestHistory],key:"tab-api",onClick:()=>f(tm.Z2.RequestHistory)})],[p[tm.Z2.MainProcess]&&N.createElement(_p,{unmountOnHidden:!1,value:tm.Z2.MainProcess,key:"panel-main-process"},N.createElement(Cp,{id:"MAIN_PROCESS"})),p[tm.Z2.Shell]&&!l&&N.createElement(_p,{unmountOnHidden:!1,value:tm.Z2.Shell,key:"panel-shell"},N.createElement(Cp,{id:"DEFAULT_SHELL"})),p[tm.Z2.Console]&&N.createElement(_p,{unmountOnHidden:!1,value:tm.Z2.Console,key:"panel-console"},N.createElement(na.p,null,N.createElement($u,null))),p[tm.Z2.RequestHistory]&&N.createElement(_p,{unmountOnHidden:!1,value:tm.Z2.RequestHistory,key:"panel-api"},N.createElement(na.p,null,N.createElement(Sm,null)))]]),[p,v,m,l,f]);return null==s||null!=s.projectTemplateSlug&&null==c?null:N.createElement(pm,null,N.createElement(bm,null,N.createElement(Rm,null,N.createElement(qu,{padSlug:o},N.createElement("div",{className:ke()(i.container,{[i.hidden]:e})},N.createElement(Lu,{orientation:"y"},N.createElement(Zu,{id:"projectoutput-iframe",minSize:60},N.createElement(M.Z,{p:"10px",height:"100%",boxSizing:"border-box"},d?N.createElement(em,{hidden:e,className:i.commandOutput,key:null===s||void 0===s?void 0:s.id}):h?N.createElement(Xm,null):N.createElement(wp,null))),h?N.createElement(Zu,{id:"request-client-response",component:Tp,minSize:60},N.createElement(sp,null),N.createElement(op,null)):null,b.length>0?N.createElement(Zu,{id:"projectoutput-console",initialSizePct:null!==c&&void 0!==c&&null!==(a=c.slug)&&void 0!==a&&a.startsWith("jupyter")?20:40,minSize:70},N.createElement(M.Z,{p:"10px",height:"100%",boxSizing:"border-box",display:"flex",flexDirection:"column",minHeight:0},N.createElement(wu.c,{value:{size:"small",value:u}},N.createElement(M.Z,{display:"flex",alignItems:"flex-start",justifyContent:"space-between"},N.createElement(Fu.td,{scrollButtons:"auto",variant:"scrollable",sx:{minHeight:"26px"}},b),N.createElement(dp,null)),y))):null))))))};var Pp=n(75058),Zp=n(74721);class Op extends N.Component{_getTooltipText(){return ge.Z.isSandbox?`\n        <div>\n          <div class="SandboxTips-content">\n            <p><b>Focus Time</b></p>\n            An optional feature you may provide candidates.\n            The feature provides a maximum of 5 minutes of uninterrupted \u201cquiet\u201d time for a candidate.\n            During this time, interviewer\u2019s viewing will be obscured for privacy.\n          </div>\n          <div class="SandboxTips-lock">\n            <img src=${Qn} class="LockIcon" alt="Lock Icon" />\n            <i>Available with free account</i>\n          </div>\n        </div>\n        `:ge.Z.isOwner?'Focus Time lets you "pause" the interview while the candidate collects their thoughts.':"Improve your performance by collecting your thoughts for 5 minutes, without your interviewer watching."}render(){const{darkBg:e,focusTimeStartedAt:t}=this.props,n=void 0===t||!!t;return n?null:N.createElement(Te,{className:"FocusTime-Button",darkBg:e,disabled:n,ref:e=>this._el=e,tooltip:{placement:"bottom",trigger:"hover",html:!0,title:this._getTooltipText(),template:`<div class="tooltip ${ge.Z.isSandbox?"SandboxTips SandboxTips-large":"FocusTime-tooltip"}" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>`},extraProps:ge.Z.isSandbox?{}:{"data-toggle":"modal","data-target":"#focus-time-modal"},type:n?"primary":"info"},N.createElement("span",{className:"FocusTime-Button-text"},"Focus Time"),N.createElement(Zp.Z,{className:"FocusTime-Button-icon"}))}}const Mp={onClick(){return{type:"focus_time_intro_toggled",_analytics:{name:"Focus Time Intro Toggled"}}}};var Dp=(0,oe.$j)((function(e){const{focusTimeStartedAt:t}=e.padSettings,{darkColorScheme:n}=e.editorSettings;return{darkBg:n,focusTimeStartedAt:t}}),Mp)(Op);const Lp=({language:e})=>{const{setLanguage:t}=(0,be.R)(),n=(0,N.useCallback)((()=>{t(window.CoderPad.LANGUAGES[e]),(0,Mn.Z)("Language Info Clicked",{language:e,from:"header"})}),[e,t]);return N.createElement("button",{className:"btn btn-inverse LanguageSelector-infoButton",onClick:n},"Info")},Fp=({language:e})=>{const{setLanguage:t}=(0,be.R)(),n=(0,N.useCallback)((()=>{t(window.CoderPad.LANGUAGES[e]),(0,Mn.Z)("Language Info Clicked",{language:e,from:"list"})}),[e,t]);return N.createElement("a",{href:"#",onClick:n},"Info")};function Ap(e,t,n){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:String(a))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Rp={languagesExpanded:!1,packagesExpanded:!1};class Np extends N.Component{constructor(e){super(e),Ap(this,"handleSwitchToLanguageClick",(e=>{this.resetState();const t=e.target.dataset.language;t&&t!==this.props.language&&this.props.onLanguageChange(t,this.props.userId,this.props.language)})),Ap(this,"handlePackageClick",(e=>{this.resetState();const{language:t,packageName:n,databaseLanguage:a}=e.target.dataset;this.props.onPackageChange({language:t,packageName:n,databaseLanguage:a})})),Ap(this,"handleLanguageDropdownToggle",(e=>{this.setState((({languagesExpanded:e,packagesExpanded:t})=>({languagesExpanded:!e,packagesExpanded:!1}))),e.preventDefault()})),Ap(this,"handlePackageDropdownToggle",(e=>{this.setState((({languagesExpanded:e,packagesExpanded:t})=>({languagesExpanded:!1,packagesExpanded:!t}))),e.preventDefault()})),this.state=Rp}resetState(){this.setState(Rp)}render(){const{invisible:e}=ge.Z,{execEnabled:t,language:n,languagesAvailable:a}=this.props,{languagesExpanded:i,packagesExpanded:r}=this.state,o=window.CoderPad.LANGUAGES[n].packages||[],l=Object.keys(o).length,s=Object.keys(a).length;return N.createElement("div",{className:ke()({LanguageSelector:!0}),ref:e=>this._root=e},N.createElement(Lp,{language:n}),!e&&t&&l>0&&N.createElement(N.Fragment,null,N.createElement("button",{className:"btn btn-inverse LanguageSelector-packageButton",onClick:this.handlePackageDropdownToggle},"Packages"),N.createElement("span",{className:ke()({open:r})},N.createElement("ul",{className:"dropdown-menu dropdown-menu-right dropdown-inverse pull-right LanguageSelector-packageMenu LanguageSelector-dropdownMenu LanguageSelector-dropdownMenu--small","aria-label":"Language Packages","aria-expanded":r,ref:e=>this._packageMenu=e},c().sortBy(Object.values(o),(e=>e.display)).map((({display:e,name:t,database:a})=>N.createElement("li",{className:"LanguageSelector-packageName",key:t,"data-language":n,"data-package-name":t,"data-database-language":a,onClick:this.handlePackageClick},e)))))),N.createElement("button",{className:ke()("btn","btn-inverse","LanguageSelector-dropdownButton",{disabled:e}),"aria-haspopup":"true","aria-expanded":!!i,onClick:this.handleLanguageDropdownToggle},N.createElement(Fi.Z,{language:window.CoderPad.LANGUAGES[n].name}),N.createElement("span",{id:"chosen-language"},window.CoderPad.LANGUAGES[n].display),"\xa0",!e&&N.createElement("span",{className:"caret LanguageSelector-dropdownButtonCaret"})),N.createElement("span",{className:"dropdown-arrow dropdown-arrow-inverse"}),!e&&N.createElement("span",{className:ke()({open:i})},N.createElement("ul",{className:ke()({"dropdown-menu":!0,"dropdown-inverse":!0,"pull-right":!0,"LanguageSelector-dropdownMenu":!0,"LanguageSelector-languageMenu":!0,"LanguageSelector-languageMenu--small":s<10}),"aria-label":"Language","aria-expanded":i,ref:e=>this._menu=e},c().sortBy(Object.values(a),(e=>e.display)).map((({display:e,name:t})=>N.createElement("li",{className:"LanguageSelector-languageName",key:t,tabIndex:"0","data-language":t,onClick:this.handleSwitchToLanguageClick,onKeyUp:e=>{"Enter"==e.key&&this.handleSwitchToLanguageClick(e)}},N.createElement(Fp,{language:t}),N.createElement("div",{className:"icon-container"},N.createElement(Fi.Z,{language:t})),e))))))}}const jp=(0,oe.$j)((function(e){const t=Object.fromEntries(Object.entries((0,Ve.aB)(e)).filter((([e,t])=>"gsheets"!==e)));return{userId:e.userState.userId,execEnabled:e.padSettings.execEnabled,languagesAvailable:t}}))(Np);var qp=jp;const Bp=N.lazy((()=>Promise.resolve().then(n.bind(n,27962))));function zp({files:e}){return N.createElement(N.Suspense,{fallback:null},N.createElement(Bp,null))}var $p=function(){const e=(0,oe.v9)((e=>"html"===e.padSettings.language?c().omit(e.files,["_language","0_global"]):{}));return N.createElement(zp,{files:e})},Hp=n(54952),Up=n(36412),Qp=n(45111),Vp=n(41796),Wp=n(96514),Gp=n(83975);function Yp(){return Yp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Yp.apply(this,arguments)}const Kp=Ec.F4`
    0% {
        margin: 0;
        max-width: 0;
        opacity: 0;
    }
    50% {
        margin: 0;
        max-width: 0;
        opacity: 0;
    }
    80% {
        max-width: 200px;
        opacity: 0;
    }
`,Jp=(0,Qt.ZP)(He.Z,{target:"e5vbs365"})((({theme:e})=>({":disabled":{backgroundColor:(0,Vp.Fq)(e.palette.success.main,.4)}})),""),Xp=(0,Qt.ZP)(Jp,{target:"e5vbs364"})((({theme:e})=>({textTransform:"none",overflow:"hidden",minWidth:"91px",width:"100%","& .glyph":{width:"1em"},"& .fui-gear":{animation:`2s ${lu.O2} infinite linear`}})),""),eg=(0,Qt.ZP)("span",{shouldForwardProp:e=>"starting"!==e,target:"e5vbs363"})((({starting:e})=>({cursor:""+(e?"wait":"inherit")})),""),tg=(0,Qt.ZP)("div",{shouldForwardProp:e=>"running"!==e&&"theme"!==e,target:"e5vbs362"})((({theme:e,running:t})=>({width:"300%",height:"100%",background:`linear-gradient(90deg, ${e.palette.error.main} 0 45%, ${e.palette.success.main} 55%)`,top:0,position:"absolute",left:t?"0%":"-200%",transitionProperty:t?"left":"inherit",opacity:t?"inherit":0,transitionDuration:"1s"})),""),ng=(0,Qt.ZP)("div",{target:"e5vbs361"})({name:"ob7mfk",styles:"z-index:2;display:flex;justify-content:center;align-items:center;width:100%;height:100%"}),ag=(0,Qt.ZP)("span",{shouldForwardProp:e=>"starting"!==e,target:"e5vbs360"})((({starting:e})=>({marginRight:"1em",animation:e?Kp:"inherit"})),"");function ig(e){var t;const{isBusy:n,disabled:a=!1,actions:i,tooltip:r}=e,[o,l]=(0,N.useState)(!1),[s,c]=(0,N.useState)(0),d=i[s]?i[s]:i[0],u=1e3,m=(0,N.useCallback)((e=>{a||o||(e.perform(),l(!0),setTimeout((()=>{l(!1)}),u))}),[a,o]),p=(0,N.useCallback)((e=>{c(e),m(i[e]),v(!1)}),[m,i]),g=(0,N.useCallback)((e=>{h.current&&h.current.contains(e.target)||v(!1)}),[]),h=(0,N.useRef)(null),[f,v]=(0,N.useState)(!1);return N.createElement(eg,{starting:o},N.createElement(Hp.Z,{theme:"coderPad"},N.createElement($e.Z,{title:r},N.createElement(Ad.Z,{variant:"contained",ref:h,disabled:a,color:n?"error":"success"},N.createElement(Xp,{onClick:()=>m(d)},N.createElement(tg,{theme:Up.K,running:n,style:{animationDuration:"1s"},"aria-hidden":!0}),N.createElement(ng,null,N.createElement(ag,{starting:!0,style:{animationDuration:"1s"}},n&&null!==(t=d.busyLabel)&&void 0!==t?t:d.label),N.createElement("div",{className:`fui-${a?"lock":n?"gear":"triangle-right-large"} glyph`,"aria-hidden":!0}))),i.length>1?N.createElement(Jp,{"aria-controls":f?"action-menu":void 0,"aria-expanded":f?"true":void 0,"aria-label":"select action","aria-haspopup":"menu",onClick:()=>v(!f)},N.createElement(Qp.Z,null)):null))),N.createElement(ai.Z,{sx:{zIndex:1},open:f,anchorEl:h.current,role:void 0,transition:!0,disablePortal:!0,placement:"bottom-end"},(({TransitionProps:e,placement:t})=>N.createElement(Wp.Z,Yp({},e,{style:{transformOrigin:"bottom"===t?"center top":"center bottom"}}),N.createElement(ii.Z,null,N.createElement(ta.d,{onClickAway:g},N.createElement(Gp.Z,{id:"action-menu",autoFocusItem:!0,sx:{minWidth:"134px"}},i.map(((e,t)=>N.createElement(hi.Z,{key:e.key,selected:e.label===d.label,onClick:e=>p(t)},e.label))))))))))}var rg=()=>{var e;const{language:t,execEnabled:n,projectTemplateSlug:a,running:i}=(0,oe.v9)((e=>{const{language:t,execEnabled:n,projectTemplateSlug:a}=e.padSettings;return{language:t,execEnabled:n,running:e.execution.running,projectTemplateSlug:a}})),r=(0,oe.I0)(),o=(0,ue.oB)("hasEnvironments"),{environment:l,files:s}=(0,fe.J$)(),c=(0,N.useCallback)(((e=!1)=>{r(o?{type:"run_clicked",payload:{environment:l,files:s,selectionOnly:e},meta:{isEnvironment:!0}}:{type:"run_clicked",_analytics:{name:"Run Clicked"}})}),[r,l,s,o]),d=!n;(0,N.useEffect)((()=>{const e=e=>{(e.ctrlKey||e.metaKey)&&("Enter"!==e.key&&"s"!==e.key||(e.shiftKey?c(!0):c(),e.stopPropagation(),e.preventDefault()))};return window.addEventListener("keydown",e,{capture:!0}),()=>{window.removeEventListener("keydown",e,{capture:!0})}}),[c]);const u=(0,N.useMemo)((()=>[{key:"run",label:"Run",busyLabel:"Stop",perform:c}]),[c]);return null!=a||null!==(e=window.CoderPad.LANGUAGES[t])&&void 0!==e&&e.execution&&"markdown"!==t?N.createElement($e.Z,{title:d?"The interviewer has disabled execution.":N.createElement(N.Fragment,null,"Shortcut: ",lu.zX," + enter to run code"),arrow:!0},N.createElement("span",null,N.createElement(ig,{disabled:d,isBusy:i,actions:u}))):null},og=n(19755);function lg(e,t,n){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:String(a))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class sg extends N.PureComponent{constructor(e){super(e),lg(this,"handleModalOpen",(()=>{og("#workspace-container").attr("aria-hidden",!0)})),lg(this,"handleModalClose",(()=>{og("#workspace-container").attr("aria-hidden",!1)})),lg(this,"handleQuestionsButtonClick",(()=>{og("#questions-modal").modal("toggle"),this._questionsClicked||(this._questionsClicked=!0,(0,Mn.Z)("Questions Modal Opened"))})),this.state={shouldCollapseActions:!1}}componentDidMount(){og("#questions-modal").on("hidden.bs.modal",this.handleModalClose),og("#questions-modal").on("shown.bs.modal",this.handleModalOpen)}componentWillUnmount(){og("#questions-modal").off("hidden.bs.modal",this.handleModalClose),og("#questions-modal").off("shown.bs.modal",this.handleModalOpen)}render(){const{focusTimeEnabled:e,focusTimeStartedAt:t,isSandboxFeatureShowcase:n}=this.props,a=n||!ge.Z.isSandbox&&ge.Z.focusTimeSupported&&!ge.Z.takeHome&&(!e||ge.Z.isOwner)&&!(void 0===t||t),i=!ge.Z.iioLayout&&!ge.Z.takeHome,r=a&&i?430:290;return N.createElement("div",{className:ke()({CodePane:!0,"CodePane--isFullWidth":!this.props.width,"CodePane--isSmall":this.state.shouldCollapseActions}),style:this.props.width&&{width:this.props.width}},N.createElement(ce.S,{extraTags:{locality:"CodePane"},fallback:e=>N.createElement(de.X,{error:e,message:"An unexpected error occurred in the editor. Please try refreshing the page to fix the problem."})},!ge.Z.isPlayback&&N.createElement("div",{className:ke()({"CodePane-header":!0,"CodePane-headerFocusTime":e&&!ge.Z.isOwner})},N.createElement("div",{className:"CodePane-header-actionGroup"},N.createElement(Wu,{ignoreHeight:!0,onResize:e=>this.setState({shouldCollapseActions:e<r})}),!ge.Z.invisible&&N.createElement(M.Z,{sx:{display:"inline-block",margin:"0 10px 6px 0",minWidth:"112px"}},N.createElement(rg,null)),N.createElement("div",{className:"CodePane-header-actionGroup-secondary"},i?N.createElement(Te,{onClick:this.props.handleOpenDrawingMode,className:"btn-inverse CodePane-drawButton",type:"regular",darkBg:this.props.darkColorScheme,tooltip:{trigger:"hover manual",placement:"bottom",title:"Open a collaborative drawing window."}},N.createElement("span",{className:"CodePane-drawButton-text"},"Drawing Mode"),N.createElement(Pp.Z,{className:"CodePane-drawButton-icon"})):null,a?N.createElement(Dp,{darkBg:this.props.darkColorScheme}):null)),e&&!ge.Z.isOwner&&N.createElement("div",{className:"CodePane-headerFocusTimeWrapper"},N.createElement(ks,{startedAt:t})),N.createElement("div",{className:"CodePane-header-configGroup"},ge.Z.questionsEnabled&&N.createElement(Te,{type:"regular",darkBg:this.props.darkColorScheme,onClick:this.handleQuestionsButtonClick,className:"CodePane-questionsButton"},this.props.takeHome||ge.Z.isSandbox&&ge.Z.question&&ge.Z.question.takeHome?"Challenges":"Questions"),N.createElement(qp,{language:this.props.language,onLanguageChange:this.props.onLanguageChange,onPackageChange:this.props.onPackageChange}))),N.createElement($p,null)))}}const cg={onLanguageChange(e,t,n){return{type:"pad_setting_changed",key:"language",value:e,previousValue:n,userId:t,_analytics:{name:"Language Changed",params:{to_language:e}}}},onPackageChange({language:e,packageName:t,databaseLanguage:n}){return{type:"package_changed",language:e,packageName:t,databaseLanguage:n,_analytics:{name:"Package Changed",params:{to_package:t}}}}};var dg=(0,oe.$j)((function(e){const{darkColorScheme:t}=e.editorSettings,{focusTimeEnabled:n,focusTimeStartedAt:a,language:i,title:r,takeHome:o,sandboxView:l}=e.padSettings;return{darkColorScheme:t,focusTimeEnabled:n,focusTimeStartedAt:a,language:i,title:r,takeHome:o,isSandboxFeatureShowcase:ge.Z.isSandbox&&!!l}}),cg)(sg),ug=n(27962),mg=n(91535),pg=n(79793),gg=n(64017),hg=n(48885);var fg=function(e){return e[e.ProductInfo=0]="ProductInfo",e[e.EscapeWithFeedback=1]="EscapeWithFeedback",e[e.FeedbackOnly=2]="FeedbackOnly",e[e.Submitted=3]="Submitted",e}(fg||{});const vg=(0,Qt.ZP)(Ue.Z,{target:"e1f59syw2"})({name:"x3brzu",styles:"color:#000"}),bg=({onClick:e})=>N.createElement(Jt.Z,{"aria-label":"close",onClick:e,sx:{color:"#000",position:"absolute",right:8,top:8}},N.createElement(Xn.Z,null)),yg=(0,Qt.ZP)(ul.Z,{target:"e1f59syw1"})((({theme:e})=>({"& .MuiDialog-paper":{backgroundColor:"#fff"}})),""),Eg=({text:e})=>N.createElement(ec.ZP,{alignItems:"flex-start"},N.createElement(hg.Z,{sx:{minWidth:"30px"}},N.createElement(mg.Z,{sx:{color:"#37C773",fontSize:"1rem"}})),N.createElement(vg,{variant:"subtitle1"},e)),wg=({text:e})=>N.createElement(ec.ZP,{alignItems:"flex-start",sx:{paddingTop:"2px",paddingBottom:"2px"}},N.createElement(hg.Z,{sx:{minWidth:"20px"}},N.createElement(mg.Z,{sx:{color:"#000",fontSize:"0.5rem"}})),N.createElement(vg,{variant:"subtitle1"},e)),kg=(0,Qt.ZP)(ia.Z,{target:"e1f59syw0"})({name:"167tpaj",styles:"margin-top:0.4rem;& .MuiInputBase-root{background-color:#fff;color:#000;&:hover{& .MuiOutlinedInput-notchedOutline{border-color:#000;}}}& .MuiOutlinedInput-notchedOutline{border-color:#000;&.Mui-focused{border-color:#000;}}& .MuiInputLabel-root{color:#000;&.Mui-focused{color:#000;}}"}),Sg=()=>{const e=(0,N.useRef)(null),[t,n]=(0,N.useState)(!1),[a,i]=(0,N.useState)(fg.ProductInfo),[r,o]=(0,N.useState)(""),{firebaseAuthorId:l,isOwner:s,slug:c}=(0,ue.nT)("firebaseAuthorId","isOwner","slug"),d=(0,un.i)(),{environment:u}=(0,fe.J$)(),m=(0,oe.I0)();(0,N.useEffect)((()=>{null===e.current&&s&&"1"!==R().get("environmentsAnnouncement")&&(n(!0),R().set("environmentsAnnouncement","1"))}),[s]);const p=(0,N.useCallback)((()=>{i(fg.ProductInfo),o(""),n(!0)}),[]),g=(0,N.useCallback)((async e=>{var t;(i(fg.Submitted),null!=(null===e||void 0===e?void 0:e.language))&&(0,cm.r)({type:"change-active-language",user:null!==(t=null===l||void 0===l?void 0:l.toString())&&void 0!==t?t:"unknown",data:{language:e.language,multifile:!1,initialLanguage:!1}});(await d(`/${c}/escape_environments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({environment:null===e||void 0===e?void 0:e.slug,feedback:r})})).ok?e||(m((0,fn.GZ)({message:"Thank you for submitting your feedback!",key:"feedback-submitted",variant:"success",autoDismissMs:5e3})),n(!1)):(i(fg.ProductInfo),n(!1),m((0,fn.GZ)({message:"There was an error reverting your pad to the classic UI.  Please try again, or contact support@coderpad.io if the problem persists.",key:"escape-environments-error",variant:"error",autoDismissMs:1e4})))}),[m,r,d,l,c]);return u?N.createElement(N.Fragment,null,N.createElement(He.Z,{variant:"text",sx:e=>({color:"dark"===e.palette.mode?"#F6C442":"#FF9900"}),startIcon:N.createElement(pg.Z,{sx:e=>({color:"dark"===e.palette.mode?"#F6C442":"#FF9900"})}),onClick:()=>p()},"Review New UI Options"),N.createElement(yg,{open:t},a===fg.ProductInfo?N.createElement(N.Fragment,null,N.createElement(ni.Z,null,"We've made some updates to the product.",N.createElement(bg,{onClick:()=>n(!1)})),N.createElement(ri.Z,null,N.createElement(vg,{variant:"subtitle1"},"You can now:",N.createElement(Xs.Z,null,N.createElement(Eg,{text:"Add questions, languages, or frameworks by clicking the + on the left to create new tabs."}),N.createElement(Eg,{text:["Use more realistic interview environments with multi-file support for ",N.createElement("b",{key:"supportedLangs"},"React, Angular, Vue, Svelte")," and ",N.createElement("b",{key:"supportedLangs2"},"HTML/CSS/JS.")]})),"Try our"," ",N.createElement("a",{href:"/sandbox",rel:"noreferrer",target:"_blank"},"sandbox")," ","or read the"," ",N.createElement("a",{href:"https://coderpad.io/resources/docs",rel:"noreferrer",target:"_blank"},"documentation")," ","to learn more about these new features."),s&&N.createElement(N.Fragment,null,N.createElement(vg,{variant:"h3",pt:2,pb:2},"Need the classic UI for this interview?"),N.createElement(M.Z,{display:"flex",sx:{justifyContent:"space-between"}},N.createElement(He.Z,{variant:"contained",color:"error",sx:{textTransform:"none",fontSize:"1rem"},onClick:()=>i(fg.EscapeWithFeedback)},"Next"),N.createElement(He.Z,{variant:"text",sx:{textTransform:"none",fontSize:"1rem"},onClick:()=>i(fg.FeedbackOnly)},"Send feedback only"))))):a===fg.EscapeWithFeedback?N.createElement(N.Fragment,null,N.createElement(ni.Z,null,N.createElement(M.Z,{display:"flex"},"Need to go back to the classic UI?"),N.createElement(bg,{onClick:()=>n(!1)})),N.createElement(ri.Z,null,N.createElement(kg,{label:"Please tell us why?",variant:"outlined",fullWidth:!0,multiline:!0,value:r,onChange:e=>o(e.target.value),rows:5}),N.createElement(vg,{variant:"subtitle1"},N.createElement(M.Z,{display:"flex",mt:1},N.createElement(gg.Z,{htmlColor:"#F6C442",sx:{paddingRight:"0.5rem"}}),"Please Proceed with Caution:"),N.createElement(Xs.Z,null,N.createElement(wg,{text:"The pad will reload immediately for all participants, please give them a verbal heads up."}),N.createElement(wg,{text:"You will return to the active tab's language or the interviewer's default language."}),N.createElement(wg,{text:"All Multi-file and unselected tabs will be deleted."}),N.createElement(wg,{text:"Playback will not show work from any deleted tabs."}),N.createElement(wg,{text:"Frontend frameworks are not available in the Classic UI."})))),N.createElement(ml.Z,{sx:{justifyContent:"space-between"}},N.createElement(He.Z,{variant:"contained",color:"error",onClick:()=>g(u)},"Reload to Classic UI"),N.createElement(He.Z,{onClick:()=>g()},"Submit Feedback Only")),N.createElement(vg,{py:1,sx:{fontWeight:"bold",textAlign:"center"}},"As of November 30th, the UI updates will be permanent.")):a===fg.FeedbackOnly?N.createElement(N.Fragment,null,N.createElement(ni.Z,null,N.createElement(M.Z,{display:"flex",sx:{paddingRight:"2rem"}},"How are the UI updates impacting your interviews?"),N.createElement(bg,{onClick:()=>n(!1)})),N.createElement(ri.Z,null,N.createElement(kg,{label:"Write Feedback",variant:"outlined",fullWidth:!0,multiline:!0,value:r,onChange:e=>o(e.target.value),rows:5})),N.createElement(ml.Z,null,N.createElement(He.Z,{onClick:()=>g()},"Send Feedback"))):a===fg.Submitted?N.createElement(ri.Z,null,N.createElement(M.Z,{display:"flex"},N.createElement(on.Z,{color:"secondary",size:24}),N.createElement(vg,{variant:"subtitle1",pl:1},"Switching off the new features..."))):null)):null};function Cg(){const{environment:e}=(0,fe.J$)(),[t,n]=(0,N.useState)("run"),a=(0,oe.I0)(),i=(0,oe.v9)((e=>e.project.runTargets||{})),r=(0,N.useCallback)((t=>{a({type:"run_clicked",payload:{environment:e,runCommand:t},meta:{isEnvironment:!0}})}),[a,e]),o=(0,N.useCallback)((e=>{r(e),n(e)}),[r]),{running:l}=(0,oe.v9)((e=>{const{language:t,execEnabled:n,projectTemplateSlug:a}=e.padSettings;return{language:t,execEnabled:n,running:e.execution.running,projectTemplateSlug:a}}));(0,N.useEffect)((()=>{const e=e=>{(e.ctrlKey||e.metaKey)&&("Enter"!==e.key&&"s"!==e.key||(o(t),e.stopPropagation(),e.preventDefault()))};return window.addEventListener("keydown",e,{capture:!0}),()=>{window.removeEventListener("keydown",e,{capture:!0})}}),[r,t,o]);const s=(0,N.useMemo)((()=>0===Object.keys(i).length),[i]),c=(0,N.useMemo)((()=>{if(s)return[{key:"run",label:"Run",busyLabel:"Stop",perform:r}];return Object.entries(i).map((([e,t])=>({key:e,label:`Run ${t.label||e}`,busyLabel:`Stop ${t.label||e}`,perform:()=>r(e)})))}),[r,i,s]);return c.length?N.createElement(ig,{isBusy:l,actions:c,disabled:s,tooltip:s?"You must have at least one target specified in your .cpad file.":void 0}):null}var xg=()=>{const{saving:e,serviceReady:t,autoSave:n}=(0,oe.v9)((e=>{const t=e.project.saving,n=e.project.autoSave;return{saving:t,serviceStarting:"starting"===e.padSettings.serviceStatus,serviceReady:"ready"===e.padSettings.serviceStatus,autoSave:n}})),a=(0,oe.I0)(),i=(0,N.useCallback)((()=>{a({type:"saveFiles"})}),[a]);(0,N.useEffect)((()=>{const e=e=>{(e.ctrlKey||e.metaKey)&&("s"!==e.key&&"Enter"!==e.key||(i(),e.stopPropagation(),e.preventDefault()))};return window.addEventListener("keydown",e,{capture:!0}),()=>{window.removeEventListener("keydown",e,{capture:!0})}}),[i]);const r=(0,N.useMemo)((()=>[{key:"save",label:"Save",perform:i}]),[i]);return N.createElement($e.Z,{title:N.createElement(N.Fragment,null,"Shortcut: ",lu.zX," Enter or ",lu.zX," + S to save files"),arrow:!0},N.createElement("span",null,N.createElement(ig,{actions:r,isBusy:e,disabled:e||!t||n})))};const _g=(0,Qt.ZP)(ep.Z,{target:"e16aekmj0"})((({theme:e})=>({"& .MuiSwitch-input":{margin:0},"& .MuiSwitch-switchBase.Mui-checked":{color:e.palette.success.main,"&:hover":{backgroundColor:(0,Vp.Fq)(e.palette.success.main,e.palette.action.hoverOpacity)}},"& .MuiSwitch-switchBase.Mui-checked + .MuiSwitch-track":{backgroundColor:e.palette.success.main},"& .MuiSwitch-track":{backgroundColor:e.palette.grey[200]}})),"");function Tg(){const e=(0,oe.v9)((e=>e.project)),t=(0,oe.I0)(),n=(0,N.useCallback)(((e,n)=>t({type:"project/updateAutoSave",value:n})),[t]);return N.createElement(Vt.Z,{direction:"row",justifyContent:"center",alignItems:"center",spacing:1},N.createElement(xg,null),N.createElement(Hp.Z,{theme:"coderPad"},N.createElement(zr.Z,{sx:{margin:0},label:N.createElement(Ue.Z,{fontSize:"11px",lineHeight:"13px"},"Auto-save files"),control:N.createElement(_g,{size:"small",checked:e.autoSave,onChange:n})})))}function Ig(){const{environment:e,projectTemplate:t}=(0,fe.J$)();return(0,N.useMemo)((()=>{var n;return"RunCommand"===(null===t||void 0===t||null===(n=t.settings)||void 0===n?void 0:n.executionType)?N.createElement(Cg,null):null!==e&&void 0!==e&&e.projectTemplateSlug?N.createElement(Tg,null):N.createElement(rg,null)}),[t,e])}const Pg=(0,wn.Z)((()=>({header:{"& .FocusTime-Button":{marginLeft:0,display:"inline-flex",alignItems:"center","& svg":{height:"16px",width:"16px"},"& .FocusTime-Button-text":{marginRight:"6px"},"& .FocusTime-Button-icon":{padding:"2px 0"}},backgroundColor:({focusTimeEnabled:e,isOwner:t})=>e&&!t?"#e1f3e0":"inherit","& .FocusTime-headerFocusTimeInfo":{zIndex:1}},langVersion:{fontSize:"0.75rem",marginLeft:12,color:({focusTimeEnabled:e,isOwner:t})=>e&&!t?"#34495e":"inherit"}}))),Zg=()=>{const{activeLanguageSettings:e}=(0,iu.LG)(),{focusTimeEnabled:t,focusTimeStartedAt:n}=(0,oe.v9)((e=>e.padSettings)),{isExecPossible:a}=(0,ve.od)(),{isOwner:i,isSandbox:r}=(0,ue.nT)("focusTimeSupported","takeHome","isOwner","isSandbox"),o=Pg({focusTimeEnabled:t,isOwner:i}),l=(0,$.P$)();return N.createElement(M.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",p:1.5,ml:"50px",className:o.header},N.createElement(M.Z,{display:"flex",alignItems:"center",fontSize:"1.2rem"},a&&N.createElement(Ig,null),t&&!i&&N.createElement(M.Z,{display:"inline-flex",marginTop:"-2px"},N.createElement(ks,{startedAt:n})),N.createElement("div",{className:o.langVersion},null!==e&&void 0!==e&&e.version?`Running ${null===e||void 0===e?void 0:e.version}`:"")),l&&!r&&(!t||i)&&N.createElement(M.Z,{display:"flex",alignItems:"center"},N.createElement(Sg,null)))},Og=()=>{const e=(0,ue.oB)("isPlayback");return N.createElement(M.Z,{height:"100%",display:"flex",className:"EnvironmentEditor"},N.createElement(M.Z,{height:"100%",display:"flex",flexDirection:"column",flexGrow:1},!e&&N.createElement(Zg,null),N.createElement(M.Z,{sx:{paddingTop:e=>e.spacing(1),flexGrow:1}},N.createElement(ug.default,null))))};var Mg=n(2112);const Dg=()=>N.createElement(Mg.d,null);function Lg(e){const{darkColorScheme:t}=(0,oe.v9)((e=>e.editorSettings));return(0,N.useEffect)((()=>{window.dispatchEvent(new Event("resize"))}),[e.hidden]),ge.Z.drawingBoardId?N.createElement("div",{style:{height:"100%"},className:ke()("DrawingTab",{hidden:e.hidden})},N.createElement(wd.P,{drawingBoardId:ge.Z.drawingBoardId,darkColorScheme:t})):N.createElement("div",{className:ke()({hidden:e.hidden,DrawingTab:!0})},ge.Z.drawingImageUrl?N.createElement("img",{className:"Drawing-exportedImage",src:ge.Z.drawingImageUrl}):N.createElement("div",{className:"Drawing-waitMessage"},"The image is being processed and will be available soon. Please check back again shortly."))}var Fg=n(91813);const Ag={interviewNotesArePrivate:!0,loading:!0,authorIds:[],accessAllowed:!1,authors:[]},Rg=(0,N.createContext)(Ag),Ng=({children:e})=>{const[t,n]=(0,N.useState)(Ag.interviewNotesArePrivate),[a,i]=(0,N.useState)(Ag.loading),[r,o]=(0,N.useState)(Ag.authorIds),l=(0,oe.v9)(Ve.s8),c=!t||0===r.length||r.includes(l),d=(0,go.Z)();(0,N.useEffect)((()=>{const e=d.watch("notes/private",(e=>{n(!!e),i(!1)})),t=d.watch("notes/users",(e=>{const t=(0,s.pickBy)(e,((e,t)=>e.isAuthor));o(Object.keys(t))}));return()=>{d.off("notes/private",e),d.off("notes/users",t)}}),[]);const u=(0,N.useMemo)((()=>({firebaseIds:r})),[r]),{members:m}=(0,Fg.Rc)(u,{skip:!t||r.length<1});return N.createElement(Rg.Provider,{value:{interviewNotesArePrivate:t,loading:a,accessAllowed:c,authors:m}},e)};function jg(){const e=(0,N.useContext)(Rg);if(null==e)throw new Error("`useInterviewNotesContext` hook must be a descendant of a `InterviewNotesContextProvider`");return e}var qg=n(87441),Bg=n(49787),zg=n(16233),$g=n(72674);const Hg={lineNumbers:"off",glyphMargin:!1,lineDecorationsWidth:0,lineNumbersMinChars:0,scrollBeyondLastLine:!0,scrollbar:{vertical:"auto"}};const Ug=function(){const e="drawing_only"===ge.Z.uiType;return`${`# This is a placeholder for your Markdown-enabled interview notes\n\nThese notes are **private** and hidden from the candidate\nThey are saved permanently with the interview in this tab\n\n${e?"":"You can also embed code by copying it from the left pane, like so:"}\n\n`}${e?"":"\n```javascript\nfunction find(node, value) {\n  if (!node || node.value == value) return node;\n  return find(node.next, value);\n}\n```"}`}(),Qg={typescriptreact:"tsx",javascriptreact:"jsx"};const Vg=({hidden:e})=>{var t;const n=(0,oe.I0)(),{keymap:a}=(0,oe.v9)(Ve.Mg),i=(0,oe.v9)(Ve.s8),r=(0,N.useRef)(null),o=(0,N.useRef)(null);(0,N.useEffect)((()=>{var e;if(!r.current)return;const t=r.current;t.getContainerDomNode().setAttribute("data-testid","interview-notes-editor");const a=(0,go.Z)(),o=a.firepad(t.getModel(),"notes",{userId:i,userColor:void 0}),l=t.onDidFocusEditorWidget((()=>{t.hasWidgetFocus()&&a.set(`notes/users/${i}`,{isAuthor:!0})})),s=null===(e=t.getModel())||void 0===e?void 0:e.onDidChangeContent((()=>{n({type:"interviewer_notes_changed"})})),c=t.onDidPaste((({range:e,languageId:n})=>{if(null!=n&&"markdown"!==n){const i=t.getModel();if(!i)return;const r=function(e,t){const n=qg.hW.lex(e);let a=null,i=0;for(const o of n)if(i+=o.raw.length,i>t){a=o;break}var r;return null!=a&&"code"===a.type&&null!==(r=a.lang)&&void 0!==r?r:"markdown"}(i.getValue(),i.getOffsetAt(e.getStartPosition()));if("markdown"!=r)return;const o=i.getValueInRange(e);let l;var a;if(e.endLineNumber>e.startLineNumber)l=`\`\`\`${null!==(a=Qg[n])&&void 0!==a?a:n}\n${o.trim()}\n\`\`\``;else l=`\`${o.trim()}\``;t.executeEdits(null,[{range:e,text:l}],(e=>[Bg.Selection.fromPositions(e[0].range.getEndPosition())]))}}));return()=>{o.dispose(),l.dispose(),null===s||void 0===s||s.dispose(),c.dispose()}}),[n,i]);const[l,s]=(0,N.useState)(""),[c,d]=(0,N.useState)("");return(0,N.useEffect)((()=>{if(!r.current||!o.current)return;const e=()=>{Bg.editor.colorize(Ug,"markdown",{}).then((e=>{r.current&&o.current&&d(e)}))},t=$g.IO.get($g.XE).onDidColorThemeChange(e);return e(),()=>{t.dispose()}}),[o]),(0,N.useEffect)((()=>{if(!r.current||!o.current)return;const e=r.current,t=o.current;e.applyFontInfo(t);const n=e.onDidChangeConfiguration((()=>{e.applyFontInfo(t)}));return()=>{n.dispose()}}),[o]),N.createElement("div",{className:ke()({hidden:e}),style:{flex:1,height:"100%",position:"relative"}},N.createElement(nu.ZP,{programmingLanguage:"markdown",height:"100%",options:Hg,keyBindingsMode:null!==(t=zg.j[a])&&void 0!==t?t:"classic",onChange:s,ref:r}),N.createElement(M.Z,{sx:{visibility:0===l.length?"visible":"hidden",position:"absolute",top:0,left:e=>e.spacing(2),pointerEvents:"none",opacity:.7},ref:o,className:"Monaco-placeholder",dangerouslySetInnerHTML:{__html:c}}))};var Wg=n(81384);const Gg=()=>{const{authors:e}=jg(),t=e.map((e=>e.email)).join(", ");return N.createElement("div",{className:"InterviewNotesEditor-accessDenied"},N.createElement("div",{className:"InterviewNotesEditor-accessDeniedText"},N.createElement(Wg.Z,{className:"InterviewNotesEditor-accessDeniedIcon"}),N.createElement("p",null,"Only interviewers who added/edited the notes can see them.")),N.createElement("p",null,N.createElement("strong",null,"Need to see the notes?"),N.createElement("br",null),"Contact one of the following people to get access:",N.createElement("br",null),t))},Yg=()=>N.createElement("div",{className:"InterviewNotesEditor-disabled"},N.createElement("p",null,"Interviewer notes have been disabled by your organization. Please coordinate with your team to decide on an alternative platform for interviewer notes.")),Kg=ot.gql`
  mutation UpdateInterviewNotesPrivacySettingForPad(
    $input: UpdateInterviewNotesPrivacySettingForPadInput!
  ) {
    updateInterviewNotesPrivacySettingForPad(input: $input) {
      message
      errors {
        path
        message
      }
      pad {
        id
        notesPrivate
      }
    }
  }
`;const Jg=()=>{const{darkColorScheme:e}=(0,oe.v9)(Ve.Mg),{interviewNotesArePrivate:t,authors:n}=jg(),[a,i]=(0,N.useState)(!1),r=(0,ue.oB)("slug"),o=(0,oe.I0)(),{updateInterviewNotesPrivacySetting:l}=function(){var e,t;const[n,{data:a,error:i,loading:r}]=(0,O.useMutation)(Kg),o=null===a||void 0===a||null===(e=a.updateInterviewNotesPrivacySettingForPad)||void 0===e?void 0:e.message;let l=se.nn();return r?l=se.V_():i?l=se.vU(o||"There was an error updating the pad."):null!==a&&void 0!==a&&null!==(t=a.updateInterviewNotesPrivacySettingForPad)&&void 0!==t&&t.pad&&(l=se.Vp(o||"Your pad has been updated.")),{status:l,async updateInterviewNotesPrivacySetting(e){var t,a,i,r,o,l;const s=await n({variables:{input:{padInterviewNotesPrivacySettingAttributes:e}},context:{source:"usePadUpadteInterviewNotesPrivacy.ts"}}).catch((()=>null));return{pad:null===s||void 0===s||null===(t=s.data)||void 0===t||null===(a=t.updateInterviewNotesPrivacySettingForPad)||void 0===a?void 0:a.pad,message:null===s||void 0===s||null===(i=s.data)||void 0===i||null===(r=i.updateInterviewNotesPrivacySettingForPad)||void 0===r?void 0:r.message,errors:null===s||void 0===s||null===(o=s.data)||void 0===o||null===(l=o.updateInterviewNotesPrivacySettingForPad)||void 0===l?void 0:l.errors}}}}(),s=t?"Notes are visible only to interviewers":"Notes are visible to anyone in the company",c=e?"darkBg":"lightBg";return N.createElement("div",{className:"InterviewNotes-privacyControlBarHolder"},N.createElement(M.Z,{display:"flex",alignItems:"center",className:`InterviewNotes-privacyControlBar InterviewNotes-privacyControlBar--${c}`},N.createElement(ep.Z,{checked:!t,onChange:()=>{i(!0);const e=!t;(0,y.j)("Pad Interview Notes Privacy Toggled",{setToPrivate:e}),l({slug:r,private:e}).then((({pad:e,message:t,errors:n})=>{i(!1),(!e||n&&n.length>0)&&o((0,fn.GZ)({message:t||"There was a problem saving your changes. Please try again.",key:"update-interview-notes-privacy-error",variant:"error",autoDismissMs:5e3}))}))},disabled:a,size:"small",classes:{root:"InterviewNotes-privacyControlBarSwitch",switchBase:`InterviewNotes-privacyControlBarSwitchBase--${c}`},"data-testid":"notes-access-switch"}),N.createElement("div",{className:"InterviewNotes-privacyControlBarText"},s),t&&N.createElement($e.Z,{arrow:!0,placement:"bottom",classes:{tooltip:"InterviewNotes-privacyControlBarTooltip",arrow:"InterviewNotes-privacyControlBarTooltipArrow"},title:N.createElement(N.Fragment,null,"The notes are only visible to interviewers who added/edited them.",N.createElement("br",null),"Toggle the visiblity if anyone else needs to access them.",N.createElement("br",null),N.createElement("br",null),N.createElement("strong",null,"Who can see the notes?"),N.createElement("br",null),N.createElement("ul",null,n.map((e=>N.createElement("li",{key:e.id},e.email)))))},N.createElement(Js.Z,{className:"InterviewNotes-privacyControlBarInfoIcon"}))))},Xg=()=>N.createElement("div",{className:"InterviewNotesEditor-disabled"},N.createElement("p",null,"Loading notes...")),eh=({hidden:e})=>window.CoderPad.FLAGS.disableNotes?e?null:N.createElement(Yg,null):N.createElement(Ng,null,N.createElement(th,{hidden:e})),th=({hidden:e})=>{const{currentUser:t}=(0,Qe.x)(),{loading:n,accessAllowed:a,interviewNotesArePrivate:i}=jg();return null==t?null:null!==t&&void 0!==t&&t.organization&&(i||a)?N.createElement(N.Fragment,null,n?N.createElement(Xg,null):a?N.createElement(M.Z,{id:"notes-with-privacy-control-container",display:"flex",flexDirection:"column",height:"100%"},!e&&N.createElement(Jg,null),N.createElement(Vg,{hidden:e})):N.createElement(Gg,null)):N.createElement(Vg,{hidden:e})};class nh extends N.PureComponent{constructor(e){super(e)}render(){const{padOpenedAt:e,padStartedAt:t,takeHomeSubmittedAt:n,takeHome:a,report:i}=window.padConfig,r=i.question||{},o=(e||t)&&n?parseInt(n-(e||t)):0,l=i.testCaseRuns,s=c().sumBy(i.testCaseRuns,"passed"),d=i.testCaseRuns.length;return N.createElement("div",{className:ke()({hidden:this.props.hidden,PadReport:!0})},N.createElement("h4",{className:"PadReport-questionTitle PadReport-heading"},"Question: ",N.createElement("a",{href:"/questions/"+r.id},r.title)),a&&N.createElement("p",null,"Time elapsed: ",N.createElement("span",null,function(e){if(e){if(1===e)return"1 second";if(e<60)return`${e} seconds`;{const t=parseInt(e/60);return 1===t?"1 minute":t<180?`${t} minutes`:`${parseInt(t/60)} hours`}}return""}(o))),N.createElement("h4",{className:"PadReport-testsSummary PadReport-heading"},N.createElement("span",{className:"PadReport-testsPassedCount"},s," Test",1===s?"":"s"," Passed")," ","out of ",d," Total"),N.createElement("table",{className:"table"},N.createElement("thead",null,N.createElement("tr",null,N.createElement("th",null,"Pass"),N.createElement("th",null,"Visible"),N.createElement("th",null,"Arguments"),N.createElement("th",null,"Result"),N.createElement("th",null,"Expected"))),N.createElement("tbody",null,l&&l.map((e=>N.createElement("tr",{key:e.id,className:"PadReport-testDetail"},N.createElement("td",{className:"PadReport-testCasePassed--"+(e.passed?"pass":"fail")},e.passed?"\u2713":"\u2717"),N.createElement("td",null,e.visible?"\u2713":""),N.createElement("td",null,N.createElement("pre",null,"object"===typeof e.arguments?e.arguments.join(", "):e.arguments)),N.createElement("td",{className:"PadReport-testCaseResult--"+(e.passed?"pass":"fail")},N.createElement("pre",null,"object"===typeof e.result?JSON.stringify(e.result):e.result)),N.createElement("td",null,N.createElement("pre",null,e.expected_result))))))))}}var ah=n(1737),ih=n(98226),rh=n(39214);function oh(e,t,n){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:String(a))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class lh extends N.Component{constructor(e){super(e),oh(this,"handleDismissClick",(e=>{e.preventDefault(),this.props.onDismissErrors()})),oh(this,"handleExpandErrorClick",((e,t)=>{t.preventDefault(),this.setState((t=>({expandedErrors:new Set(t.expandedErrors).add(e)})))})),this.state={expandedErrors:new Set},this._list=N.createRef()}componentDidUpdate(e){if(0===this.props.errors.length&&this.state.expandedErrors.size>0)this.setState({expandedErrors:new Set});else if(this.props.errors.length>e.errors.length){this._list.current.scrollTo({top:999999,behavior:"smooth"})}}_renderError(e,t){const n=e.parsedStack,a=n&&1===n.length&&!n[0].functionName&&sh(n[0].fileName),i=this.state.expandedErrors.has(e.key)||n&&n.length<2;return N.createElement("li",{className:"HTMLErrorBox-error",key:"e"+t},N.createElement("span",{className:"HTMLErrorBox-name"},e.name),": ",N.createElement("span",{className:"HTMLErrorBox-message"},e.message),n&&!a&&N.createElement("ul",{className:"HTMLErrorBox-stack"},i?n.map(((e,t)=>this._renderErrorStackLine(e,t))):N.createElement(N.Fragment,null,this._renderErrorStackLine(n[0],0),N.createElement("li",{className:"HTMLErrorBox-stackLine",key:"showMore"},N.createElement("a",{className:"HTMLErrorBox-showMore",href:"#",onClick:this.handleExpandErrorClick.bind(this,e.key)},"Show more...")))))}_renderFileName(e,t){return t?N.createElement("span",{className:"HTMLErrorBox-filenameNative"},"[native code]"):sh(e)?N.createElement("span",{className:"HTMLErrorBox-filenamePad"},"[pad]"):e&&e.includes("://")?N.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:e,className:"HTMLErrorBox-filenameUrl"},N.createElement("span",{className:"HTMLErrorBox-filenameUrlDirname"},"..."),N.createElement("span",{className:"HTMLErrorBox-filenameUrlBasename"},e.substr(e.lastIndexOf("/")))):N.createElement("span",{className:"HTMLErrorBox-filename"},e)}_renderErrorStackLine(e,t){const n=!sh(e.fileName)&&null!=e.lineNumber;return N.createElement("li",{className:"HTMLErrorBox-stackLine",key:`sl${t}`},this._renderFileName(e.fileName,e.isNative),e.functionName&&N.createElement(N.Fragment,null," ","in ",N.createElement("span",{className:"HTMLErrorBox-functionName"},e.functionName)),n&&N.createElement(N.Fragment,null," ","at"," ",N.createElement("span",{className:"HTMLErrorBox-lineAndColumn"},e.lineNumber,null!=e.columnNumber&&`:${e.columnNumber}`)))}render(){const{errors:e}=this.props;return 0===e.length?null:N.createElement("div",{className:"HTMLErrorBox"},N.createElement("h3",{className:"HTMLErrorBox-header"},N.createElement("span",{className:"HTMLErrorBox-headerText"},"Errors"),N.createElement("a",{className:"HTMLErrorBox-dismiss",href:"#",onClick:this.handleDismissClick},"Dismiss")),N.createElement("ul",{className:"HTMLErrorBox-list",ref:this._list},e.map(((e,t)=>this._renderError(e,t)))))}}function sh(e){return e&&e.startsWith("about:srcdoc")}const ch=N.createContext({errors:[],processedHtml:"",timestamp:0}),dh=({children:e,...t})=>N.createElement(ch.Provider,{value:t},e),uh=()=>{const e=N.useRef(null),{timestamp:t,processedHtml:n,errors:a}=N.useContext(ch),i=(0,oe.I0)(),r=(0,N.useCallback)((()=>{i({type:"html_errors_cleared"})}),[i]);return(0,N.useEffect)((()=>{rh.srcDoc.set(e.current,null!=n&&""!=n?n:'<html><body style="color:#7f7f7f;background-color:rgba(29, 33, 38, 0)"><p>Click Run to render HTML.</p></body></html>',{force:!1})}),[n,t]),N.createElement("div",{className:"HTMLOutput"},N.createElement("iframe",{className:"HTMLOutput-content",ref:e,sandbox:"allow-same-origin allow-forms allow-modals allow-popups allow-scripts"}),N.createElement(lh,{errors:a,onDismissErrors:r}))},mh=({hidden:e})=>{const t=(0,oe.v9)((e=>e.execution.processedHtml)),n=(0,oe.v9)((e=>e.execution.processedHtmlTimestamp)),a=(0,oe.v9)((e=>e.execution.htmlErrors));return N.createElement(dh,{processedHtml:t,timestamp:n,errors:a},N.createElement("div",{className:ke()("MiniBrowser",{"MiniBrowser--hidden":e})},N.createElement(uh,null)))};const ph=257;function gh(e){return`<span class="${e.classes.join(" ")}">${e.innerHTML}</span>`}function hh(e){const t=new Hu.Terminal({cols:73,rows:1e3,tabStopWidth:4});return new Promise((function(n,a){t.write(e,(function(){n(function(e){const t=e._core.buffer,n=new t._nullCell.constructor,a=e.getOption("drawBoldTextInBrightColors"),i=function(e){for(let t=e.lines.length-1;t>=0;t--){const n=e.lines.get(t);for(let e=0;e<n.length;e++)if(""!==n.get(e)[1])return t}return e.lines.length}(t);let r="";for(let o=0;o<=i;o++){const e=o+t.ydisp,i=t.lines.get(e);if(!i)continue;let l=0,s=0,c="",d="",u=null;for(let t=0;t<i.length;t++){i.loadCell(t,n);const e=n.getChars(),r=n.getWidth();if(0!==r){if((n.fg!==l||n.bg!==s)&&(0===l&&0===s||(d&&(u.innerHTML=d,d=""),c+=gh(u),u=null),0!==n.fg||0!==n.bg)){d&&!u&&(u={innerHTML:"",classes:[]}),u&&(d&&(u.innerHTML=d,d=""),c+=gh(u)),u={innerHTML:"",classes:[]},n.isBold()&&u.classes.push("xterm-bold"),n.isUnderline()&&u.classes.push("xterm-underline"),n.isBlink()&&u.classes.push("xterm-blink"),n.isInvisible()&&u.classes.push("xterm-hidden");const e=n.isInverse();if(n.isFgPalette()){let t=n.getFgColor();n.isBold()&&t<8&&!e&&a&&(t+=8),u.classes.push(`xterm-${e?"bg":"fg"}-${t}`)}else e&&u.classes.push(`xterm-bg-${ph}`);n.isBgPalette()?u.classes.push(`xterm-${e?"fg":"bg"}-${n.getBgColor()}`):e&&u.classes.push(`xterm-fg-${ph}`)}if(2===r)d+=`<span class="xterm-wide-char">${e}</span>`;else if(e.charCodeAt(0)>255)d+=`<span class="xterm-normal-char">${e}</span>`;else switch(e){case"&":d+="&amp;";break;case"<":d+="&lt;";break;case">":d+="&gt;";break;default:d+=e<=" "?"&nbsp;":e}l=n.fg,s=n.bg}}d&&!u&&(u={innerHTML:"",classes:[]}),u&&(d&&(u.innerHTML=d.replace(/(&nbsp;)+$/,"&nbsp;"),d=""),c+=gh(u),u=null),r+=`<div>${c}</div>`}return r}(t))}))}))}var fh=n(45697),vh=n.n(fh);vh().shape({index:vh().number.isRequired,text:vh().string.isRequired,timestamp:vh().number.isRequired,type:vh().string.isRequired});var bh,yh,Eh,wh;class kh extends N.PureComponent{constructor(e){super(e),this.state={html:null}}componentDidMount(){this.renderPromise=function(e){let t=!1;return{promise:new Promise(((n,a)=>{e.then((e=>t?a({isCanceled:!0}):n(e)),(e=>a(t?{isCanceled:!0}:e)))})),cancel(){t=!0}}}(this.renderTerminalHTMLWithCache(this.props.execution.text)),this.renderPromise.promise.then((e=>this.setState({html:e}))).catch((e=>{if(!e.isCanceled)throw e}))}componentWillUnmount(){this.renderPromise.cancel()}render(){return N.createElement("div",{dangerouslySetInnerHTML:{__html:this.state.html},className:this.props.execution.type})}renderTerminalHTMLWithCache(e){return kh.renderTerminalHTMLCache[e]=kh.renderTerminalHTMLCache[e]||hh(e),kh.renderTerminalHTMLCache[e]}}bh=kh,Eh={},(yh="symbol"==typeof(wh=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(yh="renderTerminalHTMLCache","string"))?wh:String(wh))in bh?Object.defineProperty(bh,yh,{value:Eh,enumerable:!0,configurable:!0,writable:!0}):bh[yh]=Eh;const Sh=(0,wn.Z)((e=>({container:{position:"absolute",top:53,bottom:0,left:0,right:0,display:"flex",flexDirection:"column",padding:"10px 10px 10px 15px"},header:{fontWeight:"bolder",width:"100%",marginTop:e.spacing(2),marginBottom:e.spacing(2),...e.palette.programOutput.console,...e.palette.playback.execution.header},scrollPoint:{width:0,height:0,display:"inline-block"},logPrevious:{fontWeight:"lighter",...e.palette.playback.execution.log.previous},logCurrent:{fontWeight:"bolder",...e.palette.playback.execution.log.current}}))),Ch=({executions:e})=>{const t=(0,N.useRef)(null),n=Sh(),a=(0,N.useCallback)((e=>{t.current&&(t.current.scrollTop=e.offsetTop)}),[]);return N.createElement("pre",{ref:t,id:"execution-log",className:n.container},e.map(((t,i)=>"execution"===t.type?N.createElement(N.Fragment,{key:i},N.createElement("div",{className:n.header},N.createElement("span",null,"[",(0,tr.Z)(t.timestamp,"h:mmaaaaa'm'"),"] ",t.text))):N.createElement(N.Fragment,{key:i},N.createElement("div",{className:n.scrollPoint,ref:t=>{t&&i===e.length-1&&a(t)}}),N.createElement("div",{className:i===e.length-1?n.logCurrent:n.logPrevious},N.createElement(kh,{execution:{...t,index:i},key:`${i}-${t.index}-${t.timestamp}-${t.type}`}))))))},xh=({executions:e})=>{const[t,n]=(0,N.useState)(!1),a=(0,N.useRef)(null),i=(0,N.useCallback)((()=>{if(e)for(let t=e.length-1;t>=0;t--)if("output"===e[t].type)return e[t].text;return null}),[e]),r=(0,N.useCallback)((()=>{n(!0);const e=i();rh.srcDoc.set(a.current,e,{force:!1})}),[i]),o=(0,N.useCallback)((()=>{n(!1)}),[]);return(0,N.useEffect)((()=>{r()}),[r,e]),N.createElement("div",{className:"ExecutionHtml"},N.createElement("iframe",{className:"ExecutionHtml-iframe",onLoad:o,ref:a,sandbox:"allow-forms allow-modals allow-popups allow-scripts"}),t&&N.createElement(gp.Z,{delay:300}))};var _h=n(66241);const Th=({hidden:e})=>{const t=(0,oe.v9)((e=>e.padSettings.language)),n=(0,oe.v9)((e=>e.playbackHistory.frameLength)),{currentTimestamp:a}=(0,Bs.z)(),{environment:i,projectTemplate:r}=(0,fe.J$)(),{frameIndex:o}=(0,cr.t)(),l=(0,_h.k)(),[s,c]=(0,N.useState)([]);if((0,N.useEffect)((()=>{if(!a||!l)return;const e=Object.values(l);if(o===n-1)c(e);else{const t=e.filter((e=>e.timestamp<=a));t.length!==s.length&&c(t)}}),[a,l,o,n,s.length]),e||!a)return null;var d;if(null!=(null===i||void 0===i?void 0:i.projectTemplateSlug))return"RunCommand"!==(null===r||void 0===r||null===(d=r.settings)||void 0===d?void 0:d.executionType)?N.createElement(Ip,{hidden:e}):N.createElement(Ch,{executions:s});if(0===s.length)return null;{const e="html"===t?xh:Ch;return N.createElement(N.Fragment,null,N.createElement(e,{executions:s}))}},Ih=({children:e,hidden:t})=>N.createElement(M.Z,{p:2.5,pr:0,sx:e=>({height:`calc(100% - ${e.spacing(10)})`,display:t?"none":"block"})},N.createElement(na.p,null,e));var Ph=function({hidden:e,buttonRef:t}){var n,a,i;const{language:r,execEnabled:o}=(0,oe.v9)((e=>e.padSettings)),{darkColorScheme:l}=(0,oe.v9)((e=>e.editorSettings)),{activeTab:s}=(0,oe.v9)((e=>e.tabs)),{environment:c}=(0,fe.J$)(),{invisible:d,isPlayback:u}=(0,ue.nT)("invisible","isPlayback"),m=(0,oe.I0)(),{projectTemplate:p}=(0,ah.o)(null===c||void 0===c?void 0:c.projectTemplateSlug),g=(0,N.useCallback)((()=>{m({type:"reset_clicked"})}),[m]),h=(0,N.useCallback)((()=>{m({type:"clear_clicked"})}),[m]),f=ge.Z.isPlayback?Th:null!==c&&void 0!==c&&null!==(n=c.projectTemplateSlug)&&void 0!==n&&n.startsWith("jupyter")?null:null!=(null===c||void 0===c?void 0:c.projectTemplateSlug)?Ip:"markdown"===r?e=>N.createElement(Ih,{hidden:e.hidden},N.createElement(ih.Z,e)):"html"===r?mh:em,v=null===(a=window.CoderPad.LANGUAGES[r])||void 0===a?void 0:a.execution,b="output"===s&&!u&&!d&&(v&&"markdown"!==r),y=b&&!o,E="RunCommand"===(null===p||void 0===p||null===(i=p.settings)||void 0===i?void 0:i.executionType),w="output"===s&&!u&&!d&&E;return N.createElement(N.Fragment,null,null!=f&&N.createElement(f,{hidden:e}),b&&t.current&&(0,j.createPortal)(N.createElement(Te,{type:"regular",darkBg:l,onClick:g,disabled:y,tooltip:{placement:"bottom",title:"Resets your console, but not your code.",trigger:"hover manual"}},"Reset"),t.current),w&&t.current&&(0,j.createPortal)(N.createElement(Te,{type:"regular",darkBg:l,onClick:h,disabled:w&&!o,tooltip:{placement:"bottom",title:"Clears the program output.",trigger:"hover manual"}},"Clear"),t.current))};var Zh=({testCaseIds:e})=>{const t=(0,N.useRef)(null),{environment:n,files:a}=(0,fe.J$)(),i=(0,oe.I0)(),r=(0,oe.v9)((e=>e.execution.running)),o=(0,oe.v9)((e=>e.editorSettings.darkColorScheme)),l=r?"Stop":"Run selected test cases",s=c().debounce((()=>{t.current&&i({type:"run_clicked",payload:{environment:n,files:a},testCaseIds:e,_analytics:{name:"Run Test Case Clicked"}})}),500);return N.createElement(Te,{darkBg:o,disabled:0===e.length,onClick:s,ref:t,type:r?"danger":"primary",className:"TestsTab-runButton"},l)};class Oh extends N.Component{constructor(e){super(e),this.state={selectedTestCases:[]}}render(){const{testCases:e,results:t}=this.props;return N.createElement("div",{className:ke()({hidden:this.props.hidden,TestsTab:!0}),readOnly:!0},N.createElement("div",{className:"TestsTab-header"},"Test cases verify your program's functionality. When you press Run, each set of arguments is passed into your program and the output is compared with the expected result."),N.createElement("table",{className:"TestsTab-testsTable table"},N.createElement("thead",null,N.createElement("tr",null,N.createElement("th",null,N.createElement("input",{type:"checkbox",checked:e.length===this.state.selectedTestCases.length,onChange:t=>this.setState({selectedTestCases:t.target.checked?e.map((e=>e.id)):[]})})),N.createElement("th",null,"Arguments"),N.createElement("th",null,"Expected result"),t&&t.length>0&&N.createElement("th",null,"Pass"))),N.createElement("tbody",null,e.map(((e,n)=>{let a=null;return t&&t.length>0&&(a=c().find(t,(t=>e.id===t.test_case_id))),N.createElement("tr",{key:e.id||n,className:"TestsTab-testDetail"},N.createElement("td",null,N.createElement("input",{type:"checkbox",checked:this.state.selectedTestCases.includes(e.id),onChange:t=>{t.target.checked?this.setState({selectedTestCases:this.state.selectedTestCases.concat([e.id])}):this.setState({selectedTestCases:this.state.selectedTestCases.filter((t=>t!==e.id))})}})),N.createElement("td",null,N.createElement("pre",null,"object"===typeof e.arguments?e.arguments.join(", "):e.arguments)),N.createElement("td",{className:ke()({"TestsTab-testCaseResult--pass":a&&a.passed,"TestsTab-testCaseResult--fail":a&&!a.passed})},N.createElement("pre",null,e.return_value)),a&&N.createElement("td",{className:"TestsTab-testCaseResult--"+(a.passed?"pass":"fail")},N.createElement("pre",null,a.passed?"\u2713":"\u2717")),t&&t.length>0&&!a&&N.createElement("td",null))})),N.createElement("tr",null,N.createElement("td",{colSpan:t&&t.length>0?4:3},N.createElement(Zh,{testCaseIds:this.state.selectedTestCases}))))))}}var Mh=(0,oe.$j)((function(e){return{testCases:e.question.visibleTestCases,results:e.question.visibleTestCaseResults}}))(Oh);const Dh=({value:e,onChange:t,onShowNext:n,onShowPrevious:a})=>((0,N.useEffect)((()=>{const e=e=>{"Enter"===e.key&&(e.shiftKey?a():n())};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)}),[n,a]),N.createElement(ia.Z,{style:{marginRight:8},size:"small",label:"Search...",value:e,onChange:e=>{(0,y.j)(ln.j.TranscriptionPlaybackSearched,{searchText:e.target.value}),t(e.target.value)}})),Lh=(0,Qt.ZP)("span",{target:"e140n7u50"})((({theme:e,color:t})=>({display:"inline-block",color:t||e.palette.text.primary})),""),Fh=(0,N.forwardRef)((({firstTimestamp:e,transcriptEntry:t,active:n,onClick:a,searchText:i},r)=>{var o;const l=(0,or.B)(),s=t.kind===_l.o.SystemMessage,c=s?null:Object.values(l).find((e=>e.id===t.userId)),d=s?t.message:t.transcripts[null!==(o=t.preferredTranscript)&&void 0!==o?o:0],u=(e=>{const t=Math.floor(e/60),n=Math.floor(e%60);return`${t}:${n<10?"0":""}${n}`})((t.timestamp-e)/1e3),m=(0,N.useMemo)((()=>{const e=i.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");if(i){const t=new RegExp(e,"gi");return d.replace(t,(e=>`<b>${e}</b>`))}return d}),[i,d]);return s?N.createElement("tr",{ref:r,style:{opacity:n?1:.5,cursor:n?"default":"pointer",fontSize:16},onClick:a},N.createElement("td",{id:"timestamp"},N.createElement("span",null,u)),N.createElement("td",{id:"system-message",colSpan:2},N.createElement("span",{dangerouslySetInnerHTML:{__html:m}}))):N.createElement("tr",{ref:r,style:{opacity:n?1:.5,cursor:n?"default":"pointer",fontSize:16},onClick:a},N.createElement("td",{id:"timestamp"},N.createElement("span",null,u)),N.createElement("td",{id:"author"},N.createElement(Lh,{color:null===c||void 0===c?void 0:c.color},null===c||void 0===c?void 0:c.name,": ")),N.createElement("td",{id:"transcript"},N.createElement("span",{dangerouslySetInnerHTML:{__html:m}})))})),Ah=(0,Qt.ZP)("table",{target:"e1ds3thm1"})((({theme:e})=>({"& tr":{},"& td":{verticalAlign:"top",padding:`${e.spacing(1)} ${e.spacing(.5)}`,"&#author":{whiteSpace:"nowrap",textAlign:"right",paddingRight:0},"&#timestamp":{paddingLeft:e.spacing(2),textAlign:"right","& span":{fontFamily:"monospace",background:"#4848ef",textShadow:"1px 1px 0 #3b00c9",color:"#d7bffa",cursor:"pointer",padding:e.spacing(.5),borderRadius:4}},"&#transcript":{paddingRight:e.spacing(2),"& b":{background:"dark"===e.palette.mode?"#ff5600":"#fa9d6e",textShadow:"dark"===e.palette.mode?"1px 1px 0 black":"1px 1px 0 #FAFAFA"},width:"100%"}}})),""),Rh=(0,Qt.ZP)("div",{target:"e1ds3thm0"})((({theme:e})=>({display:"flex",justifyContent:"space-between",alignItems:"center",padding:`${e.spacing(1)} ${e.spacing(2)}`})),""),Nh=({hidden:e})=>{var t;const n=(0,xl.Q)(),{frameIndex:a,frames:i}=(0,rr.V)(),r=(0,N.useRef)(null),o=(0,oe.I0)(),l=(0,N.useCallback)((e=>{r.current&&(r.current.scrollTop=e.offsetTop-200)}),[]),s=(0,N.useMemo)((()=>{var e;return n.sort(((e,t)=>e.timestamp-t.timestamp)),null===(e=n[0])||void 0===e?void 0:e.timestamp}),[n]),c=null===(t=i[a])||void 0===t?void 0:t.timestamp,[d,u]=(0,N.useState)(""),[m,p]=(0,N.useState)(null),g=(0,N.useMemo)((()=>{const e=n.filter((e=>{var t;return e.kind!==_l.o.SystemMessage&&e.transcripts[null!==(t=e.preferredTranscript)&&void 0!==t?t:0].toLowerCase().includes(d.toLowerCase())}));return p(0),e}),[d,n]);(0,N.useEffect)((()=>{null!==m&&g[m]&&o({type:"playback_seek_to_frame",index:i.findIndex((e=>{var t;return e.timestamp===(null===(t=g[m])||void 0===t?void 0:t.timestamp)}))})}),[m,g,i,o]);const h=(0,N.useMemo)((()=>{const e=n.findLastIndex((e=>e.timestamp<=c));return n[e]}),[c,n]);return e?null:N.createElement("div",{style:{height:"100%",paddingBottom:60,boxSizing:"border-box"}},N.createElement(Rh,null,N.createElement(Dh,{value:d,onChange:u,onShowNext:()=>{p((e=>null!==e?e+1===g.length?0:e+1:0))},onShowPrevious:()=>{p((e=>null!==e?e-1===-1?g.length-1:e-1:0))}})),N.createElement(na.p,{ref:r},N.createElement(Ah,null,N.createElement(om.Z,null,n.map((e=>N.createElement(Fh,{searchText:d,key:e.id,ref:t=>{t&&e.id===(null===h||void 0===h?void 0:h.id)&&l(t)},firstTimestamp:s,transcriptEntry:e,active:e.id==(null===h||void 0===h?void 0:h.id),onClick:()=>{(0,y.j)(ln.j.TranscriptionPlaybackLineClicked);const t=i.findIndex((t=>t.timestamp===e.timestamp));o({type:"playback_seek_to_frame",index:t})}})))))))};var jh=n(66568),qh=n(84060),Bh=n(42096);const zh=({onSelection:e,dataKey:t,options:n})=>{const[a,i]=(0,N.useState)(null),r=(0,N.useCallback)((e=>{e.stopPropagation(),i(e.currentTarget)}),[]),o=(0,N.useCallback)(((n,a)=>{n.stopPropagation(),e({[t]:a}),i(null)}),[e,t]),l=!!a,s=`header-tab-menu-${t}`,c=`${s}-menu`;return N.createElement("div",null,N.createElement(Bh.Z,{onClick:r,sx:e=>({transform:l?"scaleY(-1)":void 0,margin:"-10px 0 -8px",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter})}),id:s,"aria-controls":l?c:void 0,"aria-haspopup":"true","aria-expanded":l?"true":void 0}),N.createElement(Zn.Z,{id:c,MenuListProps:{"aria-labelledby":s},anchorEl:a,open:l,onClose:()=>i(null),anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},n.map((e=>N.createElement(hi.Z,{key:e.label,onClick:t=>o(t,e.value)},e.label)))))};const $h=(0,Qt.ZP)(Fu.OK,{target:"e1lectha1"})({name:"ol9ofu",styles:"font-size:0.875rem"}),Hh=(0,Qt.ZP)(M.Z,{shouldForwardProp:e=>"hasTabs"!==e,target:"e1lectha0"})((({theme:e,hasTabs:t})=>({zIndex:11,width:"100%",height:"40px",paddingLeft:e.spacing(1),paddingTop:e.spacing(1),paddingBottom:e.spacing(.25),paddingRight:e.spacing(1),boxSizing:"border-box",display:"flex",alignItems:"flex-start",justifyContent:t?"space-between":"flex-end"})),""),Uh=(0,N.forwardRef)(((e,t)=>{const{activeTab:n,unseenContent:a,visibleTabs:i}=(0,oe.v9)((e=>e.tabs)),{focusTimeEnabled:r}=(0,oe.v9)((e=>e.padSettings)),o=(0,oe.v9)(Ve.TX),l=(0,oe.v9)((e=>e.question.customFiles)),{isPlayback:s}=(0,ue.nT)("isPlayback"),d=(0,oe.I0)(),u=(0,N.useCallback)(((e,t)=>{d({type:"tab_selected",tab:e,...t})}),[d]),m=!!c().find(i,((e,t)=>e&&"output"!==t)),[p,g]=(0,N.useState)(!1);let h=0;const f=(0,N.useCallback)(((e,t,n)=>{u(e,n),g(!0),(0,Mn.Z)(ln.j.RightPaneTabClicked,{target:e})}),[u]),v=(0,N.useMemo)((()=>{const e=[];return Object.keys(qh.G).forEach(((t,n)=>{if(i[t]){const i={name:t,label:qh.G[t],index:n,hasUnseenContent:a[t],onClick:e=>f(t,h++,e)};"files"===t?(i.label+=` (${l.length})`,l.length>1&&(i.selection={list:l.map((e=>{const t=function(e){var t;const n=null===(t=e.filename)||void 0===t?void 0:t.search(/\.[^.]*$/);return null!=n&&-1!==n&&null!=e.filename?e.filename.substring(n):null}(e);return{label:t?`${e.filename} (${t})`:e.filename,value:e}})),dataName:"customFileSelected"}),l.length>0&&(i.onClick=()=>{f(t,h++,{customFileSelected:l[0]})})):o&&"notes"===t&&(i.tooltip={sectionTitle:"Private Interviewer Notes",contents:"Take private notes during an interview. These notes will only be visible to internal team members."}),e.push(i)}})),e}),[i,a,o,l,f,h]),b=v.findIndex((e=>e.name===n)),y=(0,N.useCallback)((e=>{if(-1!==b&&["ArrowLeft","ArrowRight"].includes(e.key)){const t="ArrowLeft"===e.key?-1:1,n=(b+v.length+t)%v.length;v[n].onClick()}}),[b,v]);(0,N.useEffect)((()=>(p&&document.addEventListener("keydown",y),()=>{document.removeEventListener("keydown",y)})),[y,p]);const E=(0,z.Fg)(z.hY.Light);if(s&&!m)return null;const w=r&&!ge.Z.isOwner;return N.createElement(L.Z,{theme:e=>w?E:e},N.createElement(ta.d,{onClickAway:()=>g(!1)},N.createElement(Hh,{className:ke()({"RightHeader-focusTime":w}),hasTabs:m},m&&N.createElement(jh.Z,{sx:{minHeight:"26px",flex:1},variant:"scrollable",scrollButtons:"auto"},v.map((e=>{const{name:t,label:n,tooltip:a,hasUnseenContent:i,onClick:r}=e,o=a?N.createElement(li,a,N.createElement("span",null,n)):n,l=e.selection?N.createElement(zh,{dataKey:"customFileSelected",options:e.selection.list,onSelection:e=>u(t,e)}):void 0;return N.createElement($h,{key:t,value:t,label:o,onClick:()=>r(),cta:i,icon:l,iconPosition:"end"})}))),N.createElement(M.Z,{ref:t}))))}));var Qh,Vh=n(34282),Wh=n(26307),Gh=n(45484),Yh=n(67109);const Kh=["title","titleId"];function Jh(){return Jh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Jh.apply(this,arguments)}function Xh(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}const ef=(e,t)=>{let{title:n,titleId:a}=e,i=Xh(e,Kh);return N.createElement("svg",Jh({xmlns:"http://www.w3.org/2000/svg",width:41,height:41,fill:"none",strokeWidth:1.5,className:"h-6 w-6",viewBox:"0 0 41 41",ref:t,"aria-labelledby":a},i),n?N.createElement("title",{id:a},n):null,Qh||(Qh=N.createElement("path",{fill:"currentColor",d:"M37.532 16.87a9.96 9.96 0 0 0-.856-8.184 10.08 10.08 0 0 0-10.855-4.835A9.96 9.96 0 0 0 18.307.5a10.08 10.08 0 0 0-9.614 6.977 9.97 9.97 0 0 0-6.664 4.834 10.08 10.08 0 0 0 1.24 11.817 9.97 9.97 0 0 0 .856 8.185 10.08 10.08 0 0 0 10.855 4.835 9.97 9.97 0 0 0 7.516 3.35 10.08 10.08 0 0 0 9.617-6.981 9.97 9.97 0 0 0 6.663-4.834 10.08 10.08 0 0 0-1.243-11.813M22.498 37.886a7.47 7.47 0 0 1-4.799-1.735c.061-.033.168-.091.237-.134l7.964-4.6a1.3 1.3 0 0 0 .655-1.134V19.054l3.366 1.944a.12.12 0 0 1 .066.092v9.299a7.505 7.505 0 0 1-7.49 7.496M6.392 31.006a7.47 7.47 0 0 1-.894-5.023c.06.036.162.099.237.141l7.964 4.6a1.3 1.3 0 0 0 1.308 0l9.724-5.614v3.888a.12.12 0 0 1-.048.103l-8.051 4.649a7.504 7.504 0 0 1-10.24-2.744M4.297 13.62A7.47 7.47 0 0 1 8.2 10.333c0 .068-.004.19-.004.274v9.201a1.3 1.3 0 0 0 .654 1.132l9.723 5.614-3.366 1.944a.12.12 0 0 1-.114.01L7.04 23.856a7.504 7.504 0 0 1-2.743-10.237m27.658 6.437-9.724-5.615 3.367-1.943a.12.12 0 0 1 .113-.01l8.052 4.648a7.498 7.498 0 0 1-1.158 13.528v-9.476a1.29 1.29 0 0 0-.65-1.132m3.35-5.043c-.059-.037-.162-.099-.236-.141l-7.965-4.6a1.3 1.3 0 0 0-1.308 0l-9.723 5.614v-3.888a.12.12 0 0 1 .048-.103l8.05-4.645a7.497 7.497 0 0 1 11.135 7.763m-21.063 6.929-3.367-1.944a.12.12 0 0 1-.065-.092v-9.299a7.497 7.497 0 0 1 12.293-5.756 7 7 0 0 0-.236.134l-7.965 4.6a1.3 1.3 0 0 0-.654 1.132zm1.829-3.943 4.33-2.501 4.332 2.5v5l-4.331 2.5-4.331-2.5z"})))},tf=(0,N.forwardRef)(ef);n.p;var nf=n(27036),af=n(41899);const rf=(0,Qt.ZP)(Jt.Z,{shouldForwardProp:e=>"isDarkMode"!==e,target:"e1r4xof62"})((({theme:e,isDarkMode:t})=>({position:"absolute",top:e.spacing(1),right:e.spacing(1),color:t?"#fff":"#34495e",transition:"all 0.2s ease-in-out",width:"24px",height:"24px"})),""),of=(0,Qt.ZP)(af.Z,{shouldForwardProp:e=>"show"!==e,target:"e1r4xof61"})((({show:e})=>({opacity:e?1:0,transition:e?"all 0.3s ease-in-out":"all 0.1s ease-in-out",position:"absolute"})),""),lf=(0,Qt.ZP)(nf.Z,{shouldForwardProp:e=>"show"!==e,target:"e1r4xof60"})((({show:e})=>({opacity:e?1:0,transition:e?"all 0.1s ease-in-out":"all 0.3s ease-in-out",position:"absolute"})),"");var sf=({isDarkMode:e})=>{const[t,n]=(0,N.useState)(!1),a=(0,N.useRef)(null);return(0,N.useEffect)((()=>()=>{a.current&&clearTimeout(a.current)}),[]),N.createElement(rf,{onClick:e=>{var t,i;const r=null===(t=e.target.closest("pre"))||void 0===t?void 0:t.querySelector("code");null!==(i=navigator)&&void 0!==i&&i.clipboard&&((0,y.j)("Copy AI Code Block"),navigator.clipboard.writeText((null===r||void 0===r?void 0:r.innerText)||""),n(!0),a.current=setTimeout((()=>n(!1)),1250))},size:"small",isDarkMode:e},N.createElement(of,{fontSize:"inherit",show:!t}),N.createElement(lf,{fontSize:"inherit",show:t}))};let cf=function(e){return e.user="user",e.assistant="assistant",e}({}),df=function(e){return e.STOP="stop",e.LENGTH="length",e.CONTENT_FILTER="content_filter",e.CLIENT_ABORTED="client_aborted",e.UNKNOWN="unknown",e.PAD_TOKEN_LIMIT_LIMIT_REACHED="pad_token_limit_reached",e}({});const uf=(0,Qt.ZP)(M.Z,{target:"ef069ok0"})((({theme:e})=>({width:"100%",padding:e.spacing(1),paddingTop:e.spacing(2),"& pre":{position:"relative",'& > span[data-id="copy"] > button':{opacity:0},"&:hover":{'& > span[data-id="copy"] > button':{opacity:1}}}})),""),mf=(0,N.memo)((({role:e,content:t,authorId:n,messageId:a,finishReason:i,incomplete:r=!1})=>{const o=(0,Li.Z)(),l=(0,oe.v9)(Ve.S8),s=(0,or.B)(),{isPlayback:c}=(0,ue.nT)("isPlayback");let d="",u="",m="#10a37e";const p=c?s[n]:l[n];var g,h,f,v;e===cf.user&&p?(d=null!==(g=null===(h=p.name)||void 0===h||null===(f=h[0])||void 0===f?void 0:f.toUpperCase())&&void 0!==g?g:"",m=p.color,u=null!==(v=p.name)&&void 0!==v?v:""):u=n;(t.match(/```/g)||[]).length%2===1&&(t+="\n```"),(0,N.useEffect)((()=>{if(r)return;document.querySelectorAll(`div[data-message-id="${a}"] pre > code`).forEach((e=>{var t;const n=document.createElement("span");n.dataset.id="copy",null===(t=e.parentElement)||void 0===t||t.appendChild(n);const a=N.createElement(sf,{isDarkMode:"dark"===o.palette.mode});j.render(a,n)}))}),[a,r,o.palette.mode]);t=t.replace(/\n[=-]+\s*$/,"");const b=i&&(e=>{switch(e){case df.CLIENT_ABORTED:return"Response stopped";case df.LENGTH:return"Message length limit reached";case df.CONTENT_FILTER:return"Message content filtered";case df.UNKNOWN:return"An error occurred";case df.PAD_TOKEN_LIMIT_LIMIT_REACHED:return"AI Chat usage limit reached for the Pad";default:return null}})(i);return N.createElement(M.Z,{"data-message-id":a,sx:{display:"flex",flexDirection:"row",overflowAnchor:"none"}},N.createElement(M.Z,{sx:{padding:1}},N.createElement($e.Z,{title:u,placement:"top",arrow:!0},N.createElement(Yh.Z,{sx:{backgroundColor:m,color:"#000",fontSize:"1.125rem"}},e===cf.assistant?N.createElement(En.Z,{sx:{width:"32px",height:"32px"},inheritViewBox:!0,component:tf}):d))),N.createElement(uf,null,N.createElement(ih.Z,{value:t,hidden:!1}),b&&N.createElement(M.Z,{textAlign:"right"},N.createElement(Ue.Z,{variant:"overline",color:"text.secondary"},b))))}));var pf=mf;const gf=(0,Qt.ZP)(na.p,{target:"em3wsi82"})((({theme:e})=>({flex:1,display:"flex",flexDirection:"column",color:"dark"===e.palette.mode?"#fff":"#34495e",opacity:.5,marginTop:e.spacing(2)})),""),hf=(0,Qt.ZP)(M.Z,{target:"em3wsi81"})({name:"qt73jw",styles:"margin:auto 0;display:flex;align-items:center;flex-direction:column"}),ff=(0,Qt.ZP)(M.Z,{target:"em3wsi80"})((({theme:e})=>({alignItems:"baseline",display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",marginTop:e.spacing(6),width:"100%"})),"");var vf=()=>N.createElement(gf,null,N.createElement(hf,null,N.createElement(En.Z,{sx:{width:"96px",height:"96px"},inheritViewBox:!0,component:tf}),N.createElement(ff,null,N.createElement(Xs.Z,{dense:!0},N.createElement(ec.ZP,null,N.createElement(Ue.Z,{variant:"h2",color:"inherit"},"Ask ChatGPT...")),N.createElement(ec.ZP,null,N.createElement(Ue.Z,null,"What is the syntax for a while loop in Javascript?")),N.createElement(ec.ZP,null,N.createElement(Ue.Z,null,"How do I write a goroutine in Go?")),N.createElement(ec.ZP,null,N.createElement(Ue.Z,null,"How do I write a functional component in React?")),N.createElement(ec.ZP,{sx:{marginTop:2}},N.createElement(Ue.Z,{variant:"h3",color:"inherit"},"Limitations")),N.createElement(ec.ZP,null,N.createElement(Ue.Z,{variant:"body2"},"May occasionally generate incorrect information")),N.createElement(ec.ZP,null,N.createElement(Ue.Z,{variant:"body2"},"Limited knowledge of world and events after 2021"))))));const bf="#ffffff",yf="#34495e",Ef=Ec.F4`
  0% {
    background-color: ${bf}99;
  }
  50%, 100% {
    background-color: ${bf}33;
  }
`,wf=Ec.F4`
  0% {
    background-color: ${yf}99;
  }
  50%, 100% {
    background-color: ${yf}33;
  }
`,kf=e=>({width:"6px",height:"6px",borderRadius:"3px",backgroundColor:`${"dark"===e.palette.mode?bf:yf}33`}),Sf=(0,Qt.ZP)("span",{target:"e14rpslo0"})((({theme:e})=>({marginLeft:e.spacing(3),position:"relative",animation:`${"dark"===e.palette.mode?Ef:wf} 1s infinite linear alternate`,animationDelay:"0.5s",...kf(e),"&::before, &::after":{content:'""',display:"inline-block",position:"absolute",top:0},"&::before":{left:"-10px",animation:`${"dark"===e.palette.mode?Ef:wf} 1s infinite alternate`,animationDelay:"0s",...kf(e)},"&::after":{left:"10px",animation:`${"dark"===e.palette.mode?Ef:wf} 1s infinite alternate`,animationDelay:"1s",...kf(e)}})),"");var Cf=()=>N.createElement(M.Z,{sx:{display:"flex",flexDirection:"row",alignItems:"center",overflowAnchor:"none"}},N.createElement(M.Z,{sx:{padding:1}},N.createElement($e.Z,{title:"",placement:"top",arrow:!0},N.createElement(Yh.Z,{sx:{backgroundColor:"#10a37e",color:"#000",fontSize:"1.125rem"}},N.createElement(En.Z,{sx:{width:"32px",height:"32px"},inheritViewBox:!0,component:tf})))),N.createElement(Sf,null)),xf=n(79097);const _f=(0,Qt.ZP)(qn.Z,{target:"e16exm8v0"})((({theme:e})=>({backgroundColor:e.palette.playback.border,padding:`${e.spacing(1)} 0`})),""),Tf=()=>{const{frameIndex:e}=(0,cr.t)(),t=(0,oe.v9)((e=>e.playbackHistory.frameLength)),{currentTimestamp:n}=(0,Bs.z)(),a=(0,xf.h)(),[i,r]=(0,N.useState)([]),o=(0,N.useRef)();(0,N.useEffect)((()=>{if(n&&a)if(e===t-1)r(a);else{const e=a.filter((e=>e.messageTimestamp<=n));e.length!==i.length&&r(e)}}),[n,a,e,t,i.length]);const l=(0,N.useCallback)((e=>{o.current&&(o.current.scrollTop=e.offsetTop)}),[]);let s=null;return N.createElement(If,null,N.createElement(Pf,{ref:o},N.createElement(M.Z,null,i.map(((e,t)=>{const n=N.createElement("div",{key:t,ref:e=>{e&&t===i.length-1&&l(e)}},null!=s&&e.conversationId!==s&&N.createElement(_f,null,"CHAT RESET"),N.createElement(mf,{role:e.role,content:e.content,authorId:e.authorId,messageId:e.messageId,finishReason:e.finishReason}));return s!==e.conversationId&&(s=e.conversationId),n})))))};const If=(0,Qt.ZP)(M.Z,{target:"e12jourt4"})((({theme:e})=>({height:"100%",display:"flex",flexDirection:"column"})),""),Pf=(0,Qt.ZP)(na.p,{target:"e12jourt3"})((({theme:e})=>({display:"flex",flexDirection:"column-reverse",flex:1,marginTop:e.spacing(2),"& > div > div:nth-of-type(even)":{backgroundColor:e.palette.chatHistory.queryBackground},"& > div > div:nth-of-type(odd)":{backgroundColor:e.palette.chatHistory.responseBackground}})),""),Zf=(0,Qt.ZP)(M.Z,{target:"e12jourt2"})({name:"1e7gptp",styles:"display:flex;align-items:center;justify-content:center;min-height:100%"}),Of=(0,Qt.ZP)(Wh.Z,{target:"e12jourt1"})((({disabled:e})=>({color:e?"#434343":"#E0E0E0",cursor:"pointer"})),""),Mf=(0,Qt.ZP)(ia.Z,{target:"e12jourt0"})((({theme:e})=>({margin:e.spacing(2),"& textarea":{"&::-webkit-scrollbar":{display:"none"},msOverflowStyle:"none",scrollbarWidth:"none"}})),""),Df=({hidden:e,buttonRef:t})=>{var n;const{firebaseAuthorId:a,firebaseShard:i,isPlayback:r,slug:o}=(0,ue.nT)("firebaseAuthorId","firebaseShard","isPlayback","slug"),[l,s]=(0,N.useState)(""),[c,d]=(0,N.useState)(""),[u,m]=(0,N.useState)(!0),[p,g]=(0,N.useState)(!0),[h,f]=(0,N.useState)(!1),[v,b]=(0,N.useState)(!1),[E,w]=(0,N.useState)(!1),[k,S]=(0,N.useState)([]),C=(0,N.useRef)(null),x=(0,Wt.zY)(),_=(0,un.i)(),T=(0,N.useCallback)((async()=>{const e=await _("/custom_resources_auth",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({padSlug:o})});return(await e.json()).token}),[_,o]),I=(0,N.useCallback)((async()=>{const e=await T();return $l()(x.CoderPad.AI_CHAT_SERVICE_URL,{query:{pad:o,firebaseShard:i,token:e},reconnectionDelayMax:1e4,reconnectionDelay:2e3,transports:["websocket"]})}),[T,i,o,x.CoderPad.AI_CHAT_SERVICE_URL]),P=(0,N.useCallback)((e=>{S(e)}),[]),Z=(0,N.useCallback)((e=>{S((t=>[...t,e]))}),[]),O=(0,N.useCallback)((e=>{b(!0),h&&S((t=>{if(t[t.length-1].messageId===e.message.messageId){const n=[...t];return n[n.length-1].content+=e.messageToken,n}return[...t,{...e.message,content:e.messageToken,incomplete:!0}]}))}),[h]),D=(0,N.useCallback)((e=>{S((t=>{const n=t.findIndex((t=>t.messageId===e.message.messageId));return-1===n?[...t,{...e.message}]:(t[n].incomplete=!1,t[n].finishReason=e.message.finishReason,t)})),s("")}),[]);(0,N.useEffect)((()=>{if(r)return;let e;return async function(){e=await I(),C.current=e,e.on("tokenExpired",(async()=>{e.disconnect();const t=await T();e.io.opts.query.token=t,e.connect()})),e.on("connectionRefused",(()=>{w(!0),console.log("not allowed to access AI chat")})),e.on("connect",(()=>{m(!1),w(!1),g(!1),s("")})),e.on("disconnect",(()=>{m(!0),f(!1),b(!1),s("Connection to AI chat lost, attempting to reconnect")})),e.on("started",(()=>{f(!0),b(!0)})),e.on("catchup",P),e.on("fullMessageOutput",Z),e.on("partialMessageOutputDone",D),e.on("finished",(()=>{f(!1),b(!1)})),e.on("platformError",(()=>{f(!1),b(!1),s("Something went wrong. You may have hit the max length limit for this conversation, try resetting the chat.")})),e.on("reset",(()=>{S([]),s(""),f(!1),b(!1)}))}(),()=>{e.off("tokenExpired"),e.off("connectionRefused"),e.off("connect"),e.off("disconnect"),e.off("started"),e.off("catchup"),e.off("fullMessageOutput"),e.off("partialMessageOutputDone"),e.off("finished"),e.off("platformError"),e.off("reset"),e.close()}}),[I,D,Z,P,r,T]),(0,N.useEffect)((()=>{const e=C.current;if(e)return e.on("partialMessageOutput",O),()=>{e.off("partialMessageOutput")}}),[O]);const L=!u&&!h&&!v,F=()=>{const e=C.current;e&&L&&(k.length<=0&&_(`/${o}/used_ai_chat`,{headers:{"Content-Type":"application/json"},method:"POST"}),(0,y.j)("Submit AI Message",{content:c}),A(),e.emit("submitMessage",{authorId:a,content:c}),d(""))},A=()=>{const e=document.getElementById("message-list");e&&e.scroll({top:e.scrollHeight})};return e?null:r?N.createElement(Tf,null):E?N.createElement(Zf,null,N.createElement(Ue.Z,{color:"text.secondary"},"AI Chat in CoderPad is currently offline.")):u&&p?N.createElement(Zf,null,N.createElement(on.Z,null)):N.createElement(N.Fragment,null,N.createElement(If,null,k.length>0?N.createElement(Pf,{id:"message-list"},N.createElement(M.Z,null,k.map(((e,t)=>N.createElement(pf,{key:t,role:e.role,content:e.content,authorId:e.authorId,messageId:e.messageId,finishReason:e.finishReason,incomplete:e.incomplete}))),h&&(null===(n=k[k.length-1])||void 0===n?void 0:n.role)!==cf.assistant&&N.createElement(Cf,null),N.createElement(M.Z,{sx:{overflowAnchor:"auto",height:"1px"}}))):N.createElement(vf,null),N.createElement(M.Z,{sx:{display:"flex",flexDirection:"row",justifyContent:"center",marginTop:2}},N.createElement(He.Z,{color:"inherit",variant:"outlined",size:"small",startIcon:N.createElement(Gh.Z,null),sx:{borderColor:"#848587"},disabled:!h,onClick:()=>{const e=C.current;e&&((0,y.j)("Stop AI Response"),e.emit("abortSubmitMessage"))}},"Stop response")),N.createElement(Mf,{variant:"outlined",value:c,multiline:!0,maxRows:6,onChange:e=>d(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(L&&F(),e.preventDefault())},InputProps:{endAdornment:N.createElement(Of,{disabled:!L,onClick:F}),sx:{backgroundColor:"transparent"}},error:""!==l,helperText:null!==l&&void 0!==l?l:""})),k.length>0&&t.current&&(0,j.createPortal)(N.createElement(He.Z,{color:"inherit",variant:"outlined",size:"small",startIcon:N.createElement(Vh.Z,null),sx:{borderColor:"#848587"},onClick:()=>{const e=C.current;e&&((0,y.j)("Reset AI Conversation"),e.emit("reset"))}},"Reset Chat"),t.current))};var Lf=n(33415);function Ff(){return window.location.search.indexOf("instructions")>=0}const Af=(0,Qt.ZP)(Lf.Z,{target:"euaezja0"})({name:"6g24ce",styles:"height:16px;width:16px"}),Rf=({children:e})=>{const t=(0,N.useRef)(null),{slug:n,iioLayout:a}=(0,ue.nT)("slug","iioLayout"),{environment:i}=(0,fe.J$)(),r=(0,N.useCallback)((()=>{if(t.current&&!t.current.closed)t.current.focus(),(0,Mn.Z)(Ai.j.InstructionsWindowRefocus);else{var e;let i="?instructions";a&&(i+="&iio"),t.current=window.open(i,`instructions_${n}`,"location=0"),null===(e=t.current)||void 0===e||e.addEventListener("beforeunload",(()=>t.current=null)),(0,Mn.Z)(Ai.j.InstructionsWindowOpen)}}),[n,a]);(0,N.useEffect)((()=>{null!==i&&void 0!==i&&i.questionId||!t.current||t.current.close()}),[i]);const o=Ff();return N.createElement(M.Z,{pl:.5,sx:e=>({height:`calc(100% - ${e.spacing(5)})`,display:"flex",flexDirection:"column"})},o?null:N.createElement(M.Z,{flex:"none",mt:2,mb:1,ml:2},N.createElement(He.Z,{onClick:r,color:"inherit",variant:"text",size:"small",fullWidth:!1,endIcon:N.createElement(Af,null)},"Open instructions in new window")),e)},Nf=({hidden:e,candidateInstructions:t})=>{const{candidateVisibilitySettings:n,expanded:a,handleExpand:i}=(0,Cd.g)(t),{takeHome:r}=(0,ue.nT)("takeHome"),o=(0,oe.I0)(),l=(0,N.useRef)();(0,N.useEffect)((()=>{if(!(0,s.isEqual)(l.current,n)){const e=n.findLastIndex((e=>e));i(null!==e&&void 0!==e?e:0),o({type:"instructions_added",candidateVisibilitySettings:n}),l.current=n}}),[n,o,i]);const c=(0,N.useCallback)((e=>!r&&(0!==e&&(0!==n.length&&!n[e]))),[n,r]);return e?null:N.createElement(Rf,null,t.map(((n,r)=>c(r)?null:N.createElement(Sd.e,{key:r,expanded:a[r]||!1,handleExpand:()=>i(r)},1===t.length?N.createElement(M.Z,{mt:2}):N.createElement(bd.Z,{expandIcon:N.createElement(fd.Z,null),sx:e=>({minHeight:e.spacing(6),"& .MuiAccordionSummary-content.Mui-expanded":{marginTop:e.spacing(1.5),marginBottom:e.spacing(1.5)},"&.MuiAccordionSummary-root.Mui-expanded":{minHeight:e.spacing(6)}})},N.createElement(Ue.Z,{variant:"body1",sx:{lineHeight:"1.65em"}},"Instructions Part ",r+1)),N.createElement(kd.v,{hidden:e,instructions:n.instructions||""})))))},jf=({hidden:e,candidateInstructions:t})=>{const{candidateVisibilitySettings:n,expanded:a,handleExpand:i}=(0,Cd.g)(t),{environment:r}=(0,fe.J$)(),o=(0,N.useCallback)(((e,t)=>{null!=r&&(0,go.Z)().set(`environmentCandidateInstructions/${r.slug}/${t}`,e)}),[r]);return e?null:N.createElement(Rf,null,t.map(((r,l)=>N.createElement(Sd.e,{key:l,expanded:a[l]||!1,handleExpand:()=>i(l)},1===t.length?N.createElement(M.Z,{mt:2}):N.createElement(bd.Z,{expandIcon:N.createElement(fd.Z,null),sx:e=>({flexDirection:"row-reverse",minHeight:e.spacing(6),"& .MuiAccordionSummary-content":{justifyContent:"space-between",marginLeft:e.spacing(1)},"& .MuiAccordionSummary-content.Mui-expanded":{marginLeft:e.spacing(1),marginTop:e.spacing(1.5),marginBottom:e.spacing(1.5)},"&.MuiAccordionSummary-root.Mui-expanded":{minHeight:e.spacing(6)}})},N.createElement(Ue.Z,{variant:"body1",sx:e=>({lineHeight:"2em",color:n[l]?e.palette.accordion.active:e.palette.accordion.inactive})},"Instructions Part ",l+1),l>0&&N.createElement(jd.Z,null,N.createElement(zr.Z,{label:(n[l]?"Visible":"Not visible")+" to candidate",labelPlacement:"start",sx:e=>({marginBottom:0,color:n[l]?e.palette.accordion.active:e.palette.accordion.inactive}),control:N.createElement(ep.Z,{checked:null!=n[l]&&n[l],onChange:e=>o(e.target.checked,l),size:"small","data-testid":"instructions-visibility-switch",sx:e=>{var t,n,a,i;return{"& .MuiSwitch-switchBase":{"&.Mui-checked":{color:null===(t=e.palette.padSwitch)||void 0===t||null===(n=t.thumb)||void 0===n?void 0:n.color,"& + .MuiSwitch-track":{backgroundColor:null===(a=e.palette.padSwitch)||void 0===a||null===(i=a.track)||void 0===i?void 0:i.color,opacity:1}}}}}})}))),N.createElement(kd.v,{hidden:e,instructions:r.instructions||""})))))};n(23275);const qf=({schemaJson:e,onTableMove:t})=>{const n=(0,Li.Z)(),a=(0,N.useRef)(null);return(0,N.useEffect)((()=>{const n=a.current;if(null!=n&&null!=e){const a={...e,viewport:"centerByTables"};n.schema=a,null!=t&&n.addEventListener("tableMove",t)}return()=>{null!=t&&(null===n||void 0===n||n.removeEventListener("tableMove",t))}}),[t,e]),(0,N.useEffect)((()=>{[["font-family","Roboto Mono"],["color",n.palette.filePane.activeText],["viewer-border-color","dark"===n.palette.mode?"rgba(255,255,255,0.12)":"rgba(0,0,0,0.12)"],["viewer-background-color",n.palette.editor.footer],["table-border-color",n.palette.programOutput.console.background],["table-background-color",n.palette.filePane.background],["relation-color",n.palette.editor.iconStroke],["relation-color-highlight",n.palette.programOutput.console.background],["scrollbar-thumb-background",n.palette.scrollbar.color],["scrollbar-thumb-hover",n.palette.scrollbar.hover],["scrollbar-thumb-active",n.palette.scrollbar.active]].forEach((e=>{document.documentElement.style.setProperty(`--dbv-${e[0]}`,e[1])}))}),[n]),N.createElement("db-viewer",{ref:a,style:{height:"100%"}})};var Bf={mysql:{name:"MySQL",path:"/tmp/mysql/socket/mysqld.sock",exampleSchema:"\nDESCRIBE departments;\n+-------+--------------+------+-----+---------+----------------+\n| Field | Type         | Null | Key | Default | Extra          |\n+-------+--------------+------+-----+---------+----------------+\n| id    | int          | NO   | PRI | NULL    | auto_increment |\n| name  | varchar(255) | YES  |     | NULL    |                |\n+-------+--------------+------+-----+---------+----------------+\nDESCRIBE employees;\n+---------------+--------------+------+-----+---------+----------------+\n| Field         | Type         | Null | Key | Default | Extra          |\n+---------------+--------------+------+-----+---------+----------------+\n| id            | int          | NO   | PRI | NULL    | auto_increment |\n| first_name    | varchar(255) | YES  |     | NULL    |                |\n| last_name     | varchar(255) | YES  |     | NULL    |                |\n| salary        | int          | YES  |     | NULL    |                |\n| department_id | int          | YES  | MUL | NULL    |                |\n+---------------+--------------+------+-----+---------+----------------+\nDESCRIBE employees_projects;\n+-------------+------+------+-----+---------+-------+\n| Field       | Type | Null | Key | Default | Extra |\n+-------------+------+------+-----+---------+-------+\n| project_id  | int  | YES  | MUL | NULL    |       |\n| employee_id | int  | YES  | MUL | NULL    |       |\n+-------------+------+------+-----+---------+-------+\nDESCRIBE projects;\n+------------+--------------+------+-----+---------+----------------+\n| Field      | Type         | Null | Key | Default | Extra          |\n+------------+--------------+------+-----+---------+----------------+\n| id         | int          | NO   | PRI | NULL    | auto_increment |\n| title      | varchar(255) | YES  |     | NULL    |                |\n| start_date | date         | YES  |     | NULL    |                |\n| end_date   | date         | YES  |     | NULL    |                |\n| budget     | int          | YES  |     | NULL    |                |\n+------------+--------------+------+-----+---------+----------------+\n\nWant to use your own custom database in an interview? Go to https://app.coderpad.io/dashboard/databases to get started.\n\n",schemaJson:{tables:[{name:"departments",columns:[{name:"id",type:"int",pk:!0,nn:!0},{name:"name",type:"varchar(255)",pk:!1,nn:!1}]},{name:"projects",columns:[{name:"id",type:"int",pk:!0,nn:!0},{name:"title",type:"varchar(255)",pk:!1,nn:!1},{name:"start_date",type:"date",pk:!1,nn:!1},{name:"end_date",type:"date",pk:!1,nn:!1},{name:"budget",type:"int",pk:!1,nn:!1}]},{name:"employees",columns:[{name:"id",type:"int",pk:!0,nn:!0},{name:"first_name",type:"varchar(255)",pk:!1,nn:!1},{name:"last_name",type:"varchar(255)",pk:!1,nn:!1},{name:"salary",type:"int",pk:!1,nn:!1},{name:"department_id",type:"int",pk:!1,nn:!1,fk:{table:"departments",column:"id"}}]},{name:"employees_projects",columns:[{name:"project_id",type:"int",pk:!1,nn:!1,fk:{table:"projects",column:"id"}},{name:"employee_id",type:"int",pk:!1,nn:!1,fk:{table:"employees",column:"id"}}]}],arrangement:"spiral"}},postgresql:{name:"PostgreSQL",path:"/tmp/postgresql/socket",exampleSchema:'\n           Table "public.employees_projects"\n   Column    |  Type   | Collation | Nullable | Default\n-------------+---------+-----------+----------+---------\n project_id  | integer |           |          |\n employee_id | integer |           |          |\nForeign-key constraints:\n    "employees_projects_employee_id_fkey" FOREIGN KEY (employee_id) REFERENCES employees(id)\n    "employees_projects_project_id_fkey" FOREIGN KEY (project_id) REFERENCES projects(id)\n\n                                      Table "public.projects"\n   Column   |          Type          | Collation | Nullable |               Default\n------------+------------------------+-----------+----------+--------------------------------------\n id         | integer                |           | not null | nextval(\'projects_id_seq\'::regclass)\n title      | character varying(255) |           |          |\n start_date | date                   |           |          |\n end_date   | date                   |           |          |\n budget     | integer                |           |          |\nIndexes:\n    "projects_pkey" PRIMARY KEY, btree (id)\nReferenced by:\n    TABLE "employees_projects" CONSTRAINT "employees_projects_project_id_fkey" FOREIGN KEY (project_id) REFERENCES projects(id)\n\n                                    Table "public.departments"\n Column |          Type          | Collation | Nullable |                 Default\n--------+------------------------+-----------+----------+-----------------------------------------\n id     | integer                |           | not null | nextval(\'departments_id_seq\'::regclass)\n name   | character varying(255) |           |          |\nIndexes:\n    "departments_pkey" PRIMARY KEY, btree (id)\nReferenced by:\n    TABLE "employees" CONSTRAINT "employees_department_id_fkey" FOREIGN KEY (department_id) REFERENCES departments(id)\n\n                                       Table "public.employees"\n    Column     |          Type          | Collation | Nullable |                Default\n---------------+------------------------+-----------+----------+---------------------------------------\n id            | integer                |           | not null | nextval(\'employees_id_seq\'::regclass)\n first_name    | character varying(255) |           |          |\n last_name     | character varying(255) |           |          |\n salary        | integer                |           |          |\n department_id | integer                |           |          |\nIndexes:\n    "employees_pkey" PRIMARY KEY, btree (id)\nForeign-key constraints:\n    "employees_department_id_fkey" FOREIGN KEY (department_id) REFERENCES departments(id)\nReferenced by:\n    TABLE "employees_projects" CONSTRAINT "employees_projects_employee_id_fkey" FOREIGN KEY (employee_id) REFERENCES employees(id)\n\nWant to use your own custom database in an interview? Go to https://app.coderpad.io/dashboard/databases to get started.\n\n',schemaJson:{tables:[{name:"departments",columns:[{name:"id",type:"integer",pk:!0,nn:!0},{name:"name",type:"character varying(255)",pk:!1,nn:!1}]},{name:"projects",columns:[{name:"id",type:"integer",pk:!0,nn:!0},{name:"title",type:"character varying(255)",pk:!1,nn:!1},{name:"start_date",type:"date",pk:!1,nn:!1},{name:"end_date",type:"date",pk:!1,nn:!1},{name:"budget",type:"integer",pk:!1,nn:!1}]},{name:"employees",columns:[{name:"id",type:"integer",pk:!0,nn:!0},{name:"first_name",type:"character varying(255)",pk:!1,nn:!1},{name:"last_name",type:"character varying(255)",pk:!1,nn:!1},{name:"salary",type:"integer",pk:!1,nn:!1},{name:"department_id",type:"integer",pk:!1,nn:!1,fk:{table:"departments",column:"id"}}]},{name:"employees_projects",columns:[{name:"project_id",type:"integer",pk:!1,nn:!1,fk:{table:"projects",column:"id"}},{name:"employee_id",type:"integer",pk:!1,nn:!1,fk:{table:"employees",column:"id"}}]}],arrangement:"spiral"}}};let zf=function(e){return e.Explorer="explorer",e.Raw="raw",e}({});const $f=({hidden:e})=>{var t,n,a;const i=(0,oe.I0)(),{projectTemplate:r}=(0,fe.J$)(),o=(0,oe.v9)(Ve.p7)||(null===r||void 0===r||null===(t=r.settings)||void 0===t?void 0:t.databaseAllowed),{customDatabaseId:l,customDatabaseLanguage:s,customDatabaseSchema:d,customDatabaseSchemaJson:u,language:m}=(0,oe.v9)(Ve.f6),p=(0,oe.v9)(Ve.aB),g=(0,oe.v9)(Ve.s8),h=c().pickBy(p,(e=>e.database_allowed)),f="mysql"===m||"postgresql"===m,v=(0,N.useMemo)((()=>{return d||(s&&!l?null===(e=Bf[s])||void 0===e?void 0:e.exampleSchema:f?null===(t=Bf[m])||void 0===t?void 0:t.exampleSchema:"");var e,t}),[d,s,l,f,m]),b=(0,N.useMemo)((()=>{return null==u&&f?Bf[m].schemaJson:null==u&&null==l&&s?null===(e=Bf[s])||void 0===e?void 0:e.schemaJson:u;var e}),[l,s,u,f,m]),y=null===(n=Bf[s])||void 0===n?void 0:n.path,E=null===(a=Bf[s])||void 0===a?void 0:a.name,[w,k]=(0,N.useState)(zf.Explorer);return(0,N.useEffect)((()=>{k(null==b?zf.Raw:zf.Explorer)}),[b]),N.createElement("div",{className:ke()({hidden:e,DatabaseTab:!0}),style:{display:"flex",flexDirection:"column"}},o&&!e?N.createElement(N.Fragment,null,N.createElement("div",{className:"DatabaseTab-header"},"A ",E," database is available to your program.",y&&N.createElement(N.Fragment,null,N.createElement("span",null," Your code can connect to it at this socket: "),N.createElement("pre",{className:"DatabaseTab-databasePath"},y)),N.createElement("p",null,"Database state persists across code runs. To reset the state, press Reset or change the language.")),null!=b&&N.createElement("div",null,N.createElement(Vt.Z,{direction:"row",spacing:1,alignItems:"center"},N.createElement(Ue.Z,null,"Schema:"),N.createElement(Ue.Z,null,"Raw"),N.createElement(ep.Z,{checked:w===zf.Explorer,onChange:()=>k(w===zf.Raw?zf.Explorer:zf.Raw)}),N.createElement(Ue.Z,null,"Explorer"))),null==b||w===zf.Raw?N.createElement("div",{className:"DatabaseTab-schema"},N.createElement("pre",null,v||"The schema is temporarily unavailable. You may still be able to access the database by writing code.")):w===zf.Explorer?N.createElement("div",{style:{flexGrow:2,height:"200px",width:"100%"}},N.createElement(qf,{schemaJson:b})):null):N.createElement("div",{className:"DatabaseTab-header"},"A ",E," database exists but the current language does not support it. To access it, please change to one of these languages:",N.createElement("ul",null,c().sortBy(Object.values(h),(e=>e.display)).map((({display:e,name:t})=>N.createElement("li",{key:t,className:"DatabaseTab-languageButton",onClick:()=>{i(Ea("language",t,{userId:g,_analytics:{name:"Language Changed (DatabaseTab)",params:{to_language:t}}}))}},e))))))},Hf=({hidden:e})=>{const t=(0,oe.v9)(Ve.gJ),n=N.createRef(),{darkColorScheme:a,keymap:i}=(0,oe.v9)(Ve.Mg),r=(0,N.useRef)(),o=(0,oe.v9)((e=>e.tabs.customFileSelected)),[s,c]=(0,N.useState)(!1),[d,u]=(0,N.useState)(""),[m,p]=(0,N.useState)(!1),g=(0,un.i)(),h=(0,N.useRef)(null);(0,N.useEffect)((()=>{var e;null!=n.current&&null==r.current&&(r.current=l().fromTextArea(n.current,{mode:null!==(e=null===o||void 0===o?void 0:o.mimeType)&&void 0!==e?e:"text/plain",lineNumbers:!0,lineWrapping:!0,styleActiveLine:!1,autofocus:!1,readOnly:!0}));null!=r.current&&(r.current.setOption("theme",a?"monokai":"one-light"),r.current.setOption("keyMap",i),r.current.refresh())}),[n,a,i]),(0,N.useEffect)((()=>{if(p(!1),null==o)return;if(u(`/home/coderpad/data/${o.filename}`),null==r.current)return;r.current.setValue("");const e=ge.Z.isSandbox?`/sandbox/download_custom_file?question_id=${t}&file_id=${o.id}`:`/${ge.Z.slug}/download_custom_file?question_id=${t}&file_id=${o.id}`;if(null!=o.mimeType&&o.mimeType.includes("image")||null!=o.filename.toLowerCase().match(/\.(png|jpg|jpeg|gif|bmp)$/)){const t=new XMLHttpRequest;t.open("GET",e,!0),t.responseType="arraybuffer",t.onload=()=>{const e=new Blob([t.response]),n=URL.createObjectURL(e);var a;null!=h.current&&null!=r.current&&(null===(a=h.current.firstElementChild)||void 0===a||a.setAttribute("src",n),p(!0),r.current.addWidget({line:0,ch:0},h.current,!1))},t.send()}else g(e,{method:"get"}).then((e=>{if(e.ok)return e.text();throw new Error})).then((e=>{null!=r.current&&r.current.setValue(e)})).catch((()=>{null!=r.current&&r.current.setValue("Error: Couldn't retrieve the file for display. You may still be able to access the file by writing code.")}))}),[r,o,t]);return N.createElement(M.Z,{className:ke()({hidden:e,FilesTab:Hf})},null!=o&&N.createElement("div",{className:"FilesTab-fileHeader"},"This file is available to your program. Its path is:",N.createElement("span",{className:"FilesTab-filePath"},d,N.createElement(Te,{type:"regular",darkBg:a,className:"FilesTab-filePath-copyButton",onClick:()=>{navigator.clipboard.writeText(d),c(!0),setTimeout((()=>c(!1)),2e3)}},s?"Copied!":"Copy"))),N.createElement("div",{className:"FilesTab-codeMirrorWrapper"},N.createElement("textarea",{ref:n})),N.createElement(M.Z,{ref:h,mt:-3,sx:{display:m?"block":"none"}},N.createElement("img",{src:"",style:{maxWidth:"90%",maxHeight:"600px"}})))};const Uf=(0,Qt.ZP)(Fu.x4,{target:"e15rh1z00"})({name:"1a8fbvb",styles:"flex:1;padding:0;height:100%;overflow:hidden"}),Qf=()=>{const{activeTab:e,visibleTabs:t}=(0,oe.v9)((e=>e.tabs)),{isOwner:n,isPlayback:a}=(0,ue.nT)("isOwner","isPlayback"),i=(0,xf.h)(),r=t.ai||a&&i.length>0,o=(0,N.useRef)(null);return N.createElement(M.Z,{display:"flex",flexDirection:"column",height:"100%",overflow:"hidden",boxSizing:"border-box",color:"inherit"},N.createElement(wu.c,{value:{size:"small",value:e}},N.createElement(Uh,{ref:o}),N.createElement(wu.c,{value:{size:"small",value:"requestClient"===e?"output":e}},t.drawing&&N.createElement(Uf,{value:"drawing",unmountOnHidden:!0},N.createElement(Lg,{hidden:"drawing"!==e,width:"100%"})),t.tests&&N.createElement(Uf,{value:"tests",unmountOnHidden:!1},N.createElement(Mh,{hidden:"tests"!==e})),t.output&&N.createElement(Uf,{value:"output",unmountOnHidden:!1},N.createElement(Ph,{hidden:"output"!==e&&"requestClient"!==e,buttonRef:o})),t.database&&N.createElement(Uf,{value:"database",unmountOnHidden:!1},N.createElement($f,{hidden:"database"!==e})),t.files&&N.createElement(Uf,{value:"files",unmountOnHidden:!1},N.createElement(Hf,{hidden:"files"!==e})),t.candidateInfo&&(n?N.createElement(Uf,{value:"candidateInfo",unmountOnHidden:!1},N.createElement(Gf,{hidden:"candidateInfo"!==e})):N.createElement(Uf,{value:"candidateInfo",unmountOnHidden:!1},N.createElement(Wf,{hidden:"candidateInfo"!==e}))),t.report&&N.createElement(Uf,{value:"report",unmountOnHidden:!1},N.createElement(nh,{hidden:"report"!==e})),t.notes&&N.createElement(Uf,{value:"notes",unmountOnHidden:!1,sx:{padding:"0 16px"}},N.createElement(eh,{hidden:"notes"!==e})),t.solution&&N.createElement(Uf,{value:"solution",unmountOnHidden:!1},N.createElement(Yf,{hidden:"solution"!==e})),r&&N.createElement(Uf,{value:"ai",unmountOnHidden:!1},N.createElement(Df,{hidden:"ai"!==e,buttonRef:o})),t.transcript&&N.createElement(Uf,{value:"transcript",unmountOnHidden:!1},N.createElement(Nh,{hidden:"transcript"!==e})))))};function Vf(e){return{candidateInstructions:e.question.candidateInstructions}}const Wf=(0,oe.$j)(Vf)(Nf),Gf=(0,oe.$j)(Vf)(jf);const Yf=(0,oe.$j)((function(e){return{solution:e.question.solution}}))((({solution:e,hidden:t})=>N.createElement(Ih,{hidden:t},N.createElement(ih.Z,{value:e,hidden:t}))));const Kf=(0,Qt.ZP)("div",{target:"e66w4cb0"})({name:"1rbo9oj",styles:"position:absolute;top:-53px;height:calc(100% + 53px);left:0;right:0"}),Jf=({handleOpenDrawingMode:e})=>{var t;const n=(0,oe.v9)(Ve.YX),{activeEnvironment:a,ready:i,setSandboxExecutionEnvironment:r,isExecPossible:o,environments:l}=(0,ve.od)(),{hasEnvironments:s,isPlayback:c}=(0,ue.nT)("hasEnvironments","isPlayback"),d=s&&i&&a||!s||0===l.length&&c,u=n&&d,m=null===a||void 0===a||null===(t=a.projectTemplateSlug)||void 0===t?void 0:t.startsWith("jupyter"),p=null!=(null===a||void 0===a?void 0:a.spreadsheet),g=i&&0===l.length&&c,h=(0,N.useMemo)((()=>g?N.createElement(Zu,{id:"no-environments-playback",initialSizePct:40},N.createElement(M.Z,{display:"flex",justifyContent:"center",pt:"80px"},N.createElement(Oi.Z,{severity:"warning"},"No code playback is available; all code environments were deleted before this pad was ended."))):p?N.createElement(Zu,{id:"projectOutput-spreadsheet",initialSizePct:70,minSize:150},N.createElement(xd.L,{spreadsheetId:a.spreadsheet})):m?N.createElement(Zu,{id:"projectOutput-jupyter",initialSizePct:70,minSize:150},N.createElement(Kf,null,N.createElement(Ip,{hidden:!1}))):N.createElement(Zu,{id:"editor",minSize:150},s?N.createElement(Og,null):N.createElement(dg,{handleOpenDrawingMode:e}))),[null===a||void 0===a?void 0:a.spreadsheet,g,e,s,p,m]);return N.createElement(Lu,{orientation:"x"},N.createElement(Zu,{id:"file-explorer",hidden:!(null!==a&&void 0!==a&&a.allowMultipleFiles),initialSizePct:15},N.createElement(Dg,null)),N.createElement(Zu,{id:"editor-and-output"},d?N.createElement(Lu,{orientation:"x"},h,u?N.createElement(Zu,{id:"right-pane",minSize:150},o?N.createElement(Qf,null):N.createElement(M.Z,{display:"flex",justifyContent:"center",pt:"80px"},N.createElement("div",null,N.createElement(Ue.Z,{variant:"h2",sx:{color:"text.primary"}},"Click to activate execution for this environment!"),N.createElement(M.Z,{display:"flex",justifyContent:"center",mt:"24px"},N.createElement(He.Z,{variant:"contained",color:"primary",onClick:()=>a&&r(a.slug)},"Activate Execution"))))):null):null))};const Xf=(0,Qt.ZP)("div",{target:"ejo0zfp0"})({name:"1rbo9oj",styles:"position:absolute;top:-53px;height:calc(100% + 53px);left:0;right:0"}),ev=({handleOpenDrawingMode:e})=>{var t;const n=(0,oe.v9)(Ve.YX),{activeEnvironment:a,ready:i,setSandboxExecutionEnvironment:r,isExecPossible:o,environments:l}=(0,ve.od)(),{hasEnvironments:s,isPlayback:c}=(0,ue.nT)("hasEnvironments","isPlayback"),d=s&&i&&a||!s||0===l.length&&c,u=n&&d,m=null===a||void 0===a||null===(t=a.projectTemplateSlug)||void 0===t?void 0:t.startsWith("jupyter"),p=null!=(null===a||void 0===a?void 0:a.spreadsheet),g=i&&0===l.length&&c,h=(0,N.useMemo)((()=>g?N.createElement(M.Z,{display:"flex",justifyContent:"center",pt:"80px"},N.createElement(Oi.Z,{severity:"warning"},"No code playback is available; all code environments were deleted before this pad was ended.")):p?N.createElement(xd.L,{spreadsheetId:a.spreadsheet}):m?N.createElement(Xf,null,N.createElement(Ip,{hidden:!1})):s?N.createElement(Og,null):N.createElement(dg,{handleOpenDrawingMode:e})),[null===a||void 0===a?void 0:a.spreadsheet,e,s,p,m,g]);return N.createElement(Lu,{orientation:"y",enablePaneSizeTransitions:!!d&&void 0},N.createElement(Zu,{id:"editor-and-explorer"},N.createElement(Lu,{orientation:"x"},N.createElement(Zu,{id:"file-explorer",hidden:!(null!==a&&void 0!==a&&a.allowMultipleFiles),initialSizePct:15},N.createElement(Dg,null)),N.createElement(Zu,{id:"editor"},h))),N.createElement(Zu,{id:"output",hidden:!u,minSize:60},o?N.createElement(Qf,null):N.createElement(M.Z,{display:"flex",justifyContent:"center",pt:"80px"},N.createElement("div",null,N.createElement(Ue.Z,{variant:"h2",sx:{color:"text.primary"}},"Click to activate execution for this environment!"),N.createElement(M.Z,{display:"flex",justifyContent:"center",mt:"24px"},N.createElement(He.Z,{variant:"contained",color:"primary",onClick:()=>a&&r(a.slug)},"Activate Execution"))))))},tv=()=>{Eu();const{focusTimeEnabled:e}=(0,oe.v9)(Ve.f6),{isPlayback:t,takeHome:n,hasEnvironments:a}=(0,ue.nT)("isPlayback","takeHome","hasEnvironments"),i=(0,oe.v9)((e=>e.editorStatus.sentinel));vu();const{closeDrawingPanel:r,handleOpenDrawingMode:o,openDrawingModeNewWindow:l,showDrawingModal:s,drawingModeOpen:c}=function(){const e=(0,oe.I0)(),{iioLayout:t,slug:n}=(0,ue.nT)("iioLayout","slug"),a=(0,N.useRef)(null),i=(0,oe.v9)(Ve.z3),[r,o]=(0,N.useState)(!1),l=i&&!r,s=(0,N.useCallback)((()=>{o(!1),e({type:"drawing_mode_toggled",isOpen:!1}),(0,Mn.Z)(ln.j.DrawingModeModalClose)}),[e]),c=(0,N.useCallback)((()=>{a.current&&!a.current.closed?(a.current.focus(),(0,Mn.Z)(ln.j.DrawingModeWindowRefocus)):i?s():(e({type:"drawing_mode_toggled",isOpen:!0}),(0,Mn.Z)(ln.j.DrawingModeModalOpen))}),[i,s,e]),d=(0,N.useCallback)(((e=Ds,i=Ms,r=0,l=0,c=0)=>{var d;o(!0);let u="?drawing";r&&(u+=`&z=${r}`),l&&c&&(u+=`&x=${l}&y=${c}`),t&&(u+="&iio"),a.current=window.open(u,`drawing_mode_${n}`,`height=${i},width=${e},location=0,noopener=true`),null===(d=a.current)||void 0===d||d.addEventListener("beforeunload",s),(0,Mn.Z)(ln.j.DrawingModeWindowOpen)}),[s,t,n]);return{closeDrawingPanel:s,handleOpenDrawingMode:c,openDrawingModeNewWindow:d,showDrawingModal:l,drawingModeOpen:i}}(),d=(0,Xt.Z)((e=>e.breakpoints.down("md")));(0,N.useEffect)((()=>{e&&r()}),[r,e]);const u=(0,N.useMemo)((()=>a?Ws:N.Fragment),[a]),{ready:m,activeEnvironment:p}=(0,ve.od)(),g=a&&m&&!p,h=(0,N.useMemo)((()=>g&&!t?N.createElement(tu,null):d?N.createElement(ev,{handleOpenDrawingMode:o}):N.createElement(Jf,{handleOpenDrawingMode:o})),[o,g,d,t]);return N.createElement(u,null,N.createElement(fu,{key:i},N.createElement(M.Z,{height:"100%",display:"flex"},a&&N.createElement(M.Z,{flex:"none",height:"100%"},N.createElement(Xd,{handleOpenDrawingMode:o})),N.createElement(M.Z,{sx:{minWidth:0,ml:.25,flex:1}},h),n||t?null:N.createElement(M.Z,{sx:{display:s?"block":"none"}},N.createElement(Ls,{isDrawingEnabled:c,handleClose:r,handleNewWindow:l})))))};function nv(){return nv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},nv.apply(this,arguments)}const av=()=>{var e;const t=(0,oe.v9)(Ve.YX),n=(0,oe.v9)((e=>e.editorSettings.darkColorScheme)),{isPlayback:a,drawingBoardId:i}=(0,ue.nT)("isPlayback","drawingBoardId");return vu(),N.createElement(M.Z,{height:"100%"},N.createElement(fu,null,N.createElement(Lu,{orientation:"x"},N.createElement(Zu,{initialSizePct:75,minSize:500,id:"left-pane"},a?N.createElement(wd.P,{drawingBoardId:i,darkColorScheme:n}):N.createElement(Ps.nN,nv({authorId:null===(e=window.padConfig)||void 0===e?void 0:e.firebaseAuthorId},window.padConfig))),t?N.createElement(Zu,{minSize:150,id:"right-pane"},N.createElement(Qf,null)):null),N.createElement(M.Z,{style:{visibility:"hidden"},width:0,height:0,overflow:"hidden"},N.createElement(dg,{width:"0px",handleOpenDrawingMode:()=>null}))))};function iv(){return iv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},iv.apply(this,arguments)}const rv=()=>{var e;return Eu(),N.createElement(N.Fragment,null,N.createElement(M.Z,{className:"DrawingContainer",sx:{height:"100%"}},N.createElement(Ps.nN,iv({authorId:null===(e=window.padConfig)||void 0===e?void 0:e.firebaseAuthorId},window.padConfig))),N.createElement(M.Z,{visibility:"hidden"},N.createElement(dg,{width:"0px",handleOpenDrawingMode:()=>null})))};const ov=(0,Qt.ZP)(M.Z,{target:"evkjb2h0"})({name:"1kzq5ms",styles:"height:100%;width:100%"});function lv(){const{question:e}=(0,fe.J$)(),t=(0,ue.oB)("isOwner");return Eu(),console.log((0,oe.v9)((e=>console.log(e)))),(0,N.useEffect)((()=>{(0,go.Z)().watch("ended",(e=>{e&&window.close()}))}),[]),null==(null===e||void 0===e?void 0:e.candidateInstructions)?null:N.createElement(ov,null,t?N.createElement(jf,{candidateInstructions:e.candidateInstructions,hidden:!1}):N.createElement(Nf,{candidateInstructions:e.candidateInstructions,hidden:!1}))}function sv(){const{fontSize:e}=(0,oe.v9)(Ve.Mg),{focusTimeEnabled:t,language:n,title:a}=(0,oe.v9)(Ve.f6),i=(0,oe.v9)((e=>e.userState.showCandidateOverlay)),{isDrawingPad:r}=(0,ue.Il)(),{iioLayout:o,takeHome:l,isPlayback:s,isOwner:c,isQuestionDraftPreview:d,isSandbox:u,slug:m}=(0,ue.nT)("iioLayout","takeHome","isPlayback","isOwner","isQuestionDraftPreview","slug","isSandbox"),p={fontSize:e};(o||d)&&(p.bottom=0);const g=!l&&!s&&window.location.search.indexOf("drawing")>0,h=t&&c,f=Ff(),v=(0,N.useMemo)((()=>g?N.createElement(rv,null):f?N.createElement(lv,null):r?N.createElement(av,null):N.createElement(tv,null)),[g,f,r]),{environment:b}=(0,fe.J$)(),y=(0,N.useMemo)((()=>{var e;const t="development"===window.CoderPad.ENVIRONMENT?"[DEV] ":"";if(u)return t+"Sandbox | CoderPad";const i=r?"Drawing":b?null===b||void 0===b?void 0:b.nameDisplayable:null===(e=window.CoderPad.LANGUAGES[n])||void 0===e?void 0:e.display;return a&&a!==`Untitled Pad - ${m}`?t+a.trim():t+`${i} | CoderPad`}),[n,a,r,u,m,b]);return N.createElement("div",{className:ke()("Workspace",{"is-fullScreenView":g||f}),style:p,"aria-hidden":i},N.createElement(_s,null,y),N.createElement("div",{className:ke()("Workspace-content",{"is-blurred":h})},v),h&&N.createElement(xs,null))}function cv(e,t,n){return t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class dv extends N.Component{constructor(e){super(e),cv(this,"handleCandidateOverlayHide",(()=>{ge.Z.takeHome||R().set(So,"true",{expires:14}),this.props.onCandidateOverlayHide()})),cv(this,"handleExpiredBannerHide",(()=>{this.setState({expiredBannerHidden:!0})})),cv(this,"handleEditorReload",(()=>{this.props.clearEditorError(),(0,y.j)("Banner editor reload clicked")})),this.state={isDrawingShown:!1,expiredBannerHidden:!1}}render(){var e,t;const n=new URLSearchParams(null===(e=location)||void 0===e?void 0:e.search),a=null!==(t=n.get("question_id"))&&void 0!==t?t:void 0,i=n.has("use_question_button"),r=this.props.iioLayout||ge.Z.isQuestionDraftPreview?null:this.props.isPlayback?N.createElement(Br,null):N.createElement(Pi,null),o=new URLSearchParams(window.location.search),l=o.has("drawing")||o.has("instructions");let s,c;this.props.isPlayback||this.props.iioLayout?s=null:null==this.props.username?s=N.createElement(ao,null):this.props.showCandidateOverlay?s=N.createElement(gs,{darkBackground:this.props.darkColorScheme,onHide:this.handleCandidateOverlayHide,hasEnvironments:this.props.hasEnvironments}):l||(s=N.createElement(us,null));let d=!1;if(this.props.isDemoPad&&!this.props.isPlayback)c=N.createElement(Ut,null),d=!0;else if(!this.props.isSandbox||this.props.isLoggedIn||this.props.iioLayout){if(this.props.isExpired)c=N.createElement($t,{onHide:this.handleExpiredBannerHide,visible:!this.state.expiredBannerHidden,warning:!0},"Pads created by free plan users are locked after 4 days. For permanent pads, please"," ",N.createElement("a",{href:"/billing/plans"},"upgrade"),"."),d=!this.state.expiredBannerHidden;else if(!this.props.isSandbox&&this.props.isOwner&&!this.props.isPlayback){const e=window.location.href;c=N.createElement(wo,{onMakePublic:this.props.onMakePublic,visible:this.props.isPadPrivate}),d=this.props.isPadPrivate&&!e.includes("?drawing")}}else c=N.createElement(el,{useQuestionButton:i,questionId:a}),d=!0;const u=N.createElement($t,{onHide:this.props.clearEditorError,visible:this.props.hasEditorError,warning:!0},N.createElement("span",null,"Your editor is out of sync. Click to reload the editor."),N.createElement(zt,{onClick:this.handleEditorReload},"Reload Editor")),m=this.props.ccEnabled&&!this.props.callMaximized&&"in_call"===this.props.callStatus;return N.createElement("div",{className:ke()("PadSpace",{hasEditorBanner:this.props.hasEditorError,hasOtherBanner:d})},u,c,m&&N.createElement(Zl,null),N.createElement(sv,null),N.createElement(po,null),N.createElement(dl,null),N.createElement(yl,null),!l&&r,s,this.props.showMultifileModal&&N.createElement(so,null))}}const uv={onCandidateOverlayHide(){return{type:"candidate_overlay_hidden"}},onMakePublic(){return{type:"pad_setting_changed",key:"isPublic",value:!0}},clearEditorError:ko.zW};var mv=(0,oe.$j)((function(e){const{userState:t}=e;return{darkColorScheme:e.editorSettings.darkColorScheme,showCandidateOverlay:t.showCandidateOverlay,showMultifileModal:e.multifile.modalVisible,username:t.uncommittedUsername,isPadPrivate:!e.padSettings.isPublic,hasEditorError:e.editorStatus.hasErrorOccurred,callMaximized:e.call.maximized,ccEnabled:e.call.ccEnabled,callStatus:e.call.status}}),uv)(dv),pv=n(73945),gv=n.n(pv),hv=n(28182),fv=n.n(hv),vv=n(72237),bv=n.n(vv),yv=n(45657),Ev=n.n(yv);function*wv(){yield(0,le.ib)("question_format_and_select_requested",(function*({question:e}){try{const t=CoderPad.LANGUAGES[e.language],n=c().keyBy(t.files,"path")||{},a=yield(0,le.$6)(e.fileContents.map((function*(a){var i;const{path:r,contents:o}=a,l=r===t.global_file_path?e.language:null===(i=n[r])||void 0===i?void 0:i.language,s=yield(0,le.RE)(kv,o,l);return{...a,contents:s}})));yield(0,le.gz)({type:"question_selected_by_local_user",...e,fileContents:a,contents:a[0].contents})}catch(t){F.Tb(new Error("Code formatter error"),{tags:{questionId:e.id},extra:{error:t,question:e}}),yield(0,le.gz)({type:"question_selected_by_local_user",...e})}}))}function kv(e,t){switch(t){case"css":return gv().format(e,{parser:"css",plugins:[Ev()]});case"html":return gv().format(e,{parser:"html",plugins:[bv()]});case"javascript":case"jsx":return gv().format(e,{parser:"babel",plugins:[fv()]});default:return e}}var Sv=n(9084);const Cv=[/\s?Welcome to Node\.js v\d*\.\d*\.\d*\.\s*Type "\.help" for more information\.\s/g];function*xv(){let e=null,t=null;const n={},a=new Map;let i=null;yield(0,le.ib)("pad_setting_changed",(function*({key:e,value:t,remote:n}){!n&&["projectTemplateExecutionType"].includes(e)&&(i=t)})),yield(0,le.ib)("console_created",(function*(n){e=n.term,ge.Z.invisible||(t&&t.close(),t=(0,Sv.GG)((t=>{const n=e.onData(t);return()=>n.dispose()})),yield(0,le.ib)(t,(function*(e){yield(0,le.gz)({type:"console_input_typed",input:e})})))})),yield(0,le.ib)("console_destroyed",(function*(){e=null,t&&t.close(),t=null,a.clear()})),yield(0,le.ib)("term_created",(function*({id:e,term:t}){var a;ge.Z.invisible||(null===(a=n[e])||void 0===a||a.channel.close(),n[e]={term:t,channel:(0,Sv.GG)((e=>{const n=t.onData(e);return()=>n.dispose()}))},yield(0,le.ib)(n[e].channel,(function*(t){yield(0,le.gz)({type:"term_input_typed",id:e,input:t})})))})),yield(0,le.ib)("term_destroyed",(function*(e){var t;null===(t=n[e.id])||void 0===t||t.channel.close(),delete n[e.id]})),yield(0,le.ib)("output_reset",(function*(){e&&(e.reset(),e.write("\n\n\n\n"))})),yield(0,le.ib)("execution_platform_errored",(function*({msg:t}){e&&e.write(`\r\n\x1b[48;2;231;76;60m${t}\x1b[0m\r\n`)})),yield(0,le.ib)("term_output_produced",(function*({id:e,output:t}){var a;null===(a=n[e])||void 0===a||a.term.write(t)})),yield(0,le.ib)("service_status",(function*({status:e}){var t,a,r,o;if("starting"===e)null===(t=n.MAIN_PROCESS)||void 0===t||t.term.reset(),null===(a=n.MAIN_PROCESS)||void 0===a||a.term.writeln("RunCommand"!==i?"Starting server...":"Starting service..."),null===(r=n.DEFAULT_SHELL)||void 0===r||r.term.reset(),null===(o=n.DEFAULT_SHELL)||void 0===o||o.term.writeln("Starting shell...");else if("restarting"===e){var l,s;null===(l=n.MAIN_PROCESS)||void 0===l||l.term.reset(),null===(s=n.MAIN_PROCESS)||void 0===s||s.term.writeln("RunCommand"!==i?"Restarting server...":"Restarting service...")}else"stopped"===e&&(yield(0,le.gz)({type:tm.hi.TabSelected,tab:tm.Z2.MainProcess}))})),yield(0,le.rM)((function*(){const t=yield(0,le.ZO)(["execution_started","execution_finished","console_output_produced"]);for(;;){const n=yield(0,le.qn)(t);if("execution_started"==n.type){const{id:t,color:i,msg:r}=n,o=/^(.*) ((ran (\d+|several) lines? of.*)|(ran target .*))/.exec(r);if(e&&o){const[,n,r]=o,l=[parseInt(i.slice(1,3),16),parseInt(i.slice(3,5),16),parseInt(i.slice(5,7),16)].join(";");yield(0,le.PV)([e,e.write],`\r\n\r\n\x1b[38;2;${l}m${n}\x1b[0m ${r}`),a.set(t,{col:e.buffer.active.cursorX-1,row:e.buffer.active.cursorY+e.buffer.active.baseY}),yield(0,le.PV)([e,e.write],"\r\n\r\n")}}else if("execution_finished"==n.type){const{id:t,elapsed:i}=n;if(a.has(t)){const{row:n,col:r}=a.get(t);a.delete(t);const o=` (finished in ${i>1e3?(i/1e3).toFixed(2)+"s":i+"ms"}):`,l=c().get(e.buffer.active.getLine(n),"_line._data");if(!l)continue;for(let e=0;e<o.length;e++)l[3*(r+e)+0]=o.charCodeAt(e)|1<<22;e.refresh(n,n)}}else if(e){const t=c().reduce(Cv,((e,t)=>e.replace(t,"")),n.output);yield(0,le.PV)([e,e.write],t)}else console.warn(`unexpected console output: ${n.output}`)}}))}var _v=n(59347);function*Tv(e){let t=null;yield(0,le.ib)("pad_setting_changed",(function*({key:e,value:t,remote:n,userId:a}){if("language"===e){var i;iu.WP.emit("languageChange",{language:t,fromRemote:!!n});const e=yield(0,le.Ys)(Ve.k_);if(n||!e)return;const a=(null===(i=CoderPad.LANGUAGES[t])||void 0===i?void 0:i.files)||[];for(const t of a){const e=(0,_v.a)(t.path),n=((yield(0,le.Ys)((t=>t.files[e])))||{}).editor;if(!n)continue;n.getValue().trim()||n.setValue(t.example)}}})),yield(0,le.ib)("global_event_active_file",(function*({globalEvent:e}){e.data.file.fileId!==t&&((0,go.Z)().push("globalEvents",e),t=e.data.file.fileId)})),yield(0,le.ib)("question_selected_by_local_user",(function*({append:e,contents:t,fileContents:n,questionId:a,language:i,starterCodeByLanguage:r}){if(iu.WP.emit("questionSelectedByLocalUser",{language:i,contents:t,questionId:a,append:e,starterCodeByLanguage:r}),n){var o;const e=c().keyBy(n,"path")||{},t=(null===(o=CoderPad.LANGUAGES[i])||void 0===o?void 0:o.files)||[];for(const n of t){var l;const t=(0,_v.a)(n.path),a=(null===(l=e[n.path])||void 0===l?void 0:l.contents)||"";(0,go.Z)().firepadHeadless(`files/${t}`).setText(a)}}}))}var Iv=n(22324);let Pv=!1;const Zv=(0,Sv.CE)();var Ov=function(e){return e.Memory="MEMORY",e.Cpu="CPU",e.Network="NETWORK",e.Output="OUTPUT",e.Ttl="TTL",e.Unknown="UNKNOWN",e}(Ov||{});function*Mv(e){var t;if(Pv)return;Pv=!0;let n=null;const a=yield(0,le.Ys)(Ve.tV),i=yield(0,le.RE)(Fv,a),r=(0,Iv.o)(ge.Z.slug,JSON.stringify({language:null!==(t=a.language)&&void 0!==t?t:e,firebaseShard:ge.Z.firebaseShard,project:a.projectTemplateSlug,projectTemplateVersion:a.projectTemplateVersion,environmentSlug:a.environmentSlug,padEnded:"ended"===ge.Z.padState,token:i})),o=(0,Sv.GG)((e=>(r.on("reset",(()=>e(["reset"]))),r.on("started",(t=>e(["started",t]))),r.on("output",(t=>e(["output",t]))),r.once("catchup",(t=>{e(["output",t])})),r.on("project/termOutput",(t=>e(["termOutput",t]))),r.on("project/catchupTerms",(t=>t.forEach((t=>e(["termOutput",t]))))),r.on("htmlResult",(t=>e(["htmlResult",t]))),r.on("serviceStatus",(t=>e(["serviceStatus",t]))),r.on("catchupServiceStatus",(t=>e(["serviceStatus",t]))),r.on("finished",(t=>e(["finished",t]))),r.on("stopped",(t=>e(["stopped",t]))),r.on("platformError",(t=>e(["platformError",t]))),r.on("reconnect",(t=>e(["reconnect",t]))),r.on("reconnecting",(t=>e(["reconnecting",t]))),r.on("reconnect_failed",(t=>e(["connection_failed",t]))),r.on("reconnect_error",(t=>e(["connection_failed",t]))),r.on("connect_error",(t=>e(["connection_failed",t]))),r.on("connect_timeout",(t=>e(["connection_failed",t]))),r.on("disconnect",(t=>e(["connection_failed",t]))),r.on("connect",(()=>e(["connection_established"]))),r.on("project/catchupTerm",(t=>e(["termOutput",t]))),r.on("catchupTerm",(t=>{e(["output",t])})),()=>{console.log("oh no. This shouldnt ever happen")})));yield(0,le.ib)(Zv,(function*(e){yield(0,le.gz)(e)})),yield(0,le.ib)("console_catchup",(function*(){r.emit("catchupTerm")})),yield(0,le.ib)("editor_mounted",(function*(e){e.fileId&&"0_global"!==e.fileId||(n=e.editor)})),yield(0,le.ib)(["question_data_loaded","question_selected_by_local_user","environment_question_changed"],(function*(e){const t=yield(0,le.Ys)(Ve.tV),{language:n,projectTemplateSlug:a,projectTemplateVersion:i,environmentId:o,environmentSlug:l,customDatabaseId:s=null,customDatabaseLanguage:d=null,customFiles:u=[],testCasesEnabled:m=!1,spreadsheet:p}={...t,...e};if(m)return;const g="mysql"===n||"postgresql"===n&&!d;g&&null!=o&&(0,go.Z)().set(`environments/${o}/customDatabaseLanguage`,n),yield Lv(r,{language:null!=p?Wt.SQ.GSHEETS:n,project:a,firebaseShard:ge.Z.firebaseShard,customDatabaseId:s,customDatabaseLanguage:g?n:d,customFiles:c().map(u,"id"),projectTemplateVersion:i,environmentSlug:l})})),yield(0,le.ib)("environment_changed",(function*({environment:e}){if(null==e)return;const{language:t,projectTemplateSlug:n,projectTemplateVersion:a,customDatabaseLanguage:i,slug:o,spreadsheet:l}=e;yield Lv(r,{language:null!=l?Wt.SQ.GSHEETS:t,project:n,firebaseShard:ge.Z.firebaseShard,customDatabaseLanguage:i,projectTemplateVersion:a,environmentSlug:o})})),yield(0,le.ib)("pad_setting_changed",(function*({key:e,value:t,remote:n}){if(!["customDatabaseId","customDatabaseLanguage","language","execEnabled","projectTemplateSlug","environmentSlug"].includes(e))return;if(n||(yield Dv()))return;const a=yield(0,le.Ys)(Ve.tV);["html","markdown","plaintext"].includes(a.language)||(yield Lv(r,{...a,firebaseShard:ge.Z.firebaseShard}))})),yield(0,le.ib)("package_changed",(function*({databaseLanguage:e}){if(!e)return;const t=yield(0,le.Ys)(Ve.tV);t.customDatabaseLanguage!==e&&(yield Lv(r,{...t,customDatabaseLanguage:e}))})),yield(0,le.ib)("reset_clicked",(function*(e){(yield Dv())||r.emit("reset")})),yield(0,le.ib)("clear_clicked",(function*(e){(yield Dv())||r.emit("clear")})),yield(0,le.ib)("console_input_typed",(function*({input:e}){(yield Dv())||r.emit("input",e)})),yield(0,le.ib)("term_input_typed",(function*({id:e,input:t}){(yield Dv())||r.emit("project/termInput",{id:e,input:t})})),yield(0,le.ib)("project/request",(function*(e){const{requestConfig:t}=e;r.emit("project/request",t,(e=>{if(null!==e&&void 0!==e&&e.id){var t;Zv.put({type:"project/request_sent",requestId:null!==(t=e.id)&&void 0!==t?t:null})}else{var n;const t=null!==(n=e.message)&&void 0!==n?n:"An unknown error occurred while performing the request.";Zv.put({type:"project/request_error",message:t})}}))})),yield(0,le.ib)("project/abort_request",(function*(e){const{requestId:t}=e;r.emit("project/requestAbort",t,(()=>{}))})),yield(0,le.ib)("run_clicked",(function*(e){var t,a,i,o,l,s,d,u,m,p,g,h,f;if(yield Dv())return;const v=null===(t=e.payload)||void 0===t?void 0:t.runCommand;if(yield(0,le.Ys)((e=>e.execution.running)))return void r.emit("stop");const b=yield(0,le.Ys)((e=>e.padSettings.language)),y=yield(0,le.Ys)((e=>e.padSettings.projectTemplateSlug)),E=yield(0,le.Ys)((e=>e.padSettings.projectTemplateVersion)),w=yield(0,le.Ys)((e=>e.padSettings.environmentSlug)),k=window.CoderPad.LANGUAGES[b];if(k&&!k.execution)return;let S,C;if(null!==(a=e.meta)&&void 0!==a&&a.isEnvironment&&v)console.log("DO RUN COMMAND",v);else if(null!==(i=e.meta)&&void 0!==i&&i.isEnvironment&&null!==(o=e.payload)&&void 0!==o&&o.environment&&null!==(l=e.payload)&&void 0!==l&&l.files){const{environment:t,files:a}=e.payload;if(t.kind===ve.WO.Language&&"html"===t.language)C=yield Promise.all(a.map((e=>new Promise((t=>{const n=(0,go.Z)().firepadHeadless(e.firebasePath);try{n.getText().then((n=>{t({path:`/home/coderpad/${e.name}`,contents:n})}))}finally{n.dispose()}}))))),S=C.find((e=>e.path.endsWith("index.html"))).contents;else if(1===a.length){var x,_;const t=null===(x=n)||void 0===x?void 0:x.getSelection(),i=null===(_=n)||void 0===_?void 0:_.getModel();if(e.payload.selectionOnly&&i&&t&&!t.isEmpty())S=i.getValueInRange(t);else{const e=(0,go.Z)().firepadHeadless(a[0].firebasePath);try{S=yield e.getText()}finally{e.dispose()}}}}else if(k.files&&(yield(0,le.Ys)(Ve.ei))){const e=yield(0,le.Ys)((e=>e.files)),t=Object.values(c().omit(e,"_language")).map((e=>{if(ge.Z.isSandbox)return new Promise((t=>{const n=ou.Fd.Uri.file(e.path.replace("/home/coderpad","/tmp/project")),a=ou.Fd.editor.getModel(n),i=null!=a?a.getValue():"0_global"===e.id?k.multifile_example:k.files.find((t=>t.path===e.path)).example;t({path:e.path,contents:i})}));{const t=e.fileId?`files/${e.fileId}`:"",n=(0,go.Z)().firepadHeadless(t);return new Promise((t=>{n.on("ready",(()=>{n.isHistoryEmpty()?t({path:e.path,contents:k.files.find((t=>t.path===e.path)).example}):n.getText().then((n=>{t({path:e.path,contents:n.trim()})}))}))}))}}));C=yield Promise.all(t),S=C.find((e=>"/home/coderpad/index.html"===e.path)).contents}else S=n.getValue();if((null===(s=e.meta)||void 0===s||!s.isEnvironment)&&!S.trim())return void(yield(0,le.gz)({type:"console_output_produced",output:"\r\nPlease enter some code to compile, first.\r\n"}));const{environmentId:T,customDatabaseLanguage:I}=yield(0,le.Ys)(Ve.tV),{userId:P,userInfo:Z,uncommittedUsername:O}=yield(0,le.Ys)((e=>e.userState));let M="";if(v)M=`${O} ran target \`${v}\`:`;else if(null!==(d=e.meta)&&void 0!==d&&d.isEnvironment&&null!==(u=e.payload)&&void 0!==u&&null!==(m=u.files)&&void 0!==m&&m.length){var D,L,F;const t=(S||"").split("\n").length,n=(null===(D=e.payload)||void 0===D||null===(L=D.files)||void 0===L?void 0:L.length)>1?"several lines":`${t} line${1===t?"":"s"}`;M=`${O} ran ${n} of ${null!==(F=null===k||void 0===k?void 0:k.display)&&void 0!==F?F:"code"}:`}else{var A;const e=(S||"").split("\n").length;M=`${O} ran ${e>=0?`${e}`:"a few"} of ${null!==(A=null===k||void 0===k?void 0:k.display)&&void 0!==A?A:"code"}:`}const R=null!==(p=null===(g=Z[P])||void 0===g?void 0:g.color)&&void 0!==p?p:window.CoderPad.COLORS[0],N=yield(0,le.RE)(Fv,{environmentSlug:w,customDatabaseLanguage:I}),j=new Promise(((e,t)=>{r.emit("execute",{code:S,color:R,files:C,msg:M,language:y?null:k.name,project:y,firebaseShard:ge.Z.firebaseShard,projectTemplateVersion:E,environmentSlug:w,padEnded:"ended"===ge.Z.padState,token:N,runCommand:v},e)})),q=yield j,B=(0,go.Z)();if(q){const e=ge.Z.hasEnvironments?`console/${T}`:"console";B.push(e,{color:R,timestamp:B.TIMESTAMP_SENTINEL,text:M,type:"execution",authorId:P}),B.push(e,{color:R,timestamp:B.TIMESTAMP_SENTINEL,text:q,type:"output",authorId:P})}jt("ran",{username:O,metadata:null!==(h=null!==(f=null===k||void 0===k?void 0:k.name)&&void 0!==f?f:y)&&void 0!==h?h:null}),yield(0,le.gz)({type:"local_user_ran_code"})})),yield(0,le.Fm)("saveFiles",(function*(){r.emit("saveFiles")})),yield(0,le.Fm)("project/restartMainProcess",(function*(){r.emit("project/restartMainProcess")})),yield(0,le.ib)("project/catchupTerm",(function*(e){null!==e&&void 0!==e&&e.id&&r.emit("project/catchupTerm",{id:e.id})})),yield(0,le.ib)(o,(function*([e,t]){if(!(yield Dv()))if("reset"===e)yield(0,le.gz)({type:"output_reset"});else if("started"===e){const{id:e,msg:n,color:a}=t;yield(0,le.gz)({type:"execution_started",id:e,msg:n,color:a})}else if("finished"===e){const{id:e,elapsed:n}=t;yield(0,le.gz)({type:"execution_finished",id:e,elapsed:n})}else if("stopped"===e)yield(0,le.gz)({type:"execution_stopped"});else if("serviceStatus"===e)yield(0,le.gz)({type:"service_status",status:t});else if("platformError"===e){if(yield(0,le.gz)({type:"execution_platform_errored",msg:t.msg}),t.reason===Ov.Unknown){const e=yield(0,le.Ys)(Ve.tV),t=yield(0,le.Ys)(Ve.gJ);(0,Mn.Z)("Pad Execution PlatformError Unknown",{browser:ge.Z.browser,language:e.language,projectTemplateSlug:e.projectTemplateSlug,projectTemplateVersion:e.projectTemplateVersion,questionId:t,customDatabaseId:e.customDatabaseId,customFiles:e.customFiles})}}else if("output"===e)yield(0,le.gz)({type:"console_output_produced",output:t});else if("termOutput"===e)yield(0,le.gz)({type:"term_output_produced",...t});else if("connection_established"===e)yield(0,le.gz)({type:"execution_connected"});else if("reconnect"===e)yield(0,le.gz)({type:"execution_connected"});else if("reconnecting"===e)yield(0,le.gz)({type:"execution_connecting"});else if("connection_failed"===e)if(console.log("error",`Failed connection: ${t}`),"io server disconnect"===t)yield(0,le.gz)({type:"execution_connection_failed_max_clients"});else{yield(0,le.gz)({type:"execution_connection_failed"});const e=yield(0,le.Ys)(Ve.tV),t=yield(0,le.Ys)(Ve.gJ);(0,Mn.Z)("Pad Execution Connection Failed",{browser:ge.Z.browser,language:e.language,projectTemplateSlug:e.projectTemplateSlug,projectTemplateVersion:e.projectTemplateVersion,questionId:t,customDatabaseId:e.customDatabaseId,customFiles:e.customFiles})}else if("htmlResult"===e){const{result:e}=t;e.length>0&&(yield(0,le.gz)({type:"html_processed",content:e,time:Date.now()}))}}))}function*Dv(){return!(yield(0,le.Ys)(Ve.k_))||(yield(0,le.Ys)(Ve.k2))}function*Lv(e,t){const n={...t,firebaseShard:ge.Z.firebaseShard},a=yield(0,le.RE)(Fv,n),i={...n,token:a};e.emit("env",i),e.io.opts.query.initialExecSettings=JSON.stringify(i)}async function Fv(e){var t,n;const a=(null===(t=document.querySelector("[name='csrf-token']"))||void 0===t||null===(n=t.attributes.getNamedItem("content"))||void 0===n?void 0:n.value)||"",i=(0,H.g)(a),r=await i("/custom_resources_auth",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({padSlug:ge.Z.slug,environmentSlug:e.environmentSlug,customDatabaseLanguage:e.customDatabaseLanguage})});return(await r.json()).token}function*Av(){const e=go.Z.findOrInit(),t=e.firepadRef.child("fileIds"),n=e.firepadRef.child("files"),a=(0,Sv.GG)((e=>{const n=t=>{const n=t.val();e(n?["file_added",t.key]:["file_removed",t.key])};return t.on("child_added",n),t.on("child_changed",n),()=>{}}));function*i(e,a=!0){var i;const r=(null===(i=CoderPad.LANGUAGES[e])||void 0===i?void 0:i.files)||[];for(const o of r){const e=(0,_v.a)(o.path);(yield(0,le.Ys)((t=>t.files[e])))||(yield(0,le.gz)({type:"file_added",file:{...o,fileId:e,defaultText:a?o.example:null}}),t.update({[e]:!0}),n.update({[`${e}/path`]:o.path}))}}function r(e){t.update({[e]:!1})}yield(0,le.ib)(a,(function*([e,t]){switch(e){case"file_added":{const e=yield(0,le.Ys)((e=>e.padSettings.language)),n=CoderPad.LANGUAGES[e].files;if(!n)return;const a=t;if(yield(0,le.Ys)((e=>e.files[a])))return;const i=(0,_v.Q)(a),r=c().find(n,["path",i]);yield(0,le.gz)({type:"file_added",file:{...r,fileId:a}});break}case"file_removed":yield(0,le.gz)({type:"file_removed",fileId:t})}})),ge.Z.isSandbox&&!ge.Z.question&&(yield i(ge.Z.lang)),yield(0,le.ib)("pad_setting_changed",(function*({key:e,value:t,remote:n}){if("language"===e){if(n)return;const e=!n;yield i(t,e)}})),yield(0,le.ib)("package_changed",(function*({fileContents:e,language:t,legacySingleFile:n}){const a=yield(0,le.Ys)((e=>e.files));c().each(a,((e,t)=>{"0_global"!==t&&"_language"!==t&&r(t)}))})),yield(0,le.ib)("question_selected_by_local_user",(function*({fileContents:e,language:n,legacySingleFile:a}){var i;if(a&&(yield(0,le.Ys)(Ve.ei))){const e=yield(0,le.Ys)((e=>e.files));c().each(e,((e,t)=>{if("0_global"===t||"_language"===t)return;const n=`files/${t}`,a=(0,go.Z)().firepadHeadless(n);a.on("ready",(()=>{a.setText(""),a.dispose()})),r(t)}))}if(!e)return;const o=c().keyBy(e,"path")||{},l=(null===(i=CoderPad.LANGUAGES[n])||void 0===i?void 0:i.files)||[];for(const r of l){var s;const e=(0,_v.a)(r.path);(yield(0,le.Ys)((t=>t.files[e])))||(yield(0,le.gz)({type:"file_added",file:{...r,defaultText:(null===(s=o[r.path])||void 0===s?void 0:s.contents)||r.example,fileId:e}}),t.child(e).set(!0))}}))}const Rv=(0,Sv.CE)();function*Nv(){let e=!1,t=!1,n=[];yield(0,le.ib)("connection_status_changed",(function*(e){e.isOnline||(t=!0),e.isOnline&&!t||(yield(0,le.gz)((0,fn.GZ)({message:e.isOnline?"Editor syncing connected.":"Editor syncing disconnected. Other people may not see your changes.",key:"firebase_connection_status_msg",autoDismissMs:e.isOnline?2e3:0,variant:e.isOnline?"info":"error"})))})),yield(0,le.ib)("execution_connected",(function*(){e&&(yield(0,le.gz)((0,fn.GZ)({message:"Connected to code execution environment.",key:"execution_connection_msg",autoDismissMs:2e3,variant:"info"})))})),yield(0,le.ib)("execution_connection_failed",(function*(){e=!0,yield(0,le.gz)((0,fn.GZ)({message:"Disconnected from code execution environment. You may not be able to run your code.",key:"execution_connection_msg",autoDismissMs:0,variant:"error"}))})),yield(0,le.ib)("execution_connection_failed_max_clients",(function*(){yield(0,le.gz)((0,fn.GZ)({message:"You cannot run your code or interact with the execution environment because there are too many participants. Please wait for them to leave, then reload the page, or contact support@coderpad.io for assistance.",key:"execution_connection_msg",autoDismissMs:0,variant:"error"}))})),yield(0,le.ib)("user_removed",(function*({userObj:e}){const t=yield(0,le.Ys)(Ve.T1),n=!(yield(0,le.Ys)(Ve.f6)).isPublic;e&&n&&t.isOwner&&!e.isOwner&&e.id!==t.id&&(yield(0,le.gz)((0,fn.GZ)({message:N.createElement(N.Fragment,null,e.name||"Candidate"," has left the pad. Click here to make the pad public so they can re-enter."),key:`userLeft-${e.id}`,variant:"error",classification:"userLeft",onClick:()=>Rv.put(Ea("isPublic",!0))})))})),yield(0,le.ib)(Rv,(function*(e){yield(0,le.gz)(e)})),yield(0,le.ib)("pad_setting_changed",(function*({key:e,value:t,userId:n,previousValue:a}){if("isPublic"===e&&t)yield(0,le.gz)((0,fn.Y_)("userLeft"));else if("language"===e&&t&&null!=a&&"plaintext"!==a){var i,r;const e=(yield(0,le.Ys)(Ve.S8))[n],o=null===(i=CoderPad.LANGUAGES[t])||void 0===i?void 0:i.display,l=null===(r=CoderPad.LANGUAGES[a])||void 0===r?void 0:r.display;let s="";s+=null!==e&&void 0!==e&&e.self?"You switched":"The Pad was switched",s+=` to the ${o} environment.  To view your previous code, switch back to the ${l} environment.`,yield(0,le.gz)((0,fn.GZ)({message:s,key:"languageChange",variant:"info",autoDismissMs:5e3}))}})),yield(0,le.ib)("question_selected_by_local_user",(function*({language:e,padLanguage:t}){if(e!==t){var n,a;const i=`You loaded a question into the ${null===(n=CoderPad.LANGUAGES[e])||void 0===n?void 0:n.display} environment.  To view your previous code, switch back to the ${null===(a=CoderPad.LANGUAGES[t])||void 0===a?void 0:a.display} environment.`;yield(0,le.gz)((0,fn.GZ)({message:i,key:"languageChange",variant:"info",autoDismissMs:5e3}))}})),yield(0,le.ib)("network_quality_video_degraded",(function*(){yield(0,le.gz)((0,fn.GZ)({message:"Try disabling video to improve call quality.",key:"network_quality_changed",variant:"info",classification:"videoQuality"}))})),yield(0,le.ib)("project/request_error",(function*({message:e}){yield(0,le.gz)((0,fn.GZ)({message:e,key:"execute_request_error",variant:"error",autoDismissMs:5e3}))})),yield(0,le.ib)("instructions_added",(function*({candidateVisibilitySettings:e}){let t=!1;t="candidateInfo"!==(yield(0,le.Ys)(Ve.PZ)),(0===n.length||n.filter((e=>e)).length>=e.filter((e=>e)).length)&&(t=!1),n=e,t&&(yield(0,le.gz)((0,fn.GZ)({message:"New instructions are available to you.  Click here to view them.",key:"new_instructions_available",variant:"info",autoDismissMs:5e3,onClick:()=>{Rv.put({type:"tab_selected",tab:"candidateInfo"})}})))}));const a=new Set;yield(0,le.ib)("user_changed",(function*({userObj:e}){const t=yield(0,le.Ys)(Ve.T1),n=yield(0,le.Ys)(Ve.z3),i=a.has(e.userId);!n&&e.userId!==t.id&&e.drawingModeOpen&&!i&&e.name&&(yield(0,le.gz)((0,fn.GZ)({message:`${e.name} has entered drawing mode. Click here to join them.`,key:`userStartedDrawing-${e.userId}`,variant:"info",autoDismissMs:5e3,onClick:()=>{Rv.put({type:"drawing_mode_toggled",isOpen:!0}),(0,Mn.Z)("Drawing Mode Modal Open")}}))),e.drawingModeOpen?a.add(e.userId):a.delete(e.userId)})),yield(0,le.ib)(["invited_to_call","intent_to_start_call_expressed"],(function*(){yield(0,le.gz)((0,fn.NI)("transcription_call_message"))}))}var jv=n(18612);function qv(e={createQuestionFromPadStatus:se.nn()},t){switch(t.type){case"environment_question_changed":case"question_data_loaded":case"question_selected_by_local_user":{const n=t.visibleTestCases||c().filter(t.testCases||[],"visible");return{...e,candidateInstructions:t.candidateInstructions,customFiles:t.customFiles,language:t.language,questionId:t.questionId,testCasesEnabled:t.testCasesEnabled,starterCodeByLanguage:t.starterCodeByLanguage,solution:t.solution,visibleTestCases:n}}case"test_cases_graded":return{...e,visibleTestCaseResults:t.visibleTestCaseResults,codeTestedAt:Date.now()};case"editor_modified":return{...e,codeModifiedAt:Date.now()};case"create_question_from_pad_status":return{...e,createQuestionFromPadStatus:t.payload.status}}return e}function Bv(e){return{type:"create_question_from_pad_status",payload:{status:e}}}const zv=(0,Sv.CE)();function*$v(e){let t=null;yield(0,le.ib)("editor_mounted",(function*(e){e.fileId&&"0_global"!==e.fileId||(t=e.editor)})),yield(0,le.ib)("question_data_loaded",(function*({starterCodeByLanguage:e}){iu.WP.emit("questionDataLoaded",{starterCodeByLanguage:e})})),yield(0,le.ib)(zv,(function*(e){yield(0,le.gz)(e)})),yield(0,le.ib)("create_question_from_pad",(function*(n){if(t){const n=yield(0,le.Ys)((e=>e.padSettings.language));yield(0,le.gz)(Bv(se.V_())),e.mutate({mutation:ot.gql`
            mutation CreateQuestion($input: CreateQuestionInput!) {
              createQuestion(input: $input) {
                question {
                  id
                }
                errors {
                  message
                  path
                }
                message
              }
            }
          `,variables:{input:{questionAttributes:{isDraft:!0,language:n,contents:t.getValue()}}}}).then((({data:e})=>{var t,n,a;null!==(t=e.createQuestion)&&void 0!==t&&null!==(n=t.question)&&void 0!==n&&n.id?(zv.put(Bv(se.Vp())),window.open(`/dashboard/questions/edit/${e.createQuestion.question.id}`)):zv.put(Bv(se.vU((null===e||void 0===e||null===(a=e.createQuestion)||void 0===a?void 0:a.message)||"Unable to create question.")))})).catch((e=>{zv.put(Bv(se.vU("Unable to create question.",e)))}))}}))}function*Hv(){yield(0,le.ib)("candidate_overlay_hidden",Uv),yield(0,le.ib)("logged_in",(function*({username:e}){(yield(0,le.Ys)((e=>e.padSettings.openedAt||e.padSettings.startedAt||e.userState.showCandidateOverlay)))||(yield Uv())}))}function*Uv(){try{const e=yield fetch(`/${window.padConfig.slug}/open_take_home`,{method:"POST"}).then((e=>e.json()));yield(0,le.gz)({type:"pad_setting_changed",key:"openedAt",value:e.opened_at||e.started_at})}catch(e){console.log(e),alert("Couldn't open the pad. Please check your network connection, reload the page and try again."),console.log("error",e)}}var Qv,Vv;const Wv=(null===(Qv=document.querySelector("[name='csrf-token']"))||void 0===Qv||null===(Vv=Qv.attributes.getNamedItem("content"))||void 0===Vv?void 0:Vv.value)||"",Gv=(0,H.g)(Wv);function*Yv(){let e=null,t=0;yield(0,le.ib)("editor_mounted",(function*(t){t.fileId&&"0_global"!==t.fileId||(e=t.editor)})),yield(0,le.ib)("reset_clicked",(function*(){(yield Kv())||(yield(0,le.gz)({type:"output_reset"}))})),yield(0,le.ib)("run_clicked",(function*(n){var a,i,r,o;if(yield Kv())return;if(yield(0,le.Ys)((e=>e.execution.running)))return;let l="";if(null!==(a=n.meta)&&void 0!==a&&a.isEnvironment&&null!==(i=n.payload)&&void 0!==i&&i.environment&&null!==(r=n.payload)&&void 0!==r&&r.files){const{files:e}=n.payload,t=(0,go.Z)().firepadHeadless(e[0].firebasePath);try{l=yield t.getText()}finally{t.dispose()}}else l=e.getValue();const s=e.getValue().split("\n").length,c=null!==s&&void 0!==s?s:"a few";if(!l.trim())return void(yield(0,le.gz)({type:"console_output_produced",output:"\r\nPlease enter some code to compile, first.\r\n"}));const d=null!=(null===n||void 0===n||null===(o=n.payload)||void 0===o?void 0:o.environment)?n.payload.environment.language:yield(0,le.Ys)((e=>e.padSettings.language)),u=CoderPad.LANGUAGES[d];if(!u.test_case_grading)return;const{userId:m,userInfo:p,uncommittedUsername:g}=yield(0,le.Ys)((e=>e.userState)),h=`${"-".repeat(50)}\r\n${g} running tests on ${c} line${c>1?"s":""} of ${u.display}...`,f=`${g} finished running tests:`,v=p[m]&&p[m].color||CoderPad.COLORS[0],b={code:l},y=yield(0,le.Ys)((e=>e.question));b.question_id=y.questionId,b.language=d,n.testCaseIds&&(b.test_case_ids=n.testCaseIds);const E=++t;yield(0,le.gz)({type:"execution_started",id:E,msg:f,color:v});const w=new Promise(((e,t)=>{const n=new URLSearchParams(window.location.search).get("preview");Gv(`/${ge.Z.isSandbox?"sandbox":ge.Z.slug}/grade_test_cases?${n?"preview=true":""}`,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)}).then((e=>{if(e.ok)return e.json();t()})).then((t=>{e(t)}))}));try{var k,S;const e=(0,go.Z)(),t=ge.Z.hasEnvironments&&null!==n&&void 0!==n&&null!==(k=n.payload)&&void 0!==k&&k.environment?`console/${null===n||void 0===n||null===(S=n.payload)||void 0===S?void 0:S.environment.id}`:"console";yield(0,le.gz)({type:"console_output_produced",output:`\r\n${h}\r\n`}),e.push(t,{color:v,timestamp:e.TIMESTAMP_SENTINEL,text:h,type:"execution",authorId:m});const a=yield w;yield(0,le.gz)({type:"console_output_produced",output:`\r\n${f}\r\n`}),yield(0,le.gz)({type:"test_cases_graded",visibleTestCaseResults:a.visible_test_case_results}),yield(0,le.gz)({type:"console_output_produced",output:a.text}),yield(0,le.gz)({type:"execution_finished",id:E}),e.push(t,{color:v,timestamp:e.TIMESTAMP_SENTINEL,text:f,type:"execution",authorId:m}),e.push(t,{color:v,timestamp:e.TIMESTAMP_SENTINEL,text:a.text,type:"output",authorId:m})}catch(C){console.error(C);const e=C.responseJSON&&C.responseJSON.text,t=e?"timeout"===e?"Tests halted for running too long, sorry!":e:"Could not run tests due to a platform error. Sorry about that!";yield(0,le.gz)({type:"execution_platform_errored",msg:t})}jt("ran",{username:g,metadata:u.name}),yield(0,le.gz)({type:"local_user_ran_code"})}))}function*Kv(){return!(yield(0,le.Ys)(Ve.k_))||!(yield(0,le.Ys)(Ve.k2))}let Jv,Xv;const eb=3,tb=3e4;function*nb(){yield(0,le.rM)(ab),yield(0,le.ib)(["intent_to_start_call_expressed","invite_accepted","reconnect_to_call_clicked"],rb),yield(0,le.ib)("device_switched",ob),yield(0,le.ib)("call_join_requested",lb),yield(0,le.ib)("call_canceled",cb),yield(0,le.ib)("call_ended",(function*(){yield(0,le.RE)(cb),yield(0,le.RE)(db),yield(0,le.RE)(ub)})),yield(0,le.ib)("call_dropped",(function*(){Ul.localAudioTrack=null,Ul.localVideoTrack=null,Ul.room=null,yield(0,le.RE)(ub)})),yield(0,le.ib)("mute_clicked",mb),yield(0,le.ib)("focus_time_toggled",pb)}function*ab(){const e=(0,Sv.GG)((e=>((0,go.Z)().watch("twilioRoomId",(t=>e(["room_id",t]))),navigator.mediaDevices&&"function"==typeof navigator.mediaDevices.addEventListener&&navigator.mediaDevices.addEventListener("devicechange",(t=>e(["device_change",t]))),()=>null)));yield(0,le.ib)(e,(function*([e,t]){"room_id"===e?yield(0,le.RE)(ib,t):"device_change"===e&&(yield(0,le.RE)(gb,t))}))}function*ib(e){if(null==e)return;if("no_call"===(yield(0,le.Ys)(Ve.pK)))try{const t=yield fetch(`/${ge.Z.slug}/room_info?room_id=${e}`).then((e=>{if(e.ok)return e.json();throw new Error(`${e.statusText} - ${e.status}`)}));t&&"in-progress"===t.status&&(yield(0,le.gz)({type:"invited_to_call",twilioRoomId:e,_analytics:{name:"Call Invite Received"}}))}catch(t){F.$e((e=>{e.setExtra("callStage","possibly_invited_room_info_lookup"),F.Tb(t)}))}}function*rb(){let e,t;try{const n=yield(0,le.RE)([ei(),ei().createLocalTracks],{audio:!0,video:{facingMode:"user"}});e=n.audioTrack,t=n.videoTrack}catch(n){if("NotAllowedError"===n.name||"PermissionDeniedError"===n.name)return void(yield(0,le.gz)({type:"permissions_denied",_analytics:{name:"Call Setup Failed",params:{reason:"permissions"}}}));try{e=yield(0,le.RE)([ei(),ei().createLocalAudioTrack])}catch(a){return void(yield(0,le.gz)({type:"video_errored",_analytics:{name:"Call Setup Failed",params:{reason:"device_open"}}}))}}Ul.localAudioTrack=e,Ul.localVideoTrack=t,yield(0,le.gz)({type:"local_tracks_created",audioDeviceId:e&&e.mediaStreamTrack.getSettings().deviceId,videoDeviceId:t&&t.mediaStreamTrack.getSettings().deviceId}),yield(0,le.RE)(hb)}function*ob(e){const{kind:t,deviceId:n}=e,a="video"===t?"localVideoTrack":"localAudioTrack";if(Ul[a]&&Ul[a].stop(),Ul[a]=null,"____no_video"!==e.deviceId){let e;try{const a="video"===t?ei().createLocalVideoTrack:ei().createLocalAudioTrack;e=yield(0,le.RE)([ei(),a],{deviceId:{exact:n}})}catch(i){return void("NotAllowedError"===i.name||"PermissionsDeniedError"===i.name?yield(0,le.gz)({type:"permissions_denied"}):yield(0,le.gz)({type:"device_switch_failed",kind:t}))}Ul[a]=e}yield(0,le.gz)({type:"device_switch_succeeded",kind:t,deviceId:n})}function*lb(){const e=yield(0,le.Ys)(Ve.s8),t=yield(0,le.Ys)((e=>e.call.fromInvite));let n,a;try{n=yield fetch(`/${ge.Z.slug}/twilio_token?username=${e}`).then((e=>{if(e.ok)return e.text();throw new Error(`${e.statusText} - ${e.status}`)}))}catch(s){return yield(0,le.gz)({type:"video_errored",errorText:"We couldn't contact CoderPad's servers to set up the call.",_analytics:{name:"Call Join Failed",params:{from_invite:t}}}),yield(0,le.RE)(cb),void F.$e((e=>{e.setExtra("callStage","call_join_requested_twilio_token_lookup"),F.Tb(s)}))}try{a=yield(0,le.RE)([ei(),ei().connect],n,{audio:!1,video:!1,networkQuality:{local:3,remote:3}})}catch(s){return yield(0,le.gz)({type:"video_errored",errorText:"We couldn't establish a connection to Twilio's servers to join the call.",_analytics:{name:"Call Join Failed",params:{from_invite:t}}}),yield(0,le.RE)(cb),void F.$e((e=>{e.setExtra("callStage","call_join_requested_twilio_connect"),F.Tb(s)}))}Ul.room=a,(0,go.Z)().set("/twilioRoomId",a.sid);const[i,r]=yield(0,le.Ys)((e=>[e.call.audioDeviceState,e.call.videoDeviceState]));try{const e=a.localParticipant;"open"===i&&(yield(0,le.RE)([e,e.publishTrack],Ul.localAudioTrack)),"open"===r&&(yield(0,le.RE)([e,e.publishTrack],Ul.localVideoTrack))}catch(s){return yield(0,le.gz)({type:"video_errored",errorText:"We couldn't add your audio and video to the call.",_analytics:{name:"Call Join Failed",params:{from_invite:t}}}),yield(0,le.RE)(cb),yield(0,le.RE)(db),void F.$e((e=>{e.setExtra("callStage","call_join_requested_publish_tracks"),F.Tb(s)}))}Jv&&Jv.close(),Jv=(0,Sv.GG)((e=>{const t=c().mapValues({trackSubscribed:["track","publication","participant"],trackUnsubscribed:["track","publication","participant"],participantConnected:["participant"],participantDisconnected:["participant"],disconnected:["room","error"],dominantSpeakerChanged:["dominantSpeaker"]},((t,n)=>(...a)=>e({eventName:n,...c().zipObject(t,a)})));for(const[i,r]of Object.entries(t))a.on(i,r);const n=(...t)=>e({eventName:"networkQualityLevelChanged",...c().zipObject(["networkQualityLevel","networkQualityStats"],t)});return a.localParticipant.on("networkQualityLevelChanged",n),()=>{for(const[e,n]of Object.entries(t))a.off(e,n);a.off("networkQualityLevel",n)}})),yield(0,le.ib)(Jv,(function*(e){switch(e.eventName){case"trackSubscribed":yield(0,le.gz)({type:"call_track_subscribed",kind:e.track.kind,twilioTrackId:e.track.sid,userId:e.participant.identity});break;case"trackUnsubscribed":yield(0,le.gz)({type:"call_track_unsubscribed",kind:e.track.kind,twilioTrackId:e.track.sid,userId:e.participant.identity});break;case"participantConnected":yield(0,le.gz)({type:"user_joined_call",userId:e.participant.identity,twilioParticipantId:e.participant.sid});break;case"participantDisconnected":yield(0,le.gz)({type:"user_left_call",userId:e.participant.identity,twilioParticipantId:e.participant.sid});break;case"disconnected":"in_call"===(yield(0,le.Ys)(Ve.pK))&&(yield(0,le.gz)({type:"call_dropped"})),yield(0,le.al)(Xv);break;case"dominantSpeakerChanged":break;case"networkQualityLevelChanged":{yield(0,le.gz)({type:"network_quality_level_changed",networkQualityLevel:e.networkQualityLevel,networkQualityStats:e.networkQualityStats});const t=yield(0,le.Ys)((e=>e.call.videoDegraded));!t&&e.networkQualityStats.video.send<eb?Xv=yield(0,le.rM)(sb):!t&&e.networkQualityStats.video.send>=eb&&(yield(0,le.al)(Xv));break}}}));const o={},l=yield(0,le.Ys)(Ve.S8);for(const[c,d]of a.participants)if(Object.hasOwnProperty.call(l,d.identity)){const e=d.audioTracks.values().next().value,t=d.videoTracks.values().next().value;o[d.identity]={participantId:c,audioTrackId:e&&e.track&&e.track.sid,videoTrackId:t&&t.track&&t.track.sid}}yield(0,le.gz)({type:"call_joined",twilioRoomId:a.sid,twilioUsers:o,_analytics:{name:"Call Joined",params:{from_invite:t,other_callers:a.participants.size,with_video:"open"===r}}})}function*sb(){yield(0,le.gw)(tb),yield(0,le.gz)({type:"network_quality_video_degraded"})}function*cb(){Ul.localAudioTrack&&(Ul.localAudioTrack.stop(),Ul.localAudioTrack=null),Ul.localVideoTrack&&(Ul.localVideoTrack.stop(),Ul.localVideoTrack=null)}function*db(){if(Ul.room){for(const e of Ul.room.localParticipant.tracks.values())e.unpublish();Ul.room.disconnect(),Ul.room=null}}function*ub(){Jv&&Jv.close(),Jv=null}function*mb(e){const t="video"===e.kind?Ul.localVideoTrack:Ul.localAudioTrack;t&&(e.enabled?t.enable():t.disable())}function*pb(e){if("focus_time_toggled"===e.type){const t=e.value,n=[];n.push(Ul.localVideoTrack),n.push(Ul.localAudioTrack),n.forEach((e=>{e&&(t?e.disable():e.enable())}))}}function*gb(){"pending"===(yield(0,le.Ys)(Ve.pK))&&(yield(0,le.RE)(hb))}function*hb(){try{const e=yield(0,le.RE)([navigator.mediaDevices,navigator.mediaDevices.enumerateDevices]);yield(0,le.gz)({type:"devices_enumerated",devices:e})}catch(e){yield(0,le.gz)({type:"device_enumerate_failed"}),F.$e((t=>{t.setExtra("callStage","enumerate_devices"),F.Tb(e)}))}}function*fb(){const e=(0,go.Z)(),t=(0,Sv.GG)((t=>{const n=["user_added","user_changed","user_removed",":connected"];for(const a of n)e.on(a,(e=>t([a,e])));return()=>({})}));yield(0,le.ib)(t,(function*([e,t]){const n=yield(0,le.Ys)(Ve.T1);switch(e){case"user_added":yield(0,le.gz)({type:"user_added",userObj:t}),bb("user_added",{...t,local:!n.id||n.id===t.userId});break;case"user_changed":yield(0,le.gz)({type:"user_changed",userObj:t}),bb("user_changed",{...t,local:!n.id||n.id===t.userId});break;case"user_removed":yield(0,le.gz)({type:"user_removed",userId:t.userId,userObj:t}),bb("user_removed",{userId:t.userId,local:!n.id||n.id===t.userId});break;case":connected":yield(0,le.gz)({type:"connection_status_changed",isOnline:t})}})),ge.Z.isLoggedIn&&jt("joined",{username:ge.Z.loginUsername}),yield(0,le.ib)("logged_in",(function*({username:e,email:t}){jt("joined",{username:e,email:t}),vb(e,t)})),yield(0,le.ib)("connection_status_changed",(function*({isOnline:e}){const t=yield(0,le.Ys)(Ve.jl),n=yield(0,le.Ys)(Ve.T);t&&e&&vb(t,n)})),yield(0,le.Ds)(500,"username_edited",(function*({newName:t}){const n=yield(0,le.Ys)(Ve.T1);jt("renamed",{metadata:t,username:n&&n.name}),e.update_user({name:t})})),yield(0,le.ib)("drawing_mode_toggled",(function*({isOpen:t}){e.update_user({drawingModeOpen:t})}))}function vb(e,t){(0,go.Z)().update_user({name:e,email:t,isOwner:ge.Z.isOwner,invisible:ge.Z.invisible})}function bb(e,t){"undefined"!==typeof parent&&parent.postMessage({pluginMessage:{type:e,data:t},pluginId:"1030203787137883430"},"*")}var yb=n(14890);const Eb={status:"no_call",twilioRoomId:null,fromInvite:!1,requestingDevices:!1,enumeratedDevices:[],enumerateFailed:!1,isJoining:!1,audioDeviceId:null,audioDeviceState:"closed",videoDeviceId:null,videoDeviceState:"closed",maximized:!0,ccEnabled:!1,audioMuted:!1,videoMuted:!1,twilioUsers:{},networkQualityLevel:5,networkQualityStats:null,videoDegraded:!1,errorText:null,errorCode:null,mayReconnect:!1,hasConsentedToTranscription:!1};function wb(e=Eb,t){const n=()=>null;switch(t.type){case"invited_to_call":return n(["no_call"]),{...e,status:"invited",twilioRoomId:t.twilioRoomId};case"invite_declined":return n(["invited"]),{...e,status:"no_call"};case"intent_to_start_call_expressed":case"invite_accepted":case"reconnect_to_call_clicked":return n(["no_call","invited","error"]),{...e,status:"pending",audioDeviceId:null,videoDeviceId:null,audioDeviceState:"closed",videoDeviceState:"closed",enumeratedDevices:[],enumerateFailed:!1,fromInvite:"invite_accepted"===t.type,requestingDevices:!0,isJoining:!1};case"local_tracks_created":return n(["pending"]),{...e,audioDeviceId:t.audioDeviceId,audioDeviceState:t.audioDeviceId?"open":"closed",videoDeviceId:t.videoDeviceId,videoDeviceState:t.videoDeviceId?"open":"closed",requestingDevices:!1};case"devices_enumerated":return n(["pending"]),{...e,enumeratedDevices:t.devices,enumerateFailed:!1};case"device_enumerate_failed":return n(["pending"]),{...e,enumerateFailed:!0};case"device_switched":return n(["pending"]),{...e,[t.kind+"DeviceId"]:t.deviceId,[t.kind+"DeviceState"]:"opening"};case"device_switch_succeeded":return n(["pending"]),{...e,[t.kind+"DeviceState"]:"____no_video"===t.deviceId?"closed":"open"};case"device_switch_failed":return n(["pending"]),{...e,[t.kind+"DeviceState"]:"error"};case"call_join_requested":return n(["pending","transcription_consent","error"]),{...e,isJoining:!0};case"call_transcription_consent_requested":return{...e,status:"transcription_consent"};case"call_joined":return n(["pending","transcription_consent","error"]),{...e,status:"in_call",twilioRoomId:t.twilioRoomId,twilioUsers:t.twilioUsers,maximized:!0,audioMuted:!1,videoMuted:!1};case"user_joined_call":return n(["in_call"]),{...e,twilioUsers:{...e.twilioUsers,[t.userId]:{...e.twilioUsers[t.userId],participantId:t.twilioParticipantId}}};case"call_track_subscribed":if(!Object.hasOwnProperty.call(e.twilioUsers,t.userId)){const n=`unexpected call participant identity ${t.userId}`;return F.Tb(new Error(n)),e}return{...e,twilioUsers:{...e.twilioUsers,[t.userId]:{...e.twilioUsers[t.userId],["video"===t.kind?"videoTrackId":"audioTrackId"]:t.twilioTrackId}}};case"call_track_unsubscribed":return Object.hasOwnProperty.call(e.twilioUsers,t.userId)?{...e,twilioUsers:{...e.twilioUsers,[t.userId]:{...e.twilioUsers[t.userId],["video"===t.kind?"videoTrackId":"audioTrackId"]:null}}}:e;case"user_left_call":return{...e,twilioUsers:c().omit(e.twilioUsers,t.userId)};case"call_minimized":return n(["in_call"]),{...e,maximized:!1};case"call_maximized":return n(["in_call"]),{...e,maximized:!0};case"mute_clicked":return{...e,["video"===t.kind?"videoMuted":"audioMuted"]:!t.enabled};case"focus_time_toggled":return{...e,audioMuted:t.value,videoMuted:t.value};case"call_dropped":return n(["in_call"]),{...e,status:"error",errorText:"The call was dropped. Check your internet connection and try again.",errorCode:"call_drop",mayReconnect:!0,isJoining:!1};case"permissions_denied":return n(["pending"]),{...e,status:"error",errorText:"We don't have permission to access your webcam and mic.",errorCode:"no_permission",mayReconnect:!1,isJoining:!1};case"video_errored":return n(["invited","pending","in_call"]),{...e,status:"error",errorText:t.errorText||"Sorry, something went wrong setting up video.",errorCode:"other",mayReconnect:!1,isJoining:!1};case"call_canceled":case"call_ended":case"call_error_dismissed":return n(["pending","in_call","error"]),{...e,status:"no_call",hasConsentedToTranscription:!1};case"network_quality_level_changed":return n(["in_call"]),{...e,networkQualityLevel:t.networkQualityLevel,networkQualityStats:t.networkQualityStats};case"network_quality_video_degraded":return n(["in_call"]),{...e,videoDegraded:!0};case"user_consented_to_transcription":return{...e,hasConsentedToTranscription:!0};case"toggle_cc":return n(["in_call"]),{...e,ccEnabled:!e.ccEnabled}}return e}var kb=n(79180),Sb=n.n(kb);const Cb={htmlErrors:[],lastExecutionId:null,markdown:null,processedHtml:null,processedHtmlTimestamp:0,running:!1,connectionStatus:"CONNECTED",lastSentRequestId:null};function xb(e=Cb,t){switch(t.type){case"markdown_content_changed":return{...e,markdown:t.content};case"html_processed":return{...e,processedHtml:t.content,processedHtmlTimestamp:t.time,htmlErrors:[],running:!1};case"output_reset":return{...e,processedHtml:null,processedHtmlTimestamp:0,htmlErrors:[],running:!1};case"pad_setting_changed":if("language"===t.key)return{...e,markdown:null,processedHtml:null,htmlErrors:[],running:!1};break;case"html_iframe_errored":{const i=t.error;let r=null;try{n=i,r=Sb().parse(n).map((e=>c().pick(e,["functionName","args","fileName","lineNumber","columnNumber","isEval","isNative"])))}catch(a){}return{...e,htmlErrors:[...e.htmlErrors,{name:i.name,message:i.message,parsedStack:r,key:"e"+ ++_b}]}}case"html_errors_cleared":return{...e,htmlErrors:[]};case"execution_started":return{...e,running:!0,lastExecutionId:t.id};case"execution_finished":if(t.id!==e.lastExecutionId)break;return{...e,running:!1};case"execution_stopped":case"execution_platform_errored":return{...e,running:!1};case"execution_connected":return{...e,connectionStatus:"CONNECTED"};case"execution_connecting":return{...e,connectionStatus:"CONNECTING"};case"execution_connection_failed":return{...e,connectionStatus:"FAILED"};case"project/request_sent":return{...e,lastSentRequestId:t.requestId}}var n;return e}let _b=0;function Tb(e=function(){var e,t;return{_language:ge.Z.lang,"0_global":{id:"0_global",editor:null,path:null===(e=CoderPad.LANGUAGES[ge.Z.lang])||void 0===e?void 0:e.global_file_path,label:null===(t=CoderPad.LANGUAGES[ge.Z.lang])||void 0===t?void 0:t.global_file_label,language:ge.Z.lang,users:{}}}}(),t){switch(t.type){case"editor_mounted":{const n=t.fileId||"0_global";return{...e,[n]:{...e[n],editor:t.editor}}}case"file_added":return function(e){var t;const n={...e},a=null===(t=CoderPad.LANGUAGES[e._language])||void 0===t?void 0:t.files;return c().each(a,(e=>{const t=(0,_v.a)(e.path),a=n[t];a&&(delete n[t],n[t]=a)})),n}({...e,[t.file.fileId]:t.file});case"file_removed":{if(!e[t.fileId])return e;const n={...e};return delete n[t.fileId],n}case"pad_setting_changed":if("language"===t.key)return Ib(e,t.value);break;case"question_selected_by_local_user":return t.language?Ib(e,t.language):e;case"file_user_cursor_updated":{const[n,a]=t.eventArgs,{displayLine:i}=t,r=c().mapValues(e,(e=>({...e,users:c().omit(e.users,n)})));return r[t.fileId].users[n]={color:a,displayLine:i},r}}return e}function Ib(e,t){const{global_file_label:n,global_file_path:a}=CoderPad.LANGUAGES[t];return{...e,_language:t,"0_global":{...e["0_global"]||{},label:n,language:t,path:a}}}const Pb={lines:[],language:null};function Zb(e=Pb,t){return"code_copied"===t.type?{lines:t.lines,language:t.language}:e}const Ob=8,Mb={frames:[],frameIndex:0,frameLength:0,frameDelay:120,playing:!1,playbackSpeed:1,trackedUserId:void 0,globalEvents:{},fastforward:!1};function Db(e=Mb,t){switch(t.type){case"playback_global_events_history_received":{const n=t.globalEvents;return{...e,globalEvents:n}}case"playback_set_frames":return{...e,frames:t.frames,frameLength:(t.frames||[]).length};case"playback_track_user":return{...e,trackedUserId:t.userId};case"playback_advance_frame":return e.frames&&e.frameIndex<e.frameLength-1?{...e,frameDelay:t.frameDelay,frameIndex:e.frameIndex+1}:{...e,playing:!1};case"playback_seek_to_frame":if(e.frames&&t.index>=0&&t.index<e.frameLength)return{...e,frameIndex:t.index};break;case"playback_seek_to_time":if(e.frames&&e.frames.length>1){const n=e.frames[1].timestamp;let a=1;for(;a<e.frames.length&&!(n+t.ms<e.frames[a].timestamp);a++);return{...e,frameIndex:a-1}}break;case"playback_play":if(e.frames&&e.frameLength>1)return{...e,playing:!0};break;case"playback_pause":return{...e,playing:!1};case"playback_speed_shifted":return{...e,playbackSpeed:e.playbackSpeed>=Ob?1:2*e.playbackSpeed};case"set_playback_speed":return{...e,playbackSpeed:t.speed<=Ob?t.speed:Ob};case"playback_fastforward_start":return{...e,fastforward:!0};case"playback_fastforward_stop":return{...e,fastforward:!1};case"playback_rewound_ms":if(e.frames&&e.frames.length>1){const n=e.frames[e.frameIndex].timestamp-t.ms;let a=e.frameIndex;for(;a>1&&e.frames[a].timestamp>=n;)a--;return{...e,frameIndex:a}}}return e}const Lb={autoSave:!0,saving:!1,runTargets:{}},Fb=(e=Lb,t)=>{switch(t.type){case"project/updateAutoSave":return{...e,autoSave:t.value};case"project/updated":return{...e,autoSave:t.value.autoSave,saving:t.value.saving};case"project/updateCpadConfiguration":return{...e,runTargets:t.value.targets};default:return e}},Ab=yb.qC,Rb=e=>e=>t=>{t._analytics&&(0,Mn.Z)(t._analytics.name,t._analytics.params),e(t)};var Nb,jb,qb=n(19755);const Bb=(null===(Nb=document.querySelector("[name='csrf-token']"))||void 0===Nb||null===(jb=Nb.attributes.getNamedItem("content"))||void 0===jb?void 0:jb.value)||"",zb=(0,H.g)(Bb),$b=(0,z.Zz)(Nt,!0),Hb=(0,B.K)();n.g.QuestionLibrary=Ot,n.g.$=m(),window.padConfig?function(){var e,t,n,a,i;F.e((e=>{e.setExtra("padCreatedAt",ge.Z.padCreatedAt)}));const r=(ge.Z.firebaseAuthorId||Date.now().toString().substr(5)).toString();let o=new Date;const d=ge.Z.lang,u={[r]:{}},m=ge.Z.username||R().get(`pad_${ge.Z.slug}_username`)||(ge.Z.isSandbox?"Guest":null);if(ge.Z.isSandbox){u[r]={id:r,self:!0,name:m,isOwner:!1,color:"#268bd2",isOnline:!0};const e={id:"503601265271397",self:!1,name:"Candidate",color:"#dc322f",isOwner:!1,isOnline:!0};u[e.id]=e}const p=!ge.Z.title&&ge.Z.isSandbox&&(ge.Z.sandboxModal||ge.Z.sandboxView)?"Pad Title: Candidate Name":ge.Z.title,g=!ge.Z.iioLayout&&!ge.Z.isSandbox&&(ge.Z.takeHome?!ge.Z.isOwner&&!ge.Z.padOpenedAt&&!ge.Z.padStartedAt:!ge.Z.isLoggedIn&&!R().get(So));let h=c().mapKeys(T.g(),((e,t)=>c().camelCase(t)));ge.Z.intellisenseDisabledByOrganization&&(h.autocomplete=!1);const f=function(e){const t=(0,Sv.ZP)({onError:function(e,{sagaStack:t}){console.error("Error in saga:",e,t),F.Tb(e)}});return{...(0,yb.MT)((0,yb.UY)({call:wb,editorSettings:ba,execution:xb,files:Tb,lastCopy:Zb,multifile:Lt,padSettings:ya,playbackHistory:Db,question:qv,tabs:ll.ZP,projectTabs:tm.$W,project:Fb,userState:xo,notifications:fn.ZP,editorStatus:ko.ZP}),e,Ab((0,yb.md)(Rb,t))),runSaga:t.run}}({editorSettings:h,padSettings:{takeHome:ge.Z.takeHome,takeHomeTimeLimit:ge.Z.takeHomeTimeLimit,publicTakeHome:ge.Z.publicTakeHome,publicTakeHomeThreshold:ge.Z.publicTakeHomeThreshold,execEnabled:ge.Z.execEnabled,isPublic:ge.Z.isPublic,openedAt:ge.Z.padOpenedAt,startedAt:ge.Z.padStartedAt,serverTimeOffset:parseInt(ge.Z.serverTime-(new Date).getTime()/1e3),language:d,title:p,sandboxView:ge.Z.sandboxView,sandboxSwitcher:ge.Z.sandboxSwitcher,sandboxModal:ge.Z.sandboxModal,serviceStatus:"unknown",...ge.Z.hasEnvironments?{}:{questionId:null===(e=ge.Z.question)||void 0===e?void 0:e.questionId,customDatabaseId:null===(t=ge.Z.question)||void 0===t?void 0:t.customDatabaseId,customDatabaseLanguage:null===(n=ge.Z.question)||void 0===n?void 0:n.customDatabaseLanguage,customDatabaseSchema:null===(a=ge.Z.question)||void 0===a?void 0:a.customDatabaseSchema,customDatabaseSchemaJson:null===(i=ge.Z.question)||void 0===i?void 0:i.customDatabaseSchemaJson},focusTimeEnabled:ge.Z.focusTimeEnabled,takeHomeOpened:!1,takeHomeStarted:!1},userState:{isOnline:!1,showCandidateOverlay:g,userInfo:u,userId:r,uncommittedUsername:m,uncommittedEmail:R().get(`pad_${ge.Z.slug}_email`)||""},project:{autoSave:!0,saving:!1},question:!ge.Z.hasEnvironments&&ge.Z.question?{...c().pick(ge.Z.question,["questionId","customFiles","language","testCasesEnabled","starterCodeByLanguage","candidateInstructions","visibleTestCases","solution"]),createQuestionFromPadStatus:se.nn()}:{createQuestionFromPadStatus:se.nn()}});!ge.Z.takeHome&&R().get(So)&&R().set(So,"true",{expires:14});const v=go.Z.init(r);if(ge.Z.isSandbox&&v.update_user({drawingModeOpen:!1}),ge.Z.isSandbox&&!ge.Z.isScratchPad){var b,E;const e=l().getMode({},l().resolveMode(CoderPad.LANGUAGES[d].mode));let{sandboxCode:t,question:n}=ge.Z;if(!t){const a=e.lineComment?e.lineComment+" ":"";if(n)t=n.contents||n.starterCodeByLanguage[d];else{const e=CoderPad.SANDBOX_INTROS.map((e=>`${a}${e}`.trim())).join("\n"),n=CoderPad.LANGUAGES[d],i=n.multifile_example,r=ge.Z.preloadedPackage&&n.packages[ge.Z.preloadedPackage].example,o=n.example;t=[e,i||r||o].join("\n\n")}}v.setPadText(t),v.set("customDatabaseId",(null===(b=ge.Z.question)||void 0===b?void 0:b.customDatabaseId)||null),v.set("customDatabaseLanguage",(null===(E=ge.Z.question)||void 0===E?void 0:E.customDatabaseLanguage)||null)}const w=c().debounce((function(){ge.Z.isSandbox||fetch(`/${ge.Z.slug}/update_firebase`,{method:"post"})}),1e4);window.addEventListener("message",(function(e){e.data&&e.data.isIframeError&&f.dispatch({type:"html_iframe_errored",error:e.data})}),!1),window.addEventListener("unload",(function(){const e=(0,Ve.T1)(f.getState());e&&e.name&&jt("left",{username:e.name})}));const k=function(e){ge.Z.isSandbox||zb(`/${ge.Z.slug}.json`,{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})},S=async function(e,t=!1){for(let a=10;a>=0;a--)try{const n=await zb(`/${ge.Z.slug}/question/${e}`);if(!n.ok)throw new Error;const a=await n.json();f.dispatch({type:"question_data_loaded",questionId:e,customDatabaseId:a.custom_database_id,customDatabaseLanguage:a.custom_database_language,customDatabaseSchema:a.custom_database_schema,customDatabaseSchemaJson:a.custom_database_schema_json,customFiles:a.custom_files,language:a.language,testCasesEnabled:a.test_cases_enabled,starterCodeByLanguage:a.starter_code_by_language,candidateInstructions:a.candidate_instructions,visibleTestCases:a.visible_test_cases,solution:a.solution,autofocus:t}),f.dispatch({type:"pad_setting_changed",key:"customDatabaseSchema",value:a.custom_database_schema,remote:!0}),f.dispatch({type:"pad_setting_changed",key:"customDatabaseSchemaJson",value:a.custom_database_schema_json,remote:!0})}catch(n){0===a?alert("Something went wrong when loading question metadata! Sorry about this, please reload the page."):await new Promise((e=>setTimeout(e,3e3)))}};qb((function(){var e;const t=document.getElementById("workspace");t.id="workspace-container";const n=document.getElementsByTagName("head")[0],a=document.createElement("script");a.defer="defer",a.src="https://app.getbeamer.com/js/beamer-embed.js",n.appendChild(a);const i=N.createElement(mv,{iioLayout:ge.Z.iioLayout,isDemoPad:ge.Z.isDemoPad,isExpired:ge.Z.isExpired,isLoggedIn:ge.Z.isLoggedIn,isOwner:ge.Z.isOwner,isPlayback:ge.Z.isPlayback,isSandbox:ge.Z.isSandbox,hasEnvironments:ge.Z.hasEnvironments});var r;if((0,j.render)(N.createElement(ce.S,{fallback:e=>N.createElement(de.X,{error:e})},N.createElement(me,{config:window.padConfig},N.createElement(oe.zt,{store:f},N.createElement(U.c,{fetcher:zb},N.createElement(O.ApolloProvider,{client:Hb},N.createElement(D.Z,{injectFirst:!0},N.createElement(z.f6,null,N.createElement(cs,null,(r=i,ge.Z.isPlayback?N.createElement(cr.l,null,N.createElement(ye.O,null,N.createElement(ve.Rl,null,N.createElement(fe.Wp,null,N.createElement(Ee.s,null,r))))):N.createElement(ve.Rl,null,N.createElement(fe.Wp,null,N.createElement(be.d,null,r)))))))))))),t),qb("#end-interview-form .btn-default").click((function(){return qb("#end-interview-modal").modal("hide"),!1})),ge.Z.isPlayback)return;(0,j.render)(N.createElement(oe.zt,{store:f},N.createElement(De,null)),document.getElementById("focus-time-intro-modal-content"));const l=document.getElementById("questions-container");if(null==l||ge.Z.hasEnvironments||(0,j.render)(N.createElement(oe.zt,{store:f},N.createElement(O.ApolloProvider,{client:Hb},N.createElement(z.f6,null,N.createElement($b,{allowSharedEdit:ge.Z.questionLibraryAllowSharedEdit,languagesUsed:ge.Z.questionLibraryLanguagesUsed,questionsExist:ge.Z.questionLibraryQuestionsExist,exampleQuestionsExist:ge.Z.questionLibraryExamplesExist,padSlug:ge.Z.slug,organizationName:(null===(e=ge.Z.padOrg)||void 0===e?void 0:e.name)||"",skipSplash:!!R().get("skip_question_splash"),parentAndChildOrganizations:ge.Z.parentAndChildOrganizations})))),l),v.watch("isPublic",(e=>{null!==e&&f.dispatch({type:"pad_setting_changed",key:"isPublic",value:e,remote:!0})})),!ge.Z.hasPlaybackTranscription){const e=v.watch("transcript",(t=>{const n=null!=t;n&&n!==f.getState().padSettings.hasPlaybackTranscription&&Object.values(t).find((e=>e.kind===_l.o.Transcript))&&(f.dispatch({type:"pad_setting_changed",key:"hasPlaybackTranscription",value:!0,remote:!0}),v.off(e))}))}v.watch("opened_take_home",(e=>{e!==f.getState().padSettings.takeHomeOpened&&f.dispatch({type:"pad_setting_changed",key:"takeHomeOpened",value:e,remote:!0})})),v.watch("started",(e=>{const t=f.getState().padSettings;e!==t.takeHomeStarted&&(f.dispatch({type:"pad_setting_changed",key:"takeHomeStarted",value:e,remote:!0}),e&&(0,y.j)("Pad Started",{takeHome:t.takeHome}))})),v.watch("ended",(e=>{e&&(window.location=ge.Z.isOwner?`/${ge.Z.slug}/playback`:`/${ge.Z.slug}/thanks`)})),qb("#take-home-submit-form .btn-default").click((function(){return qb("#take-home-submit-modal").modal("hide"),!1})),ge.Z.hasEnvironments||v.watch("language",(function(e){const t=f.getState().padSettings.language;null!=e&&e!==t&&f.dispatch({type:"pad_setting_changed",key:"language",value:e,previousValue:t,remote:!0})}),d),v.watch("execution_enabled",(e=>{e!==f.getState().padSettings.execEnabled&&f.dispatch({type:"pad_setting_changed",key:"execEnabled",value:e,remote:!0})}),ge.Z.execEnabled),v.watch("project",(e=>{(0,s.isEqual)(e,f.getState().project)||f.dispatch({type:"project/updated",value:e})}),f.getState().project),v.watch("focusTimeEnabled",(e=>{e!==f.getState().padSettings.focusTimeEnabled&&f.dispatch({type:"focus_time_toggled",value:e,remote:!0})}),ge.Z.focusTimeEnabled),v.watch("focusTimeStartedAt",(e=>{e!==f.getState().padSettings.focusTimeStartedAt&&f.dispatch({type:"focus_time_started_at",value:e,remote:!0})}),ge.Z.focusTimeStartedAt),ge.Z.hasEnvironments||(v.watch("questionId",(e=>{e!==f.getState().padSettings.questionId&&f.dispatch({type:"pad_setting_changed",key:"questionId",value:e,remote:!0})}),ge.Z.question?ge.Z.question.questionId:null),v.watch("customDatabaseId",(e=>{e!==f.getState().padSettings.customDatabaseId&&f.dispatch({type:"pad_setting_changed",key:"customDatabaseId",value:e,remote:!0})})),v.watch("customDatabaseLanguage",(e=>{e!==f.getState().padSettings.customDatabaseLanguage&&f.dispatch({type:"pad_setting_changed",key:"customDatabaseLanguage",value:e,remote:!0})}))),v.on(":connected",(function(e){e&&(console.log(`connected - ${new Date-o}ms`),o=new Date)})),ge.Z.isDemoPad&&setTimeout((()=>{qb(".Modal").hide(),qb("#overlay").hide(),qb("#lock-demo-modal").modal({keyboard:!1,backdrop:"static"})}),Math.max((0,re.Z)(he(),new Date),0))})),function(){const e=c().debounce((function(e){k({title:e})}),200);f.runSaga((function*(){ge.Z.isPlayback?(ge.Z.hasEnvironments||(yield(0,le.Cs)(Av)),yield(0,le.Cs)(jv.ZP),ge.Z.hasEnvironments&&(yield(0,le.A7)("active_environment_initialized",(function*(e){yield(0,le.Cs)(Mv,ge.Z.lang),yield(0,le.Cs)(xv)})))):(ge.Z.takeHome&&(yield(0,le.Cs)(Hv)),yield(0,le.Cs)(wv),yield(0,le.Cs)(xv),ge.Z.hasEnvironments?yield(0,le.A7)("active_environment_initialized",(function*(e){yield(0,le.Cs)(Mv,ge.Z.lang)})):yield(0,le.Cs)(Mv,ge.Z.lang),yield(0,le.Cs)(Yv),yield(0,le.Cs)(Tv,ge.Z.lang),yield(0,le.Cs)(Av),yield(0,le.Cs)(nb),yield(0,le.Cs)(fb),yield(0,le.Cs)(Nv),yield(0,le.Cs)($v,Hb)),yield(0,le.ib)("pad_take_home_toggled",(function*({value:e}){let t={take_home:e};if(e){const e=yield(0,le.Ys)((e=>e.padSettings.takeHomeTimeLimit));t.private=!1,t.take_home_time_limit="number"===typeof e?e:120,v.set("execution_enabled",!0)}k(t)})),yield(0,le.ib)("drawing_modified",(function*(){ge.Z.isSandbox||v.set("drawingModified",!0)})),yield(0,le.ib)("pad_setting_changed",(function*({key:t,value:n,remote:a}){if("language"!==t||a)if("execEnabled"===t)a||ge.Z.isSandbox||v.set("execution_enabled",!!n),jt(n?"enabled":"disabled",{username:yield(0,le.Ys)((e=>e.userState.uncommittedUsername))});else if("takeHome"===t)k({take_home:n});else if("takeHomeTimeLimit"===t)k({take_home_time_limit:n});else if("openedAt"===t){if(n){const e=f.getState().padSettings.questionId;e&&S(e,!0)}}else if("isPublic"!==t||a){if("hasPlaybackTranscription"===t)k({has_transcription:n});else if("title"===t)e(n);else if("questionId"===t&&n){if(ge.Z.hasEnvironments)return;const{openedAt:e,takeHome:t}=yield(0,le.Ys)((e=>e.padSettings));if(!ge.Z.isOwner&&t&&!e)return;S(n)}}else k({private:!n});else ge.Z.isSandbox||v.set("language",n),CoderPad.LANGUAGES[n].custom_database&&!f.getState().padSettings.customDatabaseId&&v.set("customDatabaseLanguage",n),!CoderPad.LANGUAGES[n].database_allowed&&(0,Ve.Yy)(f.getState())&&v.set("customDatabaseLanguage",null)})),yield(0,le.ib)("project/updateAutoSave",(function*({value:e}){v.set("project/autoSave",e)})),yield(0,le.ib)("editor_setting_changed",(function*({key:e,value:t}){if(ge.Z.isLoggedIn){let n=c().snakeCase(e),a=t;e.startsWith("tabSizes.")&&(n="tab_sizes",a=f.getState().editorSettings.tabSizes),zb("/user.json",{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:{[`editor_${n}`]:a}})})}else T.t(e,t);if("darkColorScheme"===e){const e=t?"dark":"light";qb("body").removeClass(["pad--dark","pad--light"]).addClass(`pad--${e}`)}})),yield(0,le.ib)("question_selected_by_local_user",(function*(e){v.set("customDatabaseId",e.customDatabaseId||null),v.set("customDatabaseLanguage",e.customDatabaseLanguage||null),v.set("questionId",e.questionId||null),v.set("language",e.language),ge.Z.isSandbox||fetch(`/${ge.Z.slug}/add_question/${e.questionId}`,{method:"post"})})),yield(0,le.ib)("focus_time_toggled",(function*({value:e,remote:t,auto:n}){t||ge.Z.isSandbox||(v.set("focusTimeEnabled",!!e),v.set("focusTimeStartedAt",Date.now()),fetch(`/${ge.Z.slug}/focus_time_stat`,{method:"post",body:JSON.stringify({state:e?"started":"ended",auto:n})}))})),yield(0,le.ib)("interviewer_notes_changed",(function*(e){w()})),yield(0,le.ib)("package_changed",(function*({databaseLanguage:e}){e&&e!==f.getState().padSettings.customDatabaseLanguage&&v.set("customDatabaseLanguage",e)}))}))}(),qb((function(){qb("body").on("show.bs.modal",(e=>qb(`[data-target='#${e.target.id}']`).addClass("active"))),qb("body").on("hide.bs.modal",(e=>qb(`[data-target='#${e.target.id}']`).removeClass("active")))})),(0,y.cY)({"cp-drawing-mode":!0,pad_id:ge.Z.slug,timestamp:Date.now()}),(0,y.j)("Joined Pad",{slug:ge.Z.slug,takeHome:ge.Z.takeHome})}():R().set("ever_logged_in",!0)},79213:function(e,t,n){"use strict";n.d(t,{J$:function(){return v},Wp:function(){return f}});var a=n(26470),i=n(67294),r=n(62267),o=n(59347),l=n(45223),s=n(18786),c=n(59614),d=n(76362),u=n(80953),m=n(1737),p=n(37134),g=n(2609);const h=(0,i.createContext)({environment:null,files:[],emptyFolderPaths:[],activeFile:null,activateFile:()=>null,question:null,projectTemplate:null,getFileContents:()=>Promise.resolve(""),setFileContents:()=>null,folderExists:()=>!1,addFile:()=>Promise.resolve(),addFiles:()=>Promise.resolve(),addFolder:()=>null,deleteFile:()=>null,deleteFolder:()=>null,renameFile:()=>null,renameFolder:()=>null,setLargeFile:()=>null}),f=({children:e})=>{var t;const{activeEnvironment:n}=(0,d.od)(),[f,v]=(0,i.useState)(""),[b,y]=(0,i.useState)({}),[E,w]=(0,i.useState)([]),k=(0,p.$)(null===n||void 0===n?void 0:n.questionId),{projectTemplate:S}=(0,m.o)(null===n||void 0===n?void 0:n.projectTemplateSlug),{firebaseAuthorId:C}=(0,l.nT)("firebaseAuthorId"),x=(0,r.I0)(),_=`${C}`;(0,g.C)(k);const T=(0,u.I)(n),I=T.map((e=>{var t,n;return{...e,isLargeFile:null!==(t=null!==(n=b[e.id])&&void 0!==n?n:e.isLargeFile)&&void 0!==t&&t}})),P=null!==(t=I.find((e=>e.id===f)))&&void 0!==t?t:null,Z=(0,i.useCallback)((e=>T.some((t=>t.path.startsWith(e)))||E.some((t=>`${t}/`.startsWith(e)))),[T,E]);(0,i.useEffect)((()=>{y(T.reduce(((e,t)=>{var n;return{...e,[t.id]:null!==(n=t.isLargeFile)&&void 0!==n&&n}}),{}))}),[T]);const O=(0,i.useCallback)(((e,t)=>{y((n=>({...n,[e]:t})))}),[]);(0,i.useEffect)((()=>{if(null!=(null===n||void 0===n?void 0:n.id)&&null==P&&T.length>0&&(null==(null===n||void 0===n?void 0:n.projectTemplateSlug)||null!=S)&&null==L.current){var e,t;const n=null!==(e=null===S||void 0===S||null===(t=S.settings)||void 0===t?void 0:t.defaultActiveFile)&&void 0!==e?e:"README.md",a=T.find((({name:e})=>e===n)),i=null!==a&&void 0!==a?a:T[0];null!=i&&v(i.id)}L.current=null}),[null===n||void 0===n?void 0:n.id,T,P,S,null===n||void 0===n?void 0:n.projectTemplateSlug]);const M=(0,i.useCallback)((async e=>{const t=T.find((t=>t.id===e));return new Promise(((a,i)=>{if(null!=t){const t=(0,c.Z)().firepadHeadless(`environmentFiles/${null===n||void 0===n?void 0:n.slug}/${e}`);t.on("ready",(()=>{t.getText().then((e=>{t.dispose(),a(e)}))}))}else i(new Error("File not found"))}))}),[T,null===n||void 0===n?void 0:n.slug]),D=(0,i.useCallback)(((e,t)=>{if(null!=T.find((t=>t.id===e))){const a=(0,c.Z)().firepadHeadless(`environmentFiles/${null===n||void 0===n?void 0:n.slug}/${e}`);a.on("ready",(()=>{a.setText(t),a.dispose()}))}}),[T,null===n||void 0===n?void 0:n.slug]),L=(0,i.useRef)(null),F=(0,i.useCallback)(((e,t="",a=!0)=>(L.current=e,new Promise(((i,r)=>{if(null!=n){const r=(0,o.a)(e),l=(0,c.Z)().firepadHeadless(`environmentFiles/${n.slug}/${r}`);l.on("ready",(()=>{l.setText(t),l.dispose(),(0,c.Z)().set(`environmentFileIds/${n.slug}/${r}`,!0,(()=>{a&&v(r),(0,s.r)({type:"add-file",user:_,data:{environment:n.id,filePath:e,fileId:r,contents:t}}),i()}))}))}else r(new Error("No active environment"))})))),[n,_]),A=(0,i.useCallback)((e=>new Promise(((t,a)=>{null!=n?(0,c.Z)().get(`environmentFiles/${n.slug}`,((a={})=>{const i=a;e.forEach((e=>{const t=(0,o.a)(e.path);i[t]={history:{A0:{a:_,o:[e.contents],t:Date.now()}}}})),(0,c.Z)().set(`environmentFiles/${n.slug}`,i,(()=>{(0,c.Z)().get(`environmentFileIds/${n.slug}`,(a=>{const i=a;e.forEach((e=>{const t=(0,o.a)(e.path);i[t]=!0})),(0,c.Z)().set(`environmentFileIds/${n.slug}`,i,(()=>{e.forEach((e=>{const t=(0,o.a)(e.path);(0,s.r)({type:"add-file",user:_,data:{environment:n.id,filePath:e.path,fileId:t,contents:e.contents}})})),t()}))}))}))})):a(new Error("No active environment"))}))),[n,_]),R=(0,i.useCallback)(((e,t=!0)=>{null!=n&&T.some((t=>t.id===e))&&(0,c.Z)().set(`environmentFileIds/${n.slug}/${e}`,!1,(()=>{t&&(0,s.r)({type:"delete-file",user:_,data:{environment:n.id,fileId:e}})}))}),[n,T,_]),N=(0,i.useCallback)((e=>{if(null!=n){const t=(0,a.join)(e,"/"),i={};T.forEach((e=>{i[e.id]=!e.path.startsWith(t)})),(0,c.Z)().update(`environmentFileIds/${n.slug}`,i,(()=>{w((e=>e.filter((e=>!(0,a.join)(e,"/").startsWith(t))))),(0,s.r)({type:"delete-folder",user:_,data:{environment:n.id,folderPath:t}})}))}}),[n,T,_]),j=(0,i.useCallback)(((e,t,a=!0,i=!0)=>{if(null!=n&&e!==t){const r=(0,o.a)(e),l=(0,o.a)(t);(0,c.Z)().get(`environmentFiles/${n.slug}/${r}/history`,(o=>{(0,c.Z)().set(`environmentFiles/${n.slug}/${l}/history`,o),(0,c.Z)().update(`environmentFileIds/${n.slug}`,{[`${l}`]:!0,[`${r}`]:!1},(()=>{a&&v(l),(0,s.r)({type:"delete-file",user:_,data:{environment:n.id,fileId:r}}),(0,s.r)({type:"add-file",user:_,data:{environment:n.id,filePath:e,fileId:l,contents:o}})})),i&&(0,s.r)({type:"rename-file",user:_,data:{environment:n.id,oldFilePath:e,newFilePath:t}})}))}}),[n,_]),q=(0,i.useCallback)((e=>{null!=n&&null!=e&&(w((t=>[...t,e])),(0,s.r)({type:"add-folder",user:_,data:{environment:n.id,folderPath:e}}))}),[n,w,_]),B=(0,i.useCallback)(((e,t)=>{e=(0,a.join)(e,"/"),t=(0,a.join)(t,"/"),null!=n&&e!==t&&(T.forEach((n=>{if(n.path.startsWith(e)){const a=n.path.replace(e,t);j(n.path,a,!1,!1)}})),w((n=>n.map((n=>n.replace(e,t))))),(0,s.r)({type:"rename-folder",user:_,data:{environment:n.id,oldFolderPath:e,newFolderPath:t}}))}),[n,T,_,j]);(0,i.useEffect)((()=>{if(null!=(null===n||void 0===n?void 0:n.id)){const e=T.find((e=>".cpad"===e.path));if(e){const t=(0,c.Z)().watch(e.firebasePath,(()=>{M(e.id).then((e=>{try{const t=JSON.parse(e);x({type:"project/updateCpadConfiguration",value:t})}catch(t){}}))}));return()=>{t&&(0,c.Z)().off(e.firebasePath,t)}}x({type:"project/updateRunTargets",value:{}})}return()=>{}}),[null===n||void 0===n?void 0:n.id,x,T,M]);const z={environment:n,files:I,emptyFolderPaths:E,question:k,projectTemplate:S,activeFile:P,activateFile:v,getFileContents:M,setFileContents:D,folderExists:Z,addFile:F,addFiles:A,addFolder:q,deleteFile:R,deleteFolder:N,renameFile:j,renameFolder:B,setLargeFile:O};return i.createElement(h.Provider,{value:z},e)};function v(){const e=(0,i.useContext)(h);if(null==e)throw new Error("`useActiveEnvironment` hook must be a descendant of a `ActiveEnvironmentProvider`");return e}},80953:function(e,t,n){"use strict";n.d(t,{I:function(){return h},T:function(){return p}});var a=n(96486),i=n(26470),r=n.n(i),o=n(79912),l=n(59347),s=n(61101),c=n(45223),d=n(59614);const u=["package-lock.json"],m=["package.json","package-lock.json","vite.config.ts"],p="/home/coderpad/app";const g=[];function h(e){const t=(0,c.oB)("isPlayback");return(0,o.Z)((n=>{if(null!=(null===e||void 0===e?void 0:e.id)){n([]);const o=a.debounce((async(o={})=>{const c=(await Promise.all(a.uniq(Object.keys(o)).map((async n=>{if(!o[n]&&!t)return;const a=(0,l.Q)(n),s=(0,i.basename)(a),c=u.includes(a),g=m.includes(a),h=`environmentFiles/${e.slug}/${n}`,f=function(e,t,n){return null!=e.projectTemplateSlug?r().join(p,t):e.allowMultipleFiles||null==e.language?t:n?r().join(p,t):null!==(a=null===(i=window.CoderPad.LANGUAGES[e.language])||void 0===i?void 0:i.default_path)&&void 0!==a?a:t;var a,i}(e,a,t),v=await new Promise(((t,a)=>{(0,d.Z)().get(`environmentFiles/${null===e||void 0===e?void 0:e.slug}/${n}/binary`,(e=>{t(e)}))})),b=await new Promise(((t,a)=>{(0,d.Z)().get(`environmentFiles/${null===e||void 0===e?void 0:e.slug}/${n}/large`,(e=>{t(e)}))}));return{id:n,name:s,path:a,firebasePath:h,monacoPath:f,isLocked:c,isImmutable:g,isBinary:v,isLargeFile:b}})))).filter(s.K);n(c)}),500,{leading:!1}),c=(0,d.Z)().watch(`environmentFileIds/${e.slug}`,o,{});return()=>{(0,d.Z)().off(`environmentFileIds/${e.slug}`,c)}}return()=>{}}),[e,t],g)}},1737:function(e,t,n){"use strict";n.d(t,{o:function(){return l}});var a=n(71439),i=n(46829),r=n(15255);const o=a.gql`
  query ProjectTemplate($slug: String!) {
    projectTemplate(slug: $slug) {
      id
      name
      slug
      settings
      category
    }
  }
`;function l(e){const{data:t,loading:n,error:a,refetch:l}=(0,i.useQuery)(o,{variables:{slug:e},fetchPolicy:"cache-and-network",skip:null==e}),s=null===t||void 0===t?void 0:t.projectTemplate;let c=r.nn();return n?c=r.V_():null!=a||null==s?c=r.vU("There was an error fetching the Project Template"):null!=s&&(c=r.Vp()),{status:c,projectTemplate:s,refetch:l}}},37134:function(e,t,n){"use strict";n.d(t,{$:function(){return l}});var a=n(67294),i=n(62267),r=n(43799),o=n(45223);function l(e){const t=(0,a.useRef)({}),n=(0,r.i)(),[l,s]=(0,a.useState)(null),{isOwner:c,isQuestionDraftPreview:d,slug:u,takeHome:m}=(0,o.nT)("isOwner","isQuestionDraftPreview","slug","takeHome"),{takeHomeOpened:p}=(0,i.v9)((e=>e.padSettings));return(0,a.useEffect)((()=>{s(null),e&&(t.current[e]?s(t.current[e]):(c||!m||p)&&n(`/${u}/question/${e}${d?"?preview=1":""}`,{headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((n=>{if(null!==n&&void 0!==n&&n.id){const a={id:e,questionId:e,customDatabaseId:n.custom_database_id,customDatabaseLanguage:n.custom_database_language,customDatabaseSchema:n.custom_database_schema,customDatabaseSchemaJson:n.custom_database_schema_json,customFiles:n.custom_files,language:n.language,testCasesEnabled:n.test_cases_enabled,starterCodeByLanguage:n.starter_code_by_language,candidateInstructions:n.candidate_instructions,visibleTestCases:n.visible_test_cases,solution:n.solution,title:n.title};t.current[e]=a,s(a)}})))}),[n,c,d,e,u,m,p]),l}},2609:function(e,t,n){"use strict";n.d(t,{C:function(){return d}});var a=n(3654),i=n(67294),r=n(62267),o=n(45223),l=n(54941),s=n(76362),c=n(1737);function d(e){const t=(0,r.I0)(),{activeEnvironment:n,isExecPossible:d}=(0,s.od)();(0,i.useEffect)((()=>{var a,i,r,o;n&&(n.questionId===(null===e||void 0===e?void 0:e.id)?t({type:"environment_question_changed",...e,language:n.language,customDatabaseLanguage:null!==(a=null!==(i=null===e||void 0===e?void 0:e.customDatabaseLanguage)&&void 0!==i?i:n.customDatabaseLanguage)&&void 0!==a?a:null,customFiles:null!==(r=null===e||void 0===e?void 0:e.customFiles)&&void 0!==r?r:[],projectTemplateSlug:n.projectTemplateSlug,projectTemplateVersion:n.projectTemplateVersion,environmentId:n.id,environmentSlug:n.slug,autofocus:!0,spreadsheet:n.spreadsheet}):t({type:"environment_question_changed",language:n.language,questionId:null,projectTemplateSlug:n.projectTemplateSlug,projectTemplateVersion:n.projectTemplateVersion,environmentId:n.id,environmentSlug:n.slug,customDatabaseId:null,customDatabaseLanguage:null!==(o=n.customDatabaseLanguage)&&void 0!==o?o:null,customDatabaseSchema:null,customFiles:[],testCasesEnabled:!1,starterCodeByLanguage:{},candidateInstructions:[],visibleTestCases:[],autofocus:!0,spreadsheet:n.spreadsheet}))}),[n,t,e]),(0,i.useEffect)((()=>{null!==n&&void 0!==n&&n.customDatabaseLanguage&&t({type:"pad_setting_changed",key:"customDatabaseLanguage",value:n.customDatabaseLanguage})}),[null===n||void 0===n?void 0:n.customDatabaseLanguage,t]),(0,i.useEffect)((()=>{null!==n&&void 0!==n&&n.language&&t({type:"pad_setting_changed",key:"language",value:n.language})}),[null===n||void 0===n?void 0:n.language,t]),(0,i.useEffect)((()=>{null!=n&&d&&t({type:"environment_changed",environment:n})}),[n,d,t]);const{projectTemplate:u}=(0,c.o)(null===n||void 0===n?void 0:n.projectTemplateSlug),m=(0,o.oB)("requestClientEnabled");(0,i.useEffect)((()=>{var e;const n="RunCommand"===(null===u||void 0===u||null===(e=u.settings)||void 0===e?void 0:e.executionType),i=!n&&m&&"backend"===(null===u||void 0===u?void 0:u.category);t((0,a.ZL)({[a.Z2.MainProcess]:!0,[a.Z2.Shell]:!n,[a.Z2.Console]:!n,[a.Z2.RequestHistory]:i})),t((0,l.Ip)(i))}),[t,u,m]),(0,i.useEffect)((()=>{var e,n;t({type:"pad_setting_changed",key:"projectTemplateExecutionType",value:null!==(e=null===u||void 0===u||null===(n=u.settings)||void 0===n?void 0:n.executionType)&&void 0!==e?e:null})}),[t,u])}},76362:function(e,t,n){"use strict";n.d(t,{WO:function(){return m.W},Rl:function(){return h},od:function(){return f}});var a=n(67294),i=n(62267),r=n(15255),o=n(45223),l=n(88615),s=n(59614),c=n(18786);var d=n(94153);var u=n(43799),m=n(16769);var p=n(64487);const g=(0,a.createContext)({activeEnvironment:null,environments:[],createEnvironment:()=>null,activateEnvironment:()=>null,environmentsEnabled:!1,createStatus:r.nn(),clearCreationStatus:()=>null,createOrSelectEnvironment:()=>null,deleteEnvironment:()=>Promise.resolve(!1),deleteStatus:r.nn(),clearDeleteStatus:()=>null,resetEnvironment:()=>Promise.resolve(!1),resetStatus:r.nn(),clearResetStatus:()=>Promise.resolve(!1),ready:!1,activeSandboxExecutionEnvironment:"",setSandboxExecutionEnvironment:e=>null,isExecPossible:!0}),h=({children:e})=>{const{hasEnvironments:t,sandboxEnvironmentPreviewSlug:n,isPlayback:h,isSandbox:f}=(0,o.nT)("hasEnvironments","sandboxEnvironmentPreviewSlug","isPlayback","isSandbox"),v=(0,i.I0)(),{activeEnvironmentId:b,setActiveEnvironmentId:y,setEnvironmentVisibility:E}=(0,l.n)(),{environments:w,hasLoadedEnvironments:k}=function(){const{hasEnvironments:e}=(0,o.nT)("hasEnvironments"),[t,n]=(0,a.useState)([]),[i,r]=(0,a.useState)(!1);return(0,a.useEffect)((()=>{let t;return e&&(t=(0,s.Z)().watch("environments",(e=>{if(null!=e){const t=Object.keys(e).map((t=>{const n=e[t];return{id:t,slug:n.slug,nameDisplayable:n.display,language:n.language,allowMultipleFiles:"html"===n.language||!!n.projectTemplateSlug&&!n.projectTemplateSlug.startsWith("jupyter"),questionId:n.questionId?n.questionId:void 0,snippet:n.snippet?n.snippet:void 0,spreadsheet:n.spreadsheet?n.spreadsheet:void 0,projectTemplateSlug:n.projectTemplateSlug,projectTemplateVersion:n.projectTemplateVersion,customDatabaseLanguage:n.customDatabaseLanguage,kind:n.questionId?m.W.Question:n.projectTemplateSlug?m.W.Project:m.W.Language,visible:!n.isPreview}}));n(t)}else n([]);r(!0)}))),()=>{null!=t&&(0,s.Z)().off("environments",t)}}),[e]),{environments:t,hasLoadedEnvironments:i}}(),{activeEnvSlug:S,hasLoadedActiveEnv:C}=function(){const{hasEnvironments:e}=(0,o.nT)("hasEnvironments"),[t,n]=(0,a.useState)(),[i,r]=(0,a.useState)(!1);return(0,a.useEffect)((()=>{let t;return e&&(t=(0,s.Z)().watch("activeEnvironment",(e=>{n(e||""),r(!0)}))),()=>{null!=t&&(0,s.Z)().off("activeEnvironment",t)}}),[e]),{activeEnvSlug:t,hasLoadedActiveEnv:i}}(),x=function(){const{hasEnvironments:e}=(0,o.nT)("hasEnvironments"),[t,n]=(0,a.useState)("");return(0,a.useEffect)((()=>{let t;return e&&(t=(0,s.Z)().watch("activeSandboxExecutionEnvironment",(e=>n(e)),"")),()=>{null!=t&&(0,s.Z)().off("activeSandboxExecutionEnvironment",t)}}),[e]),t}();!function(){const{hasEnvironments:e}=(0,o.nT)("hasEnvironments");(0,a.useEffect)((()=>{let t;return e&&(t=(0,s.Z)().watch("environmentsStatus",(e=>{"disabled"===e&&window.location.reload()}))),()=>{null!=t&&(0,s.Z)().off("environmentsEnabled",t)}}),[e])}();const{createEnvironment:_,envCreateStatus:T,clearEnvCreateStatus:I}=function(){const e=(0,u.i)(),t=(0,o.oB)("slug"),[n,i]=(0,a.useState)(r.nn()),l=(0,a.useCallback)(((a,o,l=null)=>{if(r.TH(n))return;i(r.V_());const s=a===m.W.Language?"add_language":a===m.W.Question?"add_question":a===m.W.Project?"add_project_template":a===m.W.Spreadsheet?"add_spreadsheet":"",c=new FormData,d={method:"POST"};if(null!=l){for(const e in l)c.append(e,l[e]);d.body=c}e(`/${t}/${s}/${o}`,d).then((e=>{e.ok?i(r.Vp()):i(r.vU())})).catch((e=>{i(r.vU("Failed to create environment",e))}))}),[n,i,e,t]),s=(0,a.useCallback)((()=>{i(r.nn())}),[i]);return{createEnvironment:l,envCreateStatus:n,clearEnvCreateStatus:s}}(),P=function(e){const t=(0,i.I0)(),{isSandbox:n,isPlayback:r,firebaseAuthorId:d}=(0,o.nT)("isSandbox","isPlayback","firebaseAuthorId"),{setActiveEnvironmentId:u}=(0,l.n)();return(0,a.useCallback)((a=>{const i=e.find((e=>e.id===a));null!=i&&(t({type:"activate_environment",environmentId:a}),(0,s.Z)().set("activeEnvironment",i.slug),n&&(0,s.Z)().set("activeSandboxExecutionEnvironment",i.slug),r?u(a):(0,c.r)({type:"change-environment",user:d,data:{environment:a}}))}),[t,e,d,u,r,n])}(w),Z=function(){const e=(0,o.oB)("isSandbox");return(0,a.useCallback)((t=>{e&&(0,s.Z)().set("activeSandboxExecutionEnvironment",t)}),[e])}(),{deleteEnvironment:O,deleteStatus:M,clearDeleteStatus:D}=function(e,t){const n=(0,u.i)(),{slug:i}=(0,o.nT)("slug"),[l,s]=(0,a.useState)(r.nn()),c=(0,a.useCallback)((async a=>{if(r.TH(l))return!1;const o=e.filter((e=>e.visible)),c=o.findIndex((e=>e.slug==a)),d=o[c];let u=null;o.length>1&&(u=c===o.length-1?o[c-1]:o[c+1]),u&&t(u.id),s(r.V_());try{const e=await n(`/${i}/delete_environment/${a}`,{method:"POST"});if(!e.ok)throw 404===e.status?new Error("Unable to find environment to delete."):401===e.status?new Error("You are not authorized to delete this environment."):new Error("An unknown error occurred while deleting this environment.");return s(r.Vp()),e.ok}catch(m){const e=m;s(r.vU(e.message||"An unknown error occurred while deleting this environment.",e)),t(d.id)}return!1}),[n,i,l,e,t]),d=(0,a.useCallback)((()=>{s(r.nn())}),[s]);return{deleteEnvironment:c,deleteStatus:l,clearDeleteStatus:d}}(w,P),{resetEnvironment:L,resetStatus:F,clearResetStatus:A}=function(e){const t=(0,u.i)(),{slug:n}=(0,o.nT)("slug"),[i,l]=(0,a.useState)(r.nn()),c=(0,a.useCallback)((a=>new Promise((o=>{var c;r.TH(i)&&o(!1),l(r.V_());const d=null===(c=e.find((e=>e.slug===a)))||void 0===c?void 0:c.id;t(`/${n}/environment_file_contents/${a}`,{method:"GET"}).then((e=>{if(!e.ok)throw 404===e.status?new Error("Unable to find environment to reset."):401===e.status?new Error("You are not authorized to reset this environment."):new Error(`An unknown error occurred while getting information for this environment. Status ${e.status}`);return e})).then((e=>e.json())).then((e=>{if(!e.files)throw new Error("No environment files returned from backend.");{const t=e.files;(0,s.Z)().get(`environmentFileIds/${a}`,(n=>{var i;const c=Object.keys(n).reduce(((e,n)=>(t[n]||e.push(n),e)),[]),u=[];Object.keys(t).forEach((e=>{u.push(new Promise((n=>{(0,s.Z)().set(`environmentFileIds/${a}/${e}`,!0);const i=(0,s.Z)().firepadHeadless(`environmentFiles/${a}/${e}`);i.on("ready",(()=>{i.setText(t[e]).then((()=>{i.dispose(),n()}))}))})))})),c.forEach((e=>{u.push(new Promise((t=>{(0,s.Z)().set(`environmentFileIds/${a}/${e}`,!1),t();const n=(0,s.Z)().firepadHeadless(`environmentFiles/${a}/${e}`);n.on("ready",(()=>{n.setText("").then((()=>{n.dispose(),t()}))}))})))})),null!==(i=e.question)&&void 0!==i&&i.language&&d&&(0,s.Z)().set(`environments/${d}/language`,e.question.language),Promise.all(u).then((()=>{l(r.Vp()),o(!0)}))}))}})).catch((e=>{l(r.vU(e.message,e)),p.Tb(e,{tags:{padSlug:n,environmentSlug:a}}),o(!1)}))}))),[t,n,i,l,e]),d=(0,a.useCallback)((()=>{l(r.nn())}),[]);return{resetEnvironment:c,resetStatus:i,clearResetStatus:d}}(w),R=w[0];(0,a.useEffect)((()=>{R&&(E(R.slug,!0),y(R.id))}),[R,E,y]);const N=(0,a.useMemo)((()=>{var e,t;return h?w.find((e=>e.id===b))||R:n?null!==(t=w.find((e=>e.slug===n)))&&void 0!==t?t:null:null!==(e=w.find((e=>e.slug===S)))&&void 0!==e?e:null}),[w,h,n,S,R,b]);var j;j=N,(0,a.useEffect)((()=>{(0,d.TF)({padEnvironment:null===j||void 0===j?void 0:j.slug})}),[null===j||void 0===j?void 0:j.slug]),(0,a.useEffect)((()=>{null!=(null===N||void 0===N?void 0:N.projectTemplateSlug)&&(0,s.Z)().set("execution_enabled",!0)}),[N]);const q=null!=N;(0,a.useEffect)((()=>{q&&v({type:"active_environment_initialized"})}),[q,v]),(0,a.useEffect)((()=>{v({type:"activate_environment",environmentId:null===N||void 0===N?void 0:N.id})}),[v,null===N||void 0===N?void 0:N.id]),(0,a.useEffect)((()=>{w.length>0&&!S&&C&&P(w[0].id)}),[w,S,P,C]);const B=(0,a.useCallback)((e=>{const t=w.find((t=>t.slug===e.name||null==t.questionId&&t.projectTemplateSlug===e.name));null!=t?P(t.id):"project"===e.type?_(m.W.Project,e.name):"spreadsheets"===e.category?_(m.W.Spreadsheet,e.name):_(m.W.Language,e.name)}),[w,P,_]),z=!(f&&t&&(null===N||void 0===N?void 0:N.slug)!==x),$={activeEnvironment:N,environments:w,activateEnvironment:P,createEnvironment:_,environmentsEnabled:!!t,createStatus:T,clearCreationStatus:I,createOrSelectEnvironment:B,deleteEnvironment:O,deleteStatus:M,clearDeleteStatus:D,resetEnvironment:L,resetStatus:F,clearResetStatus:A,ready:C&&k,activeSandboxExecutionEnvironment:x,setSandboxExecutionEnvironment:Z,isExecPossible:z};return a.createElement(g.Provider,{value:$},e)};function f(){const e=(0,a.useContext)(g);if(null==e)throw new Error("`useEnvironmentsContext` hook must be a descendant of a `EnvironmentsProvider`");return e}},16769:function(e,t,n){"use strict";n.d(t,{W:function(){return a}});let a=function(e){return e.Language="language",e.Question="question",e.Project="project",e.Spreadsheet="spreadsheet",e}({})},88615:function(e,t,n){"use strict";n.d(t,{O:function(){return s},n:function(){return l}});var a=n(67294),i=n(62267);const r={activeEnvironmentId:null,setActiveEnvironmentId:()=>null,frameIndex:0,visibleEnvironments:[],setVisibleEnvironments:()=>null,setEnvironmentVisibility:()=>null},o=(0,a.createContext)(r);function l(){const e=(0,a.useContext)(o);if(!e)throw new Error("`useEnvironmentsPlaybackMock` hook must be a descendant of a `EnvironmentsPlaybackMockProvider`");return e}const s=({children:e})=>{const[t,n]=(0,a.useState)(null),[l,s]=(0,a.useState)([]),c=(0,a.useCallback)(((e,t)=>{s(t?t=>[...t,e]:t=>t.filter((t=>t!==e)))}),[]),d=(0,i.v9)((e=>e.playbackHistory.frameIndex));return a.createElement(o.Provider,{value:{...r,activeEnvironmentId:t,setActiveEnvironmentId:n,frameIndex:d,visibleEnvironments:l,setVisibleEnvironments:s,setEnvironmentVisibility:c}},e)}},48468:function(e,t,n){"use strict";n.d(t,{s:function(){return C},b:function(){return S}});var a=n(96486),i=n.n(a),r=n(67294),o=n(62267),l=n(45223),s=n(76362),c=n(25934),d=n(59857),u=n(3654),m=n(54941),p=n(79097),g=n(59614),h=n(48572),f=n(88615),v=n(41898);function b(e,t,n){const a=[{fileId:t,authorId:void 0,value:"",timestamp:0,executions:[],operation:new v.OZ,type:"retain"}];for(const r of i().sortBy(i().keys(e))){const i=e[r];if(n>0&&i.t>1e3*n)break;const o=i.a.toString(),l=a[a.length-1].timestamp,s=l&&i.t<l?l+1:i.t,c=v.OZ.fromJSON(i.o),d=new v.OZ,u=new v.OZ;for(const e of c.ops)e.isRetain()?(d.retain(e.chars),u.retain(e.chars)):e.isInsert()?u.insert(e.text):e.isDelete()&&d.delete(e.chars);if(!d.isNoop()){const e=a[a.length-1].value;(e||"").length===d.baseLength&&a.push({fileId:t,authorId:o,operation:d,type:"delete",value:d.apply(e),timestamp:s,executions:[]})}if(!u.isNoop()){const e=a[a.length-1].value;(e||"").length===u.baseLength&&a.push({fileId:t,authorId:o,operation:u,type:"insert",value:u.apply(e),timestamp:s,executions:[]})}}return a}const y=e=>{const t={};for(const n in e){const a=e[n];t[n]=a.map(((e,t)=>{const n=[];let i=0,r=0;for(const a of e.operation.ops)if(a.isRetain())i+=a.chars;else{const e=a.isInsert()?a.text.length:a.chars;r+=e,n.push({startOffset:i,endOffset:i+e}),i+=e}const o=0===t?0:e.timestamp-a[t-1].timestamp;return{...e,editStartOffset:n.length>0?n[0].startOffset:0,editEndOffset:n.length>0?n[n.length-1].endOffset:0,highlightRanges:r>3||n.length>1?n:[],delay:o,peripheralFrames:[]}}))}return t};var E=n(19074);const w={environmentFrames:[]},k=(0,r.createContext)(w);function S(){const e=(0,r.useContext)(k);if(!e)throw new Error("`usePlaybackFrames` hook must be a descendant of a `PlaybackFramesProvider`");return e}const C=({children:e})=>{const t=(0,o.I0)(),{paused:n}=(0,d.t)(),{environments:a}=(0,s.od)(),[v,S]=(0,r.useState)({}),{hasEnvironments:C,padEndedAt:x}=(0,l.nT)("hasEnvironments","padEndedAt");(0,r.useEffect)((()=>{const e=e=>{const t=b(e,"",x),n=y({"":t})[""];S((e=>({...e,"":n}))),(0,g.Z)().get("files",(e=>{if(e){const t={};Object.entries(e).forEach((([e,n])=>{const a=b(n.history,e,x);t[e]=a})),S((e=>({...e,...y(t)})))}}))},t=e=>{const t={};Object.entries(null!==e&&void 0!==e?e:{}).forEach((([e,n])=>{Object.entries(n).forEach((([n,a])=>{const r=b(a.history,n,x).map((t=>({...t,environmentSlug:e})));t[n]?t[n]=i().sortBy([...t[n],...r],"timestamp"):t[n]=r}))})),S((e=>({...e,...y(t)})))};C?(0,g.Z)().get("environmentFiles",t):(0,g.Z)().get("history",e)}),[C,a,x]);const _=(0,p.h)(),T=(0,h.Q)(),I=(0,r.useMemo)((()=>(e=>e.map((e=>({type:"ai-chat",value:e.content,authorId:e.authorId,timestamp:e.messageTimestamp,delay:900,peripheralFrames:[]}))))(_)),[_]),P=(0,r.useMemo)((()=>T.map((e=>{const t=e.kind===E.o.Transcript;return{type:"transcript",value:t?e.transcripts[e.preferredTranscript]:e.message,authorId:t?e.userId:"system",timestamp:e.timestamp,delay:900,peripheralFrames:[]}}))),[T]),Z=(0,r.useMemo)((()=>((e,t,n)=>{let a=[];for(const i of Object.keys(e))a.push(...e[i].map((e=>({...e,peripheralFrames:[]}))));a.push(...t),a.push(...n),a=i().sortBy(a,"timestamp");for(let i=1;i<a.length;i++)a[i].timestamp===a[i-1].timestamp&&a[i].environmentSlug===a[i-1].environmentSlug&&(a[i-1].peripheralFrames.push(a[i]),a.splice(i,1),i--);return a})(v,I,P)),[I,v,P]),{getVisibleEnvironments:O,lastChangeEnvironmentEvent:M,lastCreatePadEvent:D,lastRequestClientRequestEvent:L}=(0,c.z)(Z),F=(0,r.useRef)([]);(0,r.useEffect)((()=>{Object.keys(Z).length!==Object.keys(F.current).length&&(t({type:"playback_set_frames",frames:Z}),F.current=Z)}),[t,Z]);const{setVisibleEnvironments:A,activeEnvironmentId:R,setActiveEnvironmentId:N}=(0,f.n)();(0,r.useEffect)((()=>{A((e=>O()))}),[A,O]);const j=(0,r.useMemo)((()=>a.find((e=>e.id===R))),[R,a]);return(0,r.useEffect)((()=>{L&&(t({type:"project/request_sent",requestId:L.data.requestId}),t((0,m.u)("requestClient")),t((0,u.KY)(u.Z2.RequestHistory)))}),[t,L]),(0,r.useEffect)((()=>{var e;if(a[0]&&j&&!n)if(M)j.id!==M.data.environment&&N(M.data.environment);else if(D&&D.data.activeEnvironment){var t;const e=null===(t=a.find((e=>e.slug===D.data.activeEnvironment)))||void 0===t?void 0:t.id;e&&N(e)}else j.id!==(null===(e=a[0])||void 0===e?void 0:e.id)&&N(a[0].id)}),[a,j,N,M,D,n]),r.createElement(k.Provider,{value:{...w,environmentFrames:Z}},e)}},98963:function(e,t,n){"use strict";n.d(t,{D:function(){return i},w:function(){return r}});var a=n(67294);function i(e,t=""){return{userId:e,userColor:"transparent",defaultText:t,cursorOptions:{tooltips:!0,tooltipDuration:1}}}function r(e){return(0,a.useMemo)((()=>i(e)),[e])}},54204:function(e,t,n){"use strict";n.d(t,{B:function(){return c},X:function(){return d}});var a=n(16318),i=n(44078),r=n(67080),o=n(67294),l=n(62267),s=n(79213);function c(){var e;const{environment:t}=(0,s.J$)(),n=(0,l.v9)(r.hY);(0,o.useEffect)((()=>{(0,a.H)(n)}),[n]),d(null!==(e=null===t||void 0===t?void 0:t.language)&&void 0!==e?e:null===t||void 0===t?void 0:t.projectTemplateSlug)}function d(e){const{tabSizes:t,fontSize:n,autocomplete:a,autoCloseBrackets:s}=(0,l.v9)(r.Mg);(0,o.useEffect)((()=>{var r;const o=null!=e&&null!==(r=t[e])&&void 0!==r?r:2;(0,i.Wr)(JSON.stringify({"editor.renderWhitespace":"all","editor.renderLineHighlight":"line","editor.wordWrap":"on","editor.fontSize":null!==n&&void 0!==n?n:14,"editor.detectIndentation":!1,"editor.tabSize":o,"editor.wrappingIndent":"indent","editor.quickSuggestions":a,"editor.fixedOverflowWidgets":!0,"editor.minimap.enabled":!1,"editor.lineNumbersMinChars":1,"editor.inlayHints.enabled":!1,"editor.autoClosingBrackets":null!==s&&void 0!==s&&s?"languageDefined":"never","[plaintext]":{"editor.wordBasedSuggestions":!1},"[markdown]":{"editor.quickSuggestions":!1,"editor.wordBasedSuggestions":!1}}));const l={tabSize:o};for(const e of i.Fd.editor.getModels())e.updateOptions(l)}),[e,t,n,a,s])}},93574:function(e,t,n){"use strict";n.d(t,{bI:function(){return T},Y9:function(){return I}});var a=n(79752),i=n(32339),r=n(90461),o=n(11212),l=n(94153),s=n(87574),c=n(26470),d=n.n(c),u=n(67294),m=n(79213),p=n(45603),g=n(67197),h=n(72642);const f=({fileName:e,existingFile:t,newFileContents:n,fileToDelete:a,onSkip:i,onReplace:r,onKeepBoth:o})=>({data:{newFileContents:n,existingFile:t,fileToDelete:a},title:"File already exists",message:u.createElement(u.Fragment,null,"A file with the name ",u.createElement("b",null,e)," already exists in this folder. Do you want to replace it?"),actions:[u.createElement(h.Z,{key:1,color:"inherit",onClick:i},"Skip"),u.createElement(h.Z,{key:2,onClick:r,color:"warning"},"Replace"),u.createElement(h.Z,{key:3,onClick:o,color:"primary",variant:"contained"},"Keep both")]}),v=({file:e,onOk:t})=>({title:"Unsupported file type",message:u.createElement(u.Fragment,null,"The file ",u.createElement("b",null,e.name)," is not a text file and cannot be uploaded."),actions:[u.createElement(h.Z,{key:1,color:"secondary",onClick:t,variant:"outlined"},"OK")]});var b=n(3838),y=n(37645),E=n(77750),w=n(56408),k=n(88979);const S=({title:e,message:t,open:n,onClose:a,actions:i})=>u.createElement(b.Z,{open:n,onClose:a},e&&u.createElement(y.Z,{color:"inherit"},e),u.createElement(E.Z,null,u.createElement(w.Z,null,t)),u.createElement(k.Z,null,i));var C=n(16857),x=n(48764).Buffer;const _=u.createContext({}),T=({children:e})=>{var t,n,c,h,b,y;const{files:E}=(0,p.LG)(),{activeFile:w,getFileContents:k,addFile:T,addFiles:I,deleteFile:P,setFileContents:Z}=(0,m.J$)(),[O,M]=(0,u.useState)([]),D=(0,u.useMemo)((()=>O.length>0),[O]),[L,F]=(0,u.useState)([]),[A,R]=(0,u.useState)(!1),[N,j]=(0,u.useState)(null),[q,B]=(0,u.useState)(null),z=(0,a.VT)(a.MA,{activationConstraint:{distance:20}}),$=(0,a.Dy)(z),H=(0,u.useCallback)((()=>{M((e=>e.slice(1)))}),[]),U=(0,u.useCallback)((()=>{M((e=>{const{newFileContents:t,existingFile:n,fileToDelete:a}=e[0].data;return a&&P(a.fileId),Z(n.fileId,t),e.slice(1)}))}),[P,Z]),Q=(0,u.useCallback)((()=>{M((e=>{const{newFileContents:t,existingFile:n,fileToDelete:a}=e[0].data;a&&P(a.fileId);const i=(0,C.H)(E,n.path,1);return T(i,t,!1),e.slice(1)}))}),[T,P,E]),V=(0,u.useCallback)((e=>{R(!0);const t=e.active.data.current;if("folder"===t.type){const e=t.path;null!=e&&j([{type:"folder",path:e}])}else{var n,a;const{file:t}=null===(n=e.active)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.current;if(t)if((null===w||void 0===w?void 0:w.id)===t.fileId||L.includes(t.fileId)){const e=L.map((e=>E.find((t=>t.fileId===e)))).filter((e=>null!=e)),t=E.find((e=>e.fileId===(null===w||void 0===w?void 0:w.id)));null!=t&&e.push(t),j(e.map((e=>({type:"file",path:e.path,file:e}))))}else j([{type:"file",path:t.path,file:t}]),F([])}}),[E,L,w]),W=(0,u.useCallback)((()=>{R(!1),j(null)}),[]),G=(0,u.useCallback)((e=>{var t;const{over:n,active:a}=e;if(null==n||null==a)return;const{path:i}=null===n||void 0===n||null===(t=n.data)||void 0===t?void 0:t.current}),[]),Y=(0,u.useCallback)((async e=>{var t;R(!1),j(null);const{over:n,active:a}=e;if(null==n||null==a)return;const{path:i}=null===n||void 0===n||null===(t=n.data)||void 0===t?void 0:t.current;if(null!=i)for(const r of null!==N&&void 0!==N?N:[])if("file"===r.type&&r.file){const e=r.file;if(e.path===d().join(i,e.name))return;const t=d().join(i,e.name);if(E.find((e=>e.path===t))){const n=await k(e.fileId),a=E.find((e=>e.path===t));return void(a&&M((t=>[...t,f({fileName:e.name,existingFile:a,newFileContents:n,fileToDelete:e,onReplace:U,onKeepBoth:Q,onSkip:H})])))}const n=e.fileId,a=i+e.name,o=await k(n);P(n);const l=e.path===(null===w||void 0===w?void 0:w.path);T(a,null!==o&&void 0!==o?o:"",l)}else if("folder"===r.type){const e=r.path;if(e===d().join(i,d().basename(e)+"/"))return;const t=E.filter((t=>t.path.startsWith(e)));for(let n=0;n<t.length;n++){const a=t[n];B({text:`Moving ${n+1} of ${t.length} files...`,progress:n/t.length});const r=d().join(i,d().basename(e),a.path.replace(e,"")),o=r;if(E.find((e=>e.path===o))){const e=await k(a.fileId),t=E.find((e=>e.path===o));t&&M((n=>[...n,f({fileName:a.name,existingFile:t,newFileContents:e,fileToDelete:a,onReplace:U,onKeepBoth:Q,onSkip:H})]));continue}const l=await k(a.fileId);P(a.fileId);const s=a.path===(null===w||void 0===w?void 0:w.path);T(r,null!==l&&void 0!==l?l:"",s)}B(null)}}),[N,E,k,P,null===w||void 0===w?void 0:w.path,T,H,U,Q]),K=(0,u.useMemo)((()=>{if(null==N)return null;if(N.length>1)return`${N.length} files`;const e=N[0];return"file"===e.type&&e.file?e.file.name:d().basename(e.path)+"/"}),[N]),J=(0,u.useCallback)((async(e,t)=>{const n=[];for(let i=0;i<e.length;i++){const r=e[i];B({text:`Uploading ${i+1}/${e.length} files...`,progress:i/e.length});const l=await(0,g.S)(r),s=await r.arrayBuffer();if(!(0,o.Gs)(r.name,x.from(s))&&!r.type.startsWith("text/")){M((e=>[...e,v({file:r,onOk:H})]));continue}const c=E.find((e=>{var n;return e.path===d().join(t,null!==(n=r.path)&&void 0!==n?n:"").replace(/^\/+/,"")}));var a;if(null!=c)M((e=>[...e,f({fileName:r.name,existingFile:c,newFileContents:l,onReplace:U,onKeepBoth:Q,onSkip:H})]));else n.push({path:d().join(t,null!==(a=r.path)&&void 0!==a?a:"").replace(/^\/+/,""),contents:(0,C.t)(l)})}n.length>0&&(await I(n),(0,l.j)(s.j.FileTreeUploadedFile,{count:n.length})),B(null)}),[E,H,U,Q,I]),X=(0,u.useMemo)((()=>({selectedFiles:L,setSelectedFiles:F,isDragging:A,setIsDragging:R,draggingFiles:N,handleFileUpload:J,currentOperation:q,setCurrentOperation:B,setFileMessageDialogQueue:M,popFileMessageQueue:H})),[L,F,A,R,N,J,q,B,M,H]);return u.createElement(_.Provider,{value:X},u.createElement(S,{title:null!==(t=null===(n=O[0])||void 0===n?void 0:n.title)&&void 0!==t?t:void 0,message:null!==(c=null===(h=O[0])||void 0===h?void 0:h.message)&&void 0!==c?c:void 0,open:D&&null==q,onClose:H,actions:null!==(b=null===(y=O[0])||void 0===y?void 0:y.actions)&&void 0!==b?b:[]}),u.createElement(a.LB,{sensors:$,onDragStart:V,onDragCancel:W,onDragEnd:Y,onDragOver:G},u.createElement(a.y9,{modifiers:[i.oJ]},A&&null!=N?u.createElement(r.Z,{label:K}):null),e))};function I(){const e=(0,u.useContext)(_);if(null==e)throw new Error("`useDndContext` hook must be a descendant of a `DndProvider`");return e}},16857:function(e,t,n){"use strict";n.d(t,{H:function(){return a},t:function(){return i}});const a=(e,t,n)=>{const i=t.replace(/\.[^/.]+$/,(e=>` (${n})${e}`));return e.find((e=>e.path===i))?a(e,t,n+1):i},i=e=>e.replace(/\r\n/g,"\n")},2112:function(e,t,n){"use strict";n.d(t,{d:function(){return le}});var a=n(31892),i=n(94184),r=n.n(i),o=n(67294),l=n(45223),s=n(79213),c=n(45603),d=n(93574),u=n(62267),m=n(45822),p=n(80845),g=n(25934),h=n(22190),f=n(22887),v=n(90948),b=n(2658),y=n(69041);const E=(0,v.ZP)("div",{target:"e1k56kag0"})((({theme:e})=>({width:"100%",borderTop:`1px solid ${e.palette.divider}`})),""),w=({operation:e,progress:t})=>o.createElement(E,null,o.createElement(b.Z,{variant:"body1",sx:{padding:2}},e),o.createElement(y.Z,{variant:"determinate",value:100*t}));var k=n(54283),S=n(50367),C=n(80594),x=n(76242);const _=({depth:e,folderPath:t,onExit:n,showHighlight:a,showSubHighlights:i})=>{const{activeFile:r,addFile:l}=(0,s.J$)();if(null==r)return null;const c=r.path.replace(r.name,"").split("/").length-1;return o.createElement("div",{className:"directory-item-input"},o.createElement(x.E,{depth:e,highlightDepth:c,showHighlight:a,showSubHighlights:i,opaque:!0},o.createElement(S.a,{onExit:n,onSubmit:e=>{l(t+e,"",!0),n()},icon:o.createElement(C.Z,{language:""})})))};var T=n(13044);const I=({depth:e,folderPath:t,onExit:n,showHighlight:a,showSubHighlights:i})=>{const{activeFile:r,addFolder:l}=(0,s.J$)();if(null==r)return null;const c=r.path.replace(r.name,"").split("/").length-1;return o.createElement("div",{className:"directory-item-input"},o.createElement(x.E,{depth:e,highlightDepth:c,showHighlight:a,showSubHighlights:i,opaque:!0},o.createElement(S.a,{onSubmit:e=>{l(t+e),n()},onExit:n,icon:o.createElement(T.r,{className:"folder-icon"})})))};var P=n(32254),Z=n(431),O=n(41389),M=n(78638),D=n(64899);function L(){return L=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},L.apply(this,arguments)}const F=(0,v.ZP)("div",{target:"e14jhfpx1"})((({theme:e})=>({display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",flex:"1 1 100%","& svg":{marginBottom:e.spacing(1)},overflow:"hidden"})),""),A=(0,v.ZP)("div",{target:"e14jhfpx0"})((({theme:e})=>({pointerEvents:"none",textAlign:"center",padding:e.spacing(2),display:"flex",flexDirection:"column",overflow:"auto",alignItems:"center",justifyContent:"center",transition:"opacity 150ms"})),""),R=e=>{const[t,n]=o.useState(0);return o.useEffect((()=>{const t=new ResizeObserver((e=>{n(e[0].target.scrollHeight)}));return e.current&&t.observe(e.current),()=>{e.current&&t.unobserve(e.current)}}),[e]),t},N=({onFileUpload:e,isHovering:t})=>{const[n,a]=o.useState(!1),i=o.useRef(null),r=o.useRef(null),{setFileMessageDialogQueue:l,popFileMessageQueue:s}=(0,d.Y9)(),c=R(i)<R(r),u=(0,o.useCallback)((t=>{t=t.filter((e=>{var t;return!(null!==(t=e.path)&&void 0!==t&&t.includes("node_modules"))})),null===e||void 0===e||e(t,"")}),[e]),{getRootProps:m,getInputProps:p,isDragActive:g}=(0,O.uI)({onDrop:u,noClick:!0,noDragEventsBubbling:!0,validator(e){return e.size>D.yz?(l((t=>[...t,(0,M.i)({file:e,onOk:s})])),{code:"file-too-large",message:`File is too large (max ${D.aP}MB)`}):null}});return(0,Z.b)((()=>{a(!!t)}),250,[t]),o.createElement(F,L({},m(),{ref:i}),o.createElement("input",L({},p(),{webkitdirectory:"",directory:"",mozdirectory:""})),o.createElement(A,{style:{opacity:!n&&!g||c?0:1},ref:r},o.createElement(P.Z,{icon:P.P.MultiSelectCursor,width:20,height:20}),o.createElement(b.Z,{variant:"body1"},"Drag & drop files to upload")))};var j,q=n(79752),B=n(32301),z=n(33797),$=n(20335),H=n(26470),U=n.n(H);const Q=["title","titleId"];function V(){return V=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},V.apply(this,arguments)}function W(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}const G=(e,t)=>{let{title:n,titleId:a}=e,i=W(e,Q);return o.createElement("svg",V({xmlns:"http://www.w3.org/2000/svg",width:12,height:15,fill:"none",viewBox:"0 0 12 15",ref:t,"aria-labelledby":a},i),n?o.createElement("title",{id:a},n):null,j||(j=o.createElement("path",{fill:"#9A9A9A",d:"M6 11.334c.734 0 1.334-.6 1.334-1.334 0-.733-.6-1.333-1.334-1.333-.733 0-1.333.6-1.333 1.333 0 .734.6 1.334 1.333 1.334m4-6h-.666V4a3.335 3.335 0 0 0-6.667 0v1.334h1.267V4c0-1.14.926-2.066 2.066-2.066S8.067 2.86 8.067 4v1.334H2c-.733 0-1.333.6-1.333 1.333v6.667c0 .733.6 1.333 1.333 1.333h8c.734 0 1.334-.6 1.334-1.333V6.667c0-.733-.6-1.333-1.334-1.333m0 8H2V6.667h8z"})))},Y=(0,o.forwardRef)(G);n.p;var K=n(75509),J=n(39751),X=n(17691);var ee=({users:e})=>o.createElement("div",{className:"users-list"},e.map((({id:e,color:t})=>o.createElement("div",{key:e,className:"user-dot",style:{backgroundColor:t}}))));const te=({depth:e,filePath:t,oldFileName:n,onExit:a,showHighlight:i,showSubHighlights:r})=>{const{activeFile:l,renameFile:c}=(0,s.J$)(),d=(0,o.useCallback)((e=>{c((0,H.join)(t,n),(0,H.join)(t,e)),a()}),[t,n,c,a]);if(null==l)return null;const u=(0,H.dirname)(l.path).split("/").length-1;return o.createElement("div",{className:"directory-item-input"},o.createElement(x.E,{depth:e,highlightDepth:u,showHighlight:i,showSubHighlights:r,opaque:!0},o.createElement(S.a,{defaultValue:n,onExit:a,onSubmit:d,icon:o.createElement(C.Z,{language:""})})))};function ne(){return ne=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ne.apply(this,arguments)}const ae=(0,$.Z)((e=>{var t,n,a,i;return{active:{backgroundColor:null===(t=e.palette.filePane)||void 0===t?void 0:t.activeBackground,color:null===(n=e.palette.filePane)||void 0===n?void 0:n.activeText},inactive:{"&:hover":{backgroundColor:null===(a=e.palette.filePane)||void 0===a?void 0:a.highlightBackground}},selected:{backgroundColor:null===(i=e.palette.filePane)||void 0===i?void 0:i.highlightBackground}}})),ie=({depth:e,file:t,showHighlight:n=!1,showSubHighlights:a=!1,onDeleteFile:i,selected:l=!1,onClick:c,onShiftClick:d,onCommandClick:m})=>{var p,g;const{environment:h,activeFile:f}=(0,s.J$)(),{contextMenu:v,handleContextMenu:b,handleContextMenuClose:y}=(0,X.a)(),E=null==t?"":t.name.split("/").reverse()[0],[w,k]=(0,o.useState)(!1),S=(0,u.v9)((e=>e.editorSettings.darkColorScheme)),C=ae(),_=(null===f||void 0===f?void 0:f.id)===(null===t||void 0===t?void 0:t.fileId),[T,I]=(0,o.useState)(!1),{attributes:P,listeners:Z,setNodeRef:O}=(0,q.O1)({id:null!==(p=null===t||void 0===t?void 0:t.fileId)&&void 0!==p?p:"",data:{type:"file",path:null!==(g=null===t||void 0===t?void 0:t.path)&&void 0!==g?g:"",file:t}}),M=(0,o.useCallback)((e=>{e.metaKey?null===m||void 0===m||m():e.shiftKey?null===d||void 0===d||d():null===c||void 0===c||c()}),[c,d,m]),D=(0,o.useCallback)((()=>{y(),I(!0)}),[y]),L=(0,o.useCallback)((()=>{y(),k(!0)}),[y]),F=null==f?0:f.path.split("/").length-1;return null==t?null:T?o.createElement(te,{filePath:U().dirname(t.path),depth:e,oldFileName:t.name,onExit:()=>I(!1),showHighlight:n,showSubHighlights:a}):o.createElement("div",ne({ref:O},Z,P),o.createElement("div",{className:r()("file",l?C.selected:"",{active:_||null!=v},_?C.active:C.inactive),onClick:M,"data-testid":"file",onContextMenu:null!=(null===h||void 0===h?void 0:h.projectTemplateSlug)?b:()=>{}},o.createElement(x.E,{active:l,depth:e,highlightDepth:F,showHighlight:n,showSubHighlights:a},o.createElement("div",{className:"file-wrapper"},o.createElement(J.a,{fileName:t.name,isDarkTheme:S}),o.createElement("div",{className:"file-name"},E),t.isLocked?o.createElement(Y,null):o.createElement(ee,{users:t.users}),!t.isImmutable&&o.createElement(B.Z,{open:null!=v,onClose:y,anchorReference:"anchorPosition",anchorPosition:null!==v?{top:v.mouseY,left:v.mouseX}:void 0},o.createElement(z.Z,{dense:!0,onClick:D},"Rename"),o.createElement(z.Z,{dense:!0,onClick:L},"Delete"))))),o.createElement(K.h,{fileName:t.name,open:w,onCancel:()=>k(!1),onConfirm:()=>i(t.fileId)}))};var re=n(32135);const oe=({isHovering:e})=>{var t;const n=(0,u.I0)(),{activeFile:a,activateFile:i,environment:r,projectTemplate:v,deleteFile:b,deleteFolder:y}=(0,s.J$)(),{setActiveFile:E}=(0,c.LG)(),S=null==a?"":a.path.replace(null===a||void 0===a?void 0:a.name,""),[C,x]=(0,o.useState)(null),[T,P]=(0,o.useState)(null),{isPlayback:Z,hasEnvironments:O}=(0,l.nT)("isPlayback","hasEnvironments"),M=!O,{isFileVisible:D}=(0,g.z)(),{selectedFiles:L,setSelectedFiles:F,handleFileUpload:A,currentOperation:R}=(0,d.Y9)(),j=(0,o.useCallback)((()=>{x(S)}),[S]),q=(0,o.useCallback)((()=>{P(S)}),[S]),B=(0,o.useCallback)(((t,r)=>{if(t.type===k.d.fileInput){const t=""!==S&&null!=C&&C.startsWith(S);return o.createElement(_,{key:"add_file",depth:r,folderPath:C,onExit:()=>x(null),showHighlight:e||t,showSubHighlights:e})}if(t.type===k.d.folderInput){const t=""!==S&&null!=T&&T.startsWith(S);return o.createElement(I,{key:"add_folder",depth:r,folderPath:T,onExit:()=>P(null),showHighlight:e||t,showSubHighlights:e})}if(t.type===k.d.file){const l=""!==S&&t.file.path.startsWith(S);return o.createElement(ie,{key:t.name,file:t.file,depth:r,onDeleteFile:b,showHighlight:e||l,showSubHighlights:e,selected:L.includes(t.file.fileId),onClick:()=>{O?i(t.file.fileId):E(t.file),F([]),n({type:"tracked_user_changed",userId:void 0})},onCommandClick:()=>{(null===a||void 0===a?void 0:a.id)!==t.file.fileId&&F((e=>-1===e.indexOf(t.file.fileId)?[...e,t.file.fileId]:e.filter((e=>e!==t.file.fileId))))}})}{var l,s,c,d;const n=""!==S&&(t.path+"/").startsWith(S),a=null===v||void 0===v||null===(l=v.settings)||void 0===l?void 0:l.folders,i=null!==(s=null!==(c=null===a||void 0===a||null===(d=a.folderOverrides)||void 0===d?void 0:d[`${t.path}/`])&&void 0!==c?c:null===a||void 0===a?void 0:a.defaultOpen)&&void 0!==s&&s,u=t.children.filter((e=>e.type!==k.d.file||!Z||null!=e.file&&D(e.file.fileId)));return 0===u.length&&Z?null:o.createElement(re.g,{key:t.name,name:t.name,path:t.path+"/",defaultOpen:Z||M||i,depth:r,onAddFileToFolder:x,onAddFolderToFolder:P,onDeleteFolder:y,showHighlight:e||n,showSubHighlights:e,onFileUpload:A},u.map((e=>B(e,r+1))))}}),[S,C,e,T,Z,D,b,L,i,F,null===a||void 0===a?void 0:a.id,null===v||void 0===v||null===(t=v.settings)||void 0===t?void 0:t.folders,M,y,A,O]),z=(0,k.K)(C,T);return o.createElement("section",null,o.createElement("div",{className:"file-pane-header"},o.createElement("div",{className:"text"},"Files"),null!=(null===r||void 0===r?void 0:r.projectTemplateSlug)&&o.createElement("div",{className:"icons"},o.createElement(p.r,{onClick:q}),o.createElement(m.r,{onClick:j}))),o.createElement(h.p,{className:"file-pane-contents"},o.createElement(f.k,{path:"",onFileUpload:A},z.map((e=>B(e,0)))),o.createElement(N,{isHovering:e,onFileUpload:A})),R&&o.createElement(w,{operation:R.text,progress:R.progress}))},le=()=>{const{activeLanguage:e}=(0,c.LG)(),{environment:t,projectTemplate:n}=(0,s.J$)(),i=(0,a.$h)("sidebar.background"),u=(0,a.$h)("sidebar.foreground"),m=(0,o.useMemo)((()=>({backgroundColor:i,color:u})),[i,u]),[p,g]=(0,o.useState)(!1),{hasEnvironments:h}=(0,l.nT)("hasEnvironments"),f="html"===e||(null===t||void 0===t?void 0:t.allowMultipleFiles);return null!=(null===t||void 0===t?void 0:t.projectTemplateSlug)&&null==n?null:o.createElement(d.bI,null,o.createElement("div",{className:r()("file-pane",{open:f,isHovering:p,fill:h}),style:m,"data-testid":"file-pane",onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1)},o.createElement(oe,{isHovering:p})))}},67197:function(e,t,n){"use strict";n.d(t,{S:function(){return a}});const a=e=>new Promise(((t,n)=>{const a=new FileReader;a.onload=()=>{t(a.result)},a.onerror=()=>{n(new Error("Unable to read file"))},a.readAsText(e)}))},54283:function(e,t,n){"use strict";n.d(t,{K:function(){return c},d:function(){return s}});var a=n(96486),i=n(67294),r=n(79213),o=n(45603),l=n(23424);let s=function(e){return e.file="file",e.folder="folder",e.fileInput="fileInput",e.folderInput="folderInput",e}({});function c(e,t){const{files:n}=(0,o.LG)(),{emptyFolderPaths:c}=(0,r.J$)(),d=(0,i.useCallback)((()=>(0,l.o)(n,c)),[n,c]),u=(0,i.useCallback)((n=>{const i=(0,a.cloneDeep)(n);if(null!=e||null!=t){let n=i;let a;(null!=e?e:null!=t?t:"").split("/").forEach((e=>{if(""===e)return;const t=n.find((t=>t.name===e)),a=null!=t?t.children:null;n=null==a?n:a})),a=null!=e?{type:s.fileInput,children:[]}:{type:s.folderInput,children:[]};const r=n.findIndex((e=>0===e.children.length));n.splice(r,0,a)}return i}),[e,t]);return(0,i.useMemo)((()=>{const e=d();return u(e)}),[d,u])}},23424:function(e,t,n){"use strict";n.d(t,{o:function(){return l}});var a=n(26470),i=n(54283);const r=(e,t)=>e.type===t.type?e.name.toLowerCase().localeCompare(t.name.toLowerCase()):e.type===i.d.folder?-1:1,o=e=>e.map((({children:e,...t})=>({...t,children:o(e)}))).sort(r),l=(e,t=[])=>{const n=[...e.map((e=>({type:i.d.file,path:e.path.startsWith("/tmp/project/")?e.path.replace("/tmp/project/","coderpad/"):e.path,file:e}))),...t.map((e=>({type:i.d.folder,path:e,file:void 0})))],r=[],l={".":r};return n.forEach((({path:e,type:t,file:n})=>{let r=null;for(let o=e;;o=(0,a.dirname)(o)){if(null!=l[o]){null!=r&&l[o].push(r);break}const s={name:(0,a.basename)(o),path:o,...o===e?{type:t,file:n,children:[]}:{type:i.d.folder,file:void 0,children:[r]}};l[o]=s.children,r=s}})),o(r)}},45603:function(e,t,n){"use strict";n.d(t,{sA:function(){return I},K_:function(){return Z},WP:function(){return T},LG:function(){return O}});var a=n(16318),i=n(44078),r=n(64487),o=n(96486),l=n(67294),s=n(62267),c=n(43799),d=n(79912),u=n(21619),m=n(79011),p=n(55304),g=n(59347),h=n(61101),f=n(45223),v=n(18786);var b=n(45780),y=n(67080),E=n(59614),w=n(24293),k=n(98963),S=n(54204);let C=function(e){return e.CREATE_FILE="create_file",e.REORDER_FILE="reorder_file",e.SET_ACTIVE_FILE="set_active_file",e.UPDATE_STATE="update_state",e.UPDATE_FILE_USERS="update_file_users",e.UPDATE_FILE_USER="update_file_user",e}({});const x={files:[],activeFileId:""},_=(e,t)=>{switch(t.type){case C.CREATE_FILE:{const{file:n,activate:a}=t.value;if(e.files.some((e=>e.fileId===n.fileId&&e.path===n.path)))return e;const i=[...e.files.filter((e=>e.fileId!==n.fileId)),n],r={...e,files:i};return null!==a&&void 0!==a&&a&&(r.activeFileId=n.fileId),r}case C.REORDER_FILE:return{...e,files:[...e.files,...t.value]};case C.SET_ACTIVE_FILE:return{...e,activeFileId:t.value};case C.UPDATE_STATE:return{...e,...t.value};case C.UPDATE_FILE_USERS:{const n=e.files.map((e=>{if(e.fileId===t.value.fileId)return{...e,users:t.value.fileUsers};{const n=e.users.filter((e=>!t.value.fileUsers.some((t=>t.id===e.id))));return{...e,users:n}}}));return{...e,files:n}}case C.UPDATE_FILE_USER:{const n=e.files.map((e=>{if(e.fileId===t.value.fileId)return{...e,users:[...e.users.filter((e=>e.id!==t.value.fileUser.id)),t.value.fileUser]};{const n=e.users.filter((e=>e.id!==t.value.fileUser.id));return{...e,users:n}}}));return{...e,files:n}}}};u.Po.addListener((e=>{r.Tb(e,{tags:{layer:"monaco"}});const t=e.cause;null!=t&&r.Tb(t,{tags:{layer:"monaco"}})}));const T=new m.v,I=l.createContext({}),P={},Z=function({children:e}){var t,n,u;const m=(0,l.useRef)(new Set),[Z,O]=(0,l.useReducer)(_,x),M=(0,s.I0)(),D=null!==(t=(0,s.v9)(y.aB))&&void 0!==t?t:P,{firebaseAuthorId:L,invisible:F,isSandbox:A,slug:R,isPlayback:N,question:j}=(0,f.nT)("firebaseAuthorId","invisible","isSandbox","slug","isPlayback","question"),q=(0,l.useMemo)((()=>(0,o.fromPairs)((0,o.flatMap)(Object.values(D).map((({files:e})=>e)).filter(h.K),(e=>e.map((e=>[e.path,e.default_path])))))),[D]),B=(0,c.i)(),{files:z,activeFileId:$}=Z,H=(0,l.useRef)(null),U=(0,l.useRef)(null),[Q,V]=(0,l.useState)(!1),W=(0,l.useCallback)((()=>Q?U.current:null),[Q]),G=(0,l.useCallback)((e=>{U.current=e,V(!0)}),[]),[Y,K]=(0,l.useState)((0,s.v9)((e=>e.padSettings.language))),J=D[Y].default_path,[X,ee]=(0,l.useState)((0,s.v9)((e=>e.padSettings.questionId))),[te,ne]=(0,l.useState)(0),ae=(0,l.useRef)(!1),ie=(0,l.useRef)(!1),re=(0,l.useRef)(null!==(n=null===j||void 0===j?void 0:j.contents)&&void 0!==n?n:null),oe=(0,l.useRef)(null===(u=(0,f.oB)("question"))||void 0===u?void 0:u.starterCodeByLanguage),{persistLanguageChange:le}=(()=>{const{firebaseAuthorId:e}=(0,f.nT)("firebaseAuthorId");return{persistLanguageChange:(0,l.useCallback)((t=>{var n;(0,v.r)({type:"change-active-language",user:null!==(n=null===e||void 0===e?void 0:e.toString())&&void 0!==n?n:"unknown",data:{language:t,multifile:"html"===t,initialLanguage:!1}})}),[e])}})(),se=(0,l.useCallback)((e=>{O({type:C.SET_ACTIVE_FILE,value:e.fileId})}),[]);(0,l.useEffect)((()=>{const e=({language:e,fromRemote:t})=>{var n;ie.current=t,K(e),N||t||le(e),"html"===e&&(null===(n=D.html.files)||void 0===n||n.forEach((e=>{const t=(0,g.a)(e.path),n=(0,E.Z)().firepadHeadless(`files/${t}`);n.on("ready",(()=>{n.isHistoryEmpty()&&(n.setText(e.example),n.dispose())}))})))},t=({contents:e,questionId:t,language:n,append:a,starterCodeByLanguage:i})=>{ie.current=!1,re.current=e,ae.current=a,oe.current=i;const r=z.filter(h.K).find((({isGlobalFile:e})=>e));se(r),n===Y?X===t?ne(te+1):ee(t):(ee(t),K(n),le(n))};return T.on("languageChange",e),T.on("questionSelectedByLocalUser",t),T.on("questionDataLoaded",(({starterCodeByLanguage:e})=>{oe.current=e})),()=>{T.remove("languageChange",e),T.remove("questionSelectedByLocalUser",t),T.remove("questionDataLoaded",t)}}),[te,Y,z,N,le,D,se,X]);const ce=(0,s.v9)((e=>e.padSettings.packageName)),de=Y===p.S.HTML,ue=(0,s.v9)(y.S8),me=(0,l.useMemo)((()=>de?z.find((e=>e.fileId===$)):z.filter(h.K).find((({isGlobalFile:e})=>e))),[$,z,de]),pe=null===D||void 0===D?void 0:D[Y],ge=(0,l.useMemo)((()=>{if(null!=me){if(me.isGlobalFile){var e;if(null!=(null===(e=oe.current)||void 0===e?void 0:e[Y]))return oe.current[Y];{var t;const{multifile_example:e,example:n}=pe;return null!==(t=null!==e&&void 0!==e?e:n)&&void 0!==t?t:""}}{var n,a;const e=null===pe||void 0===pe||null===(n=pe.files)||void 0===n||null===(a=n.find((e=>e.default_path===me.name)))||void 0===a?void 0:a.example;return null!==e&&void 0!==e?e:""}}return""}),[me,pe,Y]),he=(0,s.v9)((({editorSettings:e})=>e));(0,S.X)(Y);const fe=(0,l.useRef)(""),ve=(0,l.useCallback)((()=>{A||B(`/${R}/update_firebase`,{method:"post"})}),[A,R]),be=(0,l.useCallback)((()=>{var e,t;const n=null===(e=U.current)||void 0===e||null===(t=e.getModel())||void 0===t?void 0:t.getValue();null!=n&&n!==fe.current&&(fe.current=n,ve())}),[ve]);(0,l.useEffect)((()=>{if(A)return;const e=setInterval(be,6e4+Math.floor(6e4*Math.random()));return()=>{clearInterval(e)}}),[A,be]);const ye=(0,l.useCallback)(((e,t=!1)=>{O({type:C.CREATE_FILE,value:{file:e,activate:t}})}),[]),Ee=(0,l.useCallback)((e=>{O({type:C.UPDATE_STATE,value:e})}),[]),we=(0,l.useCallback)(((e,t)=>{O({type:C.UPDATE_FILE_USER,value:{fileId:e,fileUser:t}})}),[O]),ke=(0,l.useCallback)((e=>{const t=null!=e?`files/${e}/users`:"users";(0,E.Z)().watch(t,(t=>{let n=[];null!=t&&(n=Object.keys(t).filter((e=>t[e].cursor)).map((e=>{var n;const a=t[e];return{id:e,color:a.color,cursorPosition:null===(n=a.cursor)||void 0===n?void 0:n.position}}))),O({type:C.UPDATE_FILE_USERS,value:{fileId:null!==e&&void 0!==e?e:"",fileUsers:n}})}))}),[]);(0,l.useEffect)((()=>{var e,t;if(null==ce)return;const n=null===D||void 0===D||null===(e=D[Y].packages)||void 0===e||null===(t=e[ce])||void 0===t?void 0:t.example;null!=n&&U.current.getModel().setValue(n)}),[D,ce,Y]),(0,l.useEffect)((()=>{if(!Se.current)return;const e=e=>{var t,n,a,i;const r=(0,g.Q)(e),o={name:null!==(t=q[r])&&void 0!==t?t:null===D||void 0===D||null===(n=D.html)||void 0===n?void 0:n.default_path,path:null!==(a=q[r])&&void 0!==a?a:null===D||void 0===D||null===(i=D.html)||void 0===i?void 0:i.default_path,fileId:e,users:[],isGlobalFile:!1,isLocked:!1,isImmutable:!1};N||ke(e),O({type:C.CREATE_FILE,value:{file:o}})};(()=>{var e,t;const n=null===D||void 0===D?void 0:D[Y],a={name:null!==(e=null===n||void 0===n?void 0:n.default_path)&&void 0!==e?e:"pad.txt",path:null!==(t=null===n||void 0===n?void 0:n.default_path)&&void 0!==t?t:"pad.txt",isGlobalFile:!0,fileId:"",users:[],monacoLanguage:null===n||void 0===n?void 0:n.monaco_language,isLocked:!1,isImmutable:!1};O({type:C.CREATE_FILE,value:{file:a}})})(),(0,E.Z)().watch("fileIds",(t=>{Object.keys(null!==t&&void 0!==t?t:[]).forEach(e)}))}),[D,q,Y,ke,N]),(0,l.useEffect)((()=>{(0,a.H)(null===he||void 0===he?void 0:he.darkColorScheme)}),[null===he||void 0===he?void 0:he.darkColorScheme]);const Se=(0,l.useRef)(!0),Ce=(0,l.useRef)(""),xe=(0,l.useRef)(null),_e=null!=me,Te=(0,d.Z)((e=>{var t;ve();const n=U.current;if(null==n||!_e)return;const a=i.Fd.Uri.file(me.name),o=null===(l=me.isGlobalFile)||void 0===l||l?"":`files/${me.fileId}`;var l;if(me.isGlobalFile&&me.path!==J)return;Ce.current=null!=xe.current?`\nYour previous ${null===D||void 0===D?void 0:D[xe.current].display} content is preserved below:\n\n`+(null===(t=n.getModel())||void 0===t?void 0:t.getValue()):"";let s=i.Fd.editor.getModel(a),c="";var d;null==s?(s=i.Fd.editor.createModel("",me.monacoLanguage,a),c=ge,["plaintext","markdown"].includes(null!==(d=xe.current)&&void 0!==d?d:"")&&(c+=Ce.current)):N||(c=s.getValue());let u=!1;if(null!=re.current&&(u=!0,c=ae.current?c+"\n"+re.current:re.current,re.current=null),n.setModel(s),N)return Se.current=!1,void e(!0);{const t=(null!==L&&void 0!==L?L:Date.now().toString().substring(5)).toString(),a=(0,E.Z)().firepad(s,o,(0,k.D)(t,ge));return a.on("error",(e=>{m.current.has(null===e||void 0===e?void 0:e.message)||(r.Tb(e,{tags:{layer:"firepad"}}),m.current.add(null===e||void 0===e?void 0:e.message)),M((0,b.w$)())})),a.on("ready",(()=>{const t=Se.current;if(Se.current=!1,e(!0),t&&(M({type:"editor_mounted",editor:U.current}),ke()),A||!t&&(me.isGlobalFile||a.isHistoryEmpty())&&(!me.isGlobalFile||xe.current!==Y||u)&&!ie.current){a.setText(c);const e=s.findNextMatch(Ce.current,s.getPositionAt(0),!1,!0,null,!1);null!=e&&(n.setSelection(e.range),n.getAction("editor.action.commentLine").run().then((()=>{n.setPosition({column:1,lineNumber:1})})))}xe.current=Y,H.current=a})),()=>{a.dispose(),H.current=null}}}),[M,X,te,Ee,A,R,L,ve,ge,_e,null===me||void 0===me?void 0:me.isGlobalFile,null===me||void 0===me?void 0:me.fileId,Y,D,N,ke,null===me||void 0===me?void 0:me.name,null===me||void 0===me?void 0:me.path,null===me||void 0===me?void 0:me.monacoLanguage,Q,J],!1);(0,l.useEffect)((()=>{const e=z.filter(h.K);if(0===e.length||null==D)return;const t=D[Y],n=null===t||void 0===t?void 0:t.default_path;if(e.every((e=>!e.isGlobalFile||e.name===n)))return;const a=e.map((e=>e.isGlobalFile?{...e,name:n,path:n,monacoLanguage:t.monaco_language}:{...e}));Ee({files:a,activeFileId:""})}),[D,z,Y,Ee]),(0,l.useEffect)((()=>{const e=U.current;if(null!=e&&null!==me&&void 0!==me&&me.name.endsWith(".md")){const t=e.getModel(),n=t.onDidChangeContent((e=>{M({type:"markdown_content_changed",content:t.getValue()})}));return()=>{n.dispose()}}}),[null===me||void 0===me?void 0:me.name,M]);const Ie=(0,l.useMemo)((()=>{if(null!=ue&&!F){const e=(null!==L&&void 0!==L?L:Date.now().toString().substring(5)).toString();return(0,w.x6)(ue,e)}}),[ue,F,L]);(0,l.useEffect)((()=>{var e;null!=Ie&&(null===(e=H.current)||void 0===e||e.setUserColor(Ie))}),[Ie,Te]);const Pe=(0,s.v9)((e=>e.userState.uncommittedUsername));return(0,l.useEffect)((()=>{var e;null===(e=H.current)||void 0===e||e.setUserName(Pe)}),[Pe,Te,Y]),l.createElement(I.Provider,{value:{activeLanguage:Y,activeLanguageSettings:pe,files:z,updateFileUser:we,activeFile:me,setActiveFile:se,setSingleFilePadLanguage:K,createFile:ye,setEditor:G,firepadReady:Te,questionId:X,getEditor:W}},e)};function O(){const e=(0,l.useContext)(I);if(null==e)throw new Error("`useMonacoContext` hook must be a descendant of a `MonacoContextProvider`");return e}},27962:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return me}});n(56968);var a=n(93584),i=n(3838),r=n(37645),o=n(2658),l=n(77750),s=n(56408),c=n(88979),d=n(72642),u=n(94184),m=n.n(u),p=n(67294),g=n(62267),h=n(45223),f=n(94153),v=n(79213),b=n(44078),y=n(45603),E=n(38695),w=n(52716),k=n(18612),S=n(67080),C=n(59614),x=n(25934),_=n(48564),T=n(40172),I=n(59857);const P={frames:[],frameIndex:0,playing:!1,participants:{},frameDelay:0},Z=(0,p.createContext)(P);const O={},M=({children:e})=>{var t;const n=(0,g.I0)(),a=(0,T.B)(),i=null!==(t=(0,g.v9)(S.aB))&&void 0!==t?t:O,{getEditor:r,files:o,activeFile:l,setActiveFile:s,updateFileUser:c,setSingleFilePadLanguage:d}=(0,y.LG)(),{isPlayback:u,hasEnvironments:m}=(0,h.nT)("isPlayback","hasEnvironments"),f=(0,p.useRef)(null),v=(0,p.useRef)(null),M=(0,p.useRef)({}),D=(0,p.useRef)(),{environmentSlug:L}=(0,g.v9)((e=>e.padSettings)),{lastLanguageEvent:F}=(0,x.z)(),{frameIndex:A,frameDelay:R,frames:N,userFrames:j}=(0,_.V)(),q=(0,p.useMemo)((()=>r()),[r]),{deleteRange:B,moveCursor:z,hideAllCursors:$,showCursor:H,insertText:U,replaceAll:Q,highlightRangeAndDelete:V}=(0,E.u)(q,{readOnly:u}),{playing:W,paused:G}=(0,I.t)(),Y=(0,p.useCallback)(((e="")=>a[e]),[a]),K=(0,p.useMemo)((()=>{if(null==j)return 0;let e=0;const t=j.slice(A);for(let n=0;n<t.length;n++){if("retain"!==t[n].type)break;if(e++,e>5)break}return e}),[j,A]);(0,p.useEffect)((()=>{n(K>5?{type:"playback_fastforward_start"}:{type:"playback_fastforward_stop"})}),[K,n]),(0,p.useEffect)((()=>{u&&(0,C.Z)().get("globalEvents",(e=>{null!=e&&n({type:"playback_global_events_history_received",globalEvents:e})}))}),[n,u]),(0,p.useEffect)((()=>{if(u&&null!=q)for(const e of o){const t=b.Fd.Uri.file(e.name);null==b.Fd.editor.getModel(t)&&(M.current[e.fileId||"0_global"]=b.Fd.editor.createModel("",void 0,t))}}),[q,o,u]);const J=(0,p.useCallback)((e=>{const t=t=>t.peripheralFrames.reverse().find((t=>t.fileId===e.fileId));let n=null;if(0===N.length)return null;for(let a=A;a>=0;a--){const i=N[a];if(i.environmentSlug!==L)continue;if(i.fileId===e.fileId){if(n=i,i.peripheralFrames.length>0){const e=t(i);null!=e&&(n=e)}break}const r=t(i);if(null!=r){n=r;break}}return n}),[A,N,L]),X=(0,p.useCallback)((()=>{if($(),l){const e=J(l);Q((null===e||void 0===e?void 0:e.value)||"")}for(const e in null===l||void 0===l?void 0:l.users){const t=null===l||void 0===l?void 0:l.users[e];null!=t&&H(e,t)}}),[l,Q,$,H,J]);(0,p.useEffect)((()=>{if(null==q)return;const e=q.onDidChangeModel(X);return()=>{e.dispose()}}),[q,X]),(0,p.useEffect)((()=>{if(null!=F){const{user:e,data:t}=F;if(t.language!==D.current){const a=Y(e);d(t.language);const{display:r}=i[t.language],o=null!==r&&void 0!==r?r:t.language,l=t.initialLanguage?`Pad started in ${o}`:`${(null===a||void 0===a?void 0:a.name)||"A user"} changed the language to ${o}`;n((0,w.GZ)({message:l,key:`playbackLanguageChange-${t.language}`,variant:"info",autoDismissMs:1500,onClick:()=>{}})),D.current=t.language}}}),[q,F,i,Y,d,n]),(0,p.useEffect)((()=>{const e=j[A];if(null!=e&&!G){var t;const{fileId:n,authorId:a}=e,i=Y(a),r=null!==(t=null===l||void 0===l?void 0:l.fileId)&&void 0!==t?t:"0_global",d="0_global"===n?"":n;if(!m&&a&&i&&d!==r&&c(null!==d&&void 0!==d?d:"",{id:a,name:i.name,color:i.color,cursorPosition:0}),n!==r){const e=o.find((e=>e.fileId===n));null!=e&&s(e)}}}),[W,G,null===l||void 0===l?void 0:l.fileId,Y,s,c,n,m,j,A,o]);const ee=(0,p.useCallback)((e=>{if(e.environmentSlug!==L)return;const t=()=>{e.peripheralFrames.forEach((e=>{ee(e)}))};if((null===l||void 0===l?void 0:l.fileId)!==e.fileId)return void t();const{value:n,type:a,editStartOffset:i,editEndOffset:r,highlightRanges:o}=e,s=n.substring(null!==i&&void 0!==i?i:0,r),c=Y(e.authorId);"delete"===a?null!=o&&o.length>0?o.forEach((n=>{V(n.startOffset,n.endOffset,R-k.DG,e.authorId,c,t)})):(B(null!==i&&void 0!==i?i:0,null!==r&&void 0!==r?r:0),z(e.authorId,c,null!==i&&void 0!==i?i:0),t()):"insert"===a&&(f.current!==A-1?(Q(n),z(e.authorId,c,null!==r&&void 0!==r?r:0)):null!=o&&o.length>0?o.forEach((t=>{var a,i;const r=n.substring(t.startOffset,t.endOffset);U(r,null!==(a=t.startOffset)&&void 0!==a?a:0),z(e.authorId,c,null!==(i=t.endOffset)&&void 0!==i?i:0)})):(U(s,null!==i&&void 0!==i?i:0),z(e.authorId,c,null!==r&&void 0!==r?r:0)),t())}),[L,null===l||void 0===l?void 0:l.fileId,Y,V,R,B,z,A,Q,U]);return(0,p.useEffect)((()=>{if(A!==f.current&&null!=q&&null!=N&&null!=l){const n=N[A];if(null!=n){var e;if(W)ee(n);else{if(f.current===A)return;const e=J(l);if(e){var t;const{value:a,type:i,editStartOffset:r,editEndOffset:o}=e,l=null!==(t="delete"===i?r:o)&&void 0!==t?t:0;Q(a),null!=n.authorId&&z(n.authorId,Y(n.authorId),l)}}f.current=A,v.current=null!==(e=null===l||void 0===l?void 0:l.fileId)&&void 0!==e?e:null}}}),[l,q,W,A,N,Y,Q,z,ee,J]),p.createElement(Z.Provider,{value:{...P,frames:N,frameIndex:A,playing:W,participants:a,frameDelay:R}},e)};var D=n(45780),L=n(90512);var F=()=>{const[e,t]=(0,p.useState)(!1),n=(0,h.oB)("logoUrl"),[a,i]=(0,p.useState)(!1),r=(0,p.useCallback)((e=>{const t=e.target;e.target instanceof HTMLImageElement&&t.height&&t.width&&i(t.height===t.width)}),[]),o=(0,p.useCallback)((()=>{t(!0)}),[]);return null==n||e?null:p.createElement("img",{src:window.padConfig.logoUrl,className:(0,L.Z)("branded-logo",{square:a}),onError:o,onLoad:r,alt:"company logo"})},A=(n(84894),n(23811),n(17091),n(31892)),R=n(18786),N=n(82544),j=n(16233);var q=()=>{var e;const[t,n]=(0,p.useState)(),{getEditor:a,setEditor:i,firepadReady:r}=(0,y.LG)(),o=(0,A.$h)("editor.background"),l=(0,A.$h)("editor.foreground"),s=(0,p.useMemo)((()=>({backgroundColor:o,color:l})),[o,l]),c=(0,g.v9)((({editorSettings:e})=>e.keymap)),{firebaseAuthorId:d,isOwner:u,takeHome:m}=(0,h.nT)("firebaseAuthorId","isOwner","takeHome"),{takeHomeOpened:f}=(0,g.v9)((e=>e.padSettings)),v=()=>{var e;n(null===(e=document.getSelection())||void 0===e?void 0:e.toString())},b=(0,p.useCallback)((e=>{var n;const i=e.clipboardData.getData("text"),r=a(),o=null===r||void 0===r||null===(n=r.getModel())||void 0===n?void 0:n.getValue();i===t||null!==o&&void 0!==o&&o.includes(i)||(0,R.r)({type:"pasted-content",user:d,data:{content:i}})}),[d,t,a]);return p.createElement("div",{className:"monaco-holder",onCopy:v,onCut:v,onPasteCapture:b},!r&&p.createElement("div",{className:"monaco-loading-overlay",style:s},p.createElement(N.Z,null)),(u||!m||f)&&p.createElement(A.ZP,{options:{unusualLineTerminators:"off"},ref:e=>{window.editor=e,function(e){const t=e.trigger;e.trigger=function(n,a,i){if(function(e,t){return"paste"===e}(a)){const t=e.getModel();if(null!=t){const e=t.getOptions().tabSize;i.text=i.text.replace(/\t/g," ".repeat(e))}}return t.call(e,n,a,i)}}(e),i(e)},keyBindingsMode:null!==(e=j.j[c])&&void 0!==e?e:"classic"}))};var B=()=>{var e,t;const{activeFile:n,getEditor:a}=(0,y.LG)(),i=null===n||void 0===n||null===(e=n.name)||void 0===e||null===(t=e.split("/"))||void 0===t?void 0:t.reverse()[0],r=(0,g.v9)(S.S8),o=(0,h.oB)("isPlayback"),l=a(),s=(0,A.$h)("editor.titlebar.background"),c=(0,A.$h)("editor.titlebar.foreground"),d=(0,A.$h)("editor.titlebar.userIndicatorBackground"),u=(0,A.$h)("editor.titlebar.userIndicatorForeground"),m=(0,p.useMemo)((()=>({backgroundColor:s,color:c})),[s,c]),f=(0,p.useMemo)((()=>({backgroundColor:d,color:u})),[d,u]);return p.createElement("div",{className:"file-bar",style:m},p.createElement("div",{className:"file-bar-name"},i),!o&&p.createElement("div",{className:"file-user-indicators"},null===n||void 0===n?void 0:n.users.map((e=>{const t=r[e.id];if(null===t||void 0===t||!t.name)return;const{cursorPosition:n}=e,a=(((null===l||void 0===l?void 0:l.getValue().slice(0,n))||"").match(/\n/g)||[]).length+1;return p.createElement("div",{className:"file-user-indicator",key:e.id,style:f},p.createElement("div",{className:"file-user-indicator-initial",style:{background:e.color}},t.name[0].toUpperCase()),p.createElement("div",{className:"file-user-indicator-line-number"},a))}))))},z=n(2112),$=n(86994),H=n(60345),U=n(59062),Q=n(66604),V=n.n(Q),W=n(25088),G=n(32257);var Y=n(80953),K=n(22324);function J(e,t,n){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:String(a))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const X="lsp";var ee=function(e){return e.InitializeServer="initializeServer",e.ServerInitialized="serverInitialized",e.ServerInitializationError="serverInitializationError",e.NativeMessage="nativeMessage",e.ServerClose="serverClose",e.FileRequest="fileRequest",e.FileResponse="fileResponse",e}(ee||{});function te(e,t){return new Promise((n=>{e.emit(X,t,(e=>{n(e)}))}))}class ne extends G.AbstractMessageReader{constructor(e,t){super(),this.socket=e,this.languageId=t,J(this,"listenDisposable",void 0)}listen(e){const t=t=>{if(t.languageId===this.languageId)switch(t.type){case ee.NativeMessage:e(t.message);break;case ee.ServerClose:null!=t.error&&this.fireError(t.error),this.fireClose()}};this.socket.on(X,t);const n=()=>{this.fireClose()};return this.socket.once("disconnect",n),this.listenDisposable=G.Disposable.create((()=>{this.socket.off(X,t),this.socket.off("disconnect",n)})),this.listenDisposable}dispose(){var e;null===(e=this.listenDisposable)||void 0===e||e.dispose()}}class ae extends G.AbstractMessageWriter{constructor(e,t){super(),this.socket=e,this.languageId=t}async write(e){var t,n;this.socket.connected&&(t=this.socket,n={type:ee.NativeMessage,languageId:this.languageId,message:e},t.emit(X,n))}end(){}}(0,$.ZB)("python2",{documentSelector:[{language:"python"}],mutualizable:!1});class ie extends $.OV{constructor(e,t,n,a){super(t,n,a),this.padSlug=e}async getSecurityToken(){const e=await fetch(`/${this.padSlug.replace("sandbox-","")}/language_server_token`);if(!e.ok)throw new Error("Something went wrong.");return(await e.json()).token}}class re extends ie{constructor(e){super(e,"wss://lsp-mutualized.coderpad.io",!0)}}class oe extends ie{constructor(e){super(e,"wss://lsp-session.coderpad.io",!0,e)}}const le=new class{constructor(){J(this,"rootMonacoUri",b.Fd.Uri.file(Y.T)),J(this,"automaticTextDocumentUpdate",!1),J(this,"rootUri",this.rootMonacoUri.toString()),J(this,"workspaceFolders",[{uri:this.rootMonacoUri,index:0,name:"main"}])}async openConnection(e){const t=await(0,K.V)(),n=await te(t,{type:ee.InitializeServer,languageId:e});if(n.languageId!==e)throw new Error(`Expected '${e}' but got '${n.languageId}' languageId as server initialization response`);if(n.type===ee.ServerInitialized)return{reader:new ne(t,e),writer:new ae(t,e)};throw n.type===ee.ServerInitializationError?new Error(`Failed to start LSP server: ${n.reason}`):new Error("Unexpected server initialization response type")}useMutualizedProxy(e,t){return t.mutualizable}async getFileContent(e){const t=await(0,K.V)();try{const n=await async function(e,t){let n;return await Promise.race([e,new Promise(((e,a)=>n=window.setTimeout(a,t)))]).finally((()=>clearTimeout(n)))}(te(t,{type:ee.FileRequest,path:e.path}),3e3);return n.type!==ee.FileResponse?(console.error("[LSP] Unexpected file request response type",e.toString()),null):null==n.content?(console.error("[LSP] File not found",e.toString()),null):b.Fd.editor.createModel(n.content,void 0,e)}catch(n){return console.error("[LSP] Timeout retrieving file",e.toString()),null}}};var se=function(){var e;const{activeLanguageSettings:t,firepadReady:n}=(0,y.LG)(),[a,i]=(0,p.useState)(null),{environment:r,projectTemplate:o}=(0,v.J$)(),{slug:l,isSandbox:s}=(0,h.nT)("slug","isSandbox");!function(){const{environment:e,files:t,activateFile:n}=(0,v.J$)(),{getEditor:a}=(0,y.LG)();(0,p.useEffect)((()=>{if(null!=(null===e||void 0===e?void 0:e.projectTemplateSlug)){const e=(0,b.FQ)((async(e,i,r,o)=>{const l=t.find((t=>t.monacoPath===e.uri.path));return null!=l?(n(l.id),new Promise((t=>{const n=e.onDidChangeAttached((()=>{n.dispose(),t(a())}))}))):null}));return()=>{e.dispose()}}}),[n,null===e||void 0===e?void 0:e.projectTemplateSlug,t,a])}();const c=null===t||void 0===t?void 0:t.language_client_id,d=(0,p.useRef)(),u=(0,p.useCallback)((e=>{"connecting"===e.status?d.current=new Date:"ready"===e.status&&(0,f.j)("Language Server Ready",{duration:Date.now()-d.current.getTime(),languageClient:c}),i(e.status)}),[c]),{autocomplete:m}=(0,g.v9)(S.Mg),E=null!=a&&["error","closed"].includes(a),w=(0,A.$h)("statusBar.background"),k=(0,A.$h)(E?"errorForeground":"statusBar.foreground"),C=(0,A.$h)("statusBar.border"),x=(0,p.useMemo)((()=>({backgroundColor:w,color:k,borderTop:`1px solid ${C}`})),[w,k,C]),_=(0,p.useMemo)((()=>null===s||void 0===s||s||!(0,W.JE)()?new re(l):new oe(l)),[l,s]),{languageClients:T,infrastructure:I,clientManagerOptions:P}=(0,p.useMemo)((()=>null!=(null===r||void 0===r?void 0:r.projectTemplateSlug)&&null!=(null===o||void 0===o?void 0:o.settings.lsp)?{languageClients:V()(o.settings.lsp,(({clientSettings:{defaultOptionsLanguageId:e,...t}})=>({...H.Qq[e],...t}))),infrastructure:le,clientManagerOptions:{maxStartAttemptCount:3}}:null!=c?{languageClients:{[c]:void 0},infrastructure:_}:{languageClients:{},infrastructure:null}),[null===r||void 0===r?void 0:r.projectTemplateSlug,c,_,null===o||void 0===o?void 0:o.settings.lsp]);if((0,p.useEffect)((()=>{i(null)}),[T,m]),0===Object.keys(T).length||!m||null==I||!n)return null;const Z=null!=(null===r||void 0===r?void 0:r.projectTemplateSlug)?"Project":null!==(e=null===t||void 0===t?void 0:t.display)&&void 0!==e?e:"",O={connecting:`Activating ${Z} IntelliSense`,connected:`Activating ${Z} IntelliSense`,error:`Unable to activate ${Z} IntelliSense`,closed:`${Z} IntelliSense interrupted`,inactivityShutdown:`${Z} IntelliSense interrupted`};return p.createElement(p.Fragment,null,Object.entries(T).map((([e,t])=>p.createElement($.ZP,{key:e,id:e,clientOptions:t,clientManagerOptions:P,infrastructure:I,onDidChangeStatus:u,userInactivityDelay:3e5,userInactivityShutdownDelay:3e5}))),null!=a&&"ready"!==a&&p.createElement("div",{className:"monaco-editor-status-bar",style:x},["connecting","connected"].includes(a)&&p.createElement(U.Z,{className:"monaco-editor-status-bar-spinner",size:16,color:"primary"}),O[a]))},ce=n(96486),de=n.n(ce);function ue(){return function(){const{firepadReady:e}=(0,y.LG)(),{goldman:t,isOwner:n}=(0,h.nT)("goldman","isOwner"),a=(0,p.useRef)(!1);(0,p.useEffect)((()=>{!a.current&&e&&(0,C.Z)().get("users",(e=>{t&&!n&&de().filter(e,(e=>!e.isOwner&&!!e.connections)).length>1?window.location.assign("/pad-full"):a.current=!0}))}),[e])}(),null}var me=()=>{const{hasEnvironments:e,isPlayback:t}=(0,h.nT)("isPlayback","hasEnvironments"),n=(0,g.I0)(),{activeFile:u}=(0,v.J$)(),{sentinel:b,hasErrorOccurred:E}=(0,g.v9)((e=>e.editorStatus)),[w,k]=(0,p.useState)(!1);(0,p.useEffect)((()=>{k(E)}),[E]);const S=(0,p.useCallback)((()=>{n((0,D.zW)()),(0,f.j)("Dialog editor reload clicked")}),[n]),C=e?p.Fragment:y.K_,x=p.createElement("div",{className:m()("monaco-editor-holder",{fullHeight:e}),"data-testid":"monaco-code-editor"},e?null:p.createElement(z.d,null),p.createElement("div",{className:"monaco-editor-pane"},e?null:p.createElement(B,null),p.createElement("div",{className:"monaco-editor"},null!==u&&void 0!==u&&u.isBinary||null!==u&&void 0!==u&&u.isLargeFile?p.createElement(a.Z,{sx:e=>({color:e.palette.editor.iconStroke,display:"flex",alignItems:"center",justifyContent:"center",width:"100%"})},null!==u&&void 0!==u&&u.isBinary?"Unable to display file":"File is too large to display"):p.createElement(q,null),p.createElement(F,null)),!0!==t&&p.createElement(se,null)));return p.createElement(C,{key:b},p.createElement(ue,null),!0===t?p.createElement(M,null,x):x,p.createElement(i.Z,{open:w},p.createElement(r.Z,null,p.createElement(o.Z,{component:"div",variant:"h6",color:"text.primary"},"Editor syncing disconnected")),p.createElement(l.Z,null,p.createElement(s.Z,null,'Your editor has gotten out of sync. Other participants will not see your changes and any new changes will not be saved. Click "Reload Editor" below to reconnect your editor and ensure that your edits are saved.')),p.createElement(c.Z,null,p.createElement(d.Z,{color:"inherit",variant:"outlined",onClick:()=>k(!1)},"Cancel"),p.createElement(d.Z,{color:"primary",variant:"contained",onClick:S},"Reload Editor"))))}},16233:function(e,t,n){"use strict";n.d(t,{j:function(){return a}});const a={emacs:"emacs",vim:"vim",sublime:"classic"}},16318:function(e,t,n){"use strict";n.d(t,{H:function(){return i}});var a=n(44078);function i(e=!0){a.Fd.editor.setTheme(function(e=!0){return e?"Default Dark+":"Default Light+"}(e))}i((0,n(76310).g)().dark_color_scheme),setTimeout((()=>{(0,a.R7)([{"workbench.colorCustomizations":{"[Default Dark+]":{"editor.background":"#1E2126","editor.titlebar.background":"#22282d","editor.titlebar.foreground":"#BDBDBD","editor.titlebar.userIndicatorBackground":"#313439","editor.titlebar.userIndicatorForeground":"#BDBDBD","sidebar.background":"#313439","sidebar.foreground":"#9A9A9A","sidebar.activeSelectionBackground":"#22282D","sidebar.activeSelectionForeground":"#FFFFFF","statusBar.background":"#22282e","statusBar.foreground":"#FFFFFF","statusBar.border":"#2d353c",errorForeground:"#f1c40f"},"[Default Light+]":{"editor.titlebar.background":"#fafafa","editor.titlebar.foreground":"#000000","editor.titlebar.userIndicatorBackground":"#ededed","editor.titlebar.userIndicatorForeground":"#21252A","sidebar.background":"#ededed","sidebar.foreground":"#20252a","sidebar.activeSelectionBackground":"#dadada","sidebar.activeSelectionForeground":"#21252a","statusBar.background":"#ffffff","statusBar.foreground":"#20252a","statusBar.border":"#dadada",errorForeground:"#f1c40f"}}}])}),0)},38695:function(e,t,n){"use strict";n.d(t,{u:function(){return o}});var a=n(44078),i=n(71899),r=n(67294);const o=(e,t)=>{const{readOnly:n}={readOnly:!1,...t},o=(0,r.useRef)(),l=(0,r.useRef)(),s=(0,r.useRef)({}),c=(0,r.useRef)({}),d=(0,r.useCallback)((t=>{null!=e&&(n&&e.updateOptions({readOnly:!1}),e.executeEdits("",t))}),[e,n]),u=(0,r.useCallback)(((t,n)=>{const i=null===e||void 0===e?void 0:e.getModel();if(null!=e&&null!=i){const e=i.getPositionAt(n);d([{range:new a.Fd.Range(e.lineNumber,e.column,e.lineNumber,e.column),text:t,forceMoveMarkers:!0}])}}),[e,d]),m=(0,r.useCallback)(((t,n,i)=>{const r=null===e||void 0===e?void 0:e.getModel();if(null!=e&&null!=r){const e=r.getPositionAt(n),o=r.getPositionAt(i);d([{range:new a.Fd.Range(e.lineNumber,e.column,o.lineNumber,o.column),text:t,forceMoveMarkers:!0}])}}),[e,d]),p=(0,r.useCallback)((t=>{const n=null===e||void 0===e?void 0:e.getModel();null!=e&&null!=n&&d([{range:n.getFullModelRange(),text:t,forceMoveMarkers:!0}])}),[e,d]),g=(0,r.useCallback)(((t,n)=>{null!=e&&m("",t,n)}),[e,m]),h=(0,r.useCallback)((t=>{const n=null===e||void 0===e?void 0:e.getModel();if(null!=e&&null!=n){const a=n.getPositionAt(t);e.revealPositionInCenterIfOutsideViewport(a)}}),[e]),f=(0,r.useCallback)(((t,n,a)=>{if(null!=(null===e||void 0===e?void 0:e.getModel())&&null!=o.current&&null!=(null===n||void 0===n?void 0:n.name)){const e=s.current[t],i=c.current[t];if(null!=(null===e||void 0===e?void 0:e.ref))e.ref.setOffset(a),e.lastPosition=a;else{const e=o.current.addCursor(t,n.color,n.name);e.setOffset(a),s.current[t]={lastPosition:a,ref:e}}null!=i&&i.dispose(),h(a)}}),[e,h]),v=(0,r.useCallback)(((t,n)=>{if(null!=(null===e||void 0===e?void 0:e.getModel())&&null!=o.current&&null!=(null===n||void 0===n?void 0:n.name)){const e=s.current[t];if(null==(null===e||void 0===e?void 0:e.ref)){var a;const i=null!==(a=null===e||void 0===e?void 0:e.lastPosition)&&void 0!==a?a:0,r=o.current.addCursor(t,n.color,n.name);r.setOffset(i),s.current[t]={lastPosition:i,ref:r}}}}),[e]),b=(0,r.useCallback)(((t,n)=>{if(null!=(null===e||void 0===e?void 0:e.getModel())&&null!=o.current&&null!=(null===n||void 0===n?void 0:n.name)){const e=s.current[t];null!=(null===e||void 0===e?void 0:e.ref)&&(e.ref.dispose(),delete e.ref)}}),[e]),y=(0,r.useCallback)((()=>{null!=(null===e||void 0===e?void 0:e.getModel())&&null!=o.current&&Object.values(s.current).forEach((e=>{var t;null===(t=e.ref)||void 0===t||t.dispose(),delete e.ref}))}),[e]),E=(0,r.useCallback)(((t,n,a,i)=>{if(null!=(null===e||void 0===e?void 0:e.getModel())&&null!=l.current&&null!=(null===n||void 0===n?void 0:n.name)){let e=c.current[t];return null!=e?e.setOffsets(a,i):(e=l.current.addSelection(t,n.color),e.setOffsets(a,i),e.show()),f(t,n,i),e}return null}),[e,f]),w=(0,r.useCallback)(((e,t,n,a,i,r)=>{const o=E(a,i,e,t);return setTimeout((()=>{g(null!==e&&void 0!==e?e:0,null!==t&&void 0!==t?t:0),null===o||void 0===o||o.dispose(),r()}),n)}),[E,g]);return(0,r.useEffect)((()=>{null!=e&&(o.current=new i.RemoteCursorManager({editor:e,tooltips:!0,tooltipDuration:5}),l.current=new i.RemoteSelectionManager({editor:e}),n&&e.onDidChangeModelContent((()=>{e.updateOptions({readOnly:!0})})))}),[e,n]),{executeEdits:d,insertText:u,replaceRange:m,replaceAll:p,deleteRange:g,moveCursor:f,hideCursor:b,showCursor:v,hideAllCursors:y,highlightRange:E,highlightRangeAndDelete:w,scrollToPosition:h}}},84060:function(e,t,n){"use strict";n.d(t,{G:function(){return a}});const a={report:"Report",candidateInfo:"Instructions",output:"Program Output",requestClient:"API Requests",database:"Database",files:"Files",tests:"Test Cases",notes:"Private Interviewer Notes",drawing:"Drawing",solution:"Solutions",ai:"AI Assist",transcript:"Transcript"}},79097:function(e,t,n){"use strict";n.d(t,{h:function(){return o}});var a=n(45223),i=n(59614),r=n(67294);const o=()=>{const[e,t]=(0,r.useState)([]),{isPlayback:n}=(0,a.nT)("isPlayback");return(0,r.useEffect)((()=>{n&&(0,i.Z)().get("chats",(e=>{const n={};Object.keys(null!==e&&void 0!==e?e:{}).forEach((t=>{n[t]=Object.values(e[t])[0].messageTimestamp}));const a=Object.entries(n).sort(((e,t)=>e[1]-t[1])).map((e=>e[0])).flatMap((t=>Object.values(e[t]).map((e=>({...e,authorId:e.authorId.toString(),conversationId:t})))));t(a)}))}),[n]),e}},68285:function(e,t,n){"use strict";n.d(t,{I:function(){return a},h:function(){return i}});let a=function(e){return e.Interviewer="interviewer",e.Candidate="candidate",e}({});const i=[a.Interviewer,a.Candidate]},48572:function(e,t,n){"use strict";n.d(t,{Q:function(){return o}});var a=n(59614),i=n(67294),r=n(19074);const o=()=>{const[e,t]=(0,i.useState)([]);return(0,i.useEffect)((()=>{const e=(0,a.Z)().watch("transcript",(e=>{const n=Object.entries(null!==e&&void 0!==e?e:{}).sort((([,e],[,t])=>e.timestamp-t.timestamp)).map((([e,t])=>({...t,id:e}))).filter((e=>e.kind!==r.o.Transcript||e.transcripts.length>0&&null!=e.transcripts[e.preferredTranscript]));t(n)}),{});return()=>{(0,a.Z)().off("transcript",e)}}),[]),e}},19074:function(e,t,n){"use strict";n.d(t,{o:function(){return a}});let a=function(e){return e.Transcript="TRANSCRIPT",e.SystemMessage="SYSTEM_MESSAGE",e}({})},94153:function(e,t,n){"use strict";n.d(t,{TF:function(){return v},cY:function(){return h},j:function(){return f}});var a=n(69496),i=n(67880),r=n(70670),o=n(36808),l=n.n(o),s=n(42842),c=n(32854),d=n(36720),u=n(31333);let m,p,g={};function h(e){if(m)return;null!=e&&(g=e);var t;if(m=(0,r.ZP)({app:"coderpad",plugins:[(0,u.Z)({hubURL:"https://"+(t=window.location.hostname,t.substring(t.lastIndexOf(".",t.lastIndexOf(".")-1)+1)+"/kris-kross-will-make-ya-jump-jump.php")}),{name:"stitch-plugin",page:({payload:e})=>{S({...e,properties:Object.assign({},g,e.properties)})},track:({payload:e})=>{const t={...e,properties:JSON.stringify(Object.assign({},g,e.properties))||"{}"};S(t)},identify:({payload:e})=>{S(e)},loaded:()=>!0},b(),E(),...window.CoderPad.HUBSPOT_PORTAL_ID?[(()=>{const e=(0,i.Z)({portalId:window.CoderPad.HUBSPOT_PORTAL_ID,customScriptSrc:window.CoderPad.HUBSPOT_CUSTOM_SCRIPT_SRC});const t={identify:function(t){let n=Object.assign({},t);n.payload.traits=t.payload.traits.hubspotAnalyticsTraits,e.identify(n)}};return Object.assign({},e,t)})()]:[],...window.CoderPad.FULLSTORY_ORG_ID?[w({org:window.CoderPad.FULLSTORY_ORG_ID})]:[]]}),window.CoderPad&&window.CoderPad.USER&&window.CoderPad.USER.analyticsId){p=window.CoderPad.USER.analyticsId,m.identify(p,window.CoderPad.USER);const e=null!=l().get("hs-messages-is-open"),t=window.CoderPad.USER.plan.includes("Free");window.CoderPad.ENABLE_HUBSPOT_CHAT&&e&&t&&(0,d.I)()}m.page(),(0,c.AY)()}function f(e,t){return h(),m.track(e,t)}function v(e){g={...g,...e}}function b(e){return{name:"intercom-plugin",page:({payload:e})=>{window.Intercom("update",{last_request_at:parseInt((new Date).getTime()/1e3)})},track:({payload:e})=>{window.Intercom("trackEvent",e.event,e.properties)},loaded:()=>!!window.Intercom}}function y(){if(!window.CoderPad.USERFLOW_APP_ID||!window.CoderPad.USERFLOW_ENTERPRISE_ENV_ID||window.CoderPad.DISABLE_USERFLOW)return!1;if(!(window.CoderPad&&window.CoderPad.USER&&window.CoderPad.USER.analyticsTraits))return!1;const{analyticsTraits:e}=window.CoderPad.USER;return"false"!==e.corporate_domain}function E(e){return{name:"userflow-plugin",initialize:({config:e})=>{y()&&("enterprise"===window.CoderPad.USER.analyticsTraits.plan_categorization?s.Z.init(window.CoderPad.USERFLOW_ENTERPRISE_ENV_ID):s.Z.init(window.CoderPad.USERFLOW_APP_ID))},page:({payload:e})=>{},track:({payload:e})=>{y()&&s.Z.track(e.event,e.properties)},identify:({payload:e})=>{if(y()){const t=e.traits.analyticsId,n=e.traits.organization,{analyticsTraits:a}=e.traits;s.Z.identify(t,a),n&&s.Z.group(n.id,n)}},loaded:()=>!!s.Z}}function w(e){const t=(0,a.Z)(e);let n=null;function i(e){return null==n?e:{...e,payload:{...e.payload,userId:n}}}return{name:"fullstory",config:t.config,initialize:e=>{t.initialize(e)},track:e=>{t.track(i(e))},identify:e=>{const a=e.payload.traits.cognitoUsername;n=null!=a?`Cognito-${a}`:p,t.identify(i(e))},loaded:()=>t.loaded()}}let k=!1;function S(e){if(!window.CoderPad||!window.CoderPad.STITCH_URL)return void(k||(console.warn("No Stitch URL: analytics will not be sent"),k=!0));const t=window.CoderPad.STITCH_URL,n=function(e,t=[]){const n=new URLSearchParams;for(const[a,i]of Object.entries(function(e){const t={};return C(e,t,""),t}(e)))n.set(a,i);return n}(e);if("function"==typeof navigator.sendBeacon){const e=new Blob([n.toString()],{type:"application/x-www-form-urlencoded"});navigator.sendBeacon(t,e)}else{const e=new XMLHttpRequest;e.open("POST",t),e.send(n)}}function C(e,t,n){for(const[a,i]of Object.entries(e)){const e=n+a;"function"!==typeof i&&(Array.isArray(i)||i&&"object"===typeof i?C(i,t,e+"."):t[e]=i)}}},89187:function(e,t,n){"use strict";n.d(t,{j:function(){return a}});const a={PlaybackAdSpaceClicked:"playback ad space clicked",SandboxCreatePadFromSandboxButtonClicked:"sandbox create pad button clicked",PlaybackUserTrackInteracted:"pad playback user track interacted",PlaybackScrubberInteracted:"pad playback scrubber interacted",PlaybackButtonClicked:"pad playback button clicked",RightPaneTabClicked:"right pane tab clicked",ProjectOutputTabClicked:"project output tab clicked",RequestClientHistoryItemClicked:"request client history item clicked",RequestClientRequestSent:"request client request sent",RequestClientRequestCanceled:"request client request canceled",FileTreeUploadedFile:"file tree uploaded file",InstructionsWindowRefocus:"instructions window refocus",InstructionsWindowOpen:"instructions window open",CreateQuestionFromTabAffirmation:"Create Question From Tab Affirmed",CreateQuestionFromTabCancel:"Create Question From Tab Cancelled",PadInvitesEmailInviteSent:"Invite Sent",PadSettingsOpened:"Settings Modal Opened",ProjectMiniBrowserOpenNewWindow:"Project Mini Browser Open New Window",DrawingModeWindowOpen:"Drawing Mode Window Open",DrawingModeModalClose:"Drawing Mode Modal Close",DrawingModeWindowRefocus:"Drawing Mode Window Refocus",DrawingModeModalOpen:"Drawing Mode Modal Open",LanguageSearchResultSelected:"Searchbar Language Selected",TranscriptionUserAgreed:"Transcription User Agreed",TranscriptionUserDisagreed:"Transcription User Disagreed",TranscriptionPlaybackSearched:"Transcription Playback Searched",TranscriptionPlaybackLineClicked:"Transcription Playback Line Clicked"}},87574:function(e,t,n){"use strict";n.d(t,{j:function(){return a.j},K:function(){return i}});var a=n(89187);const i={padInvitesButtonLabel:"Invite",padInvitesButtonTooltip:"Invite someone else to join this pad",padInvitesEmailDescription:"We'll email the recipient directly with a link from CoderPad, so you don't have to give away your email address.",padInvitesEmailFieldLabel:"Recipient's email address",padInvitesEmailInvalidEmail:"Please enter a valid email address",padInvitesEmailSendButtonLabel:"Send",padInvitesEmailSendError:"There was a problem sending the email invite.",padInvitesEmailSendSuccess:"The email invite was sent.",padInvitesEmailTitle:"Send Email Invite",padInvitesPermalinkCopyButtonTitleCopying:"Copied link!",padInvitesPermalinkCopyButtonTitleDefault:"Copy link to clipboard",padInvitesPermalinkDescription:e=>e?"If you need a link to email for a Take-Home interview, use this <strong>full URL.</strong>":"If you need a permanent link to email for a future interview, use this <strong>full URL.</strong>",padInvitesPermalinkTitle:"Permanent Link",padInvitesShortlinkCopyButtonTitleCopying:"Copied link!",padInvitesShortlinkCopyButtonTitleDefault:"Copy link to clipboard",padInvitesShortlinkDescription:"Read this <strong>temporary</strong> shortlink out loud to invite someone to this pad. It only lasts an hour!",padInvitesShortlinkGenerateButtonLabel:"Generate a shortlink",padInvitesShortlinkGenerateError:"There was a problem generating the shortlink.",padInvitesShortlinkGenerateSuccess:"The shortlink was generated.",padInvitesShortlinkTitle:"Phone-Friendly Temporary Link",padSettingsButtonTooltip:"Configure editor settings: Vim mode, auto-close brackets, etc.",padSettingsEditorSettingsAutoCloseBracketsLabel:"Auto-Close Brackets",padSettingsEditorSettingsAutoCloseBracketsOptionLabelOff:"Disabled",padSettingsEditorSettingsAutoCloseBracketsOptionLabelOn:"Enabled",padSettingsEditorSettingsFontSizeLabel:"Font Size",padSettingsEditorSettingsFontSizeOptionLabel:e=>`${e} px`,padSettingsEditorSettingsIntellisenseLabel:"IntelliSense",padSettingsEditorSettingsIntellisenseOptionLabelOff:"Disabled",padSettingsEditorSettingsIntellisenseOptionLabelOn:"Enabled",padSettingsEditorSettingsIntellisenseTooltip:e=>`IntelliSense is supported in ${e.slice(0,-1).join(", ")}, and ${e.slice(-1)}.`,padSettingsEditorSettingsKeyBindingsLabel:"Key Bindings",padSettingsEditorSettingsKeyBindingsOptionLabelEmacs:"Emacs",padSettingsEditorSettingsKeyBindingsOptionLabelStandard:"Standard",padSettingsEditorSettingsKeyBindingsOptionLabelVim:"Vim",padSettingsEditorSettingsShortcutsButtonLabel:"View Shortcuts",padSettingsEditorSettingsShortcutsLabel:"CoderPad Shortcuts",padSettingsEditorSettingsTabSpacingLabel:"Tab Spacing",padSettingsEditorSettingsThemeLabel:"Theme",padSettingsEditorSettingsThemeOptionLabelOff:"Light",padSettingsEditorSettingsThemeOptionLabelOn:"Dark",padSettingsEditorSettingsTitle:"Editor Settings",padSettingsPadSettingsAccountSettingsButtonLabel:"Open Settings",padSettingsPadSettingsAccountSettingsLabel:"Account Settings",padSettingsPadSettingsCodeExecutionLabel:"Code Execution",padSettingsPadSettingsCodeExecutionOptionLabelOff:"Disabled",padSettingsPadSettingsCodeExecutionOptionLabelOn:"Enabled",padSettingsPadSettingsPlaybackHistoryButtonLabel:"View Playback",padSettingsPadSettingsPlaybackHistoryLabel:"Playback History",padSettingsPadSettingsTitle:"Pad Settings",padSettingsPadSettingsWaitingRoomLabel:"Waiting Room",padSettingsPadSettingsWaitingRoomOptionLabelOff:"Disabled",padSettingsPadSettingsWaitingRoomOptionLabelOn:"Enabled",padSettingsShortcutsTitle:"CoderPad Shortcuts",sandboxCreatePadFromSandboxButtonForkError:"We could not generate the copy. Please try again.",sandboxCreatePadFromSandboxButtonForkTitle:"Copy of Sandbox",sandboxCreatePadFromSandboxButtonLabel:"Create Pad",sandboxCreatePadFromSandboxButtonTooltipText:"Create a new pad with this code from your sandbox"}},76310:function(e,t,n){"use strict";n.d(t,{g:function(){return s},t:function(){return l}});var a=n(36808),i=n.n(a),r=n(96486),o=n.n(r);function l(e,t){const n=s();let a;(a=e.match(/^tab_?[Ss]izes\.(.+)$/))?n.tab_sizes[a[1]]=t:n[o().snakeCase(e)]=t,n.tab_sizes=o().pickBy(n.tab_sizes,((e,t)=>{var n;return(null===(n=window.CoderPad)||void 0===n?void 0:n.LANGUAGES[t].tab_size)!==e})),i().set("editor_config",JSON.stringify(n),{expires:90})}function s(){var e;let t={};try{t=JSON.parse(i().get("editor_config"))}catch(n){t={}}return o().defaults(t,{auto_close_brackets:!0,autocomplete:!0,font_size:14,keymap:"sublime",tab_sizes:{},dark_color_scheme:!0}),o().defaults(t.tab_sizes,o().mapValues(null===(e=window.CoderPad)||void 0===e?void 0:e.LANGUAGES,(e=>e.tab_size))),t}},22324:function(e,t,n){"use strict";n.d(t,{V:function(){return r},o:function(){return i}});var a=n(49998);function i(e,t){const n=(0,a.io)(window.CoderPad.EXECUTE_URL,{withCredentials:!1,query:{pad:e,initialExecSettings:t},reconnectionDelayMax:1e4,reconnectionDelay:2e3,transports:["websocket","polling"]});return n.on("connect",(()=>{o(n)})),n.on("disconnect",(()=>{s()})),n.on("connect_error",(()=>{n.io.opts.transports=["polling","websocket"]})),n}function r(){return l}let o,l;function s(){l=new Promise(((e,t)=>{o=e}))}s()},20485:function(e,t,n){var a=n(19755);a("#canary").parent("form").on("submit",(function(){a("#canary").val("coalmine")}))},48792:function(e,t){"use strict";const n=Object.freeze({...window.padConfig});t.Z=n},18786:function(e,t,n){"use strict";n.d(t,{r:function(){return i}});var a=n(59614);const i=e=>{(0,a.Z)().push("globalEvents",{time:Date.now(),...e})}},25934:function(e,t,n){"use strict";n.d(t,{z:function(){return s}});var a=n(96486),i=n.n(a),r=n(67294),o=n(62267),l=n(48564);const s=e=>{const t=(0,o.v9)((e=>e.playbackHistory.trackedUserId)),n=(0,o.v9)((e=>e.playbackHistory.globalEvents)),a=(0,r.useMemo)((()=>Object.values(n||{}).sort(((e,t)=>t.time-e.time))),[n]),{frames:s}=(0,l.V)(e),c=(0,o.v9)((e=>e.playbackHistory.frameIndex)),d=(0,r.useMemo)((()=>{var e,t;return null!==(e=null===s||void 0===s||null===(t=s[c])||void 0===t?void 0:t.timestamp)&&void 0!==e?e:null}),[s,c]),u=(0,r.useMemo)((()=>{var e,t;return null!==(e=null===s||void 0===s||null===(t=s[s.length-1])||void 0===t?void 0:t.timestamp)&&void 0!==e?e:null}),[s]),m=(0,r.useCallback)(((e,n)=>d&&u?d<u?a.filter((a=>e.includes(a.type)&&a.time<=d&&(!n||a.user===t))):a.filter((a=>e.includes(a.type)&&(!n||a.user===t))):[]),[a,d,t,u]),p=(0,r.useCallback)(((e,t)=>{const n=m([e],t);return n.length>0?n[0]:null}),[m]),g=(0,r.useMemo)((()=>p("change-active-language")),[p]),h=(0,r.useMemo)((()=>p("add-environment")),[p]),f=(0,r.useMemo)((()=>p("change-environment")),[p]),v=(0,r.useMemo)((()=>p("add-file")),[p]),b=(0,r.useMemo)((()=>p("delete-file")),[p]),y=(0,r.useMemo)((()=>p("rename-file")),[p]),E=(0,r.useMemo)((()=>p("create-pad")),[p]),w=(0,r.useMemo)((()=>p("request-client-request")),[p]),k=(0,r.useCallback)((e=>{if(d){const t=a.find((t=>"change-environment-language"===t.type&&t.time<=d&&t.data.environment===e));if(t)return t}return null}),[a,d]),S=(0,r.useCallback)((e=>{const t={},n=[],a=m(["add-file","delete-file","create-pad","add-environment"],!1),i=new Set;for(let r=a.length-1;r>=0;r--){const n=a[r];if(n.time>d)break;if("create-pad"===n.type||"add-environment"===n.type){(n.data.snapshot||{})[e]&&i.add(e)}"add-file"===n.type&&n.data.fileId===e&&(t[e]={addedAt:n.time}),"delete-file"===n.type&&n.data.fileId===e&&t[e]&&!t[e].deletedAt&&(t[e].deletedAt=n.time)}for(const[r,o]of Object.entries(t))(!o.deletedAt||o.deletedAt>d)&&n.push(r);return i.forEach((e=>{n.includes(e)||n.push(e)})),n.includes(e)}),[d,m]),C=(0,r.useCallback)((()=>{if(null!=d){const e=m(["create-pad"]).reduce(((e,t)=>[...e,...t.data.initialEnvironments]),[]),t=m(["add-environment"]);return i().uniq([...e,...t.map((e=>e.data.environmentSlug))])}return[]}),[m,d]);return{currentTimestamp:d,globalEventFrames:a,lastLanguageEvent:g,lastChangeEnvironmentEvent:f,lastAddEnvironmentEvent:h,lastCreatePadEvent:E,isFileVisible:S,getEnvironmentLanguageChange:k,getVisibleEnvironments:C,lastAddFileEvent:v,lastDeleteFileEvent:b,lastRenameFileEvent:y,lastRequestClientRequestEvent:w}}},59857:function(e,t,n){"use strict";n.d(t,{l:function(){return u},t:function(){return d}});var a=n(45223),i=n(67294),r=n(62267),o=n(48564),l=n(40172);const s={frameIndex:0,playing:!1,paused:!1,scrubbing:!1,setScrubbing:()=>null,participants:{},frameDelay:0},c=(0,i.createContext)(s);function d(){const e=(0,i.useContext)(c);if(!e)throw new Error("`usePlayback` hook must be a descendant of a `PlaybackContextProvider`");return e}const u=({children:e})=>{const t=(0,r.v9)((e=>e.playbackHistory.frames)),n=(0,r.v9)((e=>e.playbackHistory.playing)),[d,u]=(0,i.useState)(!1),m=(0,l.B)(),{frameIndex:p,frameDelay:g}=(0,o.V)(),h=(0,a.oB)("iioLayout"),f=(0,i.useMemo)((()=>{var e,n;return null!==(e=null===t||void 0===t||null===(n=t[p])||void 0===n?void 0:n.timestamp)&&void 0!==e?e:null}),[t,p]),v=(0,i.useRef)(0),b=(0,i.useMemo)((()=>{if(!h)return!1;const e=v.current!==f;return v.current=f,e}),[f,h]),y=!n&&!d&&!b;return i.createElement(c.Provider,{value:{...s,frameIndex:p,playing:n,paused:y,scrubbing:d,setScrubbing:u,participants:m,frameDelay:g}},e)}},66241:function(e,t,n){"use strict";n.d(t,{k:function(){return o}});var a=n(67294),i=n(45223),r=n(59614);const o=()=>{const[e,t]=(0,a.useState)({}),n=(0,i.oB)("hasEnvironments"),{isPlayback:o}=(0,i.nT)("hasEnvironments","isPlayback");return(0,a.useEffect)((()=>{o&&(0,r.Z)().get("console",(e=>{t(n?Object.values(null!==e&&void 0!==e?e:{}).reduce(((e,t)=>({...e,...t})),{}):null!==e&&void 0!==e?e:{})}))}),[n,o]),e}},431:function(e,t,n){"use strict";n.d(t,{b:function(){return i}});var a=n(67294);const i=(e,t,n)=>{(0,a.useEffect)((()=>{const n=setTimeout(e,t);return()=>clearTimeout(n)}),[t,...n||[]])}},48564:function(e,t,n){"use strict";n.d(t,{V:function(){return l}});var a=n(67294),i=n(62267),r=n(48468),o=n(66241);const l=e=>{const t=(0,i.v9)((e=>e.playbackHistory.frameIndex)),n=(0,i.v9)((e=>e.playbackHistory.frameDelay)),l=(0,i.v9)((e=>e.playbackHistory.globalEvents)),{environmentFrames:s}=(0,r.b)(),c=(0,o.k)(),d=(0,a.useRef)({}),u=(0,i.v9)((e=>e.playbackHistory.trackedUserId)),m=(0,a.useMemo)((()=>{if(e)return e;if(s.length>0)return s;return[]}),[e,s]),p=(0,a.useMemo)((()=>Object.values(l||{})),[l]),g=(0,a.useCallback)((e=>{const t=[],n=[];let a=0,i=0,r=0;const o=Object.values(c).filter((t=>t.authorId===e&&"execution"===t.type));let l=0,s=0;const d=p.filter((t=>"pasted-content"===t.type&&t.user==e));for(let c=0;c<m.length;c++){const u=m[c];if(u.authorId===e){let e=o[i];for(;e&&e.timestamp>=r&&(e.timestamp<=u.timestamp||c===m.length-1);)i+=1,n.push({type:"execution",execution:e,frame:c}),r=e.timestamp,e=o[i];const p=d[l];p&&p.time>s&&p.time<=u.timestamp&&(l+=1,n.push({type:"externalPaste",content:p.data.content,frame:c}),s=u.timestamp),"retain"!==u.type&&(a++,t[c]={...u})}else"ai-chat"===u.type?t[c]={...u}:t[c]={...u,...t[c]?{}:{authorId:"",type:"retain"}}}return{frames:t,events:n,edits:a}}),[m,c,p]),h=(0,a.useMemo)((()=>{if(!u)return[];const e=d.current[u];if(e)return e;const t=m.map((e=>e.authorId===u?e:{...e,type:"retain"}));return d.current[u]=t,t}),[m,u]);return{frameIndex:t,frameDelay:n,frames:m,userFrames:h,getTimelineForUser:g}}},40172:function(e,t,n){"use strict";n.d(t,{B:function(){return r}});var a=n(67294),i=n(59614);const r=()=>{const[e,t]=(0,a.useState)({});return(0,a.useEffect)((()=>{(0,i.Z)().get("/users",(e=>{if(null==e)return;const n={};for(const[t,a]of Object.entries(e))n[t]={...a,id:t};t(n)}))}),[]),e}},45780:function(e,t,n){"use strict";n.d(t,{ZP:function(){return r},w$:function(){return o},zW:function(){return l}});var a=function(e){return e.ErrorOccurred="ERROR_OCCURRED",e.ClearError="CLEAR_ERROR",e}(a||{});const i={sentinel:0,hasErrorOccurred:!1};function r(e=i,t){const{type:n}=t;switch(n){case a.ErrorOccurred:return{...e,hasErrorOccurred:!0};case a.ClearError:return{...e,hasErrorOccurred:!1,sentinel:e.sentinel+1}}return e}function o(){return{type:a.ErrorOccurred}}function l(){return{type:a.ClearError}}},52716:function(e,t,n){"use strict";n.d(t,{GZ:function(){return r},NI:function(){return o},Y_:function(){return l},ZP:function(){return i}});let a=function(e){return e.EnqueueNotif="ENQUEUE_NOTIFICATION",e.RemoveNotif="REMOVE_NOTIFICATION",e.RemoveNotifByClassification="REMMOVE_NOTIFICATION_BY_CLASS",e}({});function i(e=[],t){const{type:n,payload:i}=t;switch(n){case a.EnqueueNotif:{const t=i,n=e.findIndex((e=>e.key===t.key));if(n>=0){const a=[...e];return a.splice(n,1,t),a}return[...e,t]}case a.RemoveNotif:{const t=i.key;return t?e.filter((e=>e.key!==t)):e}case a.RemoveNotifByClassification:{const t=i.classification;return t?e.filter((e=>e.classification!==t)):e}default:return e}}function r(e){return{type:a.EnqueueNotif,payload:{...e,key:e.key||`${(new Date).getTime()+Math.random()}`}}}function o(e){return{type:a.RemoveNotif,payload:{key:e}}}function l(e){return{type:a.RemoveNotifByClassification,payload:{classification:e},classification:e}}},3654:function(e,t,n){"use strict";n.d(t,{$W:function(){return r},KY:function(){return o},Z2:function(){return a},ZL:function(){return l},hi:function(){return i}});let a=function(e){return e.MainProcess="mainProcess",e.Shell="shell",e.Console="console",e.RequestHistory="requestHistory",e}({}),i=function(e){return e.TabSelected="project_tab_selected",e.ShellOutputProduced="console_output_produced",e.APIRequestPerformed="project/request_sent",e.UpdateVisibleTabs="project_tabs/update_visible_tabs",e}({});const r=(e=function(){return{activeTab:a.MainProcess,unseenContent:{[a.Shell]:!0,[a.Console]:!1,[a.MainProcess]:!1,[a.RequestHistory]:!1},visibleTabs:{[a.MainProcess]:!0,[a.Shell]:!1,[a.Console]:!1,[a.RequestHistory]:!1}}}(),t)=>{switch(t.type){case i.TabSelected:return{...e,activeTab:t.tab,unseenContent:{...e.unseenContent,[t.tab]:!1}};case i.APIRequestPerformed:if(e.activeTab!==a.RequestHistory)return{...e,unseenContent:{...e.unseenContent,[a.RequestHistory]:!0}};break;case i.ShellOutputProduced:if(e.activeTab!==a.Shell)return{...e,unseenContent:{...e.unseenContent,[a.Shell]:!0}};break;case i.UpdateVisibleTabs:{const n={...e,visibleTabs:{...e.visibleTabs,...t.visibleTabs}};return n.visibleTabs[e.activeTab]||(n.activeTab=Object.keys(n.visibleTabs)[0]),n}}return e};function o(e){return{type:i.TabSelected,tab:e}}function l(e){return{type:i.UpdateVisibleTabs,visibleTabs:e}}},54941:function(e,t,n){"use strict";n.d(t,{Ip:function(){return u},ZP:function(){return c},j5:function(){return d},u:function(){return m}});var a=n(96486),i=n.n(a),r=n(48792),o=n(84060),l=n(68285);const s=e=>"mysql"===e||"postgresql"===e;function c(e=function(){var e,t,n,a,s,c,d,u,m,p;const g=!(!r.Z.execEnabled||null===(e=CoderPad.LANGUAGES[r.Z.lang])||void 0===e||!e.execution),h=!g&&r.Z.notesEnabled,f=!!(null!==(t=r.Z.question)&&void 0!==t&&t.customFiles&&r.Z.question.customFiles.length>0),v=(null===(n=r.Z.question)||void 0===n||null===(a=n.candidateInstructions)||void 0===a||null===(s=a[0])||void 0===s||null===(c=s.instructions)||void 0===c?void 0:c.length)>0,b=!(null===(d=r.Z.question)||void 0===d||!d.solution),y=!!(null!==(u=r.Z.question)&&void 0!==u&&u.testCasesEnabled&&r.Z.question.visibleTestCases&&r.Z.question.visibleTestCases.length>0),E=null===(m=r.Z.question)||void 0===m?void 0:m.customDatabaseLanguage,w=h?"notes":r.Z.report?"report":v?"candidateInfo":"output";return{_customDatabaseId:null===(p=r.Z.question)||void 0===p?void 0:p.customDatabaseId,_customDatabaseLanguage:E,_execEnabled:r.Z.execEnabled,_language:r.Z.lang,_projectTemplateSlug:null,_environmentSlug:null,activeTab:w,uiType:r.Z.uiType,unseenContent:i().mapValues(o.G,(()=>!1)),visibleTabs:{drawing:r.Z.isPlayback&&"drawing_only"!==r.Z.uiType&&(r.Z.drawingModified||!!r.Z.drawingBoardId),candidateInfo:v,database:!(!E||!g),files:f,notes:r.Z.notesEnabled||r.Z.isSandbox&&r.Z.sandboxView===l.I.Interviewer,output:g,tests:y&&!r.Z.report,report:!!r.Z.report,solution:b,requestClient:!1,ai:r.Z.aiChatEnabled||r.Z.hasAiChat,transcript:r.Z.isPlayback&&r.Z.hasPlaybackTranscription}}}(),t){var n;switch(t.type){case"environment_changed":{const{environment:n}=t;if(n){const t={...e,_projectTemplateSlug:n.projectTemplateSlug,_environmentSlug:n.slug},a=(()=>{var t;return"drawing_only"!==e.uiType&&(!(!n.projectTemplateSlug||n.projectTemplateSlug.startsWith("jupyter"))||!(!e._execEnabled||null===(t=CoderPad.LANGUAGES[n.language])||void 0===t||!t.execution))})(),i=!(!a||!n.customDatabaseLanguage&&!s(n.language));return!e._environmentSlug&&a&&(t.activeTab="output"),t.visibleTabs={...e.visibleTabs,output:a,database:i},t}return e}case"pad_setting_changed":{var a;const{key:n,value:r}=t;if(!["execEnabled","language","questionId","customDatabaseId","customDatabaseLanguage"].includes(n))break;const o={...e};switch(n){case"execEnabled":o._execEnabled=r;break;case"language":o._language=r;break;case"customDatabaseId":o._customDatabaseId=r;break;case"customDatabaseLanguage":o._customDatabaseLanguage=r}const l="drawing_only"!==o.uiType&&!!(o._projectTemplateSlug||o._execEnabled&&null!==(a=CoderPad.LANGUAGES[o._language])&&void 0!==a&&a.execution);return o.visibleTabs={...e.visibleTabs,database:!(!o._customDatabaseLanguage&&!s(o._language)||!l),output:l},o.visibleTabs[e.activeTab]||(o.activeTab=l?"output":i().findKey(o.visibleTabs)),o}case"set_visibleTab_notes":return{...e,visibleTabs:{...e.visibleTabs,notes:t.value}};case"set_visibleTab_requestClient":{const n={...e,visibleTabs:{...e.visibleTabs,requestClient:t.value}};return n.visibleTabs[n.activeTab]||(n.activeTab=i().findKey(n.visibleTabs)),n}case"environment_question_changed":case"question_data_loaded":case"question_selected_by_local_user":{var c,d,u,m;const n=!!(t.projectTemplateSlug&&!t.projectTemplateSlug.startsWith("jupyter")||e._projectTemplateSlug&&!e._projectTemplateSlug.startsWith("jupyter")||e._execEnabled&&null!==(c=CoderPad.LANGUAGES[t.language])&&void 0!==c&&c.execution),a={...e.visibleTabs,candidateInfo:(null===(d=t.candidateInstructions)||void 0===d||null===(u=d[0])||void 0===u||null===(m=u.instructions)||void 0===m?void 0:m.length)>0,database:!(!t.customDatabaseLanguage&&!s(t.language)||!n),files:t.customFiles&&t.customFiles.length>0,output:n,tests:!!t.testCasesEnabled,solution:!!t.solution},r=a.candidateInfo&&t.autofocus?"candidateInfo":a[e.activeTab]?e.activeTab:n?"output":i().findKey(a);return{...e,activeTab:r,visibleTabs:a,_customDatabaseId:t.customDatabaseId,_customDatabaseLanguage:t.customDatabaseLanguage,_language:t.language,unseenContent:{...e.unseenContent,candidateInfo:a.candidateInfo&&"candidateInfo"!==r&&!t.autofocus,database:a.database&&"database"!==r,files:a.files&&"files"!==r}}}case"package_changed":return t.databaseLanguage&&t.databaseLanguage!==e._customDatabaseLanguage?{...e,_customDatabaseLanguage:t.databaseLanguage,_language:t.language,unseenContent:{...e.unseenContent,database:!e.visibleTabs.database},visibleTabs:{...e.visibleTabs,database:!0}}:e;case"tab_selected":return{...e,activeTab:t.tab,customFileSelected:null!==(n=t.customFileSelected)&&void 0!==n?n:e.customFileSelected,unseenContent:{...e.unseenContent,[t.tab]:!1}};case"run_clicked":case"local_user_ran_code":return{...e,activeTab:"output",unseenContent:{...e.unseenContent,output:!1}};case"console_output_produced":case"markdown_content_changed":case"html_rendered":if("output"===e.activeTab)break;return{...e,unseenContent:{...e.unseenContent,output:!0}};case"instructions_added":return{...e,unseenContent:{...e.unseenContent,candidateInfo:"candidateInfo"!==e.activeTab}}}return e}function d(e){return{type:"set_visibleTab_notes",value:e}}function u(e){return{type:"set_visibleTab_requestClient",value:e}}function m(e){return{type:"tab_selected",tab:e}}},18612:function(e,t,n){"use strict";n.d(t,{DG:function(){return d},ZP:function(){return l}});var a=n(96486),i=n.n(a),r=n(9084),o=n(34857);function*l(){const e=parseInt(location.hash.substr(1));yield(0,o.ib)("playback_set_frames",(function*(){const t=yield(0,o.Ys)((e=>e.playbackHistory.frameLength)),n=yield(0,o.Ys)((e=>e.playbackHistory.frameIndex));yield(0,o.gz)({type:"playback_seek_to_frame",index:t-1}),e>0&&e<t?yield(0,o.gz)({type:"playback_seek_to_frame",index:e}):n<t-1&&(yield s({}))})),yield(0,o.P2)(500,"playback_advance_frame",s),yield(0,o.P2)(500,"playback_seek_to_frame",s),yield(0,o.P2)(500,"playback_rewound_ms",s);const t=(0,r.GG)((e=>{const t=()=>e(["hashchange"]),n=t=>e(["message",t.data]);return window.addEventListener("hashchange",t),window.addEventListener("message",n),()=>{window.removeEventListener("hashchange",t),window.removeEventListener("message",n)}}));yield(0,o.ib)(t,(function*([e,t]){if("hashchange"===e){const e=Number(location.hash.split("#")[1]);i().isInteger(e)&&(yield(0,o.gz)({type:"playback_seek_to_frame",index:e,fromHashChange:!0}))}else"message"===e&&i().isInteger(t)&&(yield(0,o.gz)({type:"playback_seek_to_time",ms:t}))}));let n=null;yield(0,o.ib)("playback_play",(function*(){const{frameIndex:e,frameLength:t}=yield(0,o.Ys)((e=>e.playbackHistory));e>=t-1&&(yield(0,o.gz)({type:"playback_seek_to_frame",index:1}),yield(0,o.gw)(800),!(yield(0,o.Ys)((e=>e.playbackHistory.playing))))||(n=yield(0,o.rM)(c))})),yield(0,o.ib)("playback_pause",(function*(){n&&(yield(0,o.al)(n),n=null)}))}function*s({fromHashChange:e}){if(!e){const e=yield(0,o.Ys)((e=>e.playbackHistory.frameIndex));history.replaceState(null,"",`#${e}`)}}function*c(){for(;;){const{frameIndex:e,playbackSpeed:t,playing:n,fastforward:a,frames:i}=yield(0,o.Ys)((e=>({frameIndex:e.playbackHistory.frameIndex,playbackSpeed:e.playbackHistory.playbackSpeed,playing:e.playbackHistory.playing,fastforward:e.playbackHistory.fastforward,frames:e.playbackHistory.frames})));if(!n)return;"ai-chat"===i[e].type&&(yield(0,o.gz)({type:"tab_selected",tab:"ai"}));let r=0;const l=a?Math.min(4*t,8):t,s=m(null,i[e+1]);s>r&&(r=s),r/=l;const c=Date.now()+r;yield(0,o.gz)({type:"playback_advance_frame",frameDelay:r}),yield(0,o.gw)(Math.max(0,c-Date.now()))}}const d=300,u=1e3;function m(e,t){if(!t)return 0;let n=t.delay;return"delete"===t.type&&t.highlightRanges.length>0&&(n+=d),Math.min(u,n)}},67080:function(e,t,n){"use strict";n.d(t,{I5:function(){return S},Mg:function(){return w},PZ:function(){return v},S8:function(){return u},SU:function(){return _},T:function(){return d},T1:function(){return m},TX:function(){return y},W5:function(){return E},WW:function(){return x},YX:function(){return f},Yy:function(){return D},aB:function(){return M},bB:function(){return A},ei:function(){return F},f6:function(){return b},gJ:function(){return P},hY:function(){return k},jl:function(){return c},k2:function(){return s},k_:function(){return l},l0:function(){return g},n1:function(){return N},o3:function(){return C},p6:function(){return T},p7:function(){return L},pK:function(){return h},s8:function(){return p},tV:function(){return O},xc:function(){return R},z3:function(){return Z},zG:function(){return I}});var a=n(96486),i=n.n(a),r=n(22222),o=n(68285);function l(e){return e.padSettings.execEnabled}function s(e){return e.question.testCasesEnabled}function c(e){return e.userState.uncommittedUsername}function d(e){return e.userState.uncommittedEmail}function u(e){return e.userState.userInfo}function m(e){return u(e)[p(e)]}function p(e){return e.userState.userId}function g(e){return i().filter(e.userState.userInfo,(e=>e.isOnline&&"Unknown"!==e.name))}function h(e){return e.call.status}function f(e){return i().some(e.tabs.visibleTabs)}function v(e){return e.tabs.activeTab}function b(e){return e.padSettings}function y(e){return b(e).sandboxView===o.I.Interviewer}function E(e){return!!b(e).sandboxView}function w(e){return e.editorSettings}function k(e){return e.editorSettings.darkColorScheme}function S(e){return e.call.twilioUsers}function C(e){return e.call.videoMuted}function x(e){return e.call.ccEnabled}function _(e){return e.call.audioMuted}function T(e){return e.call.maximized}function I(e){return e.call.networkQualityLevel}function P(e){var t;return null===(t=e.question)||void 0===t?void 0:t.questionId}function Z(e){var t,n;const a=p(e);return!(null===(t=e.userState)||void 0===t||null===(n=t.userInfo[a])||void 0===n||!n.drawingModeOpen)}function O(e){return{customDatabaseId:e.padSettings.customDatabaseId,customDatabaseLanguage:e.padSettings.customDatabaseLanguage,customFiles:e.question.customFiles?i().map(e.question.customFiles,"id"):[],language:e.padSettings.language,projectTemplateSlug:e.padSettings.projectTemplateSlug,projectTemplateVersion:e.padSettings.projectTemplateVersion,environmentId:e.padSettings.environmentId,environmentSlug:e.padSettings.environmentSlug,spreadsheet:e.padSettings.spreadsheet}}const M=(0,r.P1)((e=>e.question),(e=>e&&e.testCasesEnabled?i().pickBy(window.CoderPad.LANGUAGES,(e=>e.test_case_grading)):window.CoderPad.LANGUAGES));function D(e){return!e.padSettings.customDatabaseId&&e.padSettings.customDatabaseLanguage}function L(e){const{customDatabaseLanguage:t,language:n,projectTemplateSlug:a}=e.padSettings;return null==t?"mysql"===n||"postgresql"===n:!(a||!window.CoderPad.LANGUAGES[n].database_allowed||"mysql"===t&&"postgresql"===n||"postgresql"===t&&"mysql"===n)}function F(e){return!!(e.files&&Object.keys(e.files).length>2)}function A(e){let t=0;return void 0!==e.question&&void 0!==e.question.visibleTestCaseResults&&(t=e.question.visibleTestCaseResults.filter((e=>e.passed)).length),t}function R(e){return e.question.codeModifiedAt<e.question.codeTestedAt}function N(e){return e.call.hasConsentedToTranscription}},82544:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var a=n(67294);class i extends a.Component{constructor(e){super(e),this.state={hidden:e.delay>0}}componentDidMount(){this.props.delay>0&&(this._showTimer=setTimeout((()=>this.setState({hidden:!1})),this.props.delay))}componentWillUnmount(){clearTimeout(this._showTimer)}render(){return this.state.hidden?null:a.createElement("div",{className:"ball-pulse"},a.createElement("div",null),a.createElement("div",null),a.createElement("div",null))}}},24293:function(e,t,n){"use strict";n.d(t,{O2:function(){return d},x6:function(){return s},zX:function(){return c}});var a=n(70917),i=n(96486),r=n.n(i),o=n(67294),l=n(48792);const s=(e,t)=>{var n;if(l.Z.color)return`#${l.Z.color}`;const a=null===(n=e[t])||void 0===n?void 0:n.color;return a&&"transparent"!==a?a:r().first(r().sortBy(window.CoderPad.COLORS,(t=>r().filter(e,(e=>e.color===t)).length)))},c=/^mac/i.test(navigator.platform)?o.createElement("span",{className:"fui-cmd"}):"ctrl",d=a.F4`
0% {
transform: rotate(-360deg);
}
`},3533:function(){!function(){for(var e=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,n){var a=(new Date).getTime(),i=Math.max(0,16-(a-e)),r=window.setTimeout((function(){t(a+i)}),i);return e=a+i,r}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}()},88940:function(e,t,n){"use strict";n.d(t,{Fg:function(){return u},Zz:function(){return p},f6:function(){return m},hY:function(){return c}});var a=n(11147),i=n(4385),r=n(88065),o=n(70720),l=n(67294),s=n(62267);let c=function(e){return e.Dark="DARK",e.Light="LIGHT",e}({});const d=(0,l.createContext)({mode:c.Dark,toggleMode:()=>{}}),u=e=>(0,l.useMemo)((()=>(e=>{const t=e===c.Dark,n={300:"#1A44BC",main:"#2D72CC"};return(0,a.Z)({typography:{button:{textTransform:"capitalize",fontWeight:"normal"},body1:{fontSize:"0.875rem"},body2:{fontSize:"0.75rem"},h1:{fontSize:"2rem",fontWeight:300},h2:{fontSize:"1.5rem",fontWeight:500},h3:{fontSize:"0.875rem",fontWeight:700,textTransform:"uppercase"},h4:{fontSize:"0.875rem",fontWeight:700},subtitle1:{color:t?"#E0E0E0":"#4F5053"}},palette:{mode:t?"dark":"light",primary:n,activation:{light:"#26dbb8",main:"#32ceaf",dark:"#3daf8e",contrastText:"#fff"},customColor:{},question:{favorite:"#fff176",example:"#ffe0b2",takeHome:o.Z[200],live:"#f8bbd0"},brandInterview:{contrastText:"#fff",dark:"#862F26",light:"#E38E84",main:"#CC4E41"},brandScreen:{contrastText:"#353C4E",dark:"#EEAC0E",light:"#F6CF5A",main:"#F2BB13"},error:{main:"#e74c3c",contrastText:"#fff"},quotaWarning:{contrastText:"#fff",dark:"#74097c",light:"#e266eb",main:"#be1cca"},insights:{blue:"#4D87D4",green:"#52DB8C",palegreen:"#8ADFCF",yellow:"#F6CF5A",orange:"#FF9977",red:"#FF526D",pink:"#EB73FF",purple:"#C299FF",grey:"#D4D4D4"},annualPlans:{selectedToggle:"#4F5053",unselectedToggle:"#848587",selectedAnnually:"#15BA48",selectedMonthly:"#bababa",recommendedBg:"#eaeaea"},pricing:{bg:"#f5f4f4",lightGrey:"#cacbcb",sandboxBg:"#ececec",sandboxButton:"#363739"},drawing:{dark:{bg:"#1E2126",toolbarBg:"#282C32",toolbarColor:"#FFFFFF",toolbarColorDisabled:"#777D8C",modeSelected:"#696A6D",modeHovered:"#3D434D"},light:{bg:"#FFFFFF",toolbarBg:"#E8ECF2",toolbarColor:"#262729",toolbarColorDisabled:"#A7A8A9",modeSelected:"#DBE3FA",modeHovered:"#D0D4D9"}},...t?{scrollbar:{color:"rgba(255, 255, 255, 0.2)",hover:"rgba(255, 255, 255, 0.4)",active:"rgba(255, 255, 255, 0.6)"},accordion:{active:"#34D578",inactive:"#A7A8A9",details:{background:"#282C32"}},resizer:{background:"#444950",active:"#4D87D4"},chatHistory:{queryBackground:"#1E2126",responseBackground:"#171a1e"},editor:{footer:"#282C32",sidebar:{active:"#292B30",background:"#313439",hover:"#2C2E32"},titleBar:{userIndicatorBackground:"#313439",userIndicatorForeground:"#BDBDBD"},iconStroke:"#BDBDBD"},filePane:{activeBackground:"#22282E",activeText:"#FFF",background:"#313439",folderHighlightDepth:"#828282",folderSubHighlightDepth:"#626262",folderHighlightDepthOpaque:"#82828251",folderSubHighlightDepthOpaque:"#62626251",highlightBackground:"#22252AAF",inputBackground:"#1E2126",inputText:"#FFFFFF"},environmentSelector:{searchField:{background:"#1E2126",outline:"#436BE5",hover:"#313439"}},padSwitch:{thumb:{color:"#34D578"},track:{color:"#C2F2D7"}},programOutput:{tabs:{text:"#7F7F7F",background:"#1D2126",border:"#2D353C",selectedText:"#FFFFFF",selectedBorder:"#FFFFFF",unseen:"#0073FF"},console:{background:"#1e2126",border:"#22282e",buttonBackground:"#1d2126",buttonColor:"white",buttonBorder:"#2d353c"},iFrame:{background:"#FDFDFD"}},playback:{background:"#282C32",border:"#3E4248",timeline:{background:{primary:"#1D2126",user:"#2C3036"},ticks:{edit:"#ffffff3b",idle:"transparent",run:"#F2F2F2",paste:"#F6D669",aiChat:"#ffffff4b"}},adSpace:{title:"#CACBCB",body:"#A7A8A9",background:"#282C32",border:"#444950",button:{border:"#696A6D",background:"#444950",active:"#282C32"}},adSpaceHighContrast:{title:"#1B1E22",body:"#1B1E22",background:"#CACBCB",border:"#CACBCB",button:{border:"#A7A8A9",background:"#EAEAEA",active:"#444950"}},execution:{header:{color:"inherit"},log:{previous:{color:"#ADB7C8"},current:{color:"#fff"}}}},tabNavHoverMenu:{backgroundColor:"#282C32",questionTitle:{backgroundColor:"#3F434B"},questionSubtext:{color:"#3F434B"},collapseMenu:{backgroundColor:"#313439"}},footer:{backgroundColor:"#22282e"},secondary:{contrastText:"#353C4E",main:"#E0E0E0"},languageSelector:{categoryFilter:{bg:"#24282E",active:"#3F434B"}}}:{text:{primary:"#353C4E"},secondary:{main:"#353C4E",contrastText:"#fff"},scrollbar:{color:"rgba(0, 0, 0, 0.2)",hover:"rgba(0, 0, 0, 0.4)",active:"rgba(0, 0, 0, 0.6)"},accordion:{active:"#000000",inactive:"#4F5053",details:{background:"#F7F7F8"}},resizer:{background:"#CACBCB",active:"#4D87D4"},chatHistory:{queryBackground:"#ECECEC",responseBackground:"#F3F3F3"},editor:{footer:"#E6E6E7",sidebar:{active:"#DADADA",background:"#EDEDED",hover:"#E6E6E6"},titleBar:{userIndicatorBackground:"#EDEDED",userIndicatorForeground:"#21252a"},iconStroke:"#34495E"},filePane:{activeBackground:"#DADADA",activeText:"#21252A",background:"#EDEDED",folderHighlightDepth:"#626262",folderSubHighlightDepth:"#828282",folderHighlightDepthOpaque:"#62626251",folderSubHighlightDepthOpaque:"#82828251",highlightBackground:"#E5E5E5",inputBackground:"#DADADA",inputText:"#828282"},environmentSelector:{searchField:{background:"#E5E5E5",outline:"#436BE5",hover:"#cccccc"}},padSwitch:{thumb:{color:"#34D578"},track:{color:"#65C466"}},programOutput:{tabs:{text:"#8F8F91",background:"#FAFAFA",border:"#8F8F91",selectedText:"#34495E",selectedBorder:"#34495E",unseen:"#428BCA"},console:{background:"#fafafa",border:"#eaeaeb",buttonBackground:"#fafafa",buttonColor:"34495e",buttonBorder:"#34495e"},iFrame:{background:"#EDEDED"}},playback:{background:"#E6E6E7",border:"#BDBDBD",timeline:{background:{primary:"#D8D8D8",user:"#D8D8D8"},ticks:{edit:"#8080805e",idle:"transparent",run:"#F2F2F2",paste:"#F6D669",aiChat:"#8080806e"}},adSpace:{title:"#4F5053",body:"#4F5053",background:"#FAFAFA",border:"#BDBDBD",button:{border:"#A7A8A9",background:"#EAEAEA",active:"#444950"}},adSpaceHighContrast:{title:"#FFFFFF",body:"#FFFFFF",background:"#3B3E45",border:"#2B2E45",button:{border:"#696A6D",background:"#444950",active:"#282C32"}},execution:{header:{color:"#232324"},log:{previous:{color:"#515760"},current:{color:"#232324"}}}},tabNavHoverMenu:{backgroundColor:"#CACBCB",questionTitle:{backgroundColor:"#F3F3F3"},questionSubtext:{color:"#3F434B"},collapseMenu:{backgroundColor:"#EAEAEA"}},footer:{backgroundColor:"#eaeaeb"},languageSelector:{categoryFilter:{bg:"#E5E5E5",active:"#CACBCB"}}},background:{...t?{50:"#1B1E22",100:"#1E2126",200:"#26272A",400:"#282C32",500:"#2F353C",900:"#464E58",default:"#1E2126",paper:"#1E2126"}:{default:"#f9f9f9",paper:"#FFF"}},backgroundContrast:{...t?{50:"#FFF"}:{50:"#1B1E22"}}},components:{MuiTooltip:{styleOverrides:{tooltip:{maxWidth:"320px",padding:"10px 12px",borderRadius:"4px",backgroundColor:"#3F434B",color:"#fff",fontSize:"0.875rem",fontWeight:400},arrow:{color:"#3F434B"}}},MuiList:{styleOverrides:{root:{fontSize:"0.875rem"}}},MuiListItem:{styleOverrides:{root:{"&.Mui-selected":{backgroundColor:t?"#292B30":"#DADADA","&:hover":{backgroundColor:t?"#292B30":"#DADADA"}}}}},MuiMenuItem:{styleOverrides:{root:{fontSize:"0.875rem"}}},MuiTab:{styleOverrides:{root:{...t?{color:"#E0E0E0"}:{color:"#34495E"},"&.Mui-selected":{color:t?"#E0E0E0":"#34495E"}}}},MuiTabs:{defaultProps:{textColor:"inherit"},styleOverrides:{indicator:{...t?{backgroundColor:"#fff"}:{backgroundColor:n.main}}}},MuiInputBase:{styleOverrides:{root:{...t?{backgroundColor:"#292B30",color:"#E0E0E0"}:{backgroundColor:"#fff"}}}},MuiIconButton:{styleOverrides:{root:{...!t&&{color:"#000000"}}}},MuiTableSortLabel:{styleOverrides:{iconDirectionAsc:{transform:"scaleY(1)"},iconDirectionDesc:{transform:"scaleY(-1)"}}},MuiTableCell:{styleOverrides:{root:{fontSize:"0.875rem"}}},MuiCheckbox:{styleOverrides:{root:{"&.Mui-checked:not(.colored)":{color:t?void 0:"inherit"}}}},MuiButton:{styleOverrides:{containedPrimary:{background:n.main,"&.Mui-disabled":{opacity:.45,color:"#fff",backgroundColor:n.main}}}},MuiToggleButton:{styleOverrides:{root:{...t?{"&.MuiToggleButton-primary.Mui-selected":{backgroundColor:n[300],color:"#fff"}}:{}}}},MuiDialog:{styleOverrides:{root:{"& h2":{color:"inherit"}}}}}})})(e)),[e]),m=({children:e})=>{const t=(0,s.v9)((e=>e.editorSettings.darkColorScheme)),[n,a]=(0,l.useState)(t?c.Dark:c.Light),r=u(n),o=(0,l.useCallback)((()=>{a(n===c.Dark?c.Light:c.Dark)}),[n]);return(0,l.useEffect)((()=>{a(t?c.Dark:c.Light)}),[t]),l.createElement(i.Z,{theme:r},l.createElement(d.Provider,{value:{mode:n,toggleMode:o}},e))};function p(e){return function(t){const n=u();return l.createElement(r.Z,{injectFirst:!0},l.createElement(i.Z,{theme:n},l.createElement(e,t)))}}},91143:function(e,t,n){"use strict";n.d(t,{z$:function(){return a.z}});n(3585),n(75252);var a=n(67039)},25088:function(e,t,n){"use strict";function a(e){var t,n,a,i,r,o;return null!==(t=null===(n=window.CP_GQL_HYDRATE)||void 0===n||null===(a=n.data)||void 0===a||null===(i=a.user)||void 0===i||null===(r=i.flags)||void 0===r||null===(o=r[e])||void 0===o?void 0:o.value)&&void 0!==t&&t}function i(){var e;return null!==(e=window.CoderPad.FLAGS.lspSession)&&void 0!==e&&e}function r(){return a("shared-nav")}function o(){return a("product-switcher")}function l(){return a("ONE_PRODUCT_EXPERIENCE")}function s(){return!!a("insights-enabled")}function c(){var e;return null!==(e=window.CoderPad.FLAGS.environmentsEscapeHatch)&&void 0!==e&&e}function d(){return a("SKILL_MAPPING")}function u(){return a("new-sidebar-logo-branding")}n.d(t,{Bw:function(){return o},JE:function(){return i},P$:function(){return c},aU:function(){return l},fU:function(){return u},f_:function(){return d},ki:function(){return r},m1:function(){return s}})},19592:function(e,t,n){"use strict";n.d(t,{HM:function(){return l},Rv:function(){return o}});var a,i,r;n(67294),n(43799);a=null===(i=window.CoderPad)||void 0===i?void 0:i.ENVIRONMENT;const o=null===(r=window.CoderPad)||void 0===r?void 0:r.CODINGAME_BASE_URL,l=async e=>{if(!e||"development"===window.CoderPad.ENVIRONMENT)return!1;const t=await fetch("/is_codingame_user",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({email:e})});return await t.json()}},86869:function(e,t,n){"use strict";n.d(t,{A:function(){return i}});var a=n(67337);function i(){a.v.init({applicationId:"a0cedc14-6165-456a-8e54-8db41faec449",beforeSend(e){e.context={...e.context,product:"live"}},clientToken:window.CoderPad.DATADOG_RUM_CLIENT_TOKEN||"",defaultPrivacyLevel:"mask-user-input",env:window.CoderPad.DATADOG_RUM_ENV,sampleRate:100,service:"app.coderpad.io",sessionReplaySampleRate:1,site:"datadoghq.com",trackInteractions:!0,trackLongTasks:!0,trackResources:!0}),a.v.startSessionReplayRecording()}},28405:function(e,t,n){"use strict";n.d(t,{A:function(){return a.A}});var a=n(86869)},22132:function(e,t,n){"use strict";n.d(t,{O7:function(){return s},tq:function(){return r},yG:function(){return l},yv:function(){return o}});var a=n(67294),i=n(85983);function r(){const{userAgent:e}=window.navigator;return/AppleWebKit/.test(e)&&/Mobile\/\w+/.test(e)||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(e)}function o(){return"production"===window.CoderPad.ENVIRONMENT}function l(){return"development"===window.CoderPad.ENVIRONMENT}function s(){const e=(0,i.zY)();return{isDevelopment:(0,a.useMemo)((()=>"development"===e.CoderPad.ENVIRONMENT),[e]),isMac:(0,a.useMemo)((()=>e.navigator.userAgent.includes("Mac")),[e]),isMobile:(0,a.useMemo)((()=>{const{userAgent:t}=e.navigator;return/AppleWebKit/.test(t)&&/Mobile\/\w+/.test(t)||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(t)}),[e]),isProduction:(0,a.useMemo)((()=>"production"===e.CoderPad.ENVIRONMENT),[e]),isStaging:(0,a.useMemo)((()=>"staging"===e.CoderPad.ENVIRONMENT),[e])}}},32854:function(e,t,n){"use strict";n.d(t,{AY:function(){return i.A},SQ:function(){return r.S},Xs:function(){return l.X},_:function(){return o._},oH:function(){return s.k},rT:function(){return r.r},z$:function(){return a.z$},zY:function(){return c.zY}});var a=n(91143),i=n(28405),r=n(55304),o=n(5335),l=(n(47581),n(92654)),s=(n(90087),n(64728)),c=n(85983)},55304:function(e,t,n){"use strict";n.d(t,{S:function(){return a},r:function(){return i}});let a=function(e){return e.BASH="bash",e.C="c",e.CLOJURE="clojure",e.COFFEESCRIPT="coffeescript",e.CPP="cpp",e.CSHARP="csharp",e.DART="dart",e.ELIXIR="elixir",e.ERLANG="erlang",e.FSHARP="fsharp",e.GO="go",e.GSHEETS="gsheets",e.HASKELL="haskell",e.HTML="html",e.JAVA="java",e.JAVASCRIPT="javascript",e.JULIA="julia",e.KOTLIN="kotlin",e.LUA="lua",e.MARKDOWN="markdown",e.MYSQL="mysql",e.OBJC="objc",e.OCAML="ocaml",e.PERL="perl",e.PHP="php",e.PLAINTEXT="plaintext",e.POSTGRESQL="postgresql",e.PYTHON="python",e.PYTHON3="python3",e.R="r",e.RUBY="ruby",e.RUST="rust",e.SCALA="scala",e.SOLIDITY="solidity",e.SWIFT="swift",e.TCL="tcl",e.TYPESCRIPT="typescript",e.VB="vb",e.VERILOG="verilog",e}({});function i(e){var t;return null!=(null===(t=window.CoderPad.LANGUAGES[e])||void 0===t?void 0:t.language_client_id)||e===a.HTML}},59347:function(e,t,n){"use strict";function a(e){return decodeURIComponent(escape(window.atob(e.replace(/-/g,"+").replace(/_/g,"/"))))}function i(e){return window.btoa(unescape(encodeURIComponent(e))).replace(/\//g,"_").replace(/\+/g,"-")}n.d(t,{Q:function(){return a},a:function(){return i}})},61101:function(e,t,n){"use strict";function a(e){return null!=e}n.d(t,{K:function(){return a}})},5335:function(e,t,n){"use strict";n.d(t,{_:function(){return i}});var a=n(67294);function i(e,t){const n=(0,a.useCallback)((()=>{try{const n=window.localStorage.getItem(e);return n?JSON.parse(n):t}catch(n){return console.warn(`Error reading localStorage key \u201c${e}\u201d:`,n),t}}),[t]),[i,r]=(0,a.useState)(n),o=(0,a.useCallback)((t=>{const n=t instanceof Function?t(i):t;try{window.localStorage.setItem(e,JSON.stringify(n)),window.dispatchEvent(new Event("used-local-storage"))}catch(a){console.warn(`Error setting localStorage key \u201c${e}\u201d:`,a)}finally{r(n)}}),[]);return(0,a.useEffect)((()=>{const e=()=>{r(n())};return e(),window.addEventListener("storage",e),window.addEventListener("used-local-storage",e),()=>{window.removeEventListener("storage",e),window.removeEventListener("used-local-storage",e)}}),[]),[i,o]}},47581:function(e,t,n){"use strict";n(67294)},92654:function(e,t,n){"use strict";n.d(t,{X:function(){return i}});var a=n(67294);function i(e,t){const n=(0,a.useCallback)((()=>{if("undefined"===typeof window)return t;try{const n=window.sessionStorage.getItem(e);return n?function(e){try{return"undefined"===e?void 0:JSON.parse(null!==e&&void 0!==e?e:"")}catch{return void console.log("parsing error on",{value:e})}}(n):t}catch(n){return console.warn(`Error reading sessionStorage key \u201c${e}\u201d:`,n),t}}),[t,e]),[i,r]=(0,a.useState)(n),o=(0,a.useCallback)((t=>{"undefined"==typeof window&&console.warn(`Tried setting sessionStorage key \u201c${e}\u201d even though environment is not a client`);try{const n=t instanceof Function?t(i):t;window.sessionStorage.setItem(e,JSON.stringify(n)),r(n),window.dispatchEvent(new Event("session-storage"))}catch(n){console.warn(`Error setting sessionStorage key \u201c${e}\u201d:`,n)}}),[e,i]);(0,a.useEffect)((()=>{r(n())}),[]);const l=(0,a.useCallback)((t=>{null!==t&&void 0!==t&&t.key&&t.key!==e||r(n())}),[e,n]);return window.addEventListener("storage",l),window.addEventListener("session-storage",l),[i,o]}},64728:function(e,t,n){"use strict";n.d(t,{k:function(){return i}});n(67294);var a=n(22132);function i(e){if(""===e)return!0;return((0,a.yv)()?/^[A-Z0-9._%-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i).test(e.toLowerCase())}},97407:function(e,t,n){"use strict";n.d(t,{z:function(){return r}});var a=n(67294),i=n(45539);function r(){const e=(0,a.useContext)(i.H);return void 0!==e?e:window}},56772:function(e,t,n){var a=n(19755);a((function(){const e=a("#cc-form");if(!(e.length>0))return;const t=stripe.elements({fonts:[{family:"Roboto",src:"url(https://d1a7p14oqam61r.cloudfront.net/assets/roboto-v15-latin-regular-e3dd9a15e7caea392fce4ed32c89db8c807e41234892c5e8b100d7c49c4e0a6a.woff2)",weight:400}]}).create("card",{hidePostalCode:!0,style:{base:{fontFamily:"Roboto, 'HelveticaNeue-Light', 'Helvetica Neue Light', 'Helvetica Neue', Arial, Helvetica, sans-serif",fontSize:"15px",lineHeight:"23px"}}});t.mount("#card-element");const n=a("#cc-name"),i=a("#cc-errors"),r=a(".cc-form__loader"),o=a("#cc-stripe-token"),l=a("#cc-submit, #cc-close"),s=function(t){t.error?(i.text(t.error.message),l.attr("disabled",!1),r.removeClass("cc-form__loader--active")):(i.text(""),t.token&&(o.val(t.token.id),e.submit()))};t.addEventListener("change",s),e.submit((function(e){l.attr("disabled",!0),r.addClass("cc-form__loader--active"),o.val()||(e.preventDefault(),stripe.createToken(t,{name:n.val()}).then(s))}))}))},52418:function(e,t,n){if(n(19755)(".QuestionFormWithTestCases.question").length>0){const d=2,u=41,m={integer:"e.g. 1",string:"e.g. foo","integer array":"e.g. 1,2,3","string array":"e.g. foo,bar"},p=document.querySelector(".QuestionForm-addParameter");function a(){p.classList.add("hidden")}p.onclick=function(){const e=document.querySelector(".QuestionForm-parameter.hidden");if(!e)return void a();e.classList.remove("hidden");const t=e.dataset.index;document.querySelector('.QuestionForm-parameterDeleteCheckbox[data-index="'+t+'"]').checked=!1;const n=document.querySelectorAll('.QuestionForm-testCaseArgument[data-index="'+t+'"]');for(let a=0;a<n.length;a++)n[a].classList.remove("hidden");parseInt(t)===d&&a()};const g=document.querySelector(".QuestionForm-addTestCase");g.onclick=function(){const e=document.querySelector(".QuestionForm-testCase.hidden");if(!e)return;const t=e.dataset.index;document.querySelector('.QuestionForm-testCaseDeleteCheckbox[data-index="'+t+'"]').checked="",e.classList.remove("hidden"),parseInt(t)===u&&g.classList.add("hidden")};const h=document.querySelectorAll(".QuestionForm-parameterDeleteCheckbox");function i(){const e=this.dataset.index,t=this.classList.contains("QuestionForm-parameterDeleteCheckbox--persisted"),n=document.querySelector('.QuestionForm-parameter[data-index="'+e+'"]'),a=document.querySelector('.QuestionForm-parameterDeleteLink[data-index="'+e+'"]'),i=document.querySelector('.QuestionForm-parameterDeletionStaged[data-index="'+e+'"]'),r=document.querySelectorAll('.QuestionForm-testCaseArgument[data-index="'+e+'"]');if(this.checked){t?(a.innerText="Undo",i.classList.remove("hidden"),n.classList.add("QuestionForm-parameter--deletionStaged")):(n.classList.add("hidden"),p.classList.remove("hidden"));for(let e=0;e<r.length;e++)r[e].classList.add("hidden")}else{t&&(a.innerText="Delete",i.classList.add("hidden"),n.classList.remove("QuestionForm-parameter--deletionStaged"));for(let e=0;e<r.length;e++)r[e].classList.remove("hidden")}}for(let E=0;E<h.length;E++)h[E].addEventListener("change",i);const f=document.querySelectorAll(".QuestionForm-testCaseDeleteCheckbox--persisted");function r(){const e=this.dataset.index,t=document.querySelector('.QuestionForm-testCase[data-index="'+e+'"]'),n=document.querySelector('.QuestionForm-testCaseDeleteLink[data-index="'+e+'"]'),a=document.querySelector('.QuestionForm-testCaseDeletionStaged[data-index="'+e+'"]');this.checked?(n.innerText="Undo",a.classList.remove("hidden"),t.classList.add("QuestionForm-testCase--deletionStaged")):(n.innerText="Delete",a.classList.add("hidden"),t.classList.remove("QuestionForm-testCase--deletionStaged"))}for(let w=0;w<f.length;w++)f[w].addEventListener("change",r);const v=document.querySelectorAll(".QuestionForm-testCaseDeleteCheckbox--nonPersisted");function o(){const e=this.dataset.index,t=document.querySelector('.QuestionForm-testCase[data-index="'+e+'"]');this.checked&&(t.classList.add("hidden"),g.classList.remove("hidden"))}for(let k=0;k<v.length;k++)v[k].addEventListener("change",o);const b=document.querySelector(".QuestionForm-returnValueDataType");b.addEventListener("change",(function(){const e=document.querySelectorAll(".QuestionForm-returnValueInput");for(let t=0;t<e.length;t++)s(e[t],this.value),c(e[t],this.value)})),b.dispatchEvent(new Event("change"));const y=document.querySelectorAll(".QuestionForm-parameterDataType");function l(){const e=document.querySelectorAll(".QuestionForm-testCaseArgument");for(let t=0;t<e.length;t++)e[t].dataset.index===this.dataset.index&&s(e[t],this.value)}for(let S=0;S<y.length;S++)y[S].addEventListener("change",l),y[S].dispatchEvent(new Event("change"));function s(e,t){e.placeholder=m[t]}function c(e,t){e.classList.toggle("noresize","string"!==t),e.rows=e.value.split("\n").length}}}},function(e){e.O(0,[5408,8981,5735,714,7161,2274,4701,1426,2206,2635,1033,4685,361,5730,3262,9821,346,9668],(function(){return t=16333,e(e.s=t);var t}));e.O()}]);
//# sourceMappingURL=main-3a78fdf22c2c596e153f.js.map